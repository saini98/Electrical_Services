if (self.CavalryLogger) { CavalryLogger.start_js(["Rxw4R"]); }

__d("ProductTaggingComposerAISuggestionQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"photo_ids",type:"[ID!]!"},{defaultValue:null,kind:"LocalArgument",name:"max_suggestions_per_photo",type:"Int"}],b=[{kind:"Variable",name:"max_suggestions_per_photo",variableName:"max_suggestions_per_photo"},{kind:"Variable",name:"photo_ids",variableName:"photo_ids"}],c={alias:null,args:null,kind:"ScalarField",name:"photo_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"top_left",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"bottom_right",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"center_x",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"center_y",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},k={alias:null,args:[{kind:"Literal",name:"height",value:64},{kind:"Literal",name:"sizing",value:"cover-fill-cropped"},{kind:"Literal",name:"width",value:64}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:'image(height:64,sizing:"cover-fill-cropped",width:64)'},l={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"current_product_price",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"formatted_amount",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ProductTaggingComposerAISuggestionQuery",selections:[{alias:null,args:b,concreteType:"ProductTagAISuggestionInfo",kind:"LinkedField",name:"product_tag_suggestions",plural:!0,selections:[c,{alias:null,args:null,concreteType:"ProductTagProductBox",kind:"LinkedField",name:"suggestions",plural:!0,selections:[d,e,f,g,h,{alias:null,args:null,concreteType:"ProductTagSuggestedProduct",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:[i,j,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[k],storageKey:null},l],storageKey:null},h],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ProductTaggingComposerAISuggestionQuery",selections:[{alias:null,args:b,concreteType:"ProductTagAISuggestionInfo",kind:"LinkedField",name:"product_tag_suggestions",plural:!0,selections:[c,{alias:null,args:null,concreteType:"ProductTagProductBox",kind:"LinkedField",name:"suggestions",plural:!0,selections:[d,e,f,g,h,{alias:null,args:null,concreteType:"ProductTagSuggestedProduct",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:[i,j,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},k,i],storageKey:null},l],storageKey:null},h],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"2823331971120612",metadata:{},name:"ProductTaggingComposerAISuggestionQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("ProductTaggingComposerCategorySelectorQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"category_name",storageKey:null};a=[{alias:null,args:null,concreteType:"ProductCategory",kind:"LinkedField",name:"product_tag_shop_categories",plural:!0,selections:[a,{alias:null,args:null,concreteType:"ProductCategory",kind:"LinkedField",name:"sub_categories",plural:!0,selections:[a],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductTaggingComposerCategorySelectorQuery",selections:a,type:"Query"},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"ProductTaggingComposerCategorySelectorQuery",selections:a},params:{id:"3272694466093540",metadata:{},name:"ProductTaggingComposerCategorySelectorQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("ProductTaggingComposerProductInfoQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id",type:"ID!"}],b=[{kind:"Variable",name:"id",variableName:"id"}],c={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:64},{kind:"Literal",name:"sizing",value:"cover-fill-cropped"},{kind:"Literal",name:"width",value:64}],concreteType:"Image",kind:"LinkedField",name:"main_image_with_safe_fallback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:'main_image_with_safe_fallback(height:64,sizing:"cover-fill-cropped",width:64)'},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"formatted_price",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shops_capability_review_status",storageKey:null}],type:"ProductItem"};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ProductTaggingComposerProductInfoQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[c],storageKey:null}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ProductTaggingComposerProductInfoQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c],storageKey:null}]},params:{id:"2991856110928549",metadata:{},name:"ProductTaggingComposerProductInfoQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("ProductTaggingProductSearchSourceQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"query",type:"String!"},{defaultValue:null,kind:"LocalArgument",name:"category",type:"String!"},{defaultValue:null,kind:"LocalArgument",name:"count",type:"Int!"},{defaultValue:null,kind:"LocalArgument",name:"refetch_counter",type:"Int!"}],b=[{kind:"Variable",name:"category",variableName:"category"},{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"query",variableName:"query"},{kind:"Variable",name:"refetch_counter",variableName:"refetch_counter"},{kind:"Literal",name:"result_types",value:["SHOP_PRODUCT_ITEM","IMPORT_PRODUCT_ITEM","CREATE_PRODUCT_ITEM","HINT_TEXT"]}],c={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},f={alias:null,args:[{kind:"Literal",name:"height",value:64},{kind:"Literal",name:"sizing",value:"cover-fill-cropped"},{kind:"Literal",name:"width",value:64}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:'image(height:64,sizing:"cover-fill-cropped",width:64)'},g={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"current_product_price",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"formatted_amount",storageKey:null}],storageKey:null},h={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[d,e],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ProductTaggingProductSearchSourceQuery",selections:[{alias:null,args:b,concreteType:"ProductTagTypeaheadResultEntry",kind:"LinkedField",name:"product_tag_typeahead",plural:!0,selections:[c,{alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:[d,e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[f],storageKey:null},g,h,{alias:null,args:null,concreteType:"ProductCatalog",kind:"LinkedField",name:"product_catalog",plural:!1,selections:[e],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ProductTaggingProductSearchSourceQuery",selections:[{alias:null,args:b,concreteType:"ProductTagTypeaheadResultEntry",kind:"LinkedField",name:"product_tag_typeahead",plural:!0,selections:[c,{alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:[d,e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},f,d],storageKey:null},g,h,{alias:null,args:null,concreteType:"ProductCatalog",kind:"LinkedField",name:"product_catalog",plural:!1,selections:[e,d],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"3921572731193888",metadata:{},name:"ProductTaggingProductSearchSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("AbsolutePercentagePositionedContainer.react",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var b=a.children;a=a.position;var c=a.x;a=a.y;c=c*100+"%";a=a*100+"%";return g.jsx("div",{style:{left:c,top:a,position:"absolute"},children:b})}e.exports=a}),null);
__d("PhotoProductTaggingComposerDispatcherContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext(function(){});e.exports=c}),null);
__d("PhotoProductTaggingComposerInternalStateReducer",["Vector","addToMap","addToSet","nullthrows","removeFromMap","removeFromSet"],(function(a,b,c,d,e,f){"use strict";function a(a,c){switch(c.type){case"RESET":return g;case"ADD_TAG":var d=c.tag,e=a.addedTags,f=a.removedTags,h=a.definedUnknownTagID,i=a.addedSuggestions,j=a.addedUnknownSuggestions;return babelHelpers["extends"]({},a,{showTagger:!1,addedTags:b("addToMap")(e,d.product.id,d),removedTags:b("removeFromSet")(f,d.product.id),addedSuggestions:(i==null?void 0:i.has(d.product.id))?b("removeFromMap")(b("nullthrows")(i),d.product.id):i,addedUnknownSuggestions:h!=null?b("removeFromMap")(b("nullthrows")(j),h):j});case"REMOVE_TAG":e=c.productID;f=c.isSuggestion;d=a.addedTags;i=a.removedTags;h=a.addedSuggestions;return babelHelpers["extends"]({},a,{showTagger:!1,addedSuggestions:f?b("removeFromMap")(b("nullthrows")(h),e):h,addedTags:f?d:b("removeFromMap")(d,e),removedTags:b("addToSet")(i,e)});case"SHOW_TAGGER":if(a.showTagger)return a;j=c.taggingPosition;return babelHelpers["extends"]({},a,{showTagger:!0,taggingPosition:j,definedUnknownTagID:null});case"HIDE_TAGGER":h=a.showTagger;f=a.doneSelectingCategory;return!h?a:babelHelpers["extends"]({},a,{showTagger:f,definedUnknownTagID:null,doneSelectingCategory:!1});case"DEFINE_UNKNOWN_TAG":d=c.tag;return babelHelpers["extends"]({},a,{showTagger:!0,taggingPosition:d.position,definedUnknownTagID:d.id});case"HOVER_TAG_ENTER":i=c.productID;return babelHelpers["extends"]({},a,{hoveredProductID:i});case"HOVER_TAG_LEAVE":e=c.productID;return a.hoveredProductID!==e?a:babelHelpers["extends"]({},a,{hoveredProductID:null});case"HOVER_UNKNOWN_TAG_ENTER":j=c.tagID;return babelHelpers["extends"]({},a,{hoveredUnknownTagID:j});case"HOVER_UNKNOWN_TAG_LEAVE":h=c.tagID;return a.hoveredUnknownTagID!==h?a:babelHelpers["extends"]({},a,{hoveredUnknownTagID:null});case"CHANGE_PHOTO":var k;f=c.fromPhotoID;d=c.toPhotoID;i=a.addedTags;e=a.removedTags;j=a.addedSuggestions;h=a.addedUnknownSuggestions;var l=a.productBoxes,m=a.savedChanges;return babelHelpers["extends"]({},a,{addedTags:(k=(k=m.get(d))==null?void 0:k.addedTags)!=null?k:new Map(),removedTags:(k=(k=m.get(d))==null?void 0:k.removedTags)!=null?k:new Set(),addedSuggestions:(k=m.get(d))==null?void 0:k.addedSuggestions,addedUnknownSuggestions:(k=m.get(d))==null?void 0:k.addedUnknownSuggestions,productBoxes:(k=m.get(d))==null?void 0:k.productBoxes,selectedPhotoID:d,savedChanges:b("addToMap")(m,f,{addedTags:i,removedTags:e,addedSuggestions:j,addedUnknownSuggestions:h,productBoxes:l})});case"SET_SUGGESTIONS":k=c.knownSuggestions;d=c.unknownSuggestions;m=c.productBoxes;return babelHelpers["extends"]({},a,{addedSuggestions:k,addedUnknownSuggestions:d,productBoxes:m});case"SELECT_CATEGORY":f=c.category;return babelHelpers["extends"]({},a,{selectedCategory:f==="All Categories"?"":f,doneSelectingCategory:!0});default:return a}}var g={addedTags:new Map(),removedTags:new Set(),addedSuggestions:null,addedUnknownSuggestions:null,selectedPhotoID:null,savedChanges:new Map(),hoveredProductID:null,hoveredUnknownTagID:null,definedUnknownTagID:null,showTagger:!1,taggingPosition:new(b("Vector"))(0,0),selectedCategory:"",doneSelectingCategory:!1,productBoxes:null};e.exports={PhotoProductTaggingComposerStateReducer:a,initialInternalState:g}}),null);
__d("PhotoProductTaggingComposerStateContext",["PhotoProductTaggingComposerInternalStateReducer","React"],(function(a,b,c,d,e,f){"use strict";a=b("PhotoProductTaggingComposerInternalStateReducer").initialInternalState;c=b("React");d=c.createContext(babelHelpers["extends"]({},a,{pageID:null,allTags:new Map(),allPhotos:new Map(),selectedPhoto:null}));e.exports=d}),null);
__d("ProductTaggingComposerAISuggestionInfo.react",["ix","fbt","Image.react","PhotoProductTaggingComposerStateContext","React","asset","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React");c=b("React");var k=c.useContext,l=c.useState;function a(a){var c=a.type;a=a.productCount;var d=k(b("PhotoProductTaggingComposerStateContext"));d=d.hoveredUnknownTagID;var e=l(!0),f=e[0],m=e[1];if(a===0)return null;switch(c){case"known_title":return j.jsx("div",{className:"mtmbgyyn pd6w7z8f cfj6pl48 m7kexzwq",children:h._({"*":"Suggested product tags","_1":"Suggested product tag"},[h._plural(a)])});case"unknown_title":return j.jsx("div",{className:"mtmbgyyn pd6w7z8f cfj6pl48 m7kexzwq",children:h._({"*":"Products not recognised","_1":"Product not recognised"},[h._plural(a)])});case"unknown_description":e=d!=null;return f?j.jsxs("div",{className:(i||(i=b("stylex"))).dedupe({"background-color-1":"e182aiqq","border-top-0.3":"j1t07d4p","border-end-0.3":"kec85wlz","border-bottom-0.3":"b4yptwef","border-start-0.3":"tm5x9i8s","border-top-start-radius-1":"rkntk21n","border-top-end-radius-1":"lgftc611","border-bottom-end-radius-1":"hc6ox9od","border-bottom-start-radius-1":"jr4a5x4l","display-1":"gvbtmbyk","flex-direction-1":"tn6n3pw5","justify-content-1":"mb5xpmt8","margin-bottom-1":"mtmbgyyn","padding-top-1":"h26gh5ha","padding-end-1":"fszzrzf5","padding-bottom-1":"tbcwq6bh","padding-start-1":"siuea6vz"},e?{"background-color-1":"tpasugu9","border-top-0.3":"c9ppvq3u","border-end-0.3":"i91m1z8y","border-bottom-0.3":"c196d2yu","border-start-0.3":"m4ov0uva"}:null),children:[j.jsxs("div",{className:"xjf9bxcy onq1n1fu tn6n3pw5 gvbtmbyk",children:[j.jsx("div",{className:"obs39x56 h7iysrjc ncnhsfou a94avrsa cl0j4r84 gig5dwvq g9pj4p7q ad7cbwh1",name:"Question mark","aria-label":"The question mark on an unrecognized product.",children:j.jsx(b("Image.react"),{className:"g2ged9hc muxtxme0 gxtnbxu1 c3fisx4y qks3e6gn",src:g("594729")})}),j.jsx("div",{className:"muxtxme0 j8ermps6 fik8ccn1",children:h._("Click the question mark on the product to tag it.")})]}),j.jsx(b("Image.react"),{src:g("478236"),onClick:function(){return m(!1)}})]}):null;default:return null}}e.exports=a}),null);
__d("ProductTaggingComposerAISuggestionTooltip.react",["fbt","React","SimpleNUXMessageTypes","TetraText.react","XUIAmbientNUX.react","stylex","useSimpleNUX"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.contextRef;a=b("useSimpleNUX")(b("SimpleNUXMessageTypes").PRODUCT_TAGGING_AI_SUGGESTION);var d=a[0];a=a[1];return d&&h.jsxs(b("XUIAmbientNUX.react"),{contextRef:function(){return c.current},position:"right",shown:c.current!=null,onCloseButtonClick:a,children:[h.jsx(b("TetraText.react"),{type:"bodyLink4",color:"white",children:g._("New! Suggested product tags")}),h.jsx("div",{className:"qljk2icw",children:h.jsx(b("TetraText.react"),{type:"body4",color:"white",children:g._("We'll suggest tags for products that might be in your photo.")})})]},"ambientNUX")}e.exports=a}),null);
__d("ProductTaggingComposerProductInfo.react",["ix","Image.react","React","TetraText.react","asset","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.imageURL,d=a.name,e=a.price,f=a.isCompact;a=a.onRemoveTagClick;return h.jsxs("div",{className:"mb5xpmt8 gvbtmbyk",children:[h.jsxs("div",{className:"gvbtmbyk",children:[h.jsx(b("Image.react"),{width:32,height:32,src:c}),h.jsxs("div",{className:"rcg1c39a exr5idsz tvrdzf9q gvbtmbyk",children:[h.jsx(b("TetraText.react"),{type:"bodyLink4",numberOfLines:f?2:4,children:d}),h.jsx("div",{className:"jnx6kvnf",children:h.jsx(b("TetraText.react"),{type:"body4",numberOfLines:f?1:2,children:(c=e)!=null?c:"\xa0"})})]})]}),h.jsx("div",{className:"nxudd9rl",children:a&&h.jsx(b("Image.react"),{onClick:a,src:g("478236")})})]})}e.exports=a}),null);
__d("ProductTaggingComposerProductInfoQuery",["RelayModern","ProductTaggingComposerProductInfoQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("RelayModern").graphql;a=g!==void 0?g:g=b("ProductTaggingComposerProductInfoQuery.graphql");e.exports=a}),null);
__d("ProductTaggingComposerProductReviewInfo.react",["ix","fbt","React","TetraIcon.react","TetraText.react","fbicon","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(){return i.jsxs("div",{className:"c0xlz2pa jnx6kvnf gvbtmbyk",children:[i.jsx("div",{className:"ex6zbfgu",children:i.jsx(b("TetraIcon.react"),{color:"blueLink",icon:b("fbicon")._(g("479180"),20)})}),i.jsx(b("TetraText.react"),{type:"body4",children:h._("This product is under review. The tag will be published once it's been approved.")})]})}e.exports=a}),null);
__d("ProductTaggingComposerInfoPanelProductCard.react",["ix","Image.react","PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerStateContext","ProductTaggingComposerProductInfo.react","ProductTaggingComposerProductInfoQuery","ProductTaggingComposerProductReviewInfo.react","ProductTaggingCreatorTypedLogger","React","RelayFBEnvironment","RelayModern","TetraText.react","asset","gkx","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React");c=b("React");var j=c.useContext,k=b("RelayModern").QueryRenderer;function a(a){var c=a.isActive,d=a.product,e=a.isSuggestion,f=j(b("PhotoProductTaggingComposerDispatcherContext"));a=j(b("PhotoProductTaggingComposerStateContext"));var l=a.pageID,m=a.selectedPhoto;a=function(){new(b("ProductTaggingCreatorTypedLogger"))().setEvent(e?"Actn_PhotoComposerSuggestionRemoveProduct":"Actn_PhotoComposerXYTagRemoveProduct").setProductID(d.id).setCreatorID(l).setMediaType("photo").setMediaID(m==null?void 0:m.id).log(),f({type:"REMOVE_TAG",productID:d.id,isSuggestion:e})};return i.jsxs("div",{className:(h||(h=b("stylex"))).dedupe({"background-color-1":"e182aiqq","border-top-0.3":"j1t07d4p","border-end-0.3":"kec85wlz","border-bottom-0.3":"b4yptwef","border-start-0.3":"tm5x9i8s","border-top-start-radius-1":"rkntk21n","border-top-end-radius-1":"lgftc611","border-bottom-end-radius-1":"hc6ox9od","border-bottom-start-radius-1":"jr4a5x4l","display-1":"gvbtmbyk","flex-direction-1":"tvrdzf9q","margin-bottom-1":"mtmbgyyn","padding-top-1":"h26gh5ha","padding-end-1":"fszzrzf5","padding-bottom-1":"tbcwq6bh","padding-start-1":"siuea6vz"},c?{"background-color-1":"tpasugu9","border-top-0.3":"c9ppvq3u","border-end-0.3":"i91m1z8y","border-bottom-0.3":"c196d2yu","border-start-0.3":"m4ov0uva"}:null),children:[i.jsxs("div",{className:"mtmbgyyn mb5xpmt8 gvbtmbyk",children:[i.jsxs(b("TetraText.react"),{type:"meta4",children:["ID: ",d.id]}),i.jsx(b("Image.react"),{onClick:a,src:g("478236")})]}),i.jsx(k,{environment:b("RelayFBEnvironment"),query:b("ProductTaggingComposerProductInfoQuery"),variables:{id:d.id},render:function(a){var c=a.error;a=a.props;if(c||a==null)return i.jsx(b("ProductTaggingComposerProductInfo.react"),{imageURL:null,name:d.name,price:null,isCompact:!1});c=a.node;a=c.shops_capability_review_status==="PENDING";a=a&&b("gkx")("1236689");return i.jsxs(i.Fragment,{children:[a?i.jsx(b("ProductTaggingComposerProductReviewInfo.react"),{}):null,i.jsx(b("ProductTaggingComposerProductInfo.react"),{imageURL:(a=c.main_image_with_safe_fallback)==null?void 0:a.uri,name:d.name,price:(a=c.formatted_price)==null?void 0:a.text,isCompact:!1})]})}})]})}e.exports=a}),null);
__d("mapMapToArray",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=[],d=0;for(var e=a,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;var i=h[0];h=h[1];c.push(b(h,i,d,a));d++}return c}e.exports=a}),null);
__d("PhotoProductTaggingComposerInfoPanel.react",["fbt","PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerStateContext","ProductTaggingComposerAISuggestionInfo.react","ProductTaggingComposerAISuggestionTooltip.react","ProductTaggingComposerInfoPanelProductCard.react","React","mapMapToArray","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("React");var i=c.useContext,j=c.useEffect,k=c.useRef,l=c.useState;function a(){var a,c,d=i(b("PhotoProductTaggingComposerDispatcherContext")),e=i(b("PhotoProductTaggingComposerStateContext")),f=l(!1);f[0];var m=f[1];f=k(null);var n=e.allTags,o=e.hoveredProductID,p=e.addedSuggestions;e=e.addedUnknownSuggestions;var q=b("mapMapToArray")(n,function(a,c){return h.jsx("div",{onMouseEnter:function(){d({type:"HOVER_TAG_ENTER",productID:c})},onMouseLeave:function(){d({type:"HOVER_TAG_LEAVE",productID:c})},children:h.jsx(b("ProductTaggingComposerInfoPanelProductCard.react"),{isActive:o===c,product:a.product,isSuggestion:!1})},c)});q=h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"mtmbgyyn pd6w7z8f cfj6pl48 m7kexzwq",children:g._({"*":"Tagged products","_1":"Tagged product"},[g._plural(n.size)])}),q]});var r=p!=null||e!=null;a=r?h.jsx(b("ProductTaggingComposerAISuggestionInfo.react"),{type:"known_title",productCount:(a=p==null?void 0:p.size)!=null?a:0}):null;c=r?h.jsx(b("ProductTaggingComposerAISuggestionInfo.react"),{type:"unknown_title",productCount:(c=e==null?void 0:e.size)!=null?c:0}):null;e=h.jsx(b("ProductTaggingComposerAISuggestionInfo.react"),{type:"unknown_description",productCount:(e=e==null?void 0:e.size)!=null?e:0});p=b("mapMapToArray")((p=p)!=null?p:new Map(),function(a,c){return h.jsx("div",{onMouseEnter:function(){d({type:"HOVER_TAG_ENTER",productID:c})},onMouseLeave:function(){d({type:"HOVER_TAG_LEAVE",productID:c})},children:h.jsx(b("ProductTaggingComposerInfoPanelProductCard.react"),{isActive:o===c,product:a.product,isSuggestion:!0})},c)});j(function(){m(!0)},[]);return h.jsxs("div",{className:"qf2tkb3y c2njlqrx o6cdoykf lrx4fxek ouyms8ld rzdl2fyc m07cfqka s1tk4w86",children:[n.size>0&&q,h.jsxs("div",{ref:f,children:[a,p,c,e]}),r&&h.jsx(b("ProductTaggingComposerAISuggestionTooltip.react"),{contextRef:f})]})}e.exports=a}),null);
__d("ModalPhotoEditorNavButtons.react",["cx","fbt","Link.react","React","prop-types"],(function(a,b,c,d,e,f,g,h){var i=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.currentIndex<this.props.total-1?i.jsx(b("Link.react"),{className:"_36ju _36jv",onClick:this.props.onNext}):i.jsx("div",{className:"_36ju _36jv _36jw"}),c=this.props.currentIndex>0?i.jsx(b("Link.react"),{className:"_36ju _36jx",onClick:this.props.onPrev}):i.jsx("div",{className:"_36ju _36jx _36jw"});return i.jsxs("div",{children:[c,h._("{index of current photo} of {total photos}",[h._param("index of current photo",this.props.currentIndex+1),h._param("total photos",this.props.total)]),a]})};return c}(i.Component);a.propTypes={currentIndex:(c=b("prop-types")).number.isRequired,total:c.number.isRequired,onNext:c.func.isRequired,onPrev:c.func.isRequired};e.exports=a}),null);
__d("PhotoProductTaggingComposerPager.react",["cx","ModalPhotoEditorNavButtons.react","PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerStateContext","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("React");var i=c.useContext;function a(){var a=i(b("PhotoProductTaggingComposerDispatcherContext")),c=i(b("PhotoProductTaggingComposerStateContext")),d=c.allPhotos,e=c.selectedPhoto;if(d.size===1||e==null)return null;var f=Array.from(d.keys()),g=f.findIndex(function(a){return a===e.id});return h.jsx("div",{className:"_451s",style:{marginBottom:-4},children:h.jsx(b("ModalPhotoEditorNavButtons.react"),{currentIndex:g,total:d.size,onNext:function(){a({type:"CHANGE_PHOTO",fromPhotoID:e.id,toPhotoID:f[g+1]})},onPrev:function(){a({type:"CHANGE_PHOTO",fromPhotoID:e.id,toPhotoID:f[g-1]})}})})}e.exports=a}),null);
__d("useProductTaggingComposerDimension",["Vector","useWindowSize"],(function(a,b,c,d,e,f){"use strict";var g=800,h=500,i=80;function a(){var a=b("useWindowSize")(),c=Math.max(a.innerWidth-i,g);a=Math.max(a.innerHeight-i,h);return new(b("Vector"))(c,a)}e.exports=a}),null);
__d("PhotoProductTaggingComposerModal.react",["fbt","FDSButton.react","FDSCancelButton.react","FDSHorizontalLayout.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","PhotoProductTaggingComposerPager.react","React","stylex","useProductTaggingComposerDimension"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.children,d=a.onHide,e=a.showSaveButton;a=a.onSave;var f=b("useProductTaggingComposerDimension")(),i=h.jsx(b("FDSModalHeader.react"),{title:g._("Tag products")});a=h.jsx(b("FDSModalFooter.react"),{leftContent:h.jsx(b("FDSHorizontalLayout.react"),{children:h.jsx(b("PhotoProductTaggingComposerPager.react"),{})}),primaryButton:e?h.jsx(b("FDSButton.react"),{label:g._("Save"),use:"primary",onClick:a}):h.jsx(b("FDSCancelButton.react"),{}),secondaryButton:e?h.jsx(b("FDSCancelButton.react"),{}):null});return h.jsx(b("FDSModal.react"),{isShown:!0,onHide:d,width:f.x,height:f.y,header:i,footer:a,children:h.jsx("div",{className:"r6a36ppx gvbtmbyk",children:c})})}e.exports=a}),null);
__d("useOutsideClickListener",["React"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useCallback,h=c.useEffect;function a(a,b){var c=g(function(c){var d=a.current;c=c.target;d!=null&&c instanceof Node&&!d.contains(c)&&b()},[a,b]);h(function(){document.addEventListener("click",c);return function(){document.removeEventListener("click",c)}},[c])}e.exports=a}),null);
__d("PhotoProductTaggingComposerPhotoPanelImageContainer.react",["PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerStateContext","React","ResponsiveBlock.react","Vector","stylex","useOutsideClickListener"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useContext,i=c.useRef,j=c.useState;function a(a){a=a.children;var c=i(null),d=h(b("PhotoProductTaggingComposerDispatcherContext"));b("useOutsideClickListener")(c,function(){d({type:"HIDE_TAGGER"})});var e=j(new(b("Vector"))(0,0)),f=e[0],k=e[1];e=h(b("PhotoProductTaggingComposerStateContext"));e=(e=e.selectedPhoto)!=null?e:{};var l=e.width;e=e.height;if(l==null||e==null)return null;l=l/e;e=Math.min(f.x,l*f.y);l=e/l;var m=(f.x-e)/2,n=(f.y-l)/2;return g.jsx(b("ResponsiveBlock.react"),{onResize:function(a,c){(a!==f.x||c!==f.y)&&k(new(b("Vector"))(a,c))},className:"pmrw0zho lakmqpxi r6a36ppx o2rava5w",children:g.jsx("div",{className:"fo5pemu3",ref:c,style:{width:e,height:l,left:m,top:n},children:a})})}e.exports=a}),null);
__d("PhotoProductTaggingComposerPhotoPanelInfoBox.react",["ix","Image.react","React","TetraText.react","asset","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.infoMessage;return h.jsxs("div",{className:"rzdl2fyc rcg1c39a l0mhz5hk eoa4ufrn lnt8a3bb gs3fbbqt gvbtmbyk",children:[h.jsx(b("Image.react"),{className:"czodtidk bz1lfy7o",src:g("1379388")}),h.jsx("div",{className:"c3fisx4y rw3msjje ipduzb10 oqvebv4y",children:h.jsx(b("TetraText.react"),{type:"bodyLink3",color:"blueLink",children:a})})]})}e.exports=a}),null);
__d("PhotoProductTaggingComposerPhotoPanelNavigationContainer.react",["ix","fbt","FileInput.react","Image.react","Link.react","PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerStateContext","ProductTaggingCreatorTypedLogger","React","ReactComposerMediaUtils","ReactComposerPhotoActions","ReactComposerPhotoStore","ReactComposerPhotoUploader","asset","gkx","qex","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React");c=b("React");var k=c.useContext,l=c.useRef,m=80;function a(a){var c=a.allPhotos,d=a.composerID,e=a.numProductTagsPerPhoto;a=a.selectedPhoto;var f=k(b("PhotoProductTaggingComposerDispatcherContext")),m=k(b("PhotoProductTaggingComposerStateContext")),q=m.pageID,r=a==null?void 0:a.id,s=Array.from(c.values());a=s.length;return j.jsxs("div",{className:"cwy8ljx8 omw9u6z7 d0yfgsqz l4u7bplw fo5pemu3 n7hk3rrr skvozjj1 n0wy8osm kllfp42q q9reftrv pyw2rsc6",children:[j.jsx("div",{className:"pptawcj0 cwy8ljx8 hfyrw8tk engw0kr1",children:h._({"*":"{number} photos","_1":"1 photo"},[h._plural(a,"number")])}),s.map(function(a){return j.jsxs("div",{className:"ba0t5ztn tc4fmt3r",children:[j.jsx(b("Image.react"),{onClick:function(){a.id!==r&&f({type:"CHANGE_PHOTO",fromPhotoID:r||"",toPhotoID:a.id})},src:a.imageSrc,className:(i||(i=b("stylex"))).dedupe({"margin-top-1":"cwy8ljx8","margin-end-1":"c6fddwa7","margin-bottom-1":"l33k8wjk","margin-start-1":"cvx5b7vz","width-1":"kebe3i5j","height-1":"lfi1c1my"},a.id===r?{"border-top-0.3":"hx16ih5m","border-end-0.3":"jk7nrdr1","border-bottom-0.3":"l6zy9uvx","border-start-0.3":"ky3lctwu","margin-top-1":"lrzibdts","margin-end-1":"dcyy7bvo","margin-bottom-1":"ar4cg03x","margin-start-1":"hby5q66m"}:null)},a.id),j.jsx(b("Link.react"),{className:"g2m2kjxi fi9ns9tv jblw17zn p39h46n2 fo5pemu3",children:j.jsx(b("Image.react"),{className:"ba0t5ztn crp78d19 j7e24wp2 i33ckjy3 toq0d8w1 ad7cbwh1",src:g("481007"),onClick:function(){var c=b("ReactComposerPhotoStore").getPhoto(d,a.id);if(a.id===r){var e=s.find(function(b){return b.id!==a.id});e!=null&&f({type:"CHANGE_PHOTO",fromPhotoID:a.id,toPhotoID:e.id})}b("ReactComposerPhotoActions").removePhoto(d,a.id,c.uploadID);p(q,r)}})}),!!e[a.id]&&!b("gkx")("1331683")&&j.jsx("div",{className:"pa4w3dck kebe3i5j gw23q6xg p39h46n2 fo5pemu3 k6l4pkm8 pttunnki n0lb33wd to3palbn h0ehzwfw mfrjoec5 c72g11zj ky3lctwu l6zy9uvx jk7nrdr1 hx16ih5m e182aiqq",children:e[a.id]})]},a.id)}),j.jsx("span",{ref:l("addMore"),className:"c8o4v20v tc4fmt3r",children:j.jsx(b("FileInput.react"),{accept:"image/*",multiple:!0,name:"composer_photo",onChange:function(a){return n(a,d,m)},onClick:o(q),ref:l("fileInput"),title:h._("Choose a file to upload"),"data-testid":void 0,children:j.jsx(b("Link.react"),{children:j.jsxs("span",{ref:l("addMore"),className:"bxum2dch cvx5b7vz l33k8wjk c6fddwa7 cwy8ljx8 lfi1c1my e0bxkt9j hnwuk6qu f8nxugpb t8ekdjjr cgi8p13c iab18xy6 tc4fmt3r",children:[j.jsx(b("Image.react"),{className:"cvx5b7vz l33k8wjk c6fddwa7 cwy8ljx8",src:g("647597")}),j.jsx("div",{className:"fdvz7eeh esmkr5e6",children:h._("Photos")})]})})})})]})}function n(a,c,d){a=a.target;d={actorID:d==null?void 0:d.pageID,composerID:c,composerType:null,gks:{},targetID:null};d=new(b("ReactComposerPhotoUploader"))(d,m,{disableFaceRecognition:!0});b("ReactComposerMediaUtils").uploadPhotosOrVideoFromTarget(c,a,d,!0,!1);q()}function o(a){return function(){new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoEditorAddPhoto").setCreatorID(a).log()}}function p(a,c){new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoEditorRemovePhoto").setCreatorID(a).setMediaID(c).log()}function q(){b("qex")._("1354391")&&new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PtPhotoUploadSuggestionEnabled").log()}e.exports=a}),null);
__d("ProductTaggingComposerCategorySelector.react",["fbt","FBLogger","FDSDropdownMenu.react","PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerStateContext","React","RelayFBEnvironmentFactory","RelayModern","TetraText.react","graphql","qex","stylex","ProductTaggingComposerCategorySelectorQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React");c=b("React");var j=c.useContext,k=b("RelayModern").QueryRenderer;function a(a){var c=a.pageID,d=a.focusInput,e=a.menuPosition,f=j(b("PhotoProductTaggingComposerDispatcherContext"));a=j(b("PhotoProductTaggingComposerStateContext"));var h=a.selectedCategory;if(!b("qex")._("1389443"))return null;function m(a){return{type:"item",label:a,onClick:function(){d(),f({type:"SELECT_CATEGORY",category:a})}}}return i.jsx(k,{environment:b("RelayFBEnvironmentFactory").getForActorID(c),query:l,variables:{},render:function(a){var c=a.error;a=a.props;if(c||a==null){c&&b("FBLogger")("product_tag_shop_categories").catching(c).debug("Error querying graphQL endpoint for Product Tagging category selector");return null}c=a.product_tag_shop_categories.map(function(a){return a==null?void 0:a.category_name}).filter(function(a){return a}).map(m);if(c.length===0)return null;c.unshift(m("All Categories"));a=i.jsx("div",{className:"l33k8wjk jnx6kvnf mitb7e6d petxpiib"+(e==="above"?" gnj52y4z":""),children:i.jsx(b("TetraText.react"),{type:"headlineEmphasized4",children:g._("Browse by category")})});return i.jsxs("div",{className:"tvrdzf9q gvbtmbyk",children:[a,i.jsx("div",{className:"c6o8zcjs p1tddkv6",children:i.jsx(b("FDSDropdownMenu.react"),{items:c,label:h==""?"All Categories":h,menuPosition:e,width:"100%"})})]})}})}var l=h!==void 0?h:h=b("ProductTaggingComposerCategorySelectorQuery.graphql");e.exports=a}),null);
__d("ProductTaggingComposerTagDot.react",["ix","Image.react","React","asset","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.isActive,d=a.isKnown;a=a.shouldAnimated;var e;d||(e=c?g("595459"):g("513789"));return h.jsx("div",{className:"rcg1c39a gvbtmbyk xjf9bxcy pbvrtflf fo5pemu3",children:h.jsx("div",{className:a&&!c&&"iiw10lte dj0486s0 hn9g8crm i5guxyky uwt5vlod",children:h.jsx("div",{className:"n9izpzw5 a6jpjiod to3palbn h0ehzwfw mfrjoec5 c72g11zj ds0qd15n c3dcl8d9 bwk9jd76 e2vil1o6 axwarpy9 nj4swx01"+(c?" cwfx0pow nqoq8mmr kr78e9un qef4gt6o":""),children:!d&&h.jsx(b("Image.react"),{className:"ptok4fy0 etlb69sq",src:e})})})})}e.exports=a}),null);
__d("ProductTaggingProductSearchSource",["fbt","AbstractRelaySearchSource","ProductTaggingTranslations","RelayFBEnvironmentFactory","RelayModern","SearchableEntry","nullthrows","ProductTaggingProductSearchSourceQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;b("RelayModern").graphql;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f){return a.call(this,b("RelayFBEnvironmentFactory").getForActorID(c),{bootstrapRequests:[{gen:function(){return i("",d,e,f)}}],queryRequests:[{gen:function(a){return i(a,d,e,f)}}],packageFn:j(c),getAllForEmptyQuery:!0},function(b,a){return a(b)})||this}return c}(b("AbstractRelaySearchSource"));function i(a,c,d,e){return{query:h!==void 0?h:h=b("ProductTaggingProductSearchSourceQuery.graphql"),variables:{query:a,category:c,count:d,refetch_counter:e}}}function j(a){return function(b){return k(a,b)}}function k(a,c){c=c==null?void 0:c.product_tag_typeahead;return c==null?[]:c.map(function(c,d){var e=c.type;c=c.product_item;switch(e){case"SHOP_PRODUCT_ITEM":var f;f=(f=c)!=null?f:{};var h=f.id,i=f.name,j=f.current_product_price,k=f.primary_listing_photo;f=f.page;if(h==null||i==null)return null;j=(j=j==null?void 0:j.formatted_amount)!=null?j:"";f!=null&&f.id!==a&&(j+=" | "+b("nullthrows")(f.name));return new(b("SearchableEntry"))({uniqueID:h,title:i,subtitle:j,photo:k==null?void 0:(f=k.image)==null?void 0:f.uri,order:d,type:e});case"IMPORT_PRODUCT_ITEM":i=(h=c)!=null?h:{};j=i.id;k=i.name;f=i.current_product_price;c=i.primary_listing_photo;h=i.product_catalog;return j==null||k==null||h==null?null:new(b("SearchableEntry"))({uniqueID:j,title:k,subtitle:g._("{price} | Import from {productCatalogName}",[g._param("price",(i=f==null?void 0:f.formatted_amount)!=null?i:""),g._param("productCatalogName",b("nullthrows")(h.name))]),photo:c==null?void 0:(j=c.image)==null?void 0:j.uri,order:d,type:e});case"CREATE_PRODUCT_ITEM":return new(b("SearchableEntry"))({uniqueID:b("nullthrows")(e),title:b("ProductTaggingTranslations").getAddProductTitle(!0),subtitle:b("ProductTaggingTranslations").getAddProductSubtitle(!0),photo:"/images/commerce/create-product-typeahead.png",order:d,type:e});case"HINT_TEXT":return new(b("SearchableEntry"))({uniqueID:b("nullthrows")(e),title:"",type:e});default:return null}}).filter(Boolean)}e.exports=a}),null);
__d("ProductTaggingProductTypeaheadViewRenderer.react",["fbt","FDSTypeaheadViewItem.react","React","SearchableEntry","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.entries,d=a.highlightedEntry,e=a.onHighlight,f=a.onRenderHighlight,i=a.onSelect,j=a.queryString,k=a.ratio,l=a.width;a=a.visuallySimilarProducts;a=a&&a.map(function(a,c){a=new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,subtitle:a.price,photo:a.uri,order:c,type:"SHOP_PRODUCT_ITEM"});return h.jsx(b("FDSTypeaheadViewItem.react"),{entry:a,isHighlighted:a===d,onHighlight:e,onRenderHighlight:f,onSelect:i,queryString:j,ratio:k},a.getUniqueID())});a&&a.length>0&&a.unshift(h.jsx("div",{className:"engw0kr1 brqh3wbq fik8ccn1 pptawcj0 k5y4opk8 hkaxe737",children:g._({"*":"Suggested products","_1":"Suggested product"},[g._plural(a.length)])},a.length));var m=!1;c=c.slice().sort(function(a,b){return a.getOrder()-b.getOrder()}).map(function(a){if(a.getType()==="HINT_TEXT"){m=!0;return h.jsx("div",{className:"engw0kr1 brqh3wbq fik8ccn1 pptawcj0 k5y4opk8 hkaxe737",children:g._("Recently added products")},a.getType())}return h.jsx(b("FDSTypeaheadViewItem.react"),{entry:a,isHighlighted:a===d,onHighlight:e,onRenderHighlight:f,onSelect:i,queryString:j,ratio:k},a.getUniqueID())});return h.jsxs("ul",{className:"otld29pr f4kqifai tfcb3ufg c2njlqrx m8b4qx37",role:"listbox",style:{width:l},children:[m&&a,c]})}e.exports=a}),null);
__d("ProductTaggingProductTypeahead.react",["cx","fbt","FDSAbstractTypeahead.react","FDSTypeaheadPresenter.react","ProductTaggingProductSearchSource","ProductTaggingProductTypeaheadViewRenderer.react","React","joinClasses","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("FDSTypeaheadPresenter.react").getDefaultTypeaheadPresenter,j=b("React");c=b("React");var k=c.useMemo,l=c.useState,m=10;function a(a){var c=a.onSelectEntry,d=a.category,e=a.pageID,f=a.resultPosition,g=a.refetchCounter;a=a.visuallySimilarProducts;var n=l(""),o=n[0],p=n[1];n=l(!1);var q=n[0],r=n[1];n=k(function(){return new(b("ProductTaggingProductSearchSource"))(e,d,m,g)},[d,e,g]);q={height:36,backgroundColor:"var(--fds-white)",borderRadius:4,color:"var(--fds-primary-text)",border:q?"1px solid var(--fds-highlight)":"1px solid var(--fds-divider-on-wash)",boxShadow:q?"inset 0 0 0 3px rgba(53, 120, 229, 0.2)":"none",order:f==="top"?0:10};return j.jsx(b("FDSAbstractTypeahead.react"),{className:b("joinClasses")("_8dr_","tvrdzf9q gvbtmbyk"),style:q,onChange:function(a){return p(a.target.value)},onSelectAttempt:function(a){p(""),c(a)},isDisabled:!1,placeholder:h._("Type in the product name or ID"),queryString:o,searchSource:n,maxEntries:m,showEntriesOnFocus:!0,presenter:babelHelpers["extends"]({},i(),{ViewRenderer:b("ProductTaggingProductTypeaheadViewRenderer.react"),extraRendererProps:{visuallySimilarProducts:a}}),onFocus:function(){return r(!0)},searchSourceOptions:{waitForAllResults:!0}})}e.exports=a}),null);
__d("ProductTaggingComposerProductTagger.react",["AbsolutePercentagePositionedContainer.react","DOM","PageProductComposerDialogLoader.react","PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerStateContext","ProductTaggingComposerCategorySelector.react","ProductTaggingComposerTagDot.react","ProductTaggingCreatorTypedLogger","ProductTaggingProductTypeahead.react","React","ReactDOM","focusNode","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");c=b("React");var i=c.useContext,j=c.useEffect,k=c.useRef,l=c.useState;function a(){var a=i(b("PhotoProductTaggingComposerDispatcherContext")),c=i(b("PhotoProductTaggingComposerStateContext")),d=c.pageID,e=c.selectedPhoto,f=c.showTagger,n=c.taggingPosition,o=c.addedSuggestions,p=c.selectedCategory,q=c.productBoxes,r=c.definedUnknownTagID,s=k(null);c=l(0);var t=c[0],u=c[1],v=function(){return b("focusNode")(b("DOM").find(s.current,'input[type="text"]'))};j(function(){f&&s.current!=null&&v()},[f]);if(d==null||!f)return null;var w=function(){b("ReactDOM").render(h.jsx(b("PageProductComposerDialogLoader.react"),{onProductCreated:function(c){c=c.products.data[0];var f=c.id;c=c.name;c={id:f,name:c};a({type:"ADD_TAG",tag:{position:n,product:c}});u(t+1);new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoEditorTaggingAddNewProductSuccess").setCreatorID(d).setMediaID(e==null?void 0:e.id).setProductID(f).log()},pageID:d,source:"ProductTaggingTypeahead"}),b("DOM").create("div")),a({type:"HIDE_TAGGER"}),new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoEditorTaggingAddNewProduct").setCreatorID(d).setMediaID(e==null?void 0:e.id).log()},x=function(c){b("ReactDOM").render(h.jsx(b("PageProductComposerDialogLoader.react"),{importProductID:c,onProductCreated:function(c){c=c.products.data[0];var f=c.id;c=c.name;c={id:f,name:c};a({type:"ADD_TAG",tag:{position:n,product:c}});u(t+1);new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoEditorTaggingImportProductSuccess").setCreatorID(d).setMediaID(e==null?void 0:e.id).setProductID(f).log()},pageID:d,source:"ProductTaggingTypeahead"}),b("DOM").create("div")),a({type:"HIDE_TAGGER"}),new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoEditorTaggingImportProduct").setCreatorID(d).setMediaID(e==null?void 0:e.id).setProductID(c).log()},y=function(c){a({type:"ADD_TAG",tag:{position:n,product:c}});var f=r!=null?"Actn_PhotoEditorSuggestionDefineProduct":o!=null&&o.has(c.id)?"Actn_PhotoComposerSelectSuggestedProduct":"Actn_PhotoEditorTaggingSelectProduct";new(b("ProductTaggingCreatorTypedLogger"))().setEvent(f).setCreatorID(d).setProductID(c.id).setMediaType("photo").setMediaID(e==null?void 0:e.id).log()};c=q&&m(n,q);return h.jsx(b("AbsolutePercentagePositionedContainer.react"),{position:n,children:h.jsxs("div",{className:"moy1r5lj",children:[h.jsx(b("ProductTaggingComposerTagDot.react"),{isActive:!0,isKnown:r==null,shouldAnimated:!1}),h.jsxs("div",{className:(g||(g=b("stylex"))).dedupe({"position-1":"fo5pemu3","left-1":"n0j64ty5","right-1":"mjxerm31","top-1":"ne7in4g3","bottom-1":"eitbbn87","width-1":"spkoxrz9","padding-top-1":"tfcb3ufg","padding-end-1":"pttunnki","padding-bottom-1":"f4kqifai","padding-start-1":"k6l4pkm8","border-top-start-radius-1":"bagn6kyl","border-top-end-radius-1":"u7ypu8aq","border-bottom-end-radius-1":"rlobh4k5","border-bottom-start-radius-1":"eu0qmi0h","background-color-1":"e182aiqq"},n.x>.5?{"left-1":"qhpzf1tj","right-1":"gpe714uu"}:null,n.y>.5?{"top-1":"er2fxlyv","bottom-1":"r6gsruag"}:null),ref:s,children:[h.jsx(b("ProductTaggingComposerCategorySelector.react"),{pageID:d,focusInput:v,menuPosition:"below"}),h.jsx(b("ProductTaggingProductTypeahead.react"),{onSelectEntry:function(a){switch(a.getType()){case"SHOP_PRODUCT_ITEM":y({id:a.getUniqueID(),name:a.getTitle()});return;case"IMPORT_PRODUCT_ITEM":x(a.getUniqueID());return;case"CREATE_PRODUCT_ITEM":w();return;default:return}},category:p,pageID:d,resultPosition:"top",refetchCounter:t,visuallySimilarProducts:c})]}),h.jsx("div",{className:g.dedupe({"width-1":"lcpzf4px","height-1":"ncp332hb","position-1":"fo5pemu3","border-top-0.3":"cyaxfuay","border-bottom-0.3":"atj90qpb","border-left-0.3":"qb41zxnw","border-right-0.3":"izryahxb","left-1":"rw48vr2n","right-1":"mjxerm31","transform-0.1":"ns7zc9aa"},n.x>.5?{"border-left-0.3":"koa3xajs","border-right-0.3":"b59tnsdy","left-1":"qhpzf1tj","right-1":"btl0rd51"}:null)})]})})}function m(a,b){var c=a.x,d=a.y,e=[];b.forEach(function(a){c>=a.topLeft.x&&c<=a.bottomRight.x&&d>=a.topLeft.y&&d<=a.bottomRight.y&&(e=e.concat(a.suggestedProducts))});return e}e.exports=a}),null);
__d("ProductTaggingComposerTagHintProductCard.react",["PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerStateContext","ProductTaggingComposerProductInfo.react","ProductTaggingComposerProductInfoQuery","ProductTaggingCreatorTypedLogger","React","RelayFBEnvironment","RelayModern","stylex"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useContext,i=b("RelayModern").QueryRenderer;function a(a){var c=a.product,d=h(b("PhotoProductTaggingComposerDispatcherContext"));a=h(b("PhotoProductTaggingComposerStateContext"));var e=a.pageID,f=a.selectedPhoto,j=a.addedSuggestions,k=function(){var a=j!=null&&j.has(c.id);new(b("ProductTaggingCreatorTypedLogger"))().setEvent(a?"Actn_PhotoComposerSuggestionRemoveProduct":"Actn_PhotoComposerXYTagRemoveProduct").setProductID(c.id).setCreatorID(e).setMediaType("photo").setMediaID(f==null?void 0:f.id).log();d({type:"REMOVE_TAG",productID:c.id,isSuggestion:a})};return g.jsx("div",{className:"gpp5p805 siuea6vz tbcwq6bh fszzrzf5 h26gh5ha jr4a5x4l hc6ox9od lgftc611 rkntk21n e182aiqq kd00cgxf",children:g.jsx(i,{environment:b("RelayFBEnvironment"),query:b("ProductTaggingComposerProductInfoQuery"),variables:{id:c.id},render:function(a){var d=a.error;a=a.props;if(d!=null||a==null)return g.jsx(b("ProductTaggingComposerProductInfo.react"),{imageURL:null,name:c.name,price:null,isCompact:!0,onRemoveTagClick:k});d=a.node;return g.jsx(b("ProductTaggingComposerProductInfo.react"),{imageURL:(a=d.main_image_with_safe_fallback)==null?void 0:a.uri,name:c.name,price:(a=d.formatted_price)==null?void 0:a.text,isCompact:!0,onRemoveTagClick:k})}})})}e.exports=a}),null);
__d("ProductTaggingComposerTagHint.react",["AbsolutePercentagePositionedContainer.react","PhotoProductTaggingComposerStateContext","ProductTaggingComposerTagDot.react","ProductTaggingComposerTagHintProductCard.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");c=b("React");var i=c.useContext;function a(a){var c=a.tag;a=a.shouldAnimated;var d=i(b("PhotoProductTaggingComposerStateContext")),e=c.position,f=c.product;d=d.hoveredProductID===c.product.id;return h.jsx(b("AbsolutePercentagePositionedContainer.react"),{position:e,children:h.jsxs("div",{className:"moy1r5lj",children:[h.jsx(b("ProductTaggingComposerTagDot.react"),{isActive:d,isKnown:!0,shouldAnimated:a}),d?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:(g||(g=b("stylex"))).dedupe({"position-1":"fo5pemu3","transform-0.1":"ns7zc9aa","left-1":"n0j64ty5","right-1":"mjxerm31","border-top-start-radius-1":"rkntk21n","border-top-end-radius-1":"lgftc611","border-bottom-end-radius-1":"hc6ox9od","border-bottom-start-radius-1":"jr4a5x4l"},e.x>.5?{"left-1":"qhpzf1tj","right-1":"gpe714uu"}:null),children:h.jsx(b("ProductTaggingComposerTagHintProductCard.react"),{product:f})}),h.jsx("div",{className:(g||(g=b("stylex"))).dedupe({"width-1":"lcpzf4px","height-1":"ncp332hb","position-1":"fo5pemu3","border-top-0.3":"cyaxfuay","border-bottom-0.3":"atj90qpb","border-left-0.3":"qb41zxnw","border-right-0.3":"izryahxb","left-1":"rw48vr2n","right-1":"mjxerm31","transform-0.1":"ns7zc9aa"},e.x>.5?{"border-left-0.3":"koa3xajs","border-right-0.3":"b59tnsdy","left-1":"qhpzf1tj","right-1":"btl0rd51"}:null)})]}):null]})})}e.exports=a}),null);
__d("ProductTaggingComposerUnknownTagHint.react",["AbsolutePercentagePositionedContainer.react","ClickableArea.react","PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerStateContext","ProductTaggingComposerTagDot.react","ProductTaggingCreatorTypedLogger","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useContext;function a(a){var c=a.tag,d=h(b("PhotoProductTaggingComposerDispatcherContext"));a=h(b("PhotoProductTaggingComposerStateContext"));var e=a.hoveredUnknownTagID,f=a.definedUnknownTagID,i=a.pageID,j=a.selectedPhoto,k=c.id;a=c.position;e=e===k;return g.jsx(b("ClickableArea.react"),{onClick:function(){new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoEditorSuggestionClickToDefineProduct").setCreatorID(i).setMediaType("photo").setMediaID(j==null?void 0:j.id).log(),d({type:"DEFINE_UNKNOWN_TAG",tag:c})},children:g.jsx("div",{onMouseEnter:function(){d({type:"HOVER_UNKNOWN_TAG_ENTER",tagID:k})},onMouseLeave:function(){d({type:"HOVER_UNKNOWN_TAG_LEAVE",tagID:k})},children:g.jsx(b("AbsolutePercentagePositionedContainer.react"),{position:a,children:g.jsx(b("ProductTaggingComposerTagDot.react"),{isActive:e,isKnown:!1,shouldAnimated:f!==k})})})})}e.exports=a}),null);
__d("PhotoProductTaggingComposerPhotoPanel.react",["fbt","Image.react","PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerPhotoPanelImageContainer.react","PhotoProductTaggingComposerPhotoPanelInfoBox.react","PhotoProductTaggingComposerPhotoPanelNavigationContainer.react","PhotoProductTaggingComposerStateContext","ProductTaggingComposerProductTagger.react","ProductTaggingComposerTagHint.react","ProductTaggingComposerUnknownTagHint.react","ProductTaggingCreatorTypedLogger","React","Vector","gkx","mapMapToArray","qex","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React");c=b("React");var j=c.useContext;function a(a){var c=a.composerID;a=a.numProductTagsPerPhoto;var d=j(b("PhotoProductTaggingComposerDispatcherContext")),e=j(b("PhotoProductTaggingComposerStateContext")),f=e.allPhotos,k=e.allTags,l=e.addedSuggestions,m=e.addedUnknownSuggestions,n=e.pageID,o=e.selectedPhoto,p=e.showTagger;e=(e=o)!=null?e:{};e=e.imageSrc;if(e==null)return null;var q=b("gkx")("1330962"),r=!!b("qex")._("1382578"),s=!!b("qex")._("1382769"),t=b("mapMapToArray")(k,function(a,c){return i.jsx("div",{onMouseEnter:function(){d({type:"HOVER_TAG_ENTER",productID:c})},onMouseLeave:function(){d({type:"HOVER_TAG_LEAVE",productID:c})},children:i.jsx(b("ProductTaggingComposerTagHint.react"),{tag:a,shouldAnimated:!1})},c)});l=b("mapMapToArray")((l=l)!=null?l:new Map(),function(a,c){return i.jsx("div",{onMouseEnter:function(){d({type:"HOVER_TAG_ENTER",productID:c})},onMouseLeave:function(){d({type:"HOVER_TAG_LEAVE",productID:c})},children:i.jsx(b("ProductTaggingComposerTagHint.react"),{tag:a,shouldAnimated:!0})},c)});m=b("mapMapToArray")((m=m)!=null?m:new Map(),function(a,c){return i.jsx(b("ProductTaggingComposerUnknownTagHint.react"),{tag:a},c)});var u=i.jsx(b("PhotoProductTaggingComposerPhotoPanelInfoBox.react"),{infoMessage:g._("Click on a product in the photo to tag it. This allows people to shop directly on your post.")});k.size>=7&&r&&(u=i.jsx(b("PhotoProductTaggingComposerPhotoPanelInfoBox.react"),{infoMessage:g._("Sellers typically see the best results from images with six or fewer product tags.")}),new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Imp_PhotoEditorInfoBoxTooManyTags").setCreatorID(n).setMediaID(o==null?void 0:o.id).log());r=Array.from(k.values()).some(function(a){var b=a.position.x;a=a.position.y;return b<=.1||b>=.9||a<=.1||a>=.9});r&&s&&(u=i.jsx(b("PhotoProductTaggingComposerPhotoPanelInfoBox.react"),{infoMessage:g._("Tags are easier for buyers to see when they're near the centre of the product.")}),new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Imp_PhotoEditorInfoBoxTooCloseToEdge").setCreatorID(n).setMediaID(o==null?void 0:o.id).log());return i.jsxs("div",{className:(h||(h=b("stylex"))).dedupe({"height-1":"t53kigas","padding-top-1":"ef2euz1c","padding-end-1":"hbpcd2e2","padding-bottom-1":"dje8222j","padding-start-1":"r3sof4c5","flex-grow-1":"nvhuchja"},q?{"height-1":"nmnjbnpt"}:null),children:[u,i.jsxs(b("PhotoProductTaggingComposerPhotoPanelImageContainer.react"),{children:[t,l,m,i.jsx(b("ProductTaggingComposerProductTagger.react"),{}),i.jsx(b("Image.react"),{onClick:function(a){if(p){d({type:"HIDE_TAGGER"});return}var c=b("Vector").getEventPosition(a),e=b("Vector").getElementPosition(a.target);a=b("Vector").getElementDimensions(a.target);c=new(b("Vector"))((c.x-e.x)/a.x,(c.y-e.y)/a.y);d({type:"SHOW_TAGGER",taggingPosition:c});new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoEditorTagClickToTagProduct").setCreatorID(n).setMediaID(o==null?void 0:o.id).log()},src:e,className:"r6a36ppx o2rava5w"})]}),q&&i.jsx(b("PhotoProductTaggingComposerPhotoPanelNavigationContainer.react"),{allPhotos:f,composerID:c,numProductTagsPerPhoto:a,selectedPhoto:o})]})}e.exports=a}),null);
__d("filterMap",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=new Map();for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];b(f,g)&&c.set(g,f)}return c}e.exports=a}),null);
__d("someMap",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(b(e[1],e[0]))return!0}return!1}e.exports=a}),null);
__d("useComposerStorePhotosData",["React","ReactComposerPhotoActions","ReactComposerPhotoStore","Vector","mapMapToArray"],(function(a,b,c,d,e,f){"use strict";d=b("React");var g=d.useCallback,h=d.useEffect,i=d.useMemo,j=d.useState;function a(a){var c=j(k(a)),d=c[0],e=c[1],f=g(function(){e(k(a))},[a]);h(function(){var a=b("ReactComposerPhotoStore").addChangeListener(f);return function(){a.remove()}},[f]);return i(function(){return l(d)},[d])}function k(a){return b("ReactComposerPhotoStore").getComposerData(a).photos}function l(a){var b=new Map();for(var a=a.values(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e.toJS(),g=f.id,h=f.imageSrc,i=f.width;f=f.height;if(g==null||h==null||i==null||f==null)continue;b.set(g,{id:g,imageSrc:h,tags:m(e.get("xyTags")),width:i,height:f})}return b}function m(a){var c=new Map();for(var a=a.values(),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;f=f.toJS();var g=f.name,h=f.subject,i=f.x,j=f.y;f=f.is_product_tag;f=f===void 0?!1:f;if(g==null||h==null||i==null||j==null||!f)continue;c.set(h,{position:new(b("Vector"))(i/100,j/100),product:{id:h,name:g}})}return c}function c(a,c,d){b("ReactComposerPhotoActions").updateAllProductTags(a,c,b("mapMapToArray")(d,function(a){return{name:a.product.name,photoID:c,source:"modal",subject:a.product.id,x:a.position.x*100,y:a.position.y*100,is_product_tag:!0,parent_product_id:null}}))}e.exports={useComposerStorePhotosData:a,saveTagsToComposerStore:c}}),null);
__d("PhotoProductTaggingComposer.react",["fbt","FBConfirmDialog.react","PhotoProductTaggingComposerDispatcherContext","PhotoProductTaggingComposerInfoPanel.react","PhotoProductTaggingComposerInternalStateReducer","PhotoProductTaggingComposerModal.react","PhotoProductTaggingComposerPhotoPanel.react","PhotoProductTaggingComposerStateContext","ProductTaggingCreatorTypedLogger","React","addToMap","filterMap","mergeMaps","nullthrows","someMap","stylex","useComposerStorePhotosData"],(function(a,b,c,d,e,f,g){"use strict";var h=b("PhotoProductTaggingComposerInternalStateReducer").PhotoProductTaggingComposerStateReducer,i=b("PhotoProductTaggingComposerInternalStateReducer").initialInternalState,j=b("React");c=b("React");var k=c.useReducer,l=c.useState,m=b("useComposerStorePhotosData").saveTagsToComposerStore,n=b("useComposerStorePhotosData").useComposerStorePhotosData;function a(a){var c,d=a.pageID,e=a.composerID,f=a.photoID,p=a.onHide,q=a.suggestions;a=k(h,i);var r=a[0],s=a[1],t=n(e);a=(a=r.selectedPhotoID)!=null?a:f;var u=b("nullthrows")(t.get(a));f=r.addedTags;var v=r.removedTags,w=r.addedSuggestions,x=r.addedUnknownSuggestions;f=o(u.tags,f,v);v=q==null?void 0:(v=q.get(a))==null?void 0:v.knownSuggestions;c=q==null?void 0:(c=q.get(a))==null?void 0:c.unknownSuggestions;w=u.tags.size==0&&w==null&&v!=null&&v.size>0;x=u.tags.size==0&&x==null&&c!=null&&c.size>0;if(w||x){s({type:"SET_SUGGESTIONS",knownSuggestions:(v==null?void 0:v.size)===0?null:v,unknownSuggestions:(c==null?void 0:c.size)===0?null:c,productBoxes:q==null?void 0:(w=q.get(a))==null?void 0:w.productBoxes})}x=babelHelpers["extends"]({},r,{pageID:d,allTags:f,allPhotos:t,selectedPhoto:u});var y=b("addToMap")(x.savedChanges,u.id,{addedTags:b("mergeMaps")(x.addedTags,(v=x.addedSuggestions)!=null?v:new Map()),removedTags:x.removedTags,addedSuggestions:x.addedSuggestions,addedUnknownSuggestions:x.addedUnknownSuggestions}),z=function(){for(var c=t.values(),e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;var a=y.get(g.id);if(a==null)continue;a.addedSuggestions!=null&&new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Imp_PhotoEditorProductSuggestionHighConfidence").setCreatorID(d).setMediaType("photo").setMediaID(g.id).log();a.addedUnknownSuggestions!=null&&new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Imp_PhotoEditorProductSuggestionLowConfidence").setCreatorID(d).setMediaID(g.id).log()}},A=function(){s({type:"RESET"}),p(),z()};c=function(){var a=function(){var i;if(f){if(g>=c.length)return"break";h=c[g++]}else{g=c.next();if(g.done)return"break";h=g.value}var j=h,a=y.get(j.id);if(a==null)return"continue";a=b("mergeMaps")(o(j.tags,a.addedTags,a.removedTags),(a=a.addedSuggestions)!=null?a:new Map());var k=(i=(i=q.get(j.id))==null?void 0:i.knownSuggestions)!=null?i:new Map();m(e,j.id,a);i=b("someMap")(a,function(a,b){return k.has(b)});i&&new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoEditorSavetagsWithSuggestion").setCreatorID(d).setMediaID(u==null?void 0:u.id).log()};_loop:for(var c=t.values(),f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h,i=a();switch(i){case"break":break _loop;case"continue":continue}}A();new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoEditorSavetags").setCreatorID(d).setMediaID(u==null?void 0:u.id).log()};a=l(!1);w=a[0];var B=a[1];r=function(){for(var a=y.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(d.addedTags.size>0||d.removedTags.size>0){B(!0);return}}A()};f=j.jsx(b("FBConfirmDialog.react"),{title:g._("Discard changes?"),content:g._("Are you sure you want to discard all of your changes?"),confirmButtonText:g._("Discard"),shown:w,onCancel:function(){B(!1)},onConfirm:function(){B(!1),A()}});v={};for(var a=t.entries(),w=Array.isArray(a),C=0,a=w?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(w){if(C>=a.length)break;D=a[C++]}else{C=a.next();if(C.done)break;D=C.value}D=D;var E=D[0];D=D[1];var F=y.get(E);v[E]=o(D.tags,(F==null?void 0:F.addedTags)||new Map(),(F==null?void 0:F.removedTags)||new Set()).size}return j.jsx(b("PhotoProductTaggingComposerDispatcherContext").Provider,{value:s,children:j.jsxs(b("PhotoProductTaggingComposerStateContext").Provider,{value:x,children:[j.jsx(b("PhotoProductTaggingComposerModal.react"),{children:j.jsxs(j.Fragment,{children:[j.jsx(b("PhotoProductTaggingComposerInfoPanel.react"),{}),j.jsx(b("PhotoProductTaggingComposerPhotoPanel.react"),{composerID:e,numProductTagsPerPhoto:v})]}),onHide:r,showSaveButton:!0,onSave:c}),f]})})}function o(a,c,d){a=b("mergeMaps")(a,c);return b("filterMap")(a,function(a){return!d.has(a.product.id)})}e.exports=a}),null);
__d("PhotoProductTaggingComposerAISuggestionQueryRenderer.react",["FBLogger","PhotoProductTaggingComposer.react","ProductTaggingComposerAISuggestionQuery.graphql","React","ReactComposerTaggerActions","ReactComposerTaggerStore","RelayFBEnvironmentFactory","RelayModern","Vector","qex","useComposerStorePhotosData"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("RelayModern").QueryRenderer,i=b("useComposerStorePhotosData").useComposerStorePhotosData,j=.6,k=.3;function a(a){var c=a.pageID,d=a.composerID,e=a.photoID,f=a.onHide,j=a.onShowComposer,k=a.showComposer,m=i(d);a=Array.from(m.keys());var n=b("ReactComposerTaggerStore").getPhotoEditorOpened(d),o=b("ReactComposerTaggerStore").getShouldNavigateToPhotoEditor(d),p=b("ReactComposerTaggerStore").getProductSuggestionPhotoID(d);return g.jsx(h,{environment:b("RelayFBEnvironmentFactory").getForActorID(c),query:b("ProductTaggingComposerAISuggestionQuery.graphql"),variables:{photo_ids:a,max_suggestions_per_photo:1},render:function(a){var h=a.error;a=a.props;h&&b("FBLogger")("product_tagging_ai_suggestion").catching(h).debug("Error querying graphQL endpoint for Product Tagging AI suggestions");if(h||a==null)return k&&g.jsx(b("PhotoProductTaggingComposer.react"),{pageID:c,composerID:d,photoID:e,onHide:f,suggestions:new Map()});h=l(a);a=(a=h.get(e))==null?void 0:a.knownSuggestions.size;a=a!=null&&a>0;if(k)return g.jsx(b("PhotoProductTaggingComposer.react"),{pageID:c,composerID:d,photoID:e,onHide:f,suggestions:h});h=b("qex")._("1369127")&&a&&((h=m.get(e))==null?void 0:h.tags.size)===0&&!n&&!o&&j!=null;if(h===!0){j&&j();return null}a=b("qex")._("1383118")&&a&&((h=m.get(e))==null?void 0:h.tags.size)===0&&!n&&p==null;a===!0&&b("ReactComposerTaggerActions").setProductSuggestionPhotoID(d,e);return null}})}function l(a){var c=new Map();a.product_tag_suggestions.map(function(a){var d=a.photo_id;a=a.suggestions;if(d==null||a==null)return;var e=new Map(),f=new Map(),g=new Set();a.map(function(a,c){var d;d=(d=a)!=null?d:{};var h=d.top_left,i=d.bottom_right,l=d.center_x,m=d.center_y,n=d.score;d=d.products;if(l==null||m==null||n==null)return;l=new(b("Vector"))(l,m);m=d==null?void 0:d[0];d=m==null?void 0:m.score;if(d!=null&&d<k){d=(d=m==null?void 0:m.product_item)!=null?d:{};var o=d.id;d=d.name;if(o==null||d==null)return null;e.set(o,{position:l,product:{id:o,name:d}})}else n>j&&f.set(c,{id:c,position:l});if(m!=null){var p=[];a==null?void 0:(o=a.products)==null?void 0:o.map(function(b){b=(b=b==null?void 0:b.product_item)!=null?b:{};var a=b.id,c=b.name,d=b.current_product_price;b=b.primary_listing_photo;if(a==null||c==null||d==null||b==null)return null;p.push({id:a,name:c,price:(a=d.formatted_amount)!=null?a:"",uri:(d=(c=b.image)==null?void 0:c.uri)!=null?d:""})});g.add({topLeft:new(b("Vector"))(h[0],h[1]),bottomRight:new(b("Vector"))(i[0],i[1]),suggestedProducts:p})}});c.set(d,{knownSuggestions:e,unknownSuggestions:f,productBoxes:g})});return c}e.exports=a}),null);
__d("ReactComposerCrossPostToInstagramRow.react",["cx","fbt","FBToggleSwitch.react","LeftFillRightFitLayout.react","PagesComposerActions","React","XUICardSection.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){b("PagesComposerActions").setInstagramCrossPosting(d.props.composerID,a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return i.jsx(b("XUICardSection.react"),{className:"_1nth",children:i.jsxs(b("LeftFillRightFitLayout.react"),{children:[i.jsxs("div",{children:[i.jsx("div",{className:"_1nti"}),i.jsx("div",{className:"_1ntj",children:h._("Post this photo to Instagram?")})]}),i.jsx("div",{className:"_1ntk",children:i.jsx(b("FBToggleSwitch.react"),{onToggle:this.$1})})]})})};return c}(i.PureComponent);e.exports=a}),null);
__d("ReactComposerMediaAttachmentButtons.react",["cx","fbt","ComposerTargetData","DOMContainer.react","FileInput.react","Grid.react","ReactComposerContextTypes","ReactComposerLoggingActions","ReactComposerLoggingName","ReactComposerMediaUtils","Link.react","ReactComponentWithPureRenderMixin","React","createReactClass_DEPRECATED","prop-types","VideoUploadConfig"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("Grid.react").GridItem,j=b("React");c=b("createReactClass_DEPRECATED")({displayName:"ReactComposerMediaAttachmentButtons",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{createAlbumLink:(a=b("prop-types")).any,mediaAcceptParam:a.shape({photos:a.string,both:a.string}).isRequired,onFilesSelected:a.func.isRequired,canUploadPhotos:a.bool,targetData:a.instanceOf(b("ComposerTargetData")).isRequired},getDefaultProps:function(){return{mediaAcceptParam:{}}},getInitialState:function(){return{createAlbumLink:null}},componentDidMount:function(){if(this.props.createAlbumLink){var a=j.jsx(b("DOMContainer.react"),{className:"_3mc1",display:"block",children:this.props.createAlbumLink});this.setState({createAlbumLink:a})}},render:function(){var a=[];a.push(this._getUploadPhotosButton());this.state.createAlbumLink&&a.push(j.jsx(i,{className:"_4l9a",children:j.jsx("span",{className:"_2709",children:this.state.createAlbumLink})},"createAlbum"));return j.jsx("div",{className:"_4l99",children:j.jsx(b("Grid.react"),{className:"_2707",cols:a.length,children:a.filter(function(a){return a!=null})})})},_getUploadPhotosButton:function(){if(!this.props.canUploadPhotos)return null;var a=this.props.targetData.targetSupportsMultiplePhotos,c=this.props.mediaAcceptParam.both,d=b("VideoUploadConfig").allowMultimedia&&this.props.targetData.targetSupportsMultiMedia;a?d?d=h._("Upload Photos\/Videos"):d=h._("Upload photos\/video"):d=h._("Upload photo\/video");return j.jsx(i,{className:"_4l9a",children:j.jsx(b("FileInput.react"),{accept:c,multiple:a,name:"composer_photo",onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:"fileInput","data-testid":void 0,children:j.jsx(b("Link.react"),{className:"_2709",children:j.jsx("div",{className:"_270a",children:d})})})},"uploadPhoto")},_onUploadPhotosClick:function(){b("ReactComposerLoggingActions").mediaUploadInputClicked(this.context.composerID,b("ReactComposerLoggingName").MEDIA_ATTACHMENT_UPLOAD_BUTTON)},_onFilesSelected:function(a){this.props.onFilesSelected(a,this.refs.fileInput.getFileInput()),b("ReactComposerMediaUtils").clearInput(this.refs.fileInput.getFileInput())}});e.exports=c}),null);
__d("ReactComposerFailedVideoXUploadContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerFailedMediaUpload.react","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerMediaUtils","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=b("createReactClass_DEPRECATED")({displayName:"ReactComposerFailedVideoXUploadContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{error:b("prop-types").object.isRequired,filename:b("prop-types").string,uploadID:b("prop-types").string.isRequired},render:function(){return g.jsx(b("ReactComposerFailedMediaUpload.react"),babelHelpers["extends"]({},this.props,{onDismissClick:this._onDismissClick,onRemoveClick:this._onDismissClick,onRetryClick:this._onRetryClick}))},_onDismissClick:function(){b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)},_onRetryClick:function(){var a=b("ReactComposerMediaUploadStore").getMediaUpload(this.context.composerID,this.props.uploadID).fileUpload;a.manuallyRetried=!0;var c=b("ReactComposerMediaUtils").getVideoXUploader(this.context.composerID);c.uploadVideo(a)}});e.exports=a}),null);
__d("ReactComposerPhotoActionButton.react",["cx","React","Tooltip","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")(this.props.className,"_jfh");return h.jsx("button",babelHelpers["extends"]({className:a,onClick:this.props.onClick,tabIndex:"0","aria-label":this.props.tooltip},b("Tooltip").propsFor(this.props.tooltip),{children:h.jsx("div",{className:this.props.iconClassName})}))};return c}(h.PureComponent);a.propTypes={tooltip:(c=b("prop-types")).node,className:c.string,onClick:c.func,iconClassName:c.string};e.exports=a}),null);
__d("ReactComposerPhotoEditActionButton.react",["cx","fbt","React","ReactComposerPhotoActionButton.react","prop-types","qex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=h._("Edit photo"),c=b("qex")._("1357963")?"_91cb":"_4_z5";return i.jsx(b("ReactComposerPhotoActionButton.react"),{className:"_4_z4",onClick:this.props.onClick,tooltip:a,iconClassName:c})};return c}(i.PureComponent);a.propTypes={onClick:b("prop-types").func};e.exports=a}),null);
__d("ReactComposerFaceboxTaggerTypeaheadPresenter",["cx","React","XUITypeaheadView.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx("div",{className:"_3ntx",children:h.jsx(b("XUITypeaheadView.react"),babelHelpers["extends"]({},this.props))})};return c}(h.Component);c={ViewRenderer:a,useLayer:!0};e.exports=c}),null);
__d("ReactComposerPhotoFaceboxTagger.react",["cx","fbt","React","ReactComposerFaceboxTaggerTypeaheadPresenter","XUITypeahead.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={query:""},c.$1=function(a){c.props.onTagAdded(c.props.faceboxID,a.getUniqueID(),a.getTitle())},c.$2=function(a){c.setState({query:a.target.value})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=h._("Who is this?");return i.jsx(b("XUITypeahead.react"),{className:"_xgd",queryString:this.state.query,placeholder:a,onSelectAttempt:this.$1,onChange:this.$2,searchSource:this.props.dataSource,highlightOnSelect:!0,showEntriesOnFocus:!0,autoHighlight:!0,selectOnTab:!0,focusedOnInit:!0,presenter:b("ReactComposerFaceboxTaggerTypeaheadPresenter")})};return c}(i.PureComponent);a.propTypes={faceboxID:b("prop-types").string.isRequired,dataSource:b("prop-types").object.isRequired,onTagAdded:b("prop-types").func.isRequired};e.exports=a}),null);
__d("ReactComposerPhotoFaceboxTaggerContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaAttachmentStore","ReactComposerPhotoFaceboxTagger.react","ReactComposerPropsAndStoreBasedStateMixin","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=b("createReactClass_DEPRECATED")({displayName:"ReactComposerPhotoFaceboxTaggerContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaAttachmentStore"))],propTypes:{faceboxID:b("prop-types").string.isRequired,onTagAdded:b("prop-types").func.isRequired},statics:{calculateState:function(a){a=b("ReactComposerMediaAttachmentStore").getTaggingDataSource(a);a&&a.bootstrap();return{dataSource:a}}},render:function(){return g.jsx(b("ReactComposerPhotoFaceboxTagger.react"),{faceboxID:this.props.faceboxID,dataSource:this.state.dataSource,onTagAdded:this.props.onTagAdded})}});e.exports=a}),null);
__d("ReactComposerPhotoProductTagActionButton.react",["cx","fbt","AsyncRequest","PhotoProductTaggingComposer.react","PhotoProductTaggingComposerAISuggestionQueryRenderer.react","ProductTaggingCreatorTypedLogger","React","ReactComposerPhotoActionButton.react","ReactComposerTaggerActions","XCommerceSelfServeMerchantNUXSeenController","XUIAmbientNUX.react","gkx","qex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showComposer:!1},d.$1=function(a){new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoComposorProductTagIconClick").setCreatorID(d.props.pageID).setMediaID(d.props.photoID).log(),b("gkx")("1290773")?(d.setState({showComposer:!0}),b("ReactComposerTaggerActions").setPhotoEditorOpened(d.props.composerID,!0),a.stopPropagation()):d.props.onClick&&d.props.onClick(a)},d.$3=function(){var a=b("XCommerceSelfServeMerchantNUXSeenController").getURIBuilder().setInt("page_id",d.props.pageID).setEnum("nux_type","composer_product_photo_tagger_button").getURI();new(b("AsyncRequest"))(a).send();d.props.onHideNux()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Load_PhotoComposorProductTagIcon").setCreatorID(this.props.pageID).setMediaID(this.props.photoID).log()};d.render=function(){var a=this,c=function(){new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoComposorProductTagIconHover").setCreatorID(a.props.pageID).setMediaID(a.props.photoID).log()},d=h._("Tag Products"),e=b("qex")._("1357963")?"_914h":"_a6_";return i.jsxs("div",{onMouseEnter:c,children:[i.jsx(b("ReactComposerPhotoActionButton.react"),{ref:"fbReactComposerPhotoActionbutton",className:"_a69"+(this.props.hasTag?" _a6b":""),tooltip:d,iconClassName:e,onClick:this.$1}),this.$2(),b("qex")._("1354391")?i.jsx(b("PhotoProductTaggingComposerAISuggestionQueryRenderer.react"),{pageID:this.props.pageID,composerID:this.props.composerID,photoID:this.props.photoID,onHide:function(){a.setState({showComposer:!1})},showComposer:this.state.showComposer,onShowComposer:function(){a.setState({showComposer:!0}),b("ReactComposerTaggerActions").setPhotoEditorOpened(a.props.composerID,!0)}}):this.state.showComposer?i.jsx(b("PhotoProductTaggingComposer.react"),{pageID:this.props.pageID,composerID:this.props.composerID,photoID:this.props.photoID,onHide:function(){a.setState({showComposer:!1})},suggestions:new Map()}):null]})};d.$2=function(){var a=this;if(!this.props.showNux)return null;var c=this.props.productTaggerType;c=c==="shop_page"?h._("Tag products from your shop in this photo"):h._("Tag products in this photo");return i.jsx(b("XUIAmbientNUX.react"),{contextRef:function(){return a.refs.fbReactComposerPhotoActionbutton},onCloseButtonClick:this.$3,position:"right",shown:!0,width:"auto",children:c})};return c}(i.PureComponent);e.exports=a}),null);
__d("ReactComposerPhotoTagActionButton.react",["cx","fbt","React","ReactComposerPhotoActionButton.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=h._("Tag");return i.jsx(b("ReactComposerPhotoActionButton.react"),{className:"_cwf"+(this.props.hasTag?" _cwh":""),tooltip:a,iconClassName:"_cwg",onClick:this.props.onClick})};return c}(i.PureComponent);a.propTypes={hasTag:b("prop-types").bool.isRequired,onClick:b("prop-types").any};e.exports=a}),null);
__d("ReactComposerPhotoTaggedFaceboxSummary.react",["cx","fbt","ix","Image.react","LeftRight.react","React","TooltipLink.react","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.onTagRemoved(c.props.faceboxID,c.props.taggedSubjectID)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=h._("Edit name");return j.jsxs(b("LeftRight.react"),{className:"_31bg",children:[j.jsx("div",{className:"_31bh",children:this.props.taggedValue}),j.jsx(b("TooltipLink.react"),{alignH:"center",position:"below",tooltip:a,onClick:this.$1,children:j.jsx(b("Image.react"),{src:i("76906")})})]})};return c}(j.PureComponent);a.propTypes={faceboxID:(c=b("prop-types")).string.isRequired,onTagRemoved:c.func.isRequired,taggedSubjectID:c.string.isRequired,taggedValue:c.string.isRequired};e.exports=a}),null);
__d("WorkSharedDraftMode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DRAFTER_CREATING:"drafter_creating",FINAL_AUTHOR_EDITING:"final_author_editing"})}),null);
__d("ReactComposerPhotoTagger.react",["cx","fbt","ActorURI","AsyncRequest","ContextualLayerAutoFlip","Image.react","ImageBlock.react","LayerHideOnBlur","LayerHideOnEscape","LayerTabIsolation","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPhotoActions","ReactComposerPhotoEditActionButton.react","ReactComposerPhotoFaceboxTaggerContainer.react","ReactComposerPhotoProductTagActionButton.react","ReactComposerPhotoStore","ReactComposerPhotoTagActionButton.react","ReactComposerPhotoTaggedFaceboxSummary.react","ReactLayeredComponentMixin_DEPRECATED","WorkSharedDraftMode","XStickerPhotoEditorController","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIDialogCloseButton.react","createReactClass_DEPRECATED","getObjectValues","immutable","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=268,k=32;c=b("createReactClass_DEPRECATED")({displayName:"ReactComposerPhotoTagger",_photoEditorRequest:void 0,contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactLayeredComponentMixin_DEPRECATED"),b("ReactComponentWithPureRenderMixin")],propTypes:{canTagFromModal:(a=b("prop-types")).bool,draggingPhotos:a.bool,enableFaceboxTagger:a.bool.isRequired,disablePhotoEditing:a.bool.isRequired,faceboxes:a.instanceOf(b("immutable").Map).isRequired,onEditClick:a.func,onHideProductTaggerNux:a.func.isRequired,onTagAdded:a.func.isRequired,onTagIntent:a.func,onTagRemoved:a.func.isRequired,originalID:a.string,photoID:a.string.isRequired,productTaggerType:a.string.isRequired,shown:a.bool.isRequired,showProductTaggerNux:a.bool.isRequired,workSharedDraftMode:a.oneOf(b("getObjectValues")(b("WorkSharedDraftMode")))},getDefaultProps:function(){return{shown:!1}},UNSAFE_componentWillReceiveProps:function(a){!this.props.draggingPhotos&&a.draggingPhotos&&b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,null)},render:function(){var a=null,c=this.props.productTaggerType!=="none";c?a=this._onProductTagClick:this.props.canTagFromModal&&(a=this._onTagClick);var d=null;c?d=i.jsx(b("ReactComposerPhotoProductTagActionButton.react"),{composerID:this.context.composerID,productTaggerType:this.props.productTaggerType,pageID:this.context.targetID,photoID:this.props.photoID,hasTag:b("ReactComposerPhotoStore").hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:a,onHideNux:this.props.onHideProductTaggerNux,showNux:this.props.showProductTaggerNux}):this.props.enableFaceboxTagger&&(d=i.jsx(b("ReactComposerPhotoTagActionButton.react"),{hasTag:b("ReactComposerPhotoStore").hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:a}));a=this.props.disablePhotoEditing?null:i.jsx(b("ReactComposerPhotoEditActionButton.react"),{onClick:this._onEditClick});return i.jsxs("div",{className:"_jfi"+(c?" uiContextualLayerParent":""),onClick:this._onClick,role:"presentation",tabIndex:"-1",children:[d,a]})},renderLayers:function(){return!this.props.shown||!this.props.enableFaceboxTagger||this.props.productTaggerType!=="none"?null:{dialog:this._getDialog()}},_getDialog:function(){var a=this;return i.jsxs(b("XUIContextualDialog.react"),{shown:this.props.shown,onToggle:this._onDialogToggled,contextRef:function(){return a},position:"below",alignment:"center",width:j,behaviors:{LayerHideOnBlur:b("LayerHideOnBlur"),LayerHideOnEscape:b("LayerHideOnEscape"),ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),LayerTabIsolation:b("LayerTabIsolation")},children:[i.jsx(b("XUIContextualDialogBody.react"),{children:this._getDialogBody()}),i.jsx(b("XUIContextualDialogFooter.react"),{children:i.jsx(b("XUIDialogCloseButton.react"),{use:"confirm",label:"Close",onClick:this._onCloseButtonClicked})})]})},_getDialogBody:function(){var a=this;return this.props.faceboxes.size===0?h._("We could not find any faces to tag."):this.props.faceboxes.valueSeq().map(function(c){var d=c.taggedSubjectID?i.jsx(b("ReactComposerPhotoTaggedFaceboxSummary.react"),{faceboxID:c.id,onTagRemoved:a.props.onTagRemoved,taggedSubjectID:c.taggedSubjectID,taggedValue:c.taggedValue}):i.jsx(b("ReactComposerPhotoFaceboxTaggerContainer.react"),{faceboxID:c.id,onTagAdded:a.props.onTagAdded});return i.jsxs(b("ImageBlock.react"),{className:"_qv7",children:[i.jsx(b("Image.react"),{className:"_qv8",height:k,src:c.croppedURI,width:k}),d]},c.id)})},_onCloseButtonClicked:function(){b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,null)},_onDialogToggled:function(a){a||this._onCloseButtonClicked()},_onClick:function(){this.props.onTagIntent&&this.props.onTagIntent(),b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,this.props.photoID)},_onTagClick:function(a){this._onEditClick(a,null,"tag")},_onProductTagClick:function(a){this._onEditClick(a,null,"product_tag")},_onEditClick:function(a,c,d){var e=this;a.stopPropagation();if(this._photoEditorRequest)return;b("ReactComposerPhotoActions").startPhotoEdit(this.context.composerID,this.props.photoID);c=b("XStickerPhotoEditorController").getURIBuilder().setString("grid_id",this.context.composerID).setEnum("target_type","composer").setInt("latest_fbid",this.props.photoID).setInt("photo_fbid",this.props.originalID||this.props.photoID).setEnum("initial_tab",d).setEnum("work_shared_draft_mode",this.props.workSharedDraftMode).getURI();c=b("ActorURI").create(c,this.context.actorID);this._photoEditorRequest=new(b("AsyncRequest"))(c).setFinallyHandler(function(){e._photoEditorRequest=null,b("ReactComposerPhotoActions").finishLoadingPhotoEdit(e.context.composerID,e.props.photoID)});this._photoEditorRequest&&this._photoEditorRequest.send();this.props.onEditClick&&this.props.onEditClick()}});e.exports=c}),null);
__d("ReactComposerPhoto.react",["cx","fbt","ix","FluxContainer","Image.react","ImageBlock.react","LoadingIndicator.react","ProductTaggingCreatorTypedLogger","React","ReactComposerContextTypes","ReactComposerMediaConfig","ReactComposerPhotoTagger.react","ReactComposerPhotoThumbnail.react","ReactComposerStore","ReactFragment","XUIAmbientNUX.react","XUICloseButton.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIText.react","emptyFunction","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!1,d.$3=function(){d.$1||new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Imp_PhotoComposorProductTagIcon").setCreatorID(d.context.targetID).setMediaID(d.props.photoID).log(),d.$1=!0},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("ReactComposerStore")]};c.calculateState=function(a){return{posting:b("ReactComposerStore").isPosting(a)}};var d=c.prototype;d.$2=function(){var a=this.context.gks.local_image_display?this.props.fileURL:null;return j.jsx(b("ReactComposerPhotoThumbnail.react"),{bgClassName:"_1a__",bgURL:a,height:b("ReactComposerMediaConfig").photo.thumbHeight,imgSrc:this.props.thumbSrc,width:b("ReactComposerMediaConfig").photo.thumbWidth,alt:this.props.label})};d.render=function(){var a={width:b("ReactComposerMediaConfig").photo.thumbWidth,height:b("ReactComposerMediaConfig").photo.thumbHeight},c=this.props.isRecognizingFaceboxes||this.props.isLoadingPhotoEdit?j.jsx("div",{className:"_jff",children:j.jsx(b("LoadingIndicator.react"),{className:"_jfg",size:"small",color:"white"})}):null,d=this.props.showProductTaggerNux?"_jfc"+(this.props.isRecognizingFaceboxes?" _jfd":"")+" _43p_":"_jfc"+(this.props.isRecognizingFaceboxes?" _jfd":""),e,f;this.state.posting||(e=j.jsx(b("XUICloseButton.react"),{className:"_jfe",label:h._("Remove Photo"),onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"light"}),f=j.jsx(b("ReactComposerPhotoTagger.react"),{canTagFromModal:this.props.canTagFromModal,draggingPhotos:this.props.draggingPhotos,enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,faceboxes:this.props.faceboxes,onEditClick:this.props.onEditClick,onHideProductTaggerNux:this.props.onHideProductTaggerNux,onTagIntent:this.props.onTagIntent,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,originalID:this.props.originalID,photoID:this.props.photoID,shown:this.props.showPhotoTagger,showProductTaggerNux:this.props.showProductTaggerNux,workSharedDraftMode:this.props.workSharedDraftMode}));var g=this.props.productTaggerType!=="none";g=g&&!this.$1?this.$3:b("emptyFunction");return j.jsxs("span",{children:[j.jsxs("div",{className:d,onMouseEnter:g,ref:"root",style:a,children:[this.$2(),this.props.disableRemovePhotos?null:e,c,f]}),this.renderLayers()]})};d.renderLayers=function(){var a=this.props.productTaggerType!=="none";return b("ReactFragment").create({taggingNUX:this.props.enableFaceboxTagger&&!a?this.$4():null,stickersNUX:this.props.disablePhotoEditing?null:this.$5(),productTagSuggestion:a?this.$6():null})};d.$6=function(){var a=this;return j.jsx(b("XUIAmbientNUX.react"),{contextRef:function(){return a.refs.root},shown:this.props.showProductSuggestionTooltip&&!this.state.productSuggestionTooltipDismissed,position:"above",width:"auto",onCloseButtonClick:function(){a.setState({productSuggestionTooltipDismissed:!0})},children:h._("See suggested product tags.")},"ambientNUX")};d.$4=function(){var a=this;return j.jsx(b("XUIContextualDialog.react"),{contextRef:function(){return a.refs.root},position:"below",alignment:"left",shown:this.props.showTaggingNUX,width:300,children:j.jsxs(b("XUIContextualDialogBody.react"),{children:[j.jsx(b("XUICloseButton.react"),{className:"rfloat",onClick:this.props.onTaggingNUXClose}),j.jsxs("div",{children:[j.jsx(b("XUIText.react"),{weight:"bold",display:"block",children:h._("It's now easier to tag photos")}),h._("Click photos with a {tagging_badge_icon} to review tag suggestions or add, edit and remove tags. When you post the photo, your tags will be applied.",[h._param("tagging_badge_icon",j.jsx(b("Image.react"),{className:"_2z-r",src:i("95679")}))])]})]})})};d.$5=function(){var a=this;return j.jsx(b("XUIAmbientNUX.react"),{alignment:"right",contextRef:function(){return a.refs.root},onCloseButtonClick:this.props.onStickersNUXClose,position:"below",shown:this.props.showStickersNUX,children:j.jsxs(b("ImageBlock.react"),{spacing:"medium",children:[j.jsx(b("Image.react"),{src:i("95645")}),j.jsxs("div",{className:"_21ft",children:[j.jsx("div",{className:"_21fs",children:h._("New! Add stickers!")}),h._("You can now add stickers to your photos")]})]})})};return c}(j.PureComponent);a.defaultProps={enableFaceboxTagger:!0,productTaggerType:"none",disablePhotoEditing:!1};a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a)}),null);
__d("ReactComposerPhotoContainer.react",["cx","FluxContainer","JSResource","LoadingIndicator.react","React","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerNUXActions","ReactComposerNUXStore","ReactComposerPhoto.react","ReactComposerPhotoActions","ReactComposerPhotoStore","ReactComposerTaggerStore","ReactDOM","lazyLoadComponent","setTimeout","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("lazyLoadComponent")(b("JSResource")("ReactComposerSphericalPhoto.react").__setRef("ReactComposerPhotoContainer.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var d;d=a.apply(this,arguments)||this;d.$7=function(){d.$9()};d.$6=function(){if(d.props.photoID){var a=d.props.photoID;b("ReactComposerPhotoActions").untagAllForPhoto(d.context.composerID,a);b("ReactComposerPhotoActions").removePhoto(d.context.composerID,a,d.props.uploadID)}else b("ReactComposerMediaUploadActions").removeMediaUpload(d.context.composerID,d.props.uploadID)};d.$9=function(){b("ReactComposerNUXActions").nuxWasSeen(d.context.composerID,"add_stickers_nux_seen")};d.$10=function(a,c,e){!(d.state.isSpherical||d.props.sphericalPhotoID)&&d.props.photoID&&b("ReactComposerPhotoActions").tagFacebox(d.context.composerID,d.props.photoID,a,c,e)};d.$1=function(){b("ReactComposerNUXActions").nuxWasSeen(d.context.composerID,"tagging_flyout_nux_seen")};d.$11=function(){d.state.showTaggingNUX&&d.$1()};d.$12=function(a,c){!(d.state.isSpherical||d.props.sphericalPhotoID)&&d.props.photoID&&b("ReactComposerPhotoActions").untagFacebox(d.context.composerID,d.props.photoID,a,c)};d.$8=function(){b("ReactComposerNUXActions").nuxWasSeen(d.context.composerID,"composer_product_photo_tagger_button")};d.beforeCalculateInitialState(d.context.composerID,d.props);d.state=c.calculateState(d.state,d.props,d.context);d.$1=d.$1.bind(babelHelpers.assertThisInitialized(d));return d}c.getStores=function(){return[b("ReactComposerNUXStore"),b("ReactComposerPhotoStore"),b("ReactComposerTaggerStore")]};var d=c.prototype;d.beforeCalculateInitialState=function(a,d){if(d.photoID){var e=b("ReactComposerPhotoStore").getPhoto(a,d.photoID);if(e){var f=c.$2(a,e,d.nuxConfig,d.index);d=!f&&c.$3(a,e,d.nuxConfig,d.index);f&&b("ReactComposerNUXActions").nuxWasShown(a,"add_stickers_nux_seen",e.id);d&&b("ReactComposerNUXActions").nuxWasShown(a,"tagging_flyout_nux_seen",e.id)}}};c.calculateState=function(a,c,d){a=d.composerID;if(c.photoID){d=b("ReactComposerPhotoStore").getPhoto(a,c.photoID);if(d){var e=this.$2(a,d,c.nuxConfig,c.index),f=!e&&this.$3(a,d,c.nuxConfig,c.index),g=b("ReactComposerPhotoStore").getPhotoBeingTagged(a)===c.photoID,h=c.showProductTaggerNux===!0&&this.$4(a);a=b("ReactComposerTaggerStore").getPhotoEditorOpened(a)!==!0&&b("ReactComposerTaggerStore").getProductSuggestionPhotoID(a)===c.photoID;return{faceboxes:d.faceboxes,isLoadingPhotoEdit:d.isLoadingPhotoEdit,isRecognizingFaceboxes:d.isRecognizingFaceboxes,isSpherical:d.isSpherical,showPhotoTagger:g,showProductTaggerNux:h,showStickersNUX:e,showTaggingNUX:f,thumbSrc:d.thumbSrc,showProductSuggestionTooltip:a}}}return{faceboxes:b("immutable").Map(),isLoadingPhotoEdit:!1,isRecognizingFaceboxes:!1,isSpherical:c.isSpherical,showPhotoTagger:!1,showProductTaggerNux:!!c.showProductTaggerNux,showStickersNUX:!1,showTaggingNUX:!1,showProductSuggestionTooltip:!1,thumbSrc:""}};c.$5=function(a,c,d,e,f){var g=b("ReactComposerNUXStore").getNUXShownPhotoID(a,e);a=b("ReactComposerNUXStore").hasNUXBeenSeen(a,e);return!!d[e]&&!a&&(!g||g===c.id)&&f===0};c.$2=function(a,b,c,d){return this.$5(a,b,c,"add_stickers_nux_seen",d)};c.$3=function(a,b,c,d){return this.$5(a,b,c,"tagging_flyout_nux_seen",d)&&b.faceboxes.size>0};c.$4=function(a){return!b("ReactComposerNUXStore").hasNUXBeenSeen(a,"composer_product_photo_tagger_button")};d.componentDidMount=function(){var a=this;b("setTimeout")(function(){var c=a.props.dragHandler;c&&c.add(b("ReactDOM").findDOMNode(a.refs.container))},0)};d.componentWillUnmount=function(){var a=this;b("setTimeout")(function(){var c=a.props.dragHandler;c&&c.remove(b("ReactDOM").findDOMNode(a.refs.container))},0)};d.render=function(){if(this.state.isSpherical||this.props.sphericalPhotoID){var a=h.jsx("div",{className:"_30t9",children:h.jsx(b("LoadingIndicator.react"),{className:"_4qlq",size:"small",color:"white"})});return h.jsx(h.Suspense,{fallback:a,children:h.jsx(i,{alt:this.props.label,className:"_4j47 _jfc",fileURL:this.props.fileURL,onRemoveButtonClicked:this.$6,photoID:this.props.photoID,ref:"container",showEditButton:!0,sphericalImage:this.props.sphericalImage,sphericalPhotoID:this.props.sphericalPhotoID,thumbSrc:this.state.thumbSrc,uploadID:this.props.uploadID,useLocalSphericalImage:this.props.useLocalSphericalImage})})}else return h.jsx(b("ReactComposerPhoto.react"),babelHelpers["extends"]({},this.props,this.state,{onEditClick:this.$7,onHideProductTaggerNux:this.$8,onRemoveButtonClicked:this.$6,onStickersNUXClose:this.$9,onTagAdded:this.$10,onTagIntent:this.$11,onTaggingNUXClose:this.$1,onTagRemoved:this.$12,ref:"container",workSharedDraftMode:this.props.workSharedDraftMode}))};return c}(h.PureComponent);a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);
__d("ReactComposerPhotoUploadPlaceholder.react",["ix","cx","CircularProgressBar.react","Image.react","LoadingIndicator.react","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPhotoUploadState","XUICloseButton.react","asset","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");c=b("createReactClass_DEPRECATED")({displayName:"ReactComposerPhotoUploadPlaceholder",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{onRemoveButtonClicked:(a=b("prop-types")).func.isRequired,uploadID:a.string.isRequired,uploadState:a.oneOf(Object.keys(b("ReactComposerPhotoUploadState"))).isRequired,uploadProgress:a.number,isSpherical:a.bool,fileURL:a.string},render:function(){var a=null,c=null,d=this.props.uploadState,e=d===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_RESIZE_STARTED;d=d===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_UPLOADING;if((e||d)&&!this.props.isDocument){e="_1b01"+(e?" _1b02":"")+(d?" _1b03":"");a=i.jsx(b("CircularProgressBar.react"),{percentComplete:this.props.uploadProgress,className:e})}else c=i.jsx(b("LoadingIndicator.react"),{className:"_1b00",color:"white",size:"medium"});var f;this.props.isSpherical&&(f=i.jsx(b("Image.react"),{className:"_1az2",src:g("411966"),alt:"360 Photo"}));d={};this.context.gks.local_image_display&&this.props.fileURL&&(d={backgroundImage:"url("+this.props.fileURL+")"});return i.jsxs("div",{className:"_50_c _1a__",style:d,children:[i.jsx(b("XUICloseButton.react"),{className:"_1b04",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"dark"}),a,c,f]})}});e.exports=c}),null);
__d("ReactComposerPhotoUploadPlaceholderContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPhotoUploadPlaceholder.react","ReactComposerPropsAndStoreBasedStateMixin","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=b("createReactClass_DEPRECATED")({displayName:"ReactComposerPhotoUploadPlaceholderContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaUploadStore"))],propTypes:{uploadID:b("prop-types").string.isRequired},statics:{calculateState:function(a,c){a=b("ReactComposerMediaUploadStore").getMediaUpload(a,c.uploadID);return{uploadProgress:a.progress,uploadState:a.state,isSpherical:a.isSpherical,isDocument:!1}}},render:function(){return g.jsx(b("ReactComposerPhotoUploadPlaceholder.react"),babelHelpers["extends"]({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked}))},_onRemoveButtonClicked:function(){b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)}});e.exports=a}),null);
__d("ReactComposerVideoX.react",["cx","fbt","ix","requireCond","BackgroundImage.react","DurationFormatter","cr:1301117","FlexLayout.react","FlexLayoutItem.react","Image.react","LineClamp.react","React","ReactComposerMediaConfig","Tooltip.react","cr:1301118","XUICloseButton.react","asset","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a={width:b("ReactComposerMediaConfig").photo.thumbWidth,height:b("ReactComposerMediaConfig").photo.thumbHeight},c=this.props.posting?null:j.jsx(b("XUICloseButton.react"),{className:"_1sju",label:h._("Remove video"),onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"light"}),d=this.props.useThumbnailsRedesign?null:j.jsx("div",{className:"_2v_s"}),e=j.jsx(b("BackgroundImage.react"),{alt:this.props.label,src:this.props.thumbSrc,width:b("ReactComposerMediaConfig").photo.thumbWidth,height:b("ReactComposerMediaConfig").photo.thumbHeight,backgroundSize:this.props.usingPlaceholderThumbnail?"cover":"contain",className:this.props.usingPlaceholderThumbnail?"":"_33by"}),f=this.$1(),g="_1sjs"+(f!=null?" _225v":"");return j.jsxs("div",{ref:"root",className:g,style:a,children:[f?f:e,this.$2(),d,c,j.jsx("div",{className:"uiContextualLayerParent _1xob"})]})};d.$3=function(){return this.props.label.endsWith(".gif")};d.$1=function(){if(!this.props.useThumbnailsRedesign||!this.props.usingPlaceholderThumbnail)return null;var a=this.$3()?h._("Your GIF will show up after you post."):h._("Your video will show up after you post.");a=j.jsxs("span",{children:[a,j.jsx("br",{}),this.props.label]});return j.jsx(b("Tooltip.react"),{position:"below",className:"_225-",display:"block",tooltip:a,children:j.jsx(b("LineClamp.react"),{lines:3,lineHeight:16,fitHeightToShorterText:!0,className:"_2260",children:this.props.label})})};d.$2=function(){var a=this.props.isSpherical?j.jsx(b("Image.react"),{className:"_40p3",src:i("95829")}):null,c=this.props.videoID!=null&&this.props.duration!=null&&b("cr:1301118")?j.jsx(b("cr:1301118"),{composerID:this.props.composerID,selectedActorID:this.props.selectedActorID,videoDuration:this.props.duration,videoID:this.props.videoID,videoURL:this.props.videoURL,workSharedDraftMode:this.props.workSharedDraftMode}):null,d=this.props.isProcessingCaptions&&b("cr:1301117")?j.jsx("div",{className:"_3-8w",children:j.jsx(b("cr:1301117"),{background:"transparent",height:"small",progress:100,roundedBorder:!1,type:"buffering"})}):null,e=null,f=null;if(this.props.useThumbnailsRedesign)if(this.props.duration==null)f=this.$3()?j.jsx(b("Image.react"),{className:"_m6t",src:i("441227")}):j.jsx(b("Image.react"),{className:"_2261",src:i("412727")});else{var g=b("DurationFormatter").formatShort(this.props.duration);e=j.jsx("span",{className:"_40p4",children:g})}return j.jsxs("div",{className:"_8528"+(d?" _8529":""),children:[j.jsxs(b("FlexLayout.react"),{align:"end",className:"_2pi7",children:[j.jsx(b("FlexLayoutItem.react"),{children:c}),j.jsxs(b("FlexLayoutItem.react"),{className:"_52jw",grow:1,children:[e,f,a]})]}),d]})};return c}(j.PureComponent);a.propTypes={label:(c=b("prop-types")).string,onRemoveButtonClicked:c.func.isRequired,thumbSrc:c.string.isRequired,posting:c.bool.isRequired};e.exports=a}),null);
__d("ReactComposerVideoXEditDialogActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SET_ACTIVE_TAB:null,UPDATE_GENERATED_THUMBNAILS:null,UPDATE_SELECTED_THUMBNAIL:null,UPDATE_CUSTOM_THUMBNAIL:null,UPDATE_SCRUBBED_THUMBNAIL:null,USE_SELECTED_THUMBNAIL:null,REMOVE_DIALOG_STATE:null,REVERT_THUMBNAIL_STATE:null,SAVE_THUMBNAIL_STATE:null,SHOW_DISCARD_DIALOG:null,HIDE_DISCARD_DIALOG:null,SHOW_DIALOG:null,HIDE_DIALOG:null,MOVE_TEXT_BOX:null,RESIZE_TEXT_BOX:null,UPDATE_THUMBNAIL_TEXT:null,SET_VIDEO_DIMENSIONS:null,SET_CUSTOM_THUMBNAIL_DIMENSIONS:null,SET_TEXT_COLOR:null,SET_TEXT_FONT:null,SET_TEXT_ALIGNMENT:null,SET_TEXT_SIZE:null});e.exports=a}),null);
__d("ReactComposerVideoXEditDialogActions",["ReactComposerDispatcher","ReactComposerVideoXEditDialogActionTypes","VideoThumbnail"],(function(a,b,c,d,e,f){"use strict";a={setActiveTab:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_ACTIVE_TAB,activeTab:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateGeneratedThumbnails:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_GENERATED_THUMBNAILS,generatedThumbnails:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateSelectedThumbnail:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_SELECTED_THUMBNAIL,selectedThumbnail:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateCustomThumbnail:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_CUSTOM_THUMBNAIL,customThumbnail:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateScrubbedThumbnail:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_SCRUBBED_THUMBNAIL,scrubbedThumbnail:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},useSelectedThumbnail:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").USE_SELECTED_THUMBNAIL,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},removeDialogState:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").REMOVE_DIALOG_STATE,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},saveThumbnailState:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").SAVE_THUMBNAIL_STATE,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},revertThumbnailState:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").REVERT_THUMBNAIL_STATE,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},hideDiscardDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").HIDE_DISCARD_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},showDiscardDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").SHOW_DISCARD_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},hideDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").HIDE_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},showDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").SHOW_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},moveTextBox:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").MOVE_TEXT_BOX,textTop:a,textLeft:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},resizeTextBox:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").RESIZE_TEXT_BOX,textWidth:a,textHeight:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},updateThumbnailText:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_THUMBNAIL_TEXT,thumbnailText:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setVideoDimensions:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_VIDEO_DIMENSIONS,videoWidth:a,videoHeight:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},setCustomThumbnailDimensions:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_CUSTOM_THUMBNAIL_DIMENSIONS,customThumbnailWidth:a,customThumbnailHeight:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},setTextColor:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_COLOR,color:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setTextFont:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_FONT,font:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setTextAlignment:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_ALIGNMENT,alignment:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setTextSize:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_SIZE,textSize:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)}};e.exports=a}),null);
__d("ReactComposerVideoXContainer.react",["cx","requireCond","EventListener","PagesComposerContextUtils","PagesComposerUtils","React","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","ReactComposerVideoX.react","ReactComposerVideoXEditDialogActions","ReactDOM","VideoComposerDispatchers","WorkSharedDraftMode","cr:1301119","createReactClass_DEPRECATED","generateVideoThumbnails","getObjectValues","gkx","ifRequired","promiseDone","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("PagesComposerContextUtils").isPageAdminPostingInPage,i=b("PagesComposerUtils").logVideoUploadFunnelEvents,j=b("React"),k=b("VideoComposerDispatchers").DEFAULT_VIDEO_COMPOSER_ID,l=100,m=100,n="/images/icons/timeline/placeholder/placeholder-movies.png";a=[b("ReactComposerStore")].concat(b("cr:1301119")?[b("cr:1301119")]:[]);c=b("createReactClass_DEPRECATED")({displayName:"ReactComposerVideoXContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerPropsAndStoreBasedStateMixin").apply(void 0,a)],_loadedmetadataListener:null,propTypes:{dragHandler:b("prop-types").shape({add:b("prop-types").func.isRequired,remove:b("prop-types").func.isRequired}),label:b("prop-types").string.isRequired,photoID:b("prop-types").string,uploadID:b("prop-types").string.isRequired,fileURL:b("prop-types").string.isRequired,isSpherical:b("prop-types").bool,allowTextOnThumbnail:b("prop-types").bool,selectedActorID:b("prop-types").oneOfType([b("prop-types").oneOf([null,void 0]),b("prop-types").string]),shouldResetVideoComposer:b("prop-types").bool,metadata:b("prop-types").object,workSharedDraftMode:b("prop-types").oneOf(b("getObjectValues")(b("WorkSharedDraftMode")))},statics:{calculateState:function(a,c){var d=b("cr:1301119")?b("cr:1301119").isProcessingCaptions(a,c.photoID):!1,e=b("ReactComposerMediaUploadStore").getMediaUpload(a.toString(),c.uploadID);c=b("ReactComposerMediaUploadStore").getUploadIndex(a.toString(),c.uploadID);e=e&&e.thumbSrc?e.thumbSrc:n;return{isProcessingCaptions:d,posting:b("ReactComposerStore").isPosting(a),thumbSrc:e,uploadIndex:c}}},componentDidMount:function(){var a=this,c=b("ReactDOM").findDOMNode(this.refs.videoPlayer);this.state.thumbSrc===n&&(this._loadedmetadataListener=b("EventListener").listen(c,"loadedmetadata",this.generateVideoThumbnails));window.setTimeout(function(){var c=a.props.dragHandler;c&&c.add(b("ReactDOM").findDOMNode(a.refs.container))},0)},generateVideoThumbnails:function(){var a=this,c=b("ReactDOM").findDOMNode(this.refs.videoPlayer);b("promiseDone")(b("generateVideoThumbnails")(c,m,l,1),function(c){b("ReactComposerMediaUploadActions").setVideoThumbnail(a.context.composerID,a.props.uploadID,c.thumbnails[0].getURL())});b("promiseDone")(b("generateVideoThumbnails")(c,465,284,10,"contain"),function(c){b("ReactComposerVideoXEditDialogActions").updateGeneratedThumbnails(c.thumbnails,a.context.composerID,a.props.uploadID)});c instanceof HTMLVideoElement&&b("ReactComposerVideoXEditDialogActions").setVideoDimensions(c.videoWidth,c.videoHeight,this.context.composerID,this.props.uploadID)},componentWillUnmount:function(){var a=this;this._loadedmetadataListener&&(this._loadedmetadataListener.remove(),this._loadedmetadataListener=null);window.setTimeout(function(){var c=a.props.dragHandler;c&&c.remove(b("ReactDOM").findDOMNode(a.refs.container))},0)},render:function(){var a=b("gkx")("678777"),c=a&&this.props.metadata&&this.props.metadata.format&&this.props.metadata.format.duration!=null?Math.floor(this.props.metadata.format.duration):null;return j.jsxs("div",{children:[j.jsx(b("ReactComposerVideoX.react"),{composerID:this.context.composerID,duration:c,isProcessingCaptions:this.state.isProcessingCaptions,isSpherical:!!this.props.isSpherical,label:this.props.label,onRemoveButtonClicked:this._onRemoveButtonClicked,posting:this.state.posting,ref:"container",thumbSrc:this.state.thumbSrc,uploadID:this.props.uploadID,uploadIndex:this.state.uploadIndex,selectedActorID:this.props.selectedActorID,useThumbnailsRedesign:a,usingPlaceholderThumbnail:this.state.thumbSrc===n,videoID:this.props.photoID,videoURL:this.props.fileURL,workSharedDraftMode:this.props.workSharedDraftMode}),this._getVideoElement()]})},_getVideoElement:function(){return j.jsx("video",{ref:"videoPlayer",className:"_2mpk",src:this.props.fileURL})},_onRemoveButtonClicked:function(){h(this.context.actorID,this.context.composerID,this.context.targetID)&&i(this.context.composerID,"video_upload_xout"),b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID),b("ReactComposerVideoXEditDialogActions").removeDialogState(this.context.composerID,this.props.uploadID),this.props.shouldResetVideoComposer&&b("ifRequired")("VideoComposerActions",function(a){a.resetComposer(k)})}});e.exports=c}),null);
__d("ReactComposerVideoXUploadPlaceholder.react",["cx","CircularProgressBar.react","LoadingIndicator.react","React","ReactComposerPhotoUploadState","XUICloseButton.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=null,c=null,d=null,e=this.props.uploadState;e=e===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_UPLOADING;var f=null;this.props.useProgressTransformX?f=.99*parseFloat(this.props.uploadProgress)+1:f=Math.max(1,parseInt(this.props.uploadProgress,10));var g=50*Math.log10(f),i=this.props.useProgressLinearity?this.props.useProgressLinearity:0;i>0&&(g-=(g-f)*i);this.props.useRealProgressPercentage&&(g=parseFloat(this.props.uploadProgress));if(e){f="_5t36"+(e?" _5t3f":"");a=h.jsx(b("CircularProgressBar.react"),{percentComplete:g,className:f})}else d=h.jsx(b("XUICloseButton.react"),{className:"_5t3o",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"dark"}),c=h.jsx(b("LoadingIndicator.react"),{className:"_1b00",color:"white",size:"medium"});return h.jsxs("div",{className:"_417d",children:[d,a,c]})};return c}(h.PureComponent);a.propTypes={onRemoveButtonClicked:(c=b("prop-types")).func.isRequired,uploadID:c.string.isRequired,uploadState:c.oneOf(Object.keys(b("ReactComposerPhotoUploadState"))).isRequired,uploadProgress:c.number,canSeeCircularProgress:c.bool,useRealProgressPercentage:c.bool,useProgressLinearity:c.number,useProgressTransformX:c.number};e.exports=a}),null);
__d("ReactComposerVideoXUploadPlaceholderContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerVideoXUploadPlaceholder.react","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=b("createReactClass_DEPRECATED")({displayName:"ReactComposerVideoXUploadPlaceholderContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaUploadStore"))],propTypes:{uploadID:b("prop-types").string.isRequired},statics:{calculateState:function(a,c){a=b("ReactComposerMediaUploadStore").getMediaUpload(a,c.uploadID);return{uploadProgress:a.progress,uploadState:a.state,useRealProgressPercentage:a.useRealProgressPercentage,useProgressLinearity:a.useProgressLinearity,useProgressTransformX:a.useProgressTransformX}}},render:function(){return g.jsx(b("ReactComposerVideoXUploadPlaceholder.react"),babelHelpers["extends"]({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked}))},_onRemoveButtonClicked:function(){b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)}});e.exports=a}),null);
__d("ReactComposerDraggableMedia.react",["cx","fbt","Draggable","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerFailedPhotoUploadContainer.react","ReactComposerFailedVideoXUploadContainer.react","ReactComposerMediaUploadActions","ReactComposerMediaUploadType","ReactComposerPhotoActions","ReactComposerPhotoContainer.react","ReactComposerPhotoUploadPlaceholderContainer.react","ReactComposerPhotoUploadState","ReactComposerVideoXContainer.react","ReactComposerVideoXUploadPlaceholderContainer.react","ReactDOM","ReactLayeredComponentMixin_DEPRECATED","SimpleNUXMessage","SimpleNUXMessageTypes","Vector","WorkSharedDraftMode","XUIAmbientNUX.react","createReactClass_DEPRECATED","getObjectValues","prop-types","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=200,k=5,l=b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_DONE;c=b("createReactClass_DEPRECATED")({displayName:"ReactComposerDraggableMedia",_draggable:void 0,_grabbed:void 0,_scrollParent:void 0,_timeoutID:void 0,contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{enableFaceboxTagger:(a=b("prop-types")).bool,productTaggerType:a.string,disablePhotoEditing:a.bool,mediaConfig:a.object.isRequired,upload:a.object.isRequired,nuxConfig:a.object.isRequired,showSphericalSingletonNux:a.bool,draggingPhotos:a.bool,enableMediaDragging:a.bool,disableRemovePhotos:a.bool,index:a.number,updateComponentPosition:a.func.isRequired,onGrab:a.func.isRequired,onDrag:a.func.isRequired,onDrop:a.func.isRequired,selectedActorID:a.oneOfType([a.oneOf([null,void 0]),a.string]),workSharedDraftMode:a.oneOf(b("getObjectValues")(b("WorkSharedDraftMode")))},getInitialState:function(){return{dragging:!1,showSphericalSingletonNux:!1}},UNSAFE_componentWillReceiveProps:function(a){this.props.index!==a.index&&a.index!==void 0&&(this._timeoutID=setTimeout(this._updateComponentPosition,0)),!this.props.showSphericalSingletonNux&&a.showSphericalSingletonNux&&!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").SPHERICAL_SINGLETON_NUX)&&this.setState({showSphericalSingletonNux:!0})},componentDidUpdate:function(a){this.props.enableMediaDragging&&a.upload.state!==l&&this.props.upload.state===l&&!this.props.disableRemovePhotos?this._createDraggable():a.upload.state===l&&this.props.upload.state!==l&&(this._draggable&&this._draggable.destroy())},componentDidMount:function(){this._scrollParent=this._findScrollParent(),this.props.enableMediaDragging&&this.props.upload.state===l&&!this.props.disableRemovePhotos&&this._createDraggable(),this._timeoutID=setTimeout(this._updateComponentPosition,0)},componentWillUnmount:function(){this._draggable&&this._draggable.destroy(),clearTimeout(this._timeoutID)},render:function(){var a=(this.state.dragging?"_2pkn":"")+" _2pko",b=this.props.upload;b=!b.isSpherical&&b.photoID?b.photoID:b.id;return i.jsx("div",{className:a,onClick:this._onClick,ref:"draggable_media",role:"presentation",children:this._getInnerMediaComponent()},b)},renderLayers:function(){return{sphericalSingletonNux:this._sphericalSingletonNux()}},_sphericalSingletonNux:function(){var a=this;return!this.props.showSphericalSingletonNux?null:i.jsx(b("XUIAmbientNUX.react"),{alignment:"left",contextRef:function(){return a.refs.draggable_media},shown:this.state.showSphericalSingletonNux,position:"below",onCloseButtonClick:this._onSphericalSingletonNuxClose,width:"auto",children:h._("Post this photo individually to view in 360\u00b0")})},_onSphericalSingletonNuxClose:function(){this.setState({showSphericalSingletonNux:!1}),b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").SPHERICAL_SINGLETON_NUX)},_getInnerMediaComponent:function(){return this.props.upload.mediaType==b("ReactComposerMediaUploadType").VIDEO?this._getInnerVideoComponent():this._getInnerPhotoComponent()},_getInnerVideoComponent:function(){var a=this.props.upload;if(a.state===l){var c=this._getDragHandler();return i.jsx("div",{"data-testid":void 0,children:i.jsx(b("ReactComposerVideoXContainer.react"),{isSpherical:a.isSphericalVideo,dragHandler:c,label:a.filename,photoID:a.photoID,uploadID:a.id,fileURL:a.fileURL,allowTextOnThumbnail:this.props.mediaConfig.allowTextOnVideoThumbnail,selectedActorID:this.props.selectedActorID,shouldResetVideoComposer:!!this.props.mediaConfig.useVideoUploadDialog,metadata:a.videoMetadata,workSharedDraftMode:this.props.workSharedDraftMode},a.photoID)})}return a.state===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_FAILED?i.jsx(b("ReactComposerFailedVideoXUploadContainer.react"),{error:a.error,filename:a.filename,uploadID:a.id},a.id):i.jsx(b("ReactComposerVideoXUploadPlaceholderContainer.react"),{uploadID:a.id},a.id)},_getInnerPhotoComponent:function(){var a=this.props.upload;if(a.state===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_FAILED)return i.jsx(b("ReactComposerFailedPhotoUploadContainer.react"),{error:a.error,filename:a.filename,mediaConfig:this.props.mediaConfig,uploadID:a.id},a.id);if(a.state===l||a.isSpherical&&a.useLocalSphericalImage&&a.fileURL){var c=this._getDragHandler(),d=!a.isSpherical&&a.photoID?a.photoID:a.id;return i.jsx("div",{"data-testid":void 0,children:i.jsx(b("ReactComposerPhotoContainer.react"),{canTagFromModal:this.props.mediaConfig.canTagFromModal,draggingPhotos:this.props.draggingPhotos,dragHandler:c,enableFaceboxTagger:this.props.enableFaceboxTagger,label:a.filename,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,disableRemovePhotos:this.props.disableRemovePhotos,nuxConfig:this.props.nuxConfig,originalID:a.originalPhotoID,photoID:a.photoID,showProductTaggerNux:this.props.nuxConfig.showProductPhotoTaggerNux&&this.props.index===0,index:this.props.index,sphericalPhotoID:a.sphericalPhotoID,uploadID:a.id,fileURL:a.fileURL,sphericalImage:a.sphericalImage,isSpherical:a.isSpherical,useLocalSphericalImage:a.useLocalSphericalImage,workSharedDraftMode:this.props.workSharedDraftMode},d)})}return i.jsx(b("ReactComposerPhotoUploadPlaceholderContainer.react"),{uploadID:a.id,fileURL:a.fileURL},a.id)},_getDragHandler:function(){var a=this;return{add:function(b){a._draggable&&a._draggable.addHandle(b)},remove:function(b){a._draggable&&a._draggable.removeHandle(b)}}},_createDraggable:function(){this._draggable=new(b("Draggable"))(b("ReactDOM").findDOMNode(this)).setNamespace("ReactComposer").setUseAbsolute(!0).setAvoidKillingEvents(!0).setGutter(k).setGrabHandler(this._onGrab).setDragHandler(b("throttle")(this._onDrag,j)).setDropHandler(this._onDrop),this._updateComponentPosition()},_updateComponentPosition:function(){var a=b("ReactDOM").findDOMNode(this),c=b("Vector").getElementPosition(a);c=this._compensateForScroll(a,c);this.props.updateComponentPosition(this.props.upload.id||this.props.upload.photoID,c,b("Vector").getElementDimensions(a))},_compensateForScroll:function(a,b){return this._scrollParent?b.add(this._scrollParent.scrollLeft,this._scrollParent.scrollTop):b},_findScrollParent:function(){var a=b("ReactDOM").findDOMNode(this);if(a.closest)return a.closest(".fbScrollableAreaWrap");else{var c=document.querySelectorAll(".fbScrollableAreaWrap");while(a&&a.nodeType===1){var d=0;while(c[d]){if(c[d]===a)return a;d++}a=a.parentNode}return null}},_onGrab:function(){if(this.state.dragging)return;this._grabbed=!0;var a=b("ReactDOM").findDOMNode(this);this.props.onGrab(this.props.upload.id||this.props.upload.photoID,a)},_onDrag:function(a){if(!this._grabbed)return;this.setState({dragging:!0});var c=b("ReactDOM").findDOMNode(this);a=this._compensateForScroll(c,a);this.props.onDrag(a)},_onDrop:function(a){this._draggable&&this._draggable.resetPosition();this.setState({dragging:!1});this._grabbed=!1;var c=b("ReactComposerMediaUploadActions").mediaMoved,d=b("ReactDOM").findDOMNode(this);a=this._compensateForScroll(d,a);this.props.onDrop(a,c)},_onClick:function(){b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,this.props.upload.photoID)}});e.exports=c}),null);
__d("ReactComposerGenericPhotoUploadLink.react",["cx","Link.react","React","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("__9u",this.props.className);return h.jsx(b("Link.react"),{className:a,children:this.props.children})};return c}(h.PureComponent);a.propTypes={className:b("prop-types").string};a.defaultProps={className:"__9t"};e.exports=a}),null);
__d("ReactComposerMediaUploadsGrid.react",["cx","fbt","requireCond","FileInput.react","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerDraggableMedia.react","ReactComposerGenericPhotoUploadLink.react","ReactComposerLoggingActions","ReactComposerLoggingName","ReactComposerMediaScrollableArea.react","ReactComposerMediaUploadStore","ReactComposerMediaUploadType","ReactComposerMediaUtils","ReactDOM","WorkSharedDraftMode","cr:1174529","createReactClass_DEPRECATED","getObjectValues","immutable","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=112;c=b("createReactClass_DEPRECATED")({displayName:"ReactComposerMediaUploadsGrid",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{enableFaceboxTagger:(a=b("prop-types")).bool,productTaggerType:a.string,disablePhotoEditing:a.bool,disableRemovePhotos:a.bool,addMorePhotosConfig:a.shape({maxPhotos:a.number}).isRequired,mediaAcceptParam:a.string,mediaConfig:a.object.isRequired,nuxConfig:a.object.isRequired,onFilesSelected:a.func,canUploadMultiplePhotos:a.bool,uploads:a.instanceOf(b("immutable").List).isRequired,uploadCount:a.number,sphericalSingletonNuxUpload:a.object,onDrop:a.func,photoUploadLink:a.element,scrollableAreaHeight:a.number.isRequired,selectedActorID:a.oneOfType([a.oneOf([null,void 0]),a.string]),sourceIndex:a.number,targetIndex:a.number,targetSupportsMultiMedia:a.bool,updateComponentPosition:a.func.isRequired,workSharedDraftMode:a.oneOf(b("getObjectValues")(b("WorkSharedDraftMode")))},getDefaultProps:function(){return{addMorePhotosConfig:{},canUploadMultiplePhotos:!1,photoUploadLink:i.jsx(b("ReactComposerGenericPhotoUploadLink.react"),{}),scrollableAreaHeight:j,showSellUploadLink:!1}},render:function(){return i.jsx("div",{className:"_kkp",children:i.jsx("div",{className:b("joinClasses")("_kkq",this.props.className),children:i.jsxs(b("ReactComposerMediaScrollableArea.react"),{fade:!0,getAddMoreDOM:this._getAddMoreDOM,height:this.props.scrollableAreaHeight,photosCount:this.props.uploads.size,scrollbar:"fade",verticalScroll:!0,children:[this.props.children,this._getComponents(),this._getAddMorePhotosButton()]})})})},componentDidUpdate:function(a){if(b("cr:1174529")!==null&&this.props.uploads.last().mediaType==="VIDEO"&&this._lastVideoFinishedUpload(a)){a=this.context.composerID;var c=this.props.uploads.last().photoID,d=this.props.uploads.last().videoMetadata.format.duration;b("cr:1174529").autoGenerate(a,this.props.selectedActorID,c,d,this.props.workSharedDraftMode)}},_lastVideoFinishedUpload:function(a){return a.uploads.last().photoID===null&&this.props.uploads.last().photoID!==null},_onAddMorePhotosClick:function(){b("ReactComposerLoggingActions").mediaUploadInputClicked(this.context.composerID,b("ReactComposerLoggingName").MEDIA_UPLOADS_PLUS_BUTTON)},_onFilesSelected:function(a){if(this.props.onFilesSelected){var c=this.props.onFilesSelected;c(a,this.refs.fileInput.getFileInput())}b("ReactComposerMediaUtils").clearInput(this.refs.fileInput.getFileInput(),!0)},_getAddMorePhotosButton:function(){if(this.props.targetSupportsMultiMedia===!1){var a=b("ReactComposerMediaUploadStore").getUploadsOfType(this.context.composerID,b("ReactComposerMediaUploadType").VIDEO);if(a&&a.size>0)return null}if(!this.props.canUploadMultiplePhotos&&this.props.uploads.size>0)return null;return this.props.addMorePhotosConfig.maxPhotos&&this.props.uploads.size>=this.props.addMorePhotosConfig.maxPhotos?null:i.jsx("span",{ref:"addMore",className:"_kkr",children:i.jsx(b("FileInput.react"),{accept:this.props.mediaAcceptParam,multiple:this.props.canUploadMultiplePhotos,name:"composer_photo",onChange:this._onFilesSelected,onClick:this._onAddMorePhotosClick,ref:"fileInput",title:h._("Choose a file to upload"),"data-testid":void 0,children:this.props.photoUploadLink})})},_getComponents:function(){var a=this,b=this.props.uploads.toSeq().filter(function(b,c){return c!==a.props.sourceIndex}).map(function(b,c){return a._getDraggablePhoto(b,c)});if(this.props.targetIndex!=null){var c=i.jsx("div",{className:"_kks"},"placeholder");b=b.splice(this.props.targetIndex,0,c)}this.props.sourceIndex!=null&&(b=b.splice(this.props.sourceIndex,0,this._getDraggablePhoto(this.props.uploads.get(this.props.sourceIndex))));return b.toArray()},_getDraggablePhoto:function(a,c){return i.jsx(b("ReactComposerDraggableMedia.react"),{enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,disableRemovePhotos:this.props.disableRemovePhotos,upload:a,nuxConfig:this.props.nuxConfig,showSphericalSingletonNux:a===this.props.sphericalSingletonNuxUpload,draggingPhotos:this.props.sourceIndex!=null,enableMediaDragging:!0,index:c,mediaConfig:this.props.mediaConfig,updateComponentPosition:this.props.updateComponentPosition,onGrab:this.props.onGrab,onDrag:this.props.onDrag,onDrop:this.props.onDrop,selectedActorID:this.props.selectedActorID,workSharedDraftMode:this.props.workSharedDraftMode},a.id)},_getAddMoreDOM:function(){return b("ReactDOM").findDOMNode(this.refs.addMore)}});e.exports=c}),null);
__d("ReactComposerMediaUploadsGridContainer.react",["Locale","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadsGrid.react","ReactDOM","Rect","Vector","WorkSharedDraftMode","createReactClass_DEPRECATED","getObjectValues","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("createReactClass_DEPRECATED")({displayName:"ReactComposerMediaUploadsGridContainer",_componentsPosition:{},contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{photoUploadLink:(a=b("prop-types")).element,enableFaceboxTagger:a.bool,productTaggerType:a.string,disablePhotoEditing:a.bool,showSellUploadLink:a.bool,disableRemovePhotos:a.bool,selectedActorID:a.oneOfType([a.oneOf([null,void 0]),a.string]),workSharedDraftMode:a.oneOf(b("getObjectValues")(b("WorkSharedDraftMode")))},getInitialState:function(){return{rtl:b("Locale").isRTL(),sourceIndex:null,targetIndex:null,uploads:this.props.uploads,sphericalSingletonNuxUpload:null}},UNSAFE_componentWillReceiveProps:function(a){if(this.state.uploads!==a.uploads){var b=a.uploads.toSeq().filter(function(a){return a.canShowSphericalSingletonNux}).first();this.setState({uploads:a.uploads,sphericalSingletonNuxUpload:b})}},render:function(){return g.jsx(b("ReactComposerMediaUploadsGrid.react"),babelHelpers["extends"]({},this.props,{onGrab:this._onGrab,onDrag:this._onDrag,onDrop:this._onDrop,sourceIndex:this.state.sourceIndex,targetIndex:this.state.targetIndex,updateComponentPosition:this._updateComponentPosition,uploads:this.state.uploads,sphericalSingletonNuxUpload:this.state.sphericalSingletonNuxUpload}))},_onGrab:function(a,b){b=this.state.uploads.findIndex(function(b){return b.id===a});this.setState({sourceIndex:b,targetIndex:b})},_onDrag:function(a){var c=b("Vector").getElementPosition(b("ReactDOM").findDOMNode(this));a=a.sub(c);this.setState({targetIndex:this._getTargetID(a)})},_onDrop:function(a,b){this._onDrag(a);a=this.state.sourceIndex;var c=this.state.targetIndex;if(a==null||c==null)return;if(a!==c){var d=this.state.uploads;d=d.splice(a,1).splice(c,0,d.get(a));this.setState({uploads:d});b(this.context.composerID,a,c)}this._endDrag()},_endDrag:function(){this.setState({sourceIndex:null,targetIndex:null})},_getTargetID:function(a){var b=this.state.uploads,c=this.state.rtl?function(b,a){return b.right>=a.x}:function(b,a){return b.left<=a.x};for(var d=b.size-1;d>=0;d--){var e=b.get(d);e=e.id;e=this._componentsPosition[e];if(c(e,a))return d}return 0},_updateComponentPosition:function(a,c,d){var e=new(b("Rect"))(b("ReactDOM").findDOMNode(this));this._componentsPosition[a]={left:c.x-e.l,right:c.x-e.l+d.x}}});e.exports=c}),null);
__d("ReactComposerVideoUploadPlaceholder.react",["cx","ix","FBLogger","Image.react","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","XUICloseButton.react","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=b("createReactClass_DEPRECATED")({displayName:"ReactComposerVideoUploadPlaceholder",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerStore"))],propTypes:{onRemoveClick:b("prop-types").func},statics:{calculateState:function(a,c){return{posting:b("ReactComposerStore").isPosting(a)}}},componentDidMount:function(){this.context.gks.isUserComposer&&b("FBLogger")("Page composer boundary test").info("Page user uploads a video without video dialog")},render:function(){var a="_2oe _5ip5",c="_3ew _5iph",d=this.state.posting?null:i.jsx(b("XUICloseButton.react"),{className:"_5ipi",onClick:this.props.onRemoveClick,shade:"light",size:"medium"});return i.jsxs("div",{className:a,children:[d,i.jsx(b("Image.react"),{className:c,src:h("82359")})]})}});e.exports=a}),null);
__d("ReactComposerVideoUploadPlaceholderContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerVideoUploadActions","ReactComposerVideoUploadPlaceholder.react","createReactClass_DEPRECATED"],(function(a,b,c,d,e,f){var g=b("React");a=b("createReactClass_DEPRECATED")({displayName:"ReactComposerVideoUploadPlaceholderContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],render:function(){return g.jsx(b("ReactComposerVideoUploadPlaceholder.react"),{onRemoveClick:this._onRemoveClick})},_onRemoveClick:function(){b("ReactComposerVideoUploadActions").remove(this.context.composerID)}});e.exports=a}),null);
__d("ReactComposerVideoUploadProgressBar.react",["cx","DOMContainer.react","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx("div",{className:"_4340",children:h.jsx(b("DOMContainer.react"),{children:this.props.progressBar})})};return c}(h.PureComponent);a.propTypes={progressBar:b("prop-types").instanceOf(HTMLElement).isRequired};e.exports=a}),null);
__d("ReactComposerMediaAttachment.react",["cx","fbt","JSResource","PagesComposerContextUtils","React","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerContextTypes","ReactComposerCrossPostToInstagramRow.react","ReactComposerDragDropPromptContainer.react","ReactComposerFundraiserAttachmentContainerGated","ReactComposerLazyProfilePhotoBlock.react","ReactComposerMediaAttachmentButtons.react","ReactComposerMediaUploadsGridContainer.react","ReactComposerSproutsDisplayState","ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react","ReactComposerStatusFooterContainer.react","ReactComposerStatusUtils","ReactComposerSupportNowAttachmentContainerGated","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerSummaryContainer.react","ReactComposerTaggerType","ReactComposerVideoUploadPlaceholderContainer.react","ReactComposerVideoUploadProgressBar.react","ReactDOM","cxMargin","immutable","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("PagesComposerContextUtils").getIsPageComposer,j=b("React"),k=b("ReactComposerFundraiserAttachmentContainerGated").module,l=b("ReactComposerSupportNowAttachmentContainerGated").module,m=(a=b("lazyLoadComponent"))((c=b("JSResource"))("ReactComposerPostValueCTAContainer.react").__setRef("ReactComposerMediaAttachment.react")),n=a(c("ReactComposerConditionalPhotoChooserContainer.react").__setRef("ReactComposerMediaAttachment.react")),o=a(c("ReactComposerAYMTTip.react").__setRef("ReactComposerMediaAttachment.react")),p=a(c("ReactComposerTagEventTicketMicroAttachmentContainer.react").__setRef("ReactComposerMediaAttachment.react"));d=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=0,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props.uploads.size>0&&!this.props.slideshowDialogOpen||!!this.props.video||this.props.shouldShowAlbumLink&&!this.props.createAlbumLink||this.props.shouldShowCanvasSelector||this.props.shouldShowCarouselURLInputArea||this.props.shouldShowPreview||this.props.isCollectionSelected||this.props.isSlideshowSelected;return a?this.$2():this.$3()};d.componentDidMount=function(){var a=b("ReactDOM").findDOMNode(this);this.$1=a?a.clientWidth:0;a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS];a&&b("ReactComposerStatusUtils").handleMarkdownPreview(this.context.composerID,this.context.targetID,a.markdownPreviewAttachment)};d.componentDidUpdate=function(){var a=this.props.video!=null,c=b("ReactComposerTaggerStore").getComposerHasVideoUploads(this.context.composerID);a!==c&&b("ReactComposerTaggerActions").setComposerHasVideoUploads(this.context.composerID,a)};d.$3=function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],c=null;if(a.PageComposerMediaAttachmentButtons){var d=a.PageComposerMediaAttachmentButtons;c=j.jsx(d,{canUploadPhotos:a.canUploadPhoto,canvasConfig:a.canvasConfig,carouselConfig:a.carouselConfig,collectionConfig:a.collectionConfig,createAlbumLink:this.props.createAlbumLink,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected,showCanvasEntryPoint:a.showCanvasEntryPoint,showCollectionEntryPoint:a.showCollectionEntryPoint,showCarouselEntryPoint:a.showCarouselEntryPoint,showMultipostEntryPoint:a.showMultipostEntryPoint,showBulkUploadEntryPoint:a.showBulkUploadEntryPoint,showPhotoAlbumEntryPoint:a.showPhotoAlbumEntryPoint,showSlideshowEntryPoint:a.showSlideshowEntryPoint,showUploadPhotosButton:a.showUploadPhotosButton,slideshowConfig:a.slideshowConfig,targetData:this.props.config.targetData})}else c=j.jsx(b("ReactComposerMediaAttachmentButtons.react"),{canUploadPhotos:a.canUploadPhoto,createAlbumLink:this.props.createAlbumLink,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected,targetData:this.props.config.targetData,showSlideshowNewDesign:a.showSlideshowNewDesign});d=this.context.gks&&this.context.gks.isSproutsComposer;a=d?j.jsx(b("ReactComposerStatusFooterContainer.react"),{background:"white",isCameraIconEnabled:!1,attachmentsConfig:this.props.config.attachmentsConfig,audienceXHP:this.props.config.audienceXHP,config:this.props.config,mediaAcceptParam:this.props.config.mediaAcceptParam,postButtonModule:this.props.postButtonModule,targetData:this.props.config.targetData,additionalFooterActions:this.props.additionalFooterActions,taggersConfig:this.props.config.taggersConfig}):null;return j.jsxs("div",{children:[j.jsx(b("ReactComposerDragDropPromptContainer.react"),{root:this,config:this.props.config}),c,a]})};d.$2=function(){var a,c=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],d=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS];a=(a=c)!=null?(a=a.carouselConfig)!=null?a.PhotoCarouselUtils:a:a;if(this.props.shouldShowPreview){var e=c.ComposerAttachmentPreviewContainer,f=j.jsx("div",{});e&&(f=j.jsx(e,{}));if(this.props.shouldShowCanvasSelector){e=c.canvasConfig.TypeaheadContainer;e=j.jsxs("div",{children:[f,j.jsx(e,{config:c.canvasConfig})]})}else e=f}else if(this.props.shouldShowCarouselURLInputArea&&a)e=a.getPhotoCarouselMediaContent(c.carouselConfig,this.props.config.nuxConfig);else if(this.props.shouldShowCanvasSelector){f=c.canvasConfig;a=f.TypeaheadContainer;e=j.jsx(a,{config:f})}else if(this.props.isSlideshowSelected){a=c.slideshowConfig.thumbnailViewContainer;e=j.jsx(a,{maxSelectedImages:c.slideshowConfig.maxPhotoNum,mediaAcceptParam:this.props.config.mediaAcceptParam&&this.props.config.mediaAcceptParam.photos,pageID:c.slideshowConfig.pageID,onFilesSelected:this.props.onFilesSelected})}else if(this.props.isCollectionSelected){f=c.collectionConfig.previewContainer;e=j.jsx(f,{config:c.collectionConfig})}else if(this.props.video)e=j.jsxs("div",{children:[j.jsx(b("ReactComposerVideoUploadPlaceholderContainer.react"),{}),j.jsx(b("ReactComposerVideoUploadProgressBar.react"),{progressBar:this.props.videoProgressBar})]});else if(this.props.customizedPreviewMediaContent)e=this.props.customizedPreviewMediaContent;else{a=this.props.config.taggersConfig&&this.props.config.taggersConfig[b("ReactComposerTaggerType").PRODUCT]&&this.props.config.taggersConfig[b("ReactComposerTaggerType").PRODUCT].enabled?this.props.config.taggersConfig[b("ReactComposerTaggerType").PRODUCT].productTaggerType:"none";e=j.jsx(b("ReactComposerMediaUploadsGridContainer.react"),{enableFaceboxTagger:!c.disableFaceboxTagger,productTaggerType:a,disablePhotoEditing:c.disablePhotoEditing,disableRemovePhotos:this.props.prefillConfig?this.props.prefillConfig.disableRemovePhotos:!1,mediaConfig:c,mediaAcceptParam:this.props.config.mediaAcceptParam&&this.props.config.mediaAcceptParam.both,nuxConfig:this.props.config.nuxConfig,onFilesSelected:this.props.onFilesSelected,canUploadMultiplePhotos:this.props.config.targetData.targetSupportsMultiplePhotos||i(this.context.composerType),targetSupportsMultiMedia:this.props.config.targetData.targetSupportsMultiMedia,selectedActorID:(f=this.props.config.actorConfig)==null?void 0:f.selectedActorID,uploads:this.props.uploads,workSharedDraftMode:(a=this.props.config.actorConfig)==null?void 0:a.workSharedDraftMode})}f=this.props.sproutsDisplayState===b("ReactComposerSproutsDisplayState").INLINE;a=this.context.gks&&this.context.gks.lazySproutsExpand?this.props.isComposerFocused:!f;a||(e=null);f=null;this.props.shouldShowConditionalPhotoChooser&&this.props.uploads.size>1&&(f=j.jsx(j.Suspense,{fallback:j.jsx("div",{}),children:j.jsx(n,{numberOfUploads:this.props.uploads.size,slideshowConfig:c.slideshowConfig,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected})}));a=null;this.props.shouldShowPostValueCTAUpsell&&(a=j.jsx(j.Suspense,{fallback:j.jsx("div",{}),children:j.jsx(m,{config:this.props.config,mediaCount:this.props.uploads.size})}));var g=c.hideMentionsInput?j.jsx("div",{className:"_3-8y"}):j.jsx(b("ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react"),{config:this.props.config,handlePastedText:this.props.handlePastedText,onFocus:this.props.onMentionsInputFocus,onChange:this.props.onMentionsInputChange,onPasteFiles:c.disableUploadOnDragDropAndPaste?null:this.props.onPasteFiles,placeholder:this.$4()}),h=d.multilingualStatus?j.jsx(d.multilingualStatus,{}):null;g=j.jsxs("div",{children:[g,h]});if(b("ReactComposerAttachmentStore").getIsAnonymousAttachmentSelected(this.context.composerID)){h=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").ANONYMOUS_GROUP_POST];g=j.jsx(b("ReactComposerLazyProfilePhotoBlock.react"),{config:this.props.config,profileName:h.profileConfig.profileName,profilePicSrc:h.profileConfig.profilePicSrc,useVoiceSwitcher:!1,children:g})}else d.showProfilePic&&(g=j.jsx(b("ReactComposerLazyProfilePhotoBlock.react"),{config:this.props.config,profilePicSrc:d.profilePicSrc,profileURI:d.profileURI,useVoiceSwitcher:this.props.showProfileVoiceSwitcher,children:g}));h=d?d.markdownPreviewAttachment:null;var q=null;if(h){var r=h.container;q=j.jsx(r,{prettify:h.prettify,isMarkdownForInternalEmployee:h.isMarkdownForInternalEmployee,isMarkdownWideAllowed:h.isMarkdownWideAllowed,isMarkdownWideDefault:h.isMarkdownWideDefault})}r=d.donateButtonConfig;h=null;if(r){var s=r.donateButtonContainer;h=j.jsx(s,{charityName:r.charityName,fundraiserCampaignId:r.fundraiserCampaignId})}s=null;if(d.topicFeedsTagger){r=d.topicFeedsTagger;var t=r.container;s=j.jsx(t,{composerFeedID:r.composerFeedID,photoAutoTaggingDelay:r.photoAutoTaggingDelay,photoPollingDuration:r.photoPollingDuration,photoPollingInterval:r.photoPollingInterval,showNux:r.showNux,textAutoTaggingDelay:r.textAutoTaggingDelay,darkLaunch:r.darkLaunch})}t=null;if(d.groupPostTagsTagger){r=d.groupPostTagsTagger;var u=r.container;t=j.jsx(u,{tagsLimit:r.tagsLimit,groupID:r.groupID,passLaunchGK:r.passLaunchGK})}u=!this.props.shouldShowCarouselURLInputArea&&!this.props.isSlideshowSelected;r=null;var v=d.aymtTipConfig;v&&v.isEligible&&(r=j.jsx(j.Suspense,{fallback:j.jsx("div",{}),children:j.jsx(o,{pageID:Number(v.pageID),minLength:v.minContentLength})}));v=null;this.props.config.instagramCrossPostingEnabled&&this.props.uploads.size==1&&!this.props.videoUploadsCount&&(v=j.jsx(b("ReactComposerCrossPostToInstagramRow.react"),{composerID:this.context.composerID}));var w=null;k&&(w=j.jsx(k,{}));var x=null;l&&(x=j.jsx(l,{}));var y=null;if(this.props.isOfferLikePost&&d&&d.offerLikePostUpsellInlineBanner){var z=[];for(var A=0;A<this.props.uploads.size;A++){var B=this.props.uploads.get(A).photoID;B&&z.push(B)}B=d.offerLikePostUpsellInlineBanner;y=j.jsx(B,{actorID:this.context.actorID,composerID:this.context.composerID,pageID:d.pageID,photoIDs:z,text:this.props.offerLikePostText||""})}A=c.disableUploadOnDragDropAndPaste?null:j.jsx(b("ReactComposerDragDropPromptContainer.react"),{root:this,config:this.props.config});B=this.props.taggersConfig?this.props.taggersConfig:this.props.config.taggersConfig;d=B&&B[b("ReactComposerTaggerType").TAG_EVENT_TICKET]&&B[b("ReactComposerTaggerType").TAG_EVENT_TICKET].enabled?j.jsx(j.Suspense,{fallback:j.jsx("div",{}),children:j.jsx(p,{composerID:this.context.composerID})}):null;return j.jsxs("div",{className:"_2_lq","data-testid":void 0,children:[A,j.jsx("div",{className:"_4wbt",children:j.jsxs("div",{children:[g,this.props.children,q,h,w,d,j.jsx(b("ReactComposerTaggerSummaryContainer.react"),{}),e,f,x,a]})}),s,t,r,v,y,j.jsx(b("ReactComposerStatusFooterContainer.react"),{additionalTaggers:this.props.additionalTaggers,additionalFooterActions:this.props.additionalFooterActions,attachmentsConfig:this.props.config.attachmentsConfig,audienceXHP:this.props.config.audienceXHP,config:this.props.config,isCameraIconEnabled:u,locationTaggerPlaceholder:this.$5(),mediaAcceptParam:this.props.config.mediaAcceptParam,peopleTaggerPlaceholder:this.$6(),postButtonLabel:this.props.postButtonLabel?this.props.postButtonLabel:void 0,postButtonModule:this.props.postButtonModule,taggersConfig:B,targetData:this.props.targetData||this.props.config.targetData})]})};d.$5=function(){if(this.props.video)return h._("Where was this taken?");if(this.props.uploads.size>1)return h._("Where were these photos taken?");return this.props.uploads.size===1?h._("Where was this photo taken?"):null};d.$6=function(){return!!this.props.video||this.props.uploads.size>0?h._("Who were you with?"):null};d.$4=function(){var a;if(this.props.placeholder)return this.props.placeholder;var c=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];a=(a=c)!=null?(a=a.carouselConfig)!=null?a.PhotoCarouselUtils:a:a;if(this.props.video||this.props.uploads.size===1&&this.props.videoUploadsCount===1)return h._("Say something about this video...");else if(this.props.isSlideshowSelected)return h._("Say something about this slideshow...");else if(this.props.uploads.size>1)if(this.props.photoUploadsCount===0)return h._("Say something about these videos...");else if(this.props.videoUploadsCount===0)if(this.props.sphericalPhotoUploadsCount===this.props.photoUploadsCount)return h._("Say something about these 360 photos...");else return h._("Say something about these photos...");else return h._("Say something about these media...");else if(a&&(this.props.shouldShowCarouselURLInputArea||this.props.shouldShowPreview))return a.getInputPlaceHolder(c.carouselConfig,this.props.shouldShowPreview);else if(this.props.sphericalPhotoUploadsCount)return h._("Say something about this 360 photo...");else return h._("Say something about this photo...")};return c}(j.Component);d.contextTypes=b("ReactComposerContextTypes");e.exports=d}),null);
__d("ReactComposerCanvasStore",["ReactComposerCanvasActionType","ReactComposerStoreBase"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;c=a.call(this,function(){return{shouldShowCanvasSelector:!1,isCanvasSelected:!1}},function(a){switch(a.type){case b("ReactComposerCanvasActionType").SHOW_CANVAS_SELECTOR:d&&d.$ReactComposerCanvasStore1(a);break;case b("ReactComposerCanvasActionType").HIDE_CANVAS_SELECTOR:d&&d.$ReactComposerCanvasStore2(a);break;default:break}})||this;d=babelHelpers.assertThisInitialized(c);return c}var d=c.prototype;d.$ReactComposerCanvasStore1=function(a){a=a.composerID;var b=this.getComposerData(a);b.shouldShowCanvasSelector=!0;b.isCanvasSelected=!0;this.emitChange(a)};d.$ReactComposerCanvasStore2=function(a){a=a.composerID;var b=this.getComposerData(a);b.shouldShowCanvasSelector=!1;b.isCanvasSelected=!1;this.emitChange(a)};d.shouldShowCanvasSelector=function(a){return this.getComposerData(a).shouldShowCanvasSelector};d.isCanvasSelected=function(a){return this.getComposerData(a).isCanvasSelected};return c}(b("ReactComposerStoreBase"));e.exports=new a()}),null);
__d("XReactComposerCollectionAttachmentBootstrapController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/collection/bootstrap/",{composer_id:{type:"String",required:!0},canvas_id:{type:"FBID",required:!0},target_id:{type:"FBID",required:!0}})}),null);
__d("XReactComposerCollectionAttachmentPublishController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/collection/publish/",{canvas_id:{type:"FBID",required:!0},featured_retailer_ids:{type:"StringSet",required:!0}})}),null);
__d("ReactComposerCollectionStore",["ActorURI","AsyncRequest","Bootloader","ReactComposerActionTypes","ReactComposerCollectionActionType","ReactComposerStoreBase","XReactComposerCollectionAttachmentBootstrapController","XReactComposerCollectionAttachmentPublishController"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;c=a.call(this,function(){return{actorID:null,attachmentConfig:{},canvasID:null,defaultCanvasID:null,featuredRetailerIDs:["0","0","0","0"],featuredRetailerImages:[],heroImage:null,heroVideo:null,isCollectionSelected:!1,isLoading:!1,itemIDs:[],itemImages:[],productCatalogVertical:null,productSetID:null,templateID:null}},function(a){switch(a.type){case b("ReactComposerCollectionActionType").ATTACHMENT_SELECT_COLLECTION:d&&d.$ReactComposerCollectionStore1(a);break;case b("ReactComposerCollectionActionType").ATTACHMENT_CANCEL_COLLECTION:d&&d.$ReactComposerCollectionStore2(a);break;case b("ReactComposerCollectionActionType").SET_COLLECTION:d&&d.$ReactComposerCollectionStore3(a);break;case b("ReactComposerCollectionActionType").SET_POST_TITLE:d&&d.$ReactComposerCollectionStore4(a);break;case b("ReactComposerCollectionActionType").SET_PRODUCT_SET_ID:d&&d.$ReactComposerCollectionStore5(a);break;case b("ReactComposerCollectionActionType").SET_FEATURED_PRODUCT_IDS:d&&d.$ReactComposerCollectionStore6(a);break;case b("ReactComposerCollectionActionType").SHOW_FEATURED_PRODUCT_DIALOG:d&&d.$ReactComposerCollectionStore7(a,!0);break;case b("ReactComposerCollectionActionType").HIDE_FEATURED_PRODUCT_DIALOG:d&&d.$ReactComposerCollectionStore7(a,!1);break;case b("ReactComposerCollectionActionType").UPDATE_COLLECTION_DIALOG_VISIBILITY:d&&d.$ReactComposerCollectionStore8(a);break;case b("ReactComposerCollectionActionType").SET_DEFAULT_CANVAS_AND_TEMPLATE_ID:d&&d.$ReactComposerCollectionStore9(a);break;case b("ReactComposerActionTypes").POST_STARTED:d&&d.$ReactComposerCollectionStore10(a);break;case b("ReactComposerActionTypes").PUBLISH_STARTED:d&&d.$ReactComposerCollectionStore11(a);break;default:break}})||this;d=babelHelpers.assertThisInitialized(c);return c}var d=c.prototype;d.$ReactComposerCollectionStore12=function(a,b){var c=this.getComposerData(a);b=Object.entries(b).filter(function(b){var a=b[0];b=b[1];return c[a]!==b});if(b.length){for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];c[g]=f}this.emitChange(a)}};d.$ReactComposerCollectionStore2=function(a){a=this.validateAction(a,"composerID");this.clearComposerData(a);this.emitChange(a)};d.$ReactComposerCollectionStore1=function(a){a=this.validateAction(a,["actorID","composerID","canvasID","targetID"]);var c=a[0],d=a[1],e=a[2];a=a[3];a=b("XReactComposerCollectionAttachmentBootstrapController").getURIBuilder().setString("composer_id",d).setFBID("canvas_id",e).setFBID("target_id",a).getURI();a=b("ActorURI").create(a,c);new(b("AsyncRequest"))(a).send();this.$ReactComposerCollectionStore12(d,{attachmentConfig:{},canvasID:e,isCollectionSelected:!!e,isLoading:!0})};d.$ReactComposerCollectionStore10=function(a){a=this.validateAction(a,["actorID","composerID"]);var b=a[0];a=a[1];a=this.getComposerData(a);if(!a.isCollectionSelected)return;a.actorID=b};d.$ReactComposerCollectionStore11=function(a){a=this.validateAction(a,"composerID");var c=this.getComposerData(a);if(!c.actorID)return;var d=b("XReactComposerCollectionAttachmentPublishController").getURIBuilder().setFBID("canvas_id",c.canvasID).setStringSet("featured_retailer_ids",c.featuredRetailerIDs).getURI();d=b("ActorURI").create(d,c.actorID);new(b("AsyncRequest"))(d).send();c.actorID=null;this.$ReactComposerCollectionStore8({composerID:a,isVisible:!1,canvasID:null})};d.$ReactComposerCollectionStore3=function(a){var b=a.composerID,c=a.postTitle;a=babelHelpers.objectWithoutPropertiesLoose(a,["composerID","postTitle"]);var d=a.attachmentConfig.params;d.title=c;a.heroImage?d.images.push(a.heroImage):a.heroVideo&&d.video.push(a.heroVideo);a.isLoading=!1;this.$ReactComposerCollectionStore12(b,a)};d.$ReactComposerCollectionStore4=function(a){a=this.validateAction(a,["composerID","postTitle"]);var b=a[0];a=a[1];var c=this.getComposerData(b);c.attachmentConfig.params.title=a;this.emitChange(b)};d.$ReactComposerCollectionStore5=function(a){a=this.validateAction(a,["composerID","productSetID","productCatalogVertical"]);var b=a[0],c=a[1];a=a[2];var d=this.getComposerData(b);d.productSetID=c;d.productCatalogVertical=a;this.emitChange(b)};d.$ReactComposerCollectionStore7=function(a,b){a=this.validateAction(a,"composerID");var c=this.getComposerData(a);c.shouldShowFeaturedProductDialog=b;this.emitChange(a)};d.$ReactComposerCollectionStore6=function(a){a=this.validateAction(a,["composerID","featuredRetailerIDs","featuredRetailerImages"]);var b=a[0],c=a[1];a=a[2];var d=this.getComposerData(b);d.featuredRetailerIDs=c;d.featuredRetailerImages=a;this.emitChange(b)};d.$ReactComposerCollectionStore8=function(a){var c=this;b("Bootloader").loadModules(["AdsCanvasInlineBuilderActions"],function(b){var d=c.validateAction(a,["composerID","isVisible"]),e=d[0];d=d[1];var f=a.canvasID;e=c.getComposerData(e);var g=e.defaultCanvasID;e=e.templateID;b.setShowInlineModal(d,f||g,e)},"ReactComposerCollectionStore")};d.$ReactComposerCollectionStore9=function(a){a=this.validateAction(a,["composerID","defaultCanvasID","templateID"]);var b=a[0],c=a[1];a=a[2];this.$ReactComposerCollectionStore12(b,{defaultCanvasID:c,templateID:a})};d.shouldShowFeaturedProductDialog=function(a){return this.getComposerData(a).shouldShowFeaturedProductDialog};d.isCollectionSelected=function(a){return this.getComposerData(a).isCollectionSelected};d.isLoading=function(a){return this.getComposerData(a).isLoading};d.getAttachmentConfig=function(a){a=this.getComposerData(a);a=a.attachmentConfig;return a.params?a:null};d.getCanvasID=function(a){return this.getComposerData(a).canvasID};d.getHeroImage=function(a){return this.getComposerData(a).heroImage};d.getHeroVideo=function(a){return this.getComposerData(a).heroVideo};d.getItemImages=function(a){a=this.getComposerData(a);var b=a.featuredRetailerIDs,c=a.featuredRetailerImages,d=a.itemIDs;a=a.itemImages;var e=b.reduce(function(a,b){a[b]=!0;return a},{});b=a.filter(function(a,b){return!e[d[b]]});return c.concat(b).slice(0,4)};d.getPostTitle=function(a){a=this.getComposerData(a);a=a.attachmentConfig.params;return a?a.title:""};d.getProductCatalogVertical=function(a){return this.getComposerData(a).productCatalogVertical};d.getProductSetID=function(a){return this.getComposerData(a).productSetID};return c}(b("ReactComposerStoreBase"));e.exports=new a()}),null);
__d("VideoPermalinkText.react",["cx","React","XUITextInput.react","XVideoPermalinkController"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){return b("XVideoPermalinkController").getURIBuilder().setInt("video_id",this.props.videoID).setString("vanity",this.props.targetID).getURI().getQualifiedURI().toString()};d.render=function(){var a=this;return h.jsx(b("XUITextInput.react"),{className:"_9_1",value:this.$1(),size:85,height:"tall",ref:"permalink_field",onFocus:function(){return a.refs.permalink_field.getTextFieldDOM().select()}})};return c}(h.Component);e.exports=a}),null);
__d("VideoUploadProcessingDialog.react",["fbt","ActorURI","React","VideoLibraryButton.react","VideoPermalinkText.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCloseButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XVideoEditController","XVideoEditDialogController","prop-types"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={dialogShown:!0},c.$1=function(a){c.setState({dialogShown:a}),!a&&c.props.onClose&&c.props.onClose()},c.$2=function(){c.setState({dialogShown:!1})},c.$4=function(){return c.props.isSecretVideo?g._("Processing secret video"):g._("Processing Video")},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.show&&this.setState({dialogShown:!0})};d.$3=function(){if(this.props.isReferenceVideo)return g._("Your reference file is now processing. We will send you a notification when it's ready and monitored.");else if(this.props.isSecretVideo)return h.jsxs("div",{children:[g._("Your secret video is now processing. We will notify you when it is it ready to view at the following location:"),h.jsx(b("VideoPermalinkText.react"),{targetID:String(this.context&&this.context.targetID||this.props.pageID),videoID:this.props.videoID})]});else return g._("Your video is now being processed. We will send you a notification when it's ready to view.")};d.render=function(){var a,c=g._("Edit Video"),d;this.props.isReferenceVideo?d=null:this.props.shouldShowNewEditDialog&&this.props.pageID?(a=b("XVideoEditDialogController").getURIBuilder().setInt("video_id",this.props.videoID).setEnum("source","processing_dialog").getURI(),a=b("ActorURI").create(a,this.props.pageID),d=h.jsx(b("XUIDialogButton.react"),{action:"confirm",label:c,href:a,onClick:this.$2,rel:"dialog"})):(a=b("XVideoEditController").getURIBuilder().setInt("v",this.props.videoID).setEnum("source","processing_dialog").getURI(),d=h.jsx(b("XUIDialogButton.react"),{action:"confirm",label:c,href:a,onClick:this.$2,target:"_blank"}));c=null;this.props.shouldShowVideoLibrary&&(c=h.jsx(b("VideoLibraryButton.react"),{pageID:this.props.pageID,size:"medium",source:"video_upload_confirmation_dialog",refSource:"video_upload_confirmation_dialog"}));return h.jsxs(b("XUIDialog.react"),{shown:this.state.dialogShown,width:400,onToggle:this.$1,children:[h.jsx(b("XUIDialogTitle.react"),{children:this.$4()}),h.jsx(b("XUIDialogBody.react"),{children:this.$3()}),h.jsxs(b("XUIDialogFooter.react"),{leftContent:c,children:[h.jsx(b("XUIDialogCloseButton.react"),{}),d]})]},"dialog")};return c}(h.Component);a.propTypes={onClose:(c=b("prop-types")).func,shouldShowNewEditDialog:c.bool,isReferenceVideo:c.bool,shouldShowVideoLibrary:c.bool};e.exports=a}),null);
__d("ReactComposerVideoUploader",["invariant","Arbiter","DOM","DOMClone","ErrorDialog","QE","React","ReactComposerActions","ReactComposerPostUtilsCore","ReactComposerVideoUploadActions","ReactComposerVideoUploadStore","ReactDOM","Run","SubscriptionsHandler","UserAgent","VideoUploadFile","VideoUploadProcessingDialog.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=a.URL||a.webkitURL||{};c=function(){function a(a,c){var d=this;this.$3=a;this.$6=c;this.$2=new(b("SubscriptionsHandler"))();this.$3.composerID||g(0,1443);this.$3.container||g(0,5531);this.$3.uploader||g(0,5533);this.$5=a.uploader;this.$1=a.composerID;this.$2.addSubscriptions(this.$5.subscribe("post-failed",this.$7.bind(this)),this.$5.subscribe("post-finished",this.$8.bind(this)),this.$5.subscribe("upload-failed",this.$9.bind(this)),this.$5.subscribe("upload-finished",this.$10.bind(this)));b("Run").onLeave(function(){return d.$5.abandon()});b("Run").onUnload(function(){return d.$5.abandon()})}var c=a.prototype;c.upload=function(a,c){this.$4=c;c=b("VideoUploadFile").fromFileInput(a);this.$5.upload(c)};c.uploadFromFile=function(a,b){var c=a.getFile();c&&i.createObjectURL&&(b.fileURL=i.createObjectURL(c));this.$4=b;this.$5.upload(a)};c.destroy=function(){this.$2.release()};c.isUploading=function(){return this.$5.isSessionInProgress()};c.$11=function(a){a&&b("ErrorDialog").show(a.error_summary,a.error_description),this.$6&&this.$6.reset(),this.$5.abandon(),b("ReactComposerActions").postError(this.$1,null)};c.$7=function(a,b){this.$11(b)};c.$8=function(a,c){b("ReactComposerPostUtilsCore").handlePostSucceeded(this.$1),this.$3.composerEntryPointRef==="timeline"&&b("QE").logExposure("www_optimistic_video_post"),this.$3.shouldShowOptimisticVideoPost&&this.$3.composerEntryPointRef==="timeline"?b("Arbiter").inform("videoUpload/complete",{videoID:c.video_id,isToUserProfile:!0,videoFileURL:c.fileURL}):b("ReactDOM").render(h.jsx(b("VideoUploadProcessingDialog.react"),{videoID:c.video_id,show:!0}),this.$3.container),this.$3.onPostSuccess&&this.$3.onPostSuccess()};c.$9=function(a,c){this.$11(c);a=b("ReactComposerVideoUploadStore").getVideo(this.$1);if(b("UserAgent").isBrowser("IE")){c=b("DOMClone").deepClone(a.input);b("DOM").replace(a.input,c)}else a.input.value="";b("ReactComposerVideoUploadActions").remove(this.$1)};c.$10=function(){this.$5.post(this.$4),this.$3.onUploadSuccess&&this.$3.onUploadSuccess()};return a}();e.exports=c}),null);
__d("ReactComposerMediaAttachmentContainer.react",["invariant","Bootloader","FluxContainer","ProductTaggingCreatorTypedLogger","QE2Logger","React","ReactComposerAsset3dAttachmentActions","ReactComposerAsset3dAttachmentStore","ReactComposerAttachmentActions","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerCanvasStore","ReactComposerCollectionStore","ReactComposerContextTypes","ReactComposerLoggingName","ReactComposerMediaAttachment.react","ReactComposerMediaAttachmentStore","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerMediaUploadType","ReactComposerMediaUtils","ReactComposerPhotoActions","ReactComposerPhotoCarouselStore","ReactComposerPhotoUploader","ReactComposerPhotoUploadState","ReactComposerScrapedAttachmentStore","ReactComposerSlideshowActions","ReactComposerSlideshowStore","ReactComposerStatusStore","ReactComposerStatusUtils","ReactComposerStore","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerVideoUploadActions","ReactComposerVideoUploader","ReactComposerVideoUploadStore","ReactDOM","SubscriptionsHandler","URLScraper","getByPath","gkx","ifRequired","qex"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.apply(this,arguments)||this;c.$1=function(a,d){var e=b("ReactComposerMediaUtils").handleSpecialMediaUpload(a,d,c.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],c.context);if(e)return;e=a.target?a.target:d.getInput();c.$2||g(0,1810);b("ReactComposerMediaUtils").uploadPhotosOrVideoFromTarget(c.context.composerID,e,c.$2,c.props.config.targetData.targetSupportsMultiplePhotos,c.props.config.targetData.targetSupportsMultiMedia);c.$11()};c.$8=function(){c.state.selectedTagger!==null&&c.state.selectedTagger!==b("ReactComposerTaggerType").PEOPLE&&b("ReactComposerTaggerActions").selectTaggerWithoutAutofocus(c.context.composerID,b("ReactComposerLoggingName").MENTIONS_INPUT_FOCUS,b("ReactComposerTaggerType").PEOPLE)};c.$9=function(a){b("ReactComposerStatusUtils").uploadPastedFile(c.context.composerID,a[0],c.$2),b("ReactComposerMediaUploadActions").photosSelect(c.context.composerID,1,"copypaste")};c.$10=function(a,d,e){d=c.context.composerID;var f=c.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],g=b("ReactComposerPhotoCarouselStore").shouldShowURLEditArea(d);f.carouselConfig&&g&&f.carouselConfig.ComposerPhotoCarouselPlaceHolder&&b("ReactComposerStatusUtils").scrapeLink(d,c.context.targetID,a,c.context.composerType,c.context.actorID,b("ReactComposerLoggingName").LINK_PASTED);if(c.props.hasMessagingLink){g=e?e.getCurrentContent().getPlainText():"";f=b("URLScraper").match(a)||g.concat(a);c.$12(d,f)}return!1};c.$7=function(a){var d=c.context.composerID;a=a.getCurrentContent().getPlainText();c.$5(a);if(!b("URLScraper").trigger(a)){c.props.hasMessagingLink&&c.$12(d,a);var e=c.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],f=b("ReactComposerPhotoCarouselStore").shouldShowURLEditArea(d);if(!e.carouselConfig||!f)return;e.carouselConfig.ComposerPhotoCarouselPlaceHolder&&b("ReactComposerStatusUtils").scrapeLink(d,c.context.targetID,a,c.context.composerType,c.context.actorID,b("ReactComposerLoggingName").INLINE_COMPOSER)}};c.$1=c.$1.bind(babelHelpers.assertThisInitialized(c));return c}c.getStores=function(){var a=[b("ReactComposerAttachmentStore"),b("ReactComposerCanvasStore"),b("ReactComposerCollectionStore"),b("ReactComposerMediaAttachmentStore"),b("ReactComposerPhotoCarouselStore"),b("ReactComposerMediaUploadStore"),b("ReactComposerScrapedAttachmentStore"),b("ReactComposerSlideshowStore"),b("ReactComposerTaggerStore"),b("ReactComposerVideoUploadStore"),b("ReactComposerStore")];b("ifRequired")("ReactComposerFocusStore",function(b){a.push(b)});return a};c.calculateState=function(a,c,d){var e=d.composerID,f=b("ReactComposerMediaUploadStore").getUploadsOfType(e,b("ReactComposerMediaUploadType").PHOTO),g=b("ReactComposerMediaUploadStore").getUploadsOfType(e,b("ReactComposerMediaUploadType").VIDEO),h=b("ReactComposerMediaUploadStore").getUploads(e);c=c.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];var i=f.filter(function(a){return a.isSpherical===!0}).size;return{createAlbumLink:b("ReactComposerMediaAttachmentStore").getCreateAlbumLink(e),shouldShowCanvasSelector:b("ReactComposerCanvasStore").shouldShowCanvasSelector(e),shouldShowCarouselURLInputArea:b("ReactComposerPhotoCarouselStore").shouldShowURLEditArea(e),shouldShowPreview:b("ReactComposerScrapedAttachmentStore").getMarkup(e)!==null,shouldShowConditionalPhotoChooser:c.shouldShowConditionalPhotoChooser,shouldShowPostValueCTAUpsell:d.gks.shouldShowPostValueCTAUpsell,shouldShowAlbumLink:c.shouldShowAlbumLink,slideshowDialogOpen:b("ReactComposerSlideshowStore").shouldShowSlideshowDialog(e),isCanvasSelected:b("ReactComposerCanvasStore").isCanvasSelected(e),isCollectionSelected:b("ReactComposerCollectionStore").isCollectionSelected(e),isPhotoCarouselSelected:b("ReactComposerPhotoCarouselStore").isPhotoCarouselSelected(e),isSlideshowSelected:b("ReactComposerSlideshowStore").isSlideshowSelected(e),selectedTagger:b("ReactComposerTaggerStore").getSelectedTagger(e),uploads:h,isOfferLikePost:a?a.isOfferLikePost:!1,offerLikePostText:a?a.offerLikePostText:null,photoUploadsCount:f.size,sphericalPhotoUploadsCount:i,videoUploadsCount:g.size,video:b("ReactComposerVideoUploadStore").getVideo(e),videoProgressBar:b("ReactComposerMediaAttachmentStore").getVideoProgressBar(e),videoProgressBarInstance:b("ReactComposerMediaAttachmentStore").getVideoProgressBarInstance(e),videoUploader:b("ReactComposerMediaAttachmentStore").getVideoUploader(e),sproutsDisplayState:b("ReactComposerStore").getSproutsDisplayState(e),isComposerFocused:b("ifRequired")("ReactComposerFocusStore",function(a){return a.isComposerFocused(e)},function(){return!1})}};var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$4=new(b("SubscriptionsHandler"))();var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],c=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS];c&&c.defaultMarkdownOn&&b("ReactComposerTaggerStore").getTaggerData(this.context.composerID,b("ReactComposerTaggerType").MARKDOWN).isMarkdown===void 0&&b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(this.context.composerID,b("ReactComposerTaggerType").MARKDOWN,{isMarkdown:!0});this.$2=new(b("ReactComposerPhotoUploader"))(this.context,a.photoLimit,{disableFaceRecognition:a.disableFaceboxTagger,workSharedDraftMode:(c=this.props.config.actorConfig)==null?void 0:c.workSharedDraftMode});a=b("ReactComposerMediaUtils").subscribeToImageEdit(this.context.composerID,this.$2);this.$4.addSubscriptions(a)};d.componentDidMount=function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];this.$3=new(b("ReactComposerVideoUploader"))({composerID:this.context.composerID,container:b("ReactDOM").findDOMNode(this.refs.videoContainer),uploader:this.state.videoUploader,shouldShowOptimisticVideoPost:a.shouldShowOptimisticVideoPost,composerEntryPointRef:this.context.composerType},this.state.videoProgressBarInstance);b("ReactComposerVideoUploadActions").setUploader(this.context.composerID,this.$3);a=b("ReactComposerStatusStore").getMessageText(this.context.composerID);this.$5(a)};d.componentWillUnmount=function(){this.$3&&this.$3.destroy(),this.$4&&this.$4.release()};d.UNSAFE_componentWillUpdate=function(a,c){var d=this;c=c||{};a=this.state.uploads.size>0||!!this.state.video;var e=c.uploads.size>0||!!c.video,f=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];if(f.returnToStatusIfNoUploads&&a&&!e&&!this.state.slideshowDialogOpen){f=b("ReactComposerAttachmentStore").getStatusAttachmentToSelect(this.context.composerID);b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,f,!0);b("ReactComposerSlideshowStore").isSlideshowSelected(this.context.composerID)&&b("ReactComposerSlideshowActions").hideSlideshowEditField(this.context.composerID)}a=c.uploads.filter(function(a){return a.state===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_DONE});e=b("ReactComposerAttachmentStore").hasAttachment(this.context.composerID,b("ReactComposerAttachmentType").ASSET_3D);if(e&&c.videoUploadsCount===0&&c.photoUploadsCount===a.size&&(b("gkx")("960952")?c.photoUploadsCount>=2&&c.photoUploadsCount%2==0:c.photoUploadsCount==2)){f={};e=["jpg","jpeg","png"];c=0;for(c=0;c<a.size;c++){var g=a.get(c),h=g.filename;if(!h)return;var i=h.lastIndexOf(".");if(i<0)return;var j=h.split(".").pop().toLowerCase();if(!e.includes(j))return;j=h.substring(0,i).toLowerCase();h=j.split("_");if(h.length>1&&h.pop().toLowerCase()==="depth"){i=h.join("_");i in f||(f[i]={colorImage:null,depthImage:null});f[i].depthImage=g}else j in f||(f[j]={colorImage:null,depthImage:null}),f[j].colorImage=g}h=Object.keys(f).sort();if(h.length==0)return;i=[];j=[];g="";e=0;a=0;for(c=0;c<h.length;c++){var k=h[c];k=f[k];var l=k.colorImage;k=k.depthImage;if(l===null)return;if(k===null)return;g===""&&(g=l.fileURL,e=l.width,a=l.height);i.push(l.photoID);j.push(k.photoID)}if(i.length===0)return;if(i.length!=j.length)return;b("ReactComposerAsset3dAttachmentActions").selectColorDepthInput(this.context.composerID,i,j,g,e,a);b("ReactComposerAsset3dAttachmentStore").isUsingPhotoEncoding3D(this.context.composerID)?(b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,b("ReactComposerAttachmentType").ASSET_3D,!0,null,null,b("ReactComposerAttachmentType").MEDIA),j.forEach(function(a){b("ReactComposerPhotoActions").setPhotoIsDepthFile(d.context.composerID,a,!0)})):b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,b("ReactComposerAttachmentType").ASSET_3D,!0)}else{l=b("ReactComposerAsset3dAttachmentStore").getAsset3DInput(this.context.composerID);l&&(l.depthImageIDs&&l.depthImageIDs.forEach(function(a){b("ReactComposerPhotoActions").setPhotoIsDepthFile(d.context.composerID,a,!1)}),b("ReactComposerAsset3dAttachmentActions").removeAsset3D(this.context.composerID))}};d.render=function(){return h.jsxs("div",{children:[h.jsx(b("ReactComposerMediaAttachment.react"),babelHelpers["extends"]({},this.props,{createAlbumLink:this.state.createAlbumLink,isCanvasSelected:this.$6()?!0:this.state.isCanvasSelected,isCollectionSelected:this.state.isCollectionSelected,isComposerFocused:this.state.isComposerFocused,isPhotoCarouselSelected:this.state.isPhotoCarouselSelected,isSlideshowSelected:this.state.isSlideshowSelected,shouldShowCanvasSelector:this.$6()?!0:this.state.shouldShowCanvasSelector,shouldShowCarouselURLInputArea:this.state.shouldShowCarouselURLInputArea,shouldShowConditionalPhotoChooser:this.state.shouldShowConditionalPhotoChooser,shouldShowPostValueCTAUpsell:this.state.shouldShowPostValueCTAUpsell,sproutsDisplayState:this.state.sproutsDisplayState,shouldShowPreview:this.state.shouldShowPreview,slideshowDialogOpen:this.state.slideshowDialogOpen,isOfferLikePost:this.state.isOfferLikePost,offerLikePostText:this.state.offerLikePostText,onFilesSelected:this.$1,onMentionsInputChange:this.$7,onMentionsInputFocus:this.$8,onPasteFiles:this.$9,handlePastedText:this.$10,postButtonModule:this.props.postButtonModule,uploads:this.state.uploads,videoUploadsCount:this.state.videoUploadsCount,photoUploadsCount:this.state.photoUploadsCount,sphericalPhotoUploadsCount:this.state.sphericalPhotoUploadsCount,video:this.state.video,videoProgressBar:this.state.videoProgressBar,shouldShowAlbumLink:this.state.shouldShowAlbumLink,showProfileVoiceSwitcher:!!this.context.gks.showProfileVoiceSwitcher})),h.jsx("div",{ref:"videoContainer"})]})};d.$6=function(){var a=this,c=!1;b("ifRequired")("ReactObjectiveFirstPagesComposerViewMode",function(b){c=a.props.viewMode===b.CREATE_CANVAS_VIEW});return c};d.$12=function(a,c){var d=this.props.config.taggersConfig;d=b("getByPath")(d,[b("ReactComposerTaggerType").MESSAGING,"canDefaultCTAMessagingLink"]);this.props.hasMessagingLink&&this.props.hasMessagingLink(c)&&!b("ReactComposerTaggerStore").hasMessagingCTA(a)&&(b("QE2Logger").logExposureForUser("composer_default_cta_messaging_link_in_text_universe"),d&&b("ReactComposerTaggerActions").selectTaggerWithoutLogging(a,b("ReactComposerTaggerType").MESSAGING))};d.$5=function(a){var c=this,d=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS];this.context.composerType==="pages_feed"&&b("Bootloader").loadModules(["SalesPromoUtils.react"],function(e){if(e.checkIsOLP(a)){e=d.offerLikePostUpsell||"";var f=e.indexOf("inline")!==-1;f&&c.setState({isOfferLikePost:!0,offerLikePostText:a});(e==="none"||f)&&(d.pageID&&b("QE2Logger").logExposureForPage("orgoff_offer_creation",d.pageID))}else c.setState({offerLikePostText:a})},"ReactComposerMediaAttachmentContainer.react")};d.$11=function(){var a;((a=b("ReactComposerTaggerStore").getTaggersConfig(this.context.composerID,b("ReactComposerTaggerType").PRODUCT))==null?void 0:a.enabled)&&(b("qex")._("1354391")&&new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PtPhotoUploadSuggestionEnabled").log())};return c}(h.Component);a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);
__d("ReactComposerMediaAttachmentPostButton.react",["fbt","React","ReactComposerConfig","ReactComposerPostButtonContainer.react","ReactComposerVideoCopyrightDialog.react","ReactFragment","XUIContextualDialog.react","XUIContextualDialogBody.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={copyrightDialogShown:!1},c.$3=function(){if(c.props.showCopyrightDialogOnPost){c.setState({copyrightDialogShown:!0});return!1}if(c.props.onClick){c.props.onClick();return!1}return!0},c.$1=function(){c.setState({copyrightDialogShown:!1})},c.$2=function(){c.setState({copyrightDialogShown:!1}),c.props.onClick&&c.props.onClick()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.renderLayers=function(){var a=this;return b("ReactFragment").create({limitDialog:h.jsx(b("XUIContextualDialog.react"),{alignment:"right",contextRef:function(){return a.refs.post},position:"below",shown:this.props.limitExceeded,width:this.props.contextualDialogWidth,children:h.jsx(b("XUIContextualDialogBody.react"),{children:g._("You can only add {number} photos at a time",[g._param("number",this.props.photoLimit)])})}),copyrightDialog:h.jsx(b("ReactComposerVideoCopyrightDialog.react"),{shown:this.state.copyrightDialogShown,onCancel:this.$1,onConfirm:this.$2})})};d.render=function(){return h.jsxs("span",{children:[h.jsx(b("ReactComposerPostButtonContainer.react"),{className:this.props.className,config:this.props.config,forceDisabled:this.props.disabled,onClickPreprocess:this.$3,label:this.props.label,ref:"post",useDefaultScheduleComponent:this.props.useDefaultScheduleComponent,isMediaUploading:this.props.isMediaUploading,useDefaultButton:this.props.useDefaultButton}),this.props.limitExceeded?this.renderLayers():null]})};return c}(h.PureComponent);a.propTypes={config:b("ReactComposerConfig").isRequired,disabled:(c=b("prop-types")).bool,limitExceeded:c.bool,onClick:c.func,photoLimit:c.number.isRequired,showCopyrightDialogOnPost:c.bool,label:c.string,contextualDialogWidth:c.number,useDefaultScheduleComponent:c.bool,isMediaUploading:c.bool,useDefaultButton:c.bool};a.defaultProps={disabled:!1,limitExceeded:!1,showCopyrightDialogOnPost:!1,contextualDialogWidth:300,useDefaultButton:!1};e.exports=a}),null);
__d("ReactComposerMediaEagerAttachment.react",["React","ReactComposerAttachmentActions","ReactComposerAttachmentBodyMixin","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerMediaAttachmentActions","ReactComposerMediaAttachmentContainer.react","ReactComposerStatusActions","ReactComposerTaggerActions","createReactClass_DEPRECATED","gkx","prop-types"],(function(a,b,c,d,e,f){var g=b("React");a=b("createReactClass_DEPRECATED")({displayName:"ReactComposerMediaEagerAttachment",mixins:[b("ReactComposerAttachmentBodyMixin")()],propTypes:{config:b("ReactComposerConfig").isRequired,postButtonModule:b("prop-types").func.isRequired},statics:{attachmentID:b("ReactComposerAttachmentType").MEDIA},UNSAFE_componentWillMount:function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA].bootstrapData;b("ReactComposerStatusActions").setMentionsSource(this.context.composerID,a.mentionsSource);b("ReactComposerMediaAttachmentActions").setConfig(this.context.composerID,a);b("ReactComposerAttachmentActions").setInitialized(this.context.composerID,b("ReactComposerAttachmentType").MEDIA);b("gkx")("678776")&&b("ReactComposerTaggerActions").updateTaggersSource(this.context.composerID,this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA].bootstrapData.taggersSource)},componentDidMount:function(){b("gkx")("678776")||b("ReactComposerTaggerActions").updateTaggersSource(this.context.composerID,this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA].bootstrapData.taggersSource)},renderX:function(){return g.jsx(b("ReactComposerMediaAttachmentContainer.react"),babelHelpers["extends"]({},this.props))}});e.exports=a}),null);
__d("ReactComposerMediaPostButtonContainerMixin",["React","ReactComponentWithPureRenderMixin","ReactComposerActions","ReactComposerAttachmentType","ReactComposerAudienceStore","ReactComposerConfig","ReactComposerConstants","ReactComposerContextTypes","ReactComposerInit","ReactComposerMediaAttachmentPostButton.react","ReactComposerMediaUploadStore","ReactComposerOptimisticPostingActions","ReactComposerPhotoStore","ReactComposerPostUtils","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","ReactComposerVideoUploadStore","ReloadPage","debounce","prop-types"],(function(a,b,c,d,e,f){var g=b("React");c={contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaUploadStore"),b("ReactComposerPhotoStore"),b("ReactComposerStore"),b("ReactComposerVideoUploadStore")),b("ReactComponentWithPureRenderMixin")],propTypes:{config:b("ReactComposerConfig").isRequired,onClickPreprocess:(a=b("prop-types")).func,label:a.string,forceDisabled:a.bool,useDefaultScheduleComponent:a.bool},statics:{calculateState:function(a,c,d){var e=c.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],f=b("ReactComposerPhotoStore").isLimitExceeded(a,e.photoLimit),g=d.gks[b("ReactComposerConstants").GK_VIDEO_COPYRIGHT]&&!!b("ReactComposerVideoUploadStore").getVideo(a),h=b("ReactComposerVideoUploadStore").getVideo(a)&&b("ReactComposerStore").isPosting(a),i=b("ReactComposerPhotoStore").isSphericalPhotoUpdating(a);i=b("ReactComposerMediaUploadStore").isUploading(a)||b("ReactComposerPhotoStore").isRecognizing(a)||i||h;h=d.gks.optimisticPosting?f:b("ReactComposerPostUtils").isPostButtonDisabled(a,e.photoLimit);return{limitExceeded:f,isUploading:i,disabled:c.forceDisabled||h,showCopyrightDialogOnPost:g}}},render:function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA].photoLimit;return g.jsx(b("ReactComposerMediaAttachmentPostButton.react"),{className:this.props.className,disabled:this.state.disabled,limitExceeded:this.state.limitExceeded,onClick:b("debounce")(this._onClick),photoLimit:a,showCopyrightDialogOnPost:this.state.showCopyrightDialogOnPost,config:this.props.config,label:this.props.label,useDefaultScheduleComponent:this.props.useDefaultScheduleComponent,isMediaUploading:this.state.isUploading})},_onClick:function(){if(this.props.onClickPreprocess&&!this.props.onClickPreprocess())return;this.context.gks.optimisticPosting&&b("ReactComposerAudienceStore").getTimelineSelected(this.context.composerID)?this.state.isUploading?b("ReactComposerOptimisticPostingActions").startOptimisticallyPosting(this.context.composerID,this.props.config,b("ReactComposerAttachmentType").MEDIA,this.context.actorID,this.context.targetID):this._startPost():this._startPost()},_startPost:function(){b("ReactComposerActions").postStarted(this.context.composerID,{actorID:this.context.actorID,config:this.props.config,targetID:this.context.targetID}),this.props.config.dialogComposer&&(b("ReactComposerInit").unmountInstance(this.context.composerID),this.props.config.dialogComposerRefreshOnPost&&b("ReloadPage").now())}};e.exports=c}),null);