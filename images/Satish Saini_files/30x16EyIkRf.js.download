if (self.CavalryLogger) { CavalryLogger.start_js(["2E8iW"]); }

__d("MessengerComposeViewHeaderReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerComposeViewHeader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l){return b("ReasonReact.bs").wrapJsForReason(b("MessengerComposeViewHeader.react"),{className:b("bs_js_null_undefined").fromOption(a),forceHideClearButton:c,onClear:b("bs_js_null_undefined").fromOption(d),onAddRecipient:e,onRemoveRecipient:f,onResize:g,recipients:h,viewer:i,isWorkUser:j,tabIndex:b("bs_js_null_undefined").fromOption(k)},l)}f.make=a}),null);
__d("MessengerDeliveryStateIconsM4React.bs",["cssVar","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.color;return h.jsx("svg",{children:h.jsxs("g",{children:[h.jsx("path",{d:"M0 0h16v16H0z"}),h.jsx("path",{d:"M8 16A8 8 0 118 0a8 8 0 010 16zM6.8 8.836L5.257 7.293a1 1 0 00-1.414 1.414l2.25 2.25a1 1 0 001.414 0l4.25-4.25a1 1 0 10-1.414-1.414L6.8 8.836z",fill:a})],fill:"none",fillRule:"evenodd"}),height:"10",width:"10",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"})}g={make:a};function c(a){a=a.color;a={children:h.jsxs("g",{children:[h.jsx("path",{d:"M0 0h16v16H0z"}),h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:a,strokeWidth:"2"}),h.jsx("path",{d:"M4.55 8l2.25 2.25L11.05 6",stroke:a,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})],fill:"none",fillRule:"evenodd"}),height:"10",width:"10",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};a["data-testid"]="message-delivery-state-sent";return h.jsx("svg",a)}b={make:c};function d(a){a=a.color;return h.jsx("svg",{children:h.jsxs("g",{children:[h.jsx("path",{d:"M0 0h16v16H0z"}),h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:a,strokeWidth:"2"})],fill:"none",fillRule:"evenodd"}),height:"10",width:"10",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"})}a={make:d};function e(a){return h.jsx("svg",{children:h.jsxs("g",{children:[h.jsx("path",{d:"M0 0h16v16H0z"}),h.jsx("path",{d:"M8 16A8 8 0 118 0a8 8 0 010 16zM8 2a1.5 1.5 0 00-1.5 1.5v5a1.5 1.5 0 003 0v-5A1.5 1.5 0 008 2zm0 12a1.5 1.5 0 100-3 1.5 1.5 0 000 3z",fill:"#f03d25"})],fill:"none",fillRule:"evenodd"}),height:"10",width:"10",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"})}c={make:e};f.Delivered=g;f.Sent=b;f.Sending=a;f.Error_=c}),null);
__d("MessengerDeliveryStateIconsM4React.re",["MessengerDeliveryStateIconsM4React.bs"],(function(a,b,c,d,e,f){(function(a){return null});c=(a=b("MessengerDeliveryStateIconsM4React.bs")).Delivered.make;f.Delivered_make=c;(function(a){return null});d=a.Sent.make;f.Sent_make=d;(function(a){return null});e=a.Sending.make;f.Sending_make=e;(function(a){return null});b=a.Error_.make;f.Error__make=b;c=a.Delivered;f.Delivered=c;d=a.Error_;f.Error_=d;e=a.Sent;f.Sent=e;b=a.Sending;f.Sending=b}),null);
__d("MessengerDialogReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogCancelButton.react"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a!==void 0)switch(a){case 0:return"cancel";case 1:return"button";case 2:return"confirm"}}function h(a){if(a!==void 0)if(a)return"secondary";else return"primary"}function a(a,c,d,e,f,g,h,i,j,k,l){var m;return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialog.react"),{className:(m=b("bs_js_null_undefined")).fromOption(a),label:m.fromOption(c),onToggle:m.fromOption(d),repositionOnUpdate:m.fromOption(e),shown:m.fromOption(f),titleID:m.fromOption(g),type:m.fromOption(h),width:m.fromOption(i),removeDialogOnToggle:m.fromOption(j),causalElement:m.fromOption(k)},l)}a={make:a};var i={};function c(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogFooter.react"),{className:b("bs_js_null_undefined").fromOption(a),leftContent:b("bs_js_null_undefined").fromOption(c)},d)}c={make:c};var j={};function d(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogCancelButton.react"),{onClick:b("bs_js_null_undefined").fromOption(a)},c)}d={make:d};var k={};function e(a,c,d,e,f,i,j,k,l,m){var n;return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogButton.react"),{action:(n=b("bs_js_null_undefined")).fromOption(g(a)),label:n.fromOption(c),disabled:n.fromOption(d),use:n.fromOption(e),onClick:n.fromOption(f),type:n.fromOption(h(i)),className:n.fromOption(j),leftContent:n.fromOption(k),ariaLabel:n.fromOption(l)},m)}e={make:e};var l={},m={},n=0,o=0,p=0;f.stringOfButtonAction=g;f.stringOfButtonType=h;f.Dialog=a;f.Dialog2=i;f.Header=n;f.Title=o;f.Footer=c;f.Footer2=j;f.CancelButton=d;f.CancelButtonJsx3=k;f.Button=e;f.ButtonJsx3=l;f.Body=p;f.Body2=m}),null);
__d("MessengerFacepileImageM4React.bs",["Image.bs","React","bs_belt_Option","bs_caml_option","ReasonReact.bs","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){return b("bs_caml_primitive").caml_int_max(2,a/20|0)}function a(a){var c=a.borderColor,d=a.className,e=a.imgSize,f=a.offsetLeft;a=a.src;c=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(c,function(a){if(a==null)return;else return b("bs_caml_option").some(a)}),"white");var i=h(e);f=f!==void 0?{border:""+(String(i)+("px solid "+(String(c)+""))),height:""+(String(e)+"px"),left:""+(String(f)+"px"),width:""+(String(e)+"px")}:{border:""+(String(i)+("px solid "+(String(c)+""))),height:""+(String(e)+"px"),width:""+(String(e)+"px")};return g.createElement("div",{className:d,style:f},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,a,e,void 0,e,void 0,[])))}c=a;f.calcBorderWidth=h;f.make=c}),null);
__d("MessengerFacepileOverflowM4React.bs",["cx","React","bs_belt_Option","bs_caml_option","joinClasses","bs_caml_primitive"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.borderColor,d=a.className,e=a.imgSize;a=a.text;c=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(c,function(a){if(a==null)return;else return b("bs_caml_option").some(a)}),"white");var f=b("bs_caml_primitive").caml_int_max(2,e/20|0);return h.jsx("div",{children:h.jsx("div",{children:a,className:"_7q1q"}),className:b("joinClasses")("_7q1p",d),style:{border:""+(String(f)+("px solid "+(String(c)+""))),height:""+(String(e)+"px"),width:""+(String(e)+"px")}})}c=a;f.make=c}),null);
__d("MessengerProfileImageM4React.bs",["cx","cssVar","Image.bs","React","bs_caml_int32","bs_belt_Option","bs_caml_option","ReasonReact.bs","joinClasses","bs_caml_primitive"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a,c){a=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(a,function(a){if(a==null)return;else return b("bs_caml_option").some(a)}),"white");c=c/5|0;var d=String(b("bs_caml_primitive").caml_int_max(2,c/5|0));return i.createElement("div",{className:"_87v2",style:{border:""+(String(d)+("px solid "+(String(a)+""))),height:""+(String(c)+"px"),width:""+(String(c)+"px")}})}function a(a){var c=a.borderColor,d=a.className,e=a.isActive,f=a.storiesRingEligible,g=a.src,h=a.size;a=a.hasUnreadStories;f=f===!0&&a!==void 0;var k=h/20|0,l=(h/2|0)+k|0,m=b("bs_caml_int32").imul(h,9)/10|0,n=f?(h<<2)/5|0:h;g=i.createElement("div",{style:{height:""+(String(n)+"px"),width:""+(String(n)+"px")}},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_87v3","",void 0,void 0,g,n,void 0,n,void 0,[])));n=a!==void 0&&a?"#0099ff":"rgba(0, 0, 0, 0.12)";a={border:"solid",borderColor:n,borderWidth:""+(String(k)+"px"),display:"flex",height:""+(String(m)+"px"),width:""+(String(m)+"px"),borderRadius:""+(String(l)+"px"),alignItems:"center",justifyContent:"center"};return i.createElement("div",{className:b("joinClasses")(b("bs_belt_Option").getWithDefault(d,""),"_87u_")},f?i.createElement("div",{style:a},g):g,e===!0?j(c,h):null)}c=a;f.renderPresence=j;f.make=c}),null);
__d("MessengerFacepileM4React.bs",["cx","React","bs_caml_int32","bs_belt_Option","bs_caml_option","joinClasses","MessengerProfileImageM4React.bs","MessengerFacepileImageM4React.bs","MessengerFacepileOverflowM4React.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function i(a,c,d,e){var f=d.length;if(f!==1)if(f!==0){f=(e<<1)/3|0;var g={className:"_7q0v",imgSize:f,src:d[1]};a!==void 0&&(g.borderColor=b("bs_caml_option").valFromOption(a));f={className:"_7q1i",imgSize:f,src:d[0]};a!==void 0&&(f.borderColor=b("bs_caml_option").valFromOption(a));return h.jsxs("div",{children:[h.jsx(b("MessengerFacepileImageM4React.bs").make,g),h.jsx(b("MessengerFacepileImageM4React.bs").make,f)],className:b("joinClasses")(b("bs_belt_Option").getWithDefault(c,""),"_7q1j"),style:{height:""+(String(e)+"px"),width:""+(String(e)+"px")}})}else return null;else{g=d[0];f={src:g,size:e};a!==void 0&&(f.borderColor=b("bs_caml_option").valFromOption(a));c!==void 0&&(f.className=b("bs_caml_option").valFromOption(c));return h.jsx(b("MessengerProfileImageM4React.bs").make,f)}}function j(a,c,d,e,f){var g=f-20|0,i=g+(b("MessengerFacepileImageM4React.bs").calcBorderWidth(g)<<1)|0,j=e.length;if(j>=3){if(d!==void 0){d=d;if(d>4){var k=b("bs_caml_int32").imul(g,3)-25|0;d={className:"_7q1l",imgSize:g,text:"+"+String(d-3|0)};a!==void 0&&(d.borderColor=b("bs_caml_option").valFromOption(a));var l={className:"_7q1m",imgSize:g,offsetLeft:((k/2|0)-(g/2|0)|0)-3|0,src:e[1]};a!==void 0&&(l.borderColor=b("bs_caml_option").valFromOption(a));var m={className:"_7q1n",imgSize:g,src:e[0]};a!==void 0&&(m.borderColor=b("bs_caml_option").valFromOption(a));return h.jsxs("div",{children:[h.jsx(b("MessengerFacepileOverflowM4React.bs").make,d),h.jsx(b("MessengerFacepileImageM4React.bs").make,l),h.jsx(b("MessengerFacepileImageM4React.bs").make,m)],className:b("joinClasses")(b("bs_belt_Option").getWithDefault(c,""),"_7q1j"),style:{height:""+(String(i)+"px"),width:""+(String(k)+"px")}})}}}else switch(j){case 0:return null;case 1:d=e[0];l={src:d,size:f};a!==void 0&&(l.borderColor=b("bs_caml_option").valFromOption(a));c!==void 0&&(l.className=b("bs_caml_option").valFromOption(c));return h.jsx(b("MessengerProfileImageM4React.bs").make,l);case 2:m=e[0];k=e[1];j=(g<<1)-10|0;d={className:"_7q1l",imgSize:g,src:k};a!==void 0&&(d.borderColor=b("bs_caml_option").valFromOption(a));f={className:"_7q1n",imgSize:g,src:m};a!==void 0&&(f.borderColor=b("bs_caml_option").valFromOption(a));return h.jsxs("div",{children:[h.jsx(b("MessengerFacepileImageM4React.bs").make,d),h.jsx(b("MessengerFacepileImageM4React.bs").make,f)],className:b("joinClasses")(b("bs_belt_Option").getWithDefault(c,""),"_7q1j"),style:{height:""+(String(i)+"px"),width:""+(String(j)+"px")}})}l=b("bs_caml_int32").imul(g,3)-25|0;k={className:"_7q1l",imgSize:g,src:e[2]};a!==void 0&&(k.borderColor=b("bs_caml_option").valFromOption(a));m={className:"_7q1m",imgSize:g,offsetLeft:(l/2|0)-(g/2|0)|0,src:e[1]};a!==void 0&&(m.borderColor=b("bs_caml_option").valFromOption(a));d={className:"_7q1n",imgSize:g,src:e[0]};a!==void 0&&(d.borderColor=b("bs_caml_option").valFromOption(a));return h.jsxs("div",{children:[h.jsx(b("MessengerFacepileImageM4React.bs").make,k),h.jsx(b("MessengerFacepileImageM4React.bs").make,m),h.jsx(b("MessengerFacepileImageM4React.bs").make,d)],className:b("joinClasses")(b("bs_belt_Option").getWithDefault(c,""),"_7q1j"),style:{height:""+(String(i)+"px"),width:""+(String(l)+"px")}})}function a(a){var b=a.borderColor,c=a.className,d=a.expanded,e=a.srcs,f=a.size;a=a.totalParticipants;if(d===!0)return j(b,c,a,e,f);else return i(b,c,e,f)}c=a;f.makeCompact=i;f.makeExpanded=j;f.make=c}),null);
__d("MessageShareType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMAGE:"image",PLATFORM_SHARE_CTA:"platform_share_CTA"})}),null);
__d("XMessagingForwardAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/forward/",{})}),null);
__d("XMessengerPlatformShareCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/platform/share/",{})}),null);
__d("MessengerForwardAttachmentDialogReact.bs",["ix","cx","fbt","bs_block","bs_curry","Image.bs","React","immutable","bs_caml_option","CurrentUser","fbglyph","ReasonReact.bs","AsyncRequest","MercuryLocalIDs","MessageShareType","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerSpinnerReact.bs","MessengerDialogBodyReact.bs","MessengerDialogTitleReact.bs","MessengerDialogHeaderReact.bs","MessengerComposeViewHeaderReact.bs","XMessengerPlatformShareCTAController","XMessagingForwardAttachmentController"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=i._("Send"),l=b("ReasonReact.bs").reducerComponent("MessengerForwardAttachmentDialogReact");function m(a,c,d){new(b("AsyncRequest"))(a.getURIBuilder().getURI()).setMethod("POST").setHandler(d).setData(c).send();return 0}function n(a,c,d,e,f,h,n){var o=function(a){if(a)return 0;else{b("MessengerDialogs.bs").removeDialog(void 0,0);return b("bs_curry")._1(c,0)}},p=function(c,e){var f=e.send;c=function(a){if(a.payload.success)return b("bs_curry")._1(f,2);else return b("bs_curry")._1(f,b("bs_block").__(2,[b("bs_caml_option").nullable_to_opt(a.payload.error)]))};var g={};e.state.recipients.forEach(function(c,a,d){g[String(b("MercuryLocalIDs").generateOfflineThreadingID(void 0))]=c.getUniqueID();return!0});var i=0;h!==void 0&&d!==void 0&&b("bs_caml_option").valFromOption(h)===b("MessageShareType").PLATFORM_SHARE_CTA?m(b("XMessengerPlatformShareCTAController"),{cta_id:a,message_id:b("bs_caml_option").valFromOption(d),recipient_map:g},c):i=1;i===1&&m(b("XMessagingForwardAttachmentController"),{attachment_id:a,recipient_map:g},c);return b("bs_curry")._1(e.send,1)};return{debugName:l.debugName,reactClassInternal:l.reactClassInternal,handedOffState:l.handedOffState,getDerivedStateFromProps:l.getDerivedStateFromProps,didMount:l.didMount,didUpdate:l.didUpdate,willUnmount:l.willUnmount,shouldUpdate:l.shouldUpdate,render:function(a){var c=a.state,d=c.sending,h=c.sendError;if(d)d=j.createElement("div",void 0,j.createElement(b("MessengerSpinnerReact.bs").make,{}),j.createElement("span",{className:"_1e1n _3-99"},i._("Sending")));else if(h!==void 0){var l=g("141787");d=j.createElement("div",{className:"_1e1n"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,l,void 0,void 0,void 0,void 0,[])),j.createElement("span",{className:"_3-99"},h))}else d=null;l=c.recipients.isEmpty()||c.sending;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog.make(void 0,void 0,o,void 0,e,void 0,void 0,560,void 0,void 0,[j.createElement(b("MessengerDialogHeaderReact.bs").make,{children:j.createElement(b("MessengerDialogTitleReact.bs").make,{children:f})}),j.createElement(b("MessengerDialogBodyReact.bs").make,{children:b("ReasonReact.bs").element(void 0,void 0,b("MessengerComposeViewHeaderReact.bs").make("_1e1o",!1,function(c){return b("bs_curry")._1(a.send,0)},function(c){return b("bs_curry")._1(a.send,b("bs_block").__(0,[c]))},function(c){return b("bs_curry")._1(a.send,b("bs_block").__(1,[c]))},function(a){return 0},c.recipients,b("CurrentUser").getID(),b("CurrentUser").isWorkUser(),0,[]))}),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer.make(void 0,b("bs_caml_option").some(d),[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton.make(void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button.make(2,k,l,void 0,b("bs_curry")._1(a.handle,p),0,void 0,void 0,l?i._("Disabled send button"):k,[]))]))]))},initialState:function(a){return{recipients:b("immutable").List([]),sendError:void 0,sending:!1}},retainedProps:l.retainedProps,reducer:function(a){if(typeof a==="number")switch(a){case 0:return function(a){return b("bs_block").__(0,[{recipients:b("immutable").List([]),sendError:a.sendError,sending:a.sending}])};case 1:return function(a){return b("bs_block").__(0,[{recipients:a.recipients,sendError:void 0,sending:!0}])};case 2:b("bs_curry")._1(c,0);return function(a){return b("bs_block").__(0,[{recipients:b("immutable").List([]),sendError:void 0,sending:!1}])}}else switch(a.tag|0){case 0:var d=a[0];return function(a){return b("bs_block").__(0,[{recipients:a.recipients.push(d),sendError:a.sendError,sending:a.sending}])};case 1:var e=a[0];return function(a){return b("bs_block").__(0,[{recipients:a.recipients.filter(function(a){return a!==e}),sendError:a.sendError,sending:a.sending}])};case 2:var f=a[0];return function(a){return b("bs_block").__(0,[{recipients:a.recipients,sendError:f,sending:!1}])}}},jsElementWrapped:l.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return n(a.attachmentID,a.onClose,b("bs_caml_option").nullable_to_opt(a.messageID),a.shown,a.title,b("bs_caml_option").nullable_to_opt(a.shareType),[])});f.sendButtonLabel=k;f.component=l;f.sendData=m;f.make=n;f.jsComponent=a}),null);
__d("getFBTSafeGenderFromGenderConst",["GenderConst","IntlVariations"],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case b("GenderConst").MALE_SINGULAR:return b("IntlVariations").GENDER_MALE;case b("GenderConst").FEMALE_SINGULAR:return b("IntlVariations").GENDER_FEMALE;default:return b("IntlVariations").GENDER_UNKNOWN}}e.exports=a}),null);
__d("MessengerMessageSeenHeadsReact.bs",["cx","fbt","cssVar","Image.bs","React","immutable","ReasonReact.bs","joinClasses","MessengerConfig","MercuryTimestamp","MessengerMessage.bs","MercuryAttachment","getViewportDimensions","MessengerSurfaceQuickChat.bs","getFBTSafeGenderFromGenderConst"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=b("MessengerConfig").MaxSeenHeadCount;function l(a){a=b("getViewportDimensions")().width;if(a<parseInt("920px".replace("px",""),10))if(k<8)return k;else return 8;else if(a<parseInt("1211px".replace("px",""),10)&&k>=3)return 3;else return k}function a(a){var c=a.className,d=a.isFromViewer,e=a.message,f=a.nextTimestamp,g=a.participants;a=a.readReceipts;var i=b("MessengerSurfaceQuickChat.bs").useIsQuickChatSurface(0);if(b("MessengerMessage.bs").isSending(e)||a.isEmpty()||b("MessengerMessage.bs").hasError(e))return null;else{a=b("immutable").Seq(a).filter(function(a){a=a.watermark>=e.timestamp&&a.watermark<f;if(a)return!0;else return!1}).sort(function(a,b){return a.action-b.action|0});if(a.isEmpty())return null;else{i=i?1:d?k:l(0);d=a.count()>(i+1|0);var m=d?a.slice(0,i):a;m=m.map(function(a,c,d){d=g.get(c);if(d==null)return null;else{a=h._({"*":"Seen by {full name} at {seen time}"},[h._name("full name",d.name,b("getFBTSafeGenderFromGenderConst")(d.gender)),h._param("seen time",b("MercuryTimestamp").getPreciseTimestamp(a.action))]);return b("ReasonReact.bs").element(String(c),void 0,b("Image.bs").make("_jf2",a,void 0,void 0,d.image_src,void 0,a,void 0,void 0,[]))}}).toArray();if(m.length!==0){d=d?a.slice(i,void 0).count():0;if(d>0){a=a.slice(i,void 0).map(function(a,b,c){a=g.get(b);if(a==null)return"";else return a.name}).filter(function(a){return a!==""}).join("\n")+" ";m.unshift(j.createElement("span",{key:"overflow",className:"_jf3",title:a},"+"+String(d)))}return j.createElement("span",{className:b("joinClasses")(c,"_jf4"+((m.length+d|0)===1?" _jf5":"")+(b("MercuryAttachment").isSinglePhotoGroupAttachment(e)?" _ba3":""))},m)}else return null}}}c={make:a};d=b("ReasonReact.bs").statelessComponent("MessengerMessageSeenHeadsReact");e=a;g=a;f.maxSeenHeads=k;f.calculateSliceNumber=l;f.MessengerMessageSeenHeadsWrapper=c;f.component=d;f.make=e;f.jsComponent=g}),null);
__d("MessengerBusinessHideImageBootloaded.react",["cx","CssBackgroundImage.react","ErrorBoundary.react","JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("lazyLoadComponent")(b("JSResource")("MessengerBusinessHideImage.react").__setRef("MessengerBusinessHideImageBootloaded.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("ErrorBoundary.react"),{children:h.jsx(h.Suspense,{fallback:h.jsx(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:this.props.thumbnail,className:"_3v3t"}),children:h.jsx(i,{fbid:this.props.fbid,renderSmall:this.props.renderSmall})})})};return c}(h.Component);e.exports=a}),null);
__d("SphericalPhotoViewerInMessengerThreadBootloaded.react",["cx","BootloadedComponent.react","CssBackgroundImage.react","JSResource","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(this.props.photoEncodings&&this.props.thumbnail){var a=this.props.photoEncodings.find(function(a){return a.projection_type==="perspective"}),c=null,d=null;if(a&&a.thumbnails&&a.thumbnails.length>0){a=a.thumbnails;c=a[0]?a[0].uri:null;d=a[1]?a[1].uri:null}if(this.props.useRenderer&&this.props.width&&this.props.height&&this.props.fbid){a=d||c||this.props.thumbnail;return h.jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoViewerInMessengerThreadWrapper.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:h.jsx(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:a,className:"_3v3t"}),height:this.props.height,width:this.props.width,fbid:this.props.fbid,thumbnail:a,photoEncodings:this.props.photoEncodings,isVisible:this.props.isVisible,onClickHandler:this.props.onClickHandler})}else{a=c||d||this.props.thumbnail;return h.jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoMessengerThumbnail.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:h.jsx(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:a,className:"_3v3t"}),photoEncodings:this.props.photoEncodings,thumbnail:a})}}return null};return c}(h.Component);e.exports=a}),null);
__d("MessengerSphericalPhotoReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","SphericalPhotoViewerInMessengerThreadBootloaded.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){var k;return b("ReasonReact.bs").wrapJsForReason(b("SphericalPhotoViewerInMessengerThreadBootloaded.react"),{height:(k=b("bs_js_null_undefined")).fromOption(a),width:k.fromOption(c),fbid:k.fromOption(d),thumbnail:k.fromOption(e),photoEncodings:k.fromOption(f),isVisible:b("Utils.bs").optionBoolToBool(g),onClickHandler:h,useRenderer:i},j)}f.make=a}),null);
__d("MessengerPhotoReact.bs",["cx","fbt","bs_curry","Image.bs","React","Utils.bs","cssURL","Link.react","bs_caml_option","ReasonReact.bs","joinClasses","bs_caml_primitive","MercuryAttachmentType","MessengerSpinnerReact.bs","bs_caml_builtin_exceptions","MessengerSurfaceQuickChat.bs","MessengerSphericalPhotoReact.bs","MessengerBusinessHideImageReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a,c){var d=a.metadata;if(d==null)return null;else if(a.attach_type===b("MercuryAttachmentType").VIDEO)if(c&&!(d.large_preview==null))return d.large_preview;else return d.inbox_preview;else if(c)return a.large_preview_url;else return a.preview_url}function k(a){if(a==null)return[null,null];else return[a.width,a.height]}function l(a){var c=window.screen.width>1800;if(b("Utils.bs").isTruthy(a.preview_uploading)){var d=function(a,b){if(a==null)return b;else return a};if(c&&!(a.large_preview_url==null))return{width:d(a.large_preview_width,480),height:d(a.large_preview_height,480),src:a.large_preview_url,renderLargePreview:c};else return{width:d(a.preview_width,280),height:d(a.preview_height,280),src:a.preview_url,renderLargePreview:c}}else{d=j(a,c);var e=!(d==null),f=a.metadata;if(e&&!(f==null)){e=c&&!(f.large_size==null)?f.large_size:f.inbox_size;f=k(e);return{width:f[0],height:f[1],src:d,renderLargePreview:c}}if(a.preview_url==null){e=a.media;if(e==null)return;else if(!(e.playable==null)&&!(e.animated_image==null)){f=k(e.animated_image_size);return{width:f[0],height:f[1],src:e.animated_image,renderLargePreview:c}}else{d=k(e.image_size);return{width:d[0],height:d[1],src:e.image,renderLargePreview:c}}}else if(c&&!(a.large_preview_url==null))return{width:a.large_preview_width,height:a.large_preview_height,src:a.large_preview_url,renderLargePreview:c};else return{width:a.preview_width,height:a.preview_height,src:a.preview_url,renderLargePreview:c}}}function m(a){var c=function(a){return""+(String(a)+"")};if(b("Utils.bs").isTruthy(a.preview_uploading))return c(a.preview_url==null?280:0);else{var d=function(a){var b=a[1];a=a[0];if(!(a==null)&&!(b==null))return[a,b]},e=function(a){if(a!==void 0){a=a;return d([a.width,a.height])}};e=a.media==null?d([a.preview_width,a.preview_height]):e(l(a));if(e!==void 0){a=e;return c(b("bs_caml_primitive").caml_float_min(a[1]*b("bs_caml_primitive").caml_float_min(1,450/a[0]),450))}else return}}function n(a){var c=a.metadata,d=a.isAnimated,e=a.className,f=a.attachment;a=a.isSingle;var g=b("MessengerSurfaceQuickChat.bs").useIsQuickChatSurface(0);b("Utils.bs").isTruthy(f.preview_uploading);var h=c.src;if(h==null||!a)return null;else{a=c.renderLargePreview?window.screen.height*.7:window.screen.height*.65;c=g?{maxHeight:""+(String(a)+""),maxWidth:"160px",width:"100%"}:{maxHeight:""+(String(a)+""),maxWidth:"100%",width:"100%"};if(g)a={maxWidth:"160px"};else{g=f.preview_width;f.preview_height;a=g==null?c:{width:g.toString()+"px"}}return i.createElement("div",{style:a},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(b("joinClasses")(e,d?"":"_5pf5"),"",void 0,void 0,h,void 0,void 0,void 0,b("bs_caml_option").some(c),[])))}}function a(a){var c=a.className,d=a.attachment,e=a.isSingle,f=a.isVisible,g=a.onAttachmentLoad,j=a.onClick;a=a.children;c=c!==void 0?c:"";i.useEffect(function(){g!==void 0&&b("bs_curry")._1(g,0);return},[]);var k=l(d);if(k!==void 0){k=k;var o=d.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE,p=!(d.app_attribution==null),q=d.photo_encodings;q=q==null?!1:q.length!==0;var r=d.blurred_image_uri;r=!(r==null);if((!o||!e)&&!q){var s=k.src;s=s==null?void 0:b("cssURL")(s);var t=e?m(d):void 0;s=[s,t]}else s=[void 0,void 0];t={};var u=s[0];u!==void 0&&(t.backgroundImage=b("bs_caml_option").valFromOption(u));u=s[1];u!==void 0&&(t.minHeight=b("bs_caml_option").valFromOption(u));s=t;u=b("Utils.bs").isTruthy(d.preview_uploading)?i.createElement("span",{className:"_7atr"},i.createElement(b("MessengerSpinnerReact.bs").make,{})):null;t=o?b("MercuryAttachmentType").ANIMATED_IMAGE:void 0;var v=function(a){if(j!==void 0)return b("bs_curry")._1(j,d);else return 0},w=function(a){a.preventDefault();return v(0)};if(q){var x=k.src,y=d.metadata,z;if(y==null)z=void 0;else{y=y.fbid;z=y==null?void 0:b("bs_caml_option").some(y)}y=d.photo_encodings;z=b("ReasonReact.bs").element(void 0,void 0,b("MessengerSphericalPhotoReact.bs").make(400,400,z,x==null?void 0:b("bs_caml_option").some(x),y==null?void 0:b("bs_caml_option").some(y),f,v,e,[]))}else if(r){x=d.metadata;if(x==null)y=void 0;else{f=x.fbid;y=f==null?void 0:b("bs_caml_option").some(f)}x=k.src;z=b("ReasonReact.bs").element(void 0,void 0,b("MessengerBusinessHideImageReact.bs").make(y,x==null?void 0:b("bs_caml_option").some(x),!1,[]))}else z=i.createElement(n,{metadata:k,isAnimated:e&&o,className:(p?"_mxz":"")+(e&&!p?" _52mr":"")+(e&&!p?" _1byr":""),attachment:d,isSingle:e});if(r)f=null;else{y={"aria-label":h._("Open photo"),className:"_4tsl",children:a};x=b("bs_caml_option").nullable_to_opt(k.src);x!==void 0&&(y.href=b("bs_caml_option").valFromOption(x));f=i.createElement(b("Link.react"),y)}return i.cloneElement(i.createElement("div",{className:b("joinClasses")(c,"_4tsk"+(p?" _mxz":"")+(e&&!p?" _52mr":"")+(e&&!p?" _1byr":"")+(b("Utils.bs").isTruthy(d.preview_uploading)&&k.src==null?" _3etv":"")+(q&&!e?" _3603":"")),role:"presentation",style:s,onClick:w}),{"data-testid":t},i.createElement("div",{className:q&&!e?"_64ks":""}),f,z,u)}else return null}c=280;d=480;e=1800;g=450;var o=n;a=a;f.preview_thumbnail_size=c;f.preview_large_size=d;f.large_window_width=e;f.max_photo_width=g;f.getSrcFromAttachment=j;f.sizeToWidthHeight=k;f.extractPreviewMetadata=l;f.getMinHeightForAttachment=m;f.getImageFromMetadata=o;f.make=a}),null);
__d("MessengerPhotoViewCloseLinkReact.bs",["cx","fbt","bs_curry","React","TooltipLink.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.onClick;a=i.jsx("span",{children:h._("Press Esc to close")});return i.jsx(b("TooltipLink.react"),{children:i.jsx("div",{className:"_387s"}),className:"_51ok _50-m _51an",onClick:function(a){return b("bs_curry")._1(c,0)},tooltip:a})}c=a;f.make=c}),null);
__d("MessengerPhotoViewCloseLinkReact.re",["MessengerPhotoViewCloseLinkReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerPhotoViewCloseLinkReact.bs").make;f.make=a}),null);
__d("MessagesViewerSetID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("MessengerThreadSharedMediaAfterWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1668947383157276"};b.getQueryID=function(){return"515216185516880"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadSharedMediaBeforeWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1712143858865110"};b.getQueryID=function(){return"1694317194012102"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadSharedMediaFindWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1933185426727404"};b.getQueryID=function(){return"237087923629184"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSharedMediaStore",["FluxReduceStore","MessengerFluxReduceDispatcher","MessengerSharedMediaActions","MessengerSharedMediaReducer","MessengerSharedMediaState"],(function(a,b,c,d,e,f){"use strict";var g=Object.keys(b("MessengerSharedMediaReducer"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("MessengerSharedMediaState"))()};d.reduce=function(a,c){if(c.namespace!==b("MessengerSharedMediaActions").Namespace)return a;g.forEach(function(d){a=b("MessengerSharedMediaReducer")[d](a,c)});return a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("MessengerFluxReduceDispatcher"))}),null);
__d("MessengerSharedPhotosAlbumViewPhotoReact.bs",["fbt","bs_curry","React","cssURL","bs_belt_Option","bs_caml_option"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=h.forwardRef(function(a,c){var d=a.className,e=a.fbid,f=a.onClick,i=a.uri;a=a.children;c=c;a={children:a,"aria-label":g._("Photo"),className:d,style:{backgroundImage:b("cssURL")(i)},href:"#",onClick:function(a){return b("bs_curry")._1(f,e)}};d=b("bs_belt_Option").map(c==null?void 0:b("bs_caml_option").some(c),function(a){return a});d!==void 0&&(a.ref=b("bs_caml_option").valFromOption(d));return h.jsx("a",a)});f.make=a}),null);
__d("MessengerSharedPhotosAlbumViewVScrollReact.bs",["cx","FBID.bs","bs_curry","React","bs_string","ReactDOM","Animation","bs_caml_array","bs_caml_option","ReasonReact.bs","setInterval","clearInterval","bs_caml_builtin_exceptions","MessengerSharedMediaActions","MessengerSharedPhotosAlbumViewPhotoReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function i(a){var c=a.sharedPhotos,d=c.length;if(d<48){b("MessengerSharedMediaActions").loadMorePrevious(a.threadID,b("bs_caml_array").caml_array_get(c,c.length-1|0).cursor,48);return 0}else return 0}function j(a){if(a!==void 0){a=b("bs_caml_option").valFromOption(a);return(a.scrollTop+a.clientHeight|0)>=(a.scrollHeight-20|0)}else throw b("bs_caml_builtin_exceptions").not_found}function k(a){if(a!==void 0)return b("bs_caml_option").valFromOption(a).scrollTop<=20;else throw b("bs_caml_builtin_exceptions").not_found}function l(a){if(a!==void 0)return b("bs_caml_option").valFromOption(a).clientHeight;else throw b("bs_caml_builtin_exceptions").not_found}function m(a,c){if(a!==void 0){new(b("Animation"))(b("bs_caml_option").valFromOption(a)).to("scrollTop",c).duration(200).go();return 0}else return 0}function n(a){var c=a.child.contents;if(c!==void 0)return m(a.childContainer.contents,b("ReactDOM").findDOMNode(b("bs_caml_option").valFromOption(c)).offsetTop-70|0);else return 0}function o(a,c){a=c.retainedProps;var d=a.isLoading,e=a.sharedPhotos,f=a.threadID;c=c.state;var g=e.length;if(j(c.childContainer.contents))if(g<a.totalCount&&!d.prev){b("MessengerSharedMediaActions").loadMorePrevious(f,b("bs_caml_array").caml_array_get(e,e.length-1|0).cursor,48);return 0}else return 0;else if(k(c.childContainer.contents)&&!d.latest){b("MessengerSharedMediaActions").loadMoreLatest(f,b("bs_caml_array").caml_array_get(e,0).cursor,48);return 0}else return 0}function p(a){var c=a.state,d=c.childContainer.contents;if(d!==void 0){var e=b("bs_curry")._1(a.handle,o);b("bs_caml_option").valFromOption(d).addEventListener("scroll",e);b("bs_curry")._1(a.onUnmount,function(a){a=c.childContainer.contents;if(a!==void 0)return b("bs_caml_option").valFromOption(a).removeEventListener("scroll",e);else return 0})}i(a.retainedProps);d=function(a){if(l(c.scrollable.contents)>0){n(c);a=c.interval.contents;if(a!==void 0){b("clearInterval")(b("bs_caml_option").valFromOption(a));c.interval.contents=void 0;return 0}else return 0}else return 0};c.interval.contents=b("bs_caml_option").some(b("setInterval")(d,200));return 0}function q(a){a=a.state.interval.contents;if(a!==void 0){b("clearInterval")(b("bs_caml_option").valFromOption(a));return 0}else return 0}var r=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerSharedPhotosAlbumViewVScrollReact");function s(a,c){c.state.childContainer.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function t(a,c){c.state.scrollable.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function u(a,c){c.state.child.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function v(a,c,d,e,f,g,i){var j=function(a){return d.map(function(d){d=d.node;var e=d.photo_encodings;e=e==null?!1:e.length!==0;var f=d.photo_encodings,i,j=0;if(e&&!(f==null)){f=f.find(function(a){return a.projection_type==="perspective"});if(f!==void 0){f=f.thumbnails;if(f.length!==0)i=f[0].uri;else{f=d.image1;i=f==null?void 0:f.uri}}else{f=d.image1;i=f==null?void 0:f.uri}}else j=1;if(j===1){f=d.image1;i=f==null?void 0:f.uri}if(i!==void 0){j={className:"_3bly"+(e?" _3603":""),fbid:b("FBID.bs").ofStringExn(d.legacy_attachment_id),onClick:c,uri:i,children:h.createElement("div",{key:b("bs_string").concat("_",[d.legacy_attachment_id,["spherical_gradient",0]]),className:e?"_64ks":""})};f=d.legacy_attachment_id===g?b("bs_curry")._1(a.handle,u):void 0;f!==void 0&&(j.ref=b("bs_caml_option").valFromOption(f));return h.jsx(b("MessengerSharedPhotosAlbumViewPhotoReact.bs").make,j,d.legacy_attachment_id)}else return null})};return{debugName:r.debugName,reactClassInternal:r.reactClassInternal,handedOffState:r.handedOffState,getDerivedStateFromProps:r.getDerivedStateFromProps,didMount:p,didUpdate:r.didUpdate,willUnmount:q,shouldUpdate:r.shouldUpdate,render:function(a){return h.createElement("div",{ref:b("bs_curry")._1(a.handle,s),className:"_3xo8",onScroll:b("bs_curry")._1(a.handle,o)},h.createElement("div",{ref:b("bs_curry")._1(a.handle,t),className:"_3xoa"},j(a)))},initialState:function(a){return{interval:{contents:void 0},childContainer:{contents:void 0},child:{contents:void 0},scrollable:{contents:void 0}}},retainedProps:{threadID:e,sharedPhotos:d,totalCount:f,isLoading:a},reducer:function(a,b){return 0},jsElementWrapped:r.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(r,function(a){return v(a.isLoading,a.onClick,a.sharedPhotos,a.threadID,a.totalCount,a.viewedPhoto,[])});c=200;d=48;e=6;g=20;var w=70;f.animationDuration=c;f.imagesToLoad=d;f.photosPerRow=e;f.scrollToEdgeTolerance=g;f.headerHeight=w;f.graduallyLoadPhotos=i;f.isScrolledToBottom=j;f.isScrolledToTop=k;f.getScrollHeight=l;f.scrollTo=m;f.autoScrollWhenLoaded=n;f.handleScroll=o;f.didMount=p;f.willUnmount=q;f.component=r;f.setRefChildContainer=s;f.setRefScrollable=t;f.setRefChild=u;f.make=v;f.jsComponent=a}),null);
__d("MessengerPhotoViewBottomBarReact.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.children;return h.jsx("div",{children:a,className:"_51an _50-m _16zz"})}c=a;f.make=c}),null);
__d("MessengerPhotoViewBottomBarReact.re",["MessengerPhotoViewBottomBarReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerPhotoViewBottomBarReact.bs").make;f.make=a}),null);
__d("MessengerSharedPhotoReact.bs",["cx","fbt","bs_curry","React","Link.react","CssBackgroundImage.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j={height:"100%"};function a(a){var c=a.className,d=a.fbid,e=a.onClick,f=a.uri;a=a.isSpherical;var g=function(a){a.preventDefault();return b("bs_curry")._1(e,d)},k=h._("photo");if(f!==void 0){f=f;a=a?i.jsx("div",{className:"_3603 _64ks"}):null;return i.jsx(b("Link.react"),{"aria-label":k,className:c,href:f,onClick:g,children:i.jsx(b("CssBackgroundImage.react"),{className:c,imageURI:f,backgroundPosition:"center",style:j,children:a})})}else return i.jsx(b("Link.react"),{"aria-label":k,className:c,onClick:g,role:"button"})}c=a;f.style100pct=j;f.make=c}),null);
__d("MessengerSharedPhotoReact.re",["MessengerSharedPhotoReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerSharedPhotoReact.bs").make;f.make=a}),null);
__d("XForwardingNUXSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/forwarding_nux_seen/",{})}),null);
__d("MessagingForwardingButtonNUX.react",["AsyncRequest","ChatConfig","React","XForwardingNUXSeenController","XUIAmbientNUX.react","prop-types"],(function(a,b,c,d,e,f){var g=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showNUX:!b("ChatConfig").get("seen_forwarding_nux")},d.$1=function(){if(!d.state.showNUX)return;b("ChatConfig").set("seen_forwarding_nux",!0);new(b("AsyncRequest"))(b("XForwardingNUXSeenController").getURIBuilder().getURI()).send();d.setState({showNUX:!1})},d.close=function(){d.$1()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return g.jsx(b("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,onCloseButtonClick:this.$1,position:"left",width:"auto",shown:this.state.showNUX,children:this.props.children})};return c}(g.Component);a.propTypes={contextRef:b("prop-types").func.isRequired};e.exports=a}),null);
__d("SpotlightViewerBottomBarLink",["cx","Link.react","React"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.className||"_4_8j _4_8k";return h.jsx(b("Link.react"),babelHelpers["extends"]({},this.props,{className:a,children:this.props.children}))};return c}(h.Component);e.exports=a}),null);
__d("XMessagingVideoAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/video/",{video_id:{type:"String",required:!0},video_container_id:{type:"String",required:!0},width:{type:"Int",required:!0},height:{type:"Int",required:!0},start_muted:{type:"Bool",defaultValue:!1},no_fullscreen:{type:"Bool",defaultValue:!1},load_player_controller:{type:"Bool",defaultValue:!1},hide_controls_on_finish:{type:"Bool",defaultValue:!1},hide_url_menu_option:{type:"Bool",defaultValue:!1},is_share:{type:"Bool",defaultValue:!1},render_play_button:{type:"Bool",defaultValue:!1},start_timestamp:{type:"Int",defaultValue:0},native_thumbnail:{type:"Bool",defaultValue:!1}})}),null);
__d("MessagingForwardAttachmentDialog.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return g.jsx(b("BootloadOnRender.react"),{component:g.jsx(b("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:b("JSResource")("MessagingForwardAttachmentDialogImpl.react").__setRef("MessagingForwardAttachmentDialog.react"),placeholder:g.jsx("div",{})})};return c}(g.PureComponent);e.exports=a}),null);
__d("XMessagingPhotoDownloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/photo/",{photo_id:{type:"String",required:!0}})}),null);
__d("XMessagingShareAttachmentDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/share/dialog/",{__asyncDialog:{type:"Int"}})}),null);
__d("SpotlightMercurySharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","AsyncDialog","AsyncRequest","BootloadedComponent.react","ChatPhotoViewFooterHScroll.react","ChatPhotoViewHeader.react","Event","FunnelLogger","JSResource","KeyEventController","MessagingForwardAttachmentDialog.react","MessengerThreadSharedMediaHelper","MessengerVideoPlayer.react","Parent","PhotoUtils","React","SpotlightMessagesViewerPagers.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","XMessagingShareAttachmentDialogController","lazyLoadComponent","prop-types"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("React"),l=88,m=30,n="WWW_MESSENGER_SHARE_TO_FB_FUNNEL",o="_4-og";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=void 0,d.$2=[],d.state={hasPrevPage:!1,hasNextPage:!1,firstPhotoLoaded:!1,isLoading:!1,mediaData:[],numberInOneBatch:m,photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(b("Vector"))()},d.$11=function(){return!d.state.photoData?null:k.jsx(b("ChatPhotoViewFooterHScroll.react"),{onScroll:d.$18,photoID:d.state.photoData.node.id,sharedPhotos:d.state.mediaData,updateNumberInOneBatch:d.$19,width:d.state.stageDimensions.x})},d.$19=function(a){d.setState({numberInOneBatch:a})},d.$18=function(a){if(!d.state.mediaData||d.state.isLoading)return;var b=d.state.mediaData.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=d.state.mediaData[b];d.setState({photoData:c});d.$22(b)},d.$5=function(a,c){if(d.state.photoData==null||d.state.isLoading)return;if(c&&!!b("Parent").bySelector(c.target,"._170l"))return;c&&c.target instanceof HTMLElement&&c.target.className===o&&d.$10();c=d.state.mediaData.findIndex(function(a){d.state.photoData!=null||j(0,1033);return a.node.legacy_attachment_id===d.state.photoData.node.legacy_attachment_id});if(c<0||c===d.state.mediaData.length-1&&!d.state.hasNextPage&&a)return;if(c===0&&!a){d.setState({isLoading:!0},function(){return d.$7(d.state.photoData,1,function(b){if(b===0)return;d.$5(a)})});return}var e=a?d.state.mediaData[c+1]:d.state.mediaData[c-1];d.setState({photoData:e});d.$22(c)},d.$10=function(){if(d.props.photoID===null)return;d.setState({photoData:null});d.props.onClosePhotoView()},d.$16=function(){d.setState({showForward:!0})},d.$20=function(){d.setState({showForward:!1})},d.$15=function(){d.setState({showInfo:!0})},d.$21=function(){d.setState({showInfo:!1})},d.$17=function(){d.setState({showForward:!1,showInfo:!1});b("FunnelLogger").appendAction(n,"click");var a=d.state.photoData;if(!d.$14()||!(a&&a.node))return;a=a.node.legacy_attachment_id;var c=b("XMessagingShareAttachmentDialogController").getURIBuilder().getURI();c=new(b("AsyncRequest"))(c).setData({attachment_id:a}).setMethod("POST");b("AsyncDialog").send(c)},d.$23=function(a,b,c){var e=Object.keys(a)[0];a=a[e].message_shared_media;e=a.page_info;var f=a.edges.length;if(f!==0){var g=d.state.mediaData;switch(b){case 0:d.setState({photoData:a.edges[0],mediaData:[a.edges[0]],firstPhotoLoaded:!0});break;case 1:g=g.concat(a.edges);d.setState({hasNextPage:e.has_next_page,mediaData:g});break;case-1:g=a.edges;g=g.concat(d.state.mediaData);d.setState({mediaData:g,hasPrevPage:e.has_previous_page});break}}d.setState({isLoading:!1});c(f)},d.$3=function(){var a=new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y-l);return a},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getDefaultProps=function(){return{enableShareToFB:!1}};d.componentDidMount=function(){var a=this;this.setState({isLoading:!0,stageDimensions:this.$3()},function(){return a.$4(a.props.photoID)});this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Event").listen(window,"resize",function(){a.setState({stageDimensions:a.$3()})}),b("KeyEventController").registerKey("LEFT",function(){a.$5(!1);return!1}),b("KeyEventController").registerKey("RIGHT",function(){a.$5(!0);return!1}));this.props.enableShareToFB&&b("FunnelLogger").startFunnel(n)};d.UNSAFE_componentWillUpdate=function(a,b){var c=this;b.firstPhotoLoaded!==this.state.firstPhotoLoaded&&this.setState({isLoading:!0},function(){c.$6(b.photoData,b.numberInOneBatch,function(){}),c.$7(b.photoData,b.numberInOneBatch,function(){})});b.numberInOneBatch!=this.state.numberInOneBatch&&!b.isLoading&&this.setState({isLoading:!0},function(){return c.$6(b.mediaData[b.mediaData.length-1],b.numberInOneBatch,function(){})})};d.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};d.render=function(){var a=this,c=this.$8(),d=this.state.stageDimensions,e=this.state.isLoading||this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var f=this.state.mediaData.findIndex(function(b){a.state.photoData!=null||j(0,1033);return b.node.id===a.state.photoData.node.id});f=k.jsxs("div",{children:[this.$9(),this.props.disablepaging?null:k.jsx(b("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:f<=0&&!this.state.hasPrevPage,disableNextArrow:!this.state.hasNextPage&&f>=this.state.mediaData.length-1})]});return k.jsxs("span",{children:[k.jsxs(b("SpotlightViewer"),{className:"_53vs",onHide:this.$10,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName,children:[k.jsx(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:c,onClick:this.$5,ref:"viewport",showLoadingIndicator:e,stageDimensions:d,useWidth:!0,children:f}),this.$11()]}),this.$12(),this.$13()]})};d.$9=function(){if(!this.state.photoData)return null;var a=this.state.photoData;a=a.node.legacy_attachment_id;a=b("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=b("ActorURI").create(a,this.props.actorid));return k.jsx(b("ChatPhotoViewHeader.react"),{disableForward:this.props.disableForward,enableShareToFB:this.$14(),onClose:this.$10,openInfo:this.$15,ref:"photoviewheader",showForwardDialog:this.$16,showShareDialog:this.$17,url:a})};d.$12=function(){if(!this.state.photoData||!this.state.showForward)return null;var a=i._("Forward in separate messages");return k.jsx(b("MessagingForwardAttachmentDialog.react"),{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$20,shown:this.state.showForward,title:a})};d.$13=function(){return this.state.showInfo?k.jsx(k.Suspense,{fallback:k.jsx("div",{}),children:k.jsx(p,{closeInfo:this.$21,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id})}):k.jsx("xhp",{})};d.$14=function(){var a=this.state.photoData;return!a?!1:!!this.props.enableShareToFB&&a.node.__typename==="MessageImage"&&a.node.image1.uri.indexOf(".gif")<0};d.$22=function(a){var b=this,c=this.state.numberInOneBatch,d=this.state.mediaData;a<=c/2?this.setState({isLoading:!0},function(){return b.$7(d[0],c,function(){})}):a>=d.length-c/2&&this.state.hasNextPage&&this.setState({isLoading:!0},function(){return b.$6(d[d.length-1],c,function(){})})};d.$4=function(a){var c=this;a=b("MessengerThreadSharedMediaHelper").search(this.props.threadID,String(a),function(a){return c.$23(a,0,function(){})});this.$2.push(a)};d.$6=function(a,c,d){var e=this;a=b("MessengerThreadSharedMediaHelper").loadMorePrevious(this.props.threadID,a.cursor,c||1,function(a){return e.$23(a,1,d)});this.$2.push(a)};d.$7=function(a,c,d){var e=this;a=a?a.cursor:null;a=b("MessengerThreadSharedMediaHelper").loadMoreLatest(this.props.threadID,a,c||1,function(a){return e.$23(a,-1,d)});this.$2.push(a)};d.$8=function(){if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$24();var d=this.state.stageDimensions,e=this.$25(a,d);if(!e)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$26(a.legacy_attachment_id,e,a.photo_encodings,d);a=c.getImageDimensionsForStage(new(b("Vector"))(e.width,e.height),d);return this.$27(e,a)}else return null};d.$24=function(){return this.state.photoData?k.jsx(b("MessengerVideoPlayer.react"),{isOnStage:!0,isVisible:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};d.$27=function(a,c){return k.jsx(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};d.$26=function(a,c,d,e){return k.jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMercurySharedMediaViewer.react"),bootloadPlaceholder:k.jsx("div",{}),height:e.y,width:e.x,fbid:a,thumbnail:c.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};d.$25=function(a,c){var d=null;a=b("PhotoUtils").getImagesFromData(a);a=a.sort(function(a,b){return a.width==null?b.width==null?0:1:b.width==null?-1:b.width-a.width});window.devicePixelRatio&&window.devicePixelRatio>1&&(c=new(b("Vector"))(c.x*window.devicePixelRatio,c.y*window.devicePixelRatio));for(var e=0;e<a.length;e++)(!d||a[e].width>=c.x||a[e].height>=c.y)&&(d=a[e]);return d};return c}(k.Component);a.propTypes={disableForward:(c=b("prop-types")).bool,enableShareToFB:c.bool,onClosePhotoView:c.func,photoID:c.string,rootClassName:c.string,threadID:c.string};a.getImageDimensionsForStage=function(a,c){var d=a.x;a=a.y;var e=c.x;c=c.y;var f=d/a,g=e/c;d>=e||a>=c?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(c*f),a=c):(d=e,a=c):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(b("Vector"))(d,a)};var p=b("lazyLoadComponent")(b("JSResource")("MessengerPhotoInfoDialogContainer.react").__setRef("SpotlightMercurySharedMediaViewer.react"));e.exports=a}),null);
__d("SpotlightMessengerSharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","BootloadedComponent.react","Event","JSResource","KeyEventController","MessengerForwardAttachmentDialogReact.bs","MessengerPhotoViewBottomBarReact.re","MessengerPhotoViewHeader.react","MessengerPhotoViewHScroll.react","MessengerSharedMediaActions","MessengerVideoPlayer.react","Parent","PhotoUtils","React","ScriptPath","SpotlightMessagesViewerPagers.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","lazyLoadComponent","prop-types"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("MessengerForwardAttachmentDialogReact.bs").jsComponent,l=b("MessengerPhotoViewBottomBarReact.re").make,m=b("React"),n=88,o=80,p=30,q="_4-og";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=void 0,d.$2=[],d.state={photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(b("Vector"))()},d.$14=function(a){if(!d.props.sharedMedia)return;var b=d.props.sharedMedia.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=d.props.sharedMedia[b];d.setState({photoData:c});d.$17(b)},d.$4=function(a,c){if(d.state.photoData==null)return;var e=d.state.photoData;if(c&&!!b("Parent").bySelector(c.target,"._170l"))return;c&&c.target instanceof HTMLElement&&c.target.className===q&&d.$7();c=d.props.sharedMedia.findIndex(function(a){return a.node.legacy_attachment_id===e.node.legacy_attachment_id});if(c<0||c===d.props.sharedMedia.length-1&&!d.props.hasNextPage&&a)return;if(c===0&&!a){b("MessengerSharedMediaActions").loadMoreLatest(d.props.threadID,d.props.sharedMedia[0].cursor,p);return}a=a?d.props.sharedMedia[c+1]:d.props.sharedMedia[c-1];d.setState({photoData:a});d.$17(c)},d.$7=function(){if(d.props.photoID===null)return;b("ScriptPath").closeOverlayView("spotlight_media_view");d.setState({photoData:null});d.props.onClosePhotoView()},d.$12=function(){d.setState({showForward:!0})},d.$15=function(){d.setState({showForward:!1})},d.$11=function(){d.setState({showInfo:!0})},d.$16=function(){d.setState({showInfo:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this,c=this.props.sharedMedia.find(function(b){return b.node.legacy_attachment_id===a.props.photoID});this.setState({photoData:c,stageDimensions:this.$3()});this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Event").listen(window,"resize",function(){a.setState({stageDimensions:a.$3()})}),b("KeyEventController").registerKey("LEFT",function(){a.$4(!1);return!1}),b("KeyEventController").registerKey("RIGHT",function(){a.$4(!0);return!1}));b("ScriptPath").openOverlayView("spotlight_media_view",{photoID:this.props.photoID,threadID:this.props.threadID})};d.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};d.render=function(){var a=this,c=this.$5(),d=this.state.stageDimensions,e=this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var f=this.props.sharedMedia.findIndex(function(b){a.state.photoData!=null||j(0,1033);return b.node.id===a.state.photoData.node.id});f=m.jsxs("div",{children:[this.$6(),this.props.disablepaging?null:m.jsx(b("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:f<=0&&!this.props.hasPrevPage,disableNextArrow:!this.props.hasNextPage&&f>=this.props.sharedMedia.length-1})]});return m.jsxs("span",{children:[m.jsxs(b("SpotlightViewer"),{className:"_53vs",onHide:this.$7,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName,children:[m.jsx(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:c,onClick:this.$4,ref:"viewport",showLoadingIndicator:e,stageDimensions:d,useWidth:!0,children:f}),this.$8()]}),this.$9(),this.$10()]})};d.$6=function(){if(!this.state.photoData)return null;var a=this.state.photoData.node.legacy_attachment_id;a=b("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=b("ActorURI").create(a,this.props.actorid));return m.jsx(b("MessengerPhotoViewHeader.react"),{disableForward:this.props.disableForward,onClose:this.$7,openInfo:this.$11,photoID:this.props.photoID,ref:"photoviewheader",showForwardDialog:this.$12,url:a})};d.$13=function(a){return a?Math.ceil(a/o):p};d.$8=function(){var a=this;if(!this.state.photoData)return null;var c=this.state.photoData,d=m.jsx("button",{className:"_2n5b",onClick:function(){return a.props.openAlbum(c.node.legacy_attachment_id)},type:"button",children:m.jsx("div",{"aria-label":i._("Full-screen photo gallery"),className:"_3por"})});return m.jsxs(l,{children:[m.jsx(b("MessengerPhotoViewHScroll.react"),{onScroll:this.$14,photoID:c.node.legacy_attachment_id,sharedPhotos:this.props.sharedMedia,width:this.state.stageDimensions.x}),d]})};d.$9=function(){if(!this.state.photoData||this.props.disableForward)return null;var a=i._("Forward in separate messages");return m.jsx(k,{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$15,shown:this.state.showForward,title:a})};d.$10=function(){return this.state.showInfo?m.jsx(m.Suspense,{fallback:m.jsx("div",{}),children:m.jsx(r,{closeInfo:this.$16,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id})}):m.jsx("xhp",{})};d.$17=function(a){var c=this.$13(this.state.stageDimensions.x),d=this.props.sharedMedia;a<=c/2?(b("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,d[0].cursor,c),d.length<c&&this.props.hasNextPage&&b("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,d[d.length-1].cursor,c)):a>=d.length-c/2&&this.props.hasNextPage&&b("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,d[d.length-1].cursor,c)};d.$3=function(){var a=new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y-n);return a};d.$5=function(){if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$18();var d=this.state.stageDimensions,e=this.$19(a,d);if(!e)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$20(a.legacy_attachment_id,e,a.photo_encodings,d);a=c.getImageDimensionsForStage(new(b("Vector"))(e.width,e.height),d);return this.$21(e,a)}else return null};d.$18=function(){return this.state.photoData?m.jsx(b("MessengerVideoPlayer.react"),{isVisible:!0,isOnStage:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};d.$21=function(a,c){return m.jsx(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};d.$20=function(a,c,d,e){return m.jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMessengerSharedMediaViewer.react"),bootloadPlaceholder:m.jsx("div",{}),height:e.y,width:e.x,fbid:a,thumbnail:c.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};d.$19=function(a,c){c=b("PhotoUtils").getImagesFromData(a);return c[c.length-1]};return c}(m.Component);a.propTypes={disableForward:(c=b("prop-types")).bool,hasPrevPage:c.bool,hasNextPage:c.bool,onClosePhotoView:c.func,openAlbum:c.func,photoID:c.string,rootClassName:c.string,threadID:c.string,sharedMedia:c.arrayOf(c.object)};a.getImageDimensionsForStage=function(a,c){var d=a.x;a=a.y;var e=c.x;c=c.y;var f=d/a,g=e/c;d>=e||a>=c?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(c*f),a=c):(d=e,a=c):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(b("Vector"))(d,a)};var r=b("lazyLoadComponent")(b("JSResource")("MessengerPhotoInfoDialogContainer.react").__setRef("SpotlightMessengerSharedMediaViewer.react"));e.exports=a}),null);
__d("SpotlightMessengerSharedMediaViewerContainer.react",["FluxContainer","MessengerSharedMediaActions","MessengerSharedMediaStore","React","SpotlightMessengerSharedMediaViewer.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("MessengerSharedMediaStore")]};c.calculateState=function(a,c){a=b("MessengerSharedMediaStore").getState();var d=a.sharedMedia.get(c.threadID);a=a.isLoading.get(c.threadID);return{sharedMedia:d,isLoading:a}};var d=c.prototype;d.componentDidMount=function(){b("MessengerSharedMediaActions").loadCurrent(this.props.threadID,this.props.photoID)};d.render=function(){var a=this;if(!this.state.sharedMedia)return null;var c=this.state.sharedMedia&&this.state.sharedMedia.edges.find(function(b){return b.node.legacy_attachment_id===a.props.photoID});return!c?null:g.jsx(b("SpotlightMessengerSharedMediaViewer.react"),{disableForward:this.props.disableForward,hasPrevPage:this.state.sharedMedia&&this.state.sharedMedia.has_previous_page,hasNextPage:this.state.sharedMedia&&this.state.sharedMedia.has_next_page,onClosePhotoView:this.props.onClosePhotoView,openAlbum:this.props.openAlbum,photoID:this.props.photoID,rootClassName:this.props.rootClassName,sharedMedia:this.state.sharedMedia&&this.state.sharedMedia.edges,threadID:this.props.threadID})};return c}(g.PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessengerThreadSharedPhotosReact.bs",["ReasonReact.bs","MessengerThreadSharedPhotos.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadSharedPhotos.react"),{findFBID:a,onCloseSharedPhotos:c,threadFBID:d},e)}f.make=a}),null);
__d("MessengerVideoPlayerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerVideoPlayer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){var l;return b("ReasonReact.bs").wrapJsForReason(b("MessengerVideoPlayer.react"),{attachment:(l=b("bs_js_null_undefined")).fromOption(a),className:l.fromOption(c),isInThread:l.fromOption(d),isVisible:l.fromOption(e),isOnStage:l.fromOption(f),stageDimensions:l.fromOption(g),videoData:h,onClick:l.fromOption(i),onSelect:l.fromOption(j)},k)}f.make=a}),null);
__d("MessengerVideoReact.bs",["cx","ix","bs_curry","Image.bs","React","bs_caml_option","ReasonReact.bs","joinClasses","MessengerPhotoReact.bs","MessengerVideoPlayerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a){a=a.metadata;if(!(a==null)&&!(a.fbid==null)){var b=window.screen.width>1800&&!(a.large_size==null)&&!(a.large_preview==null),c=a.fbid,d=b?a.large_size:a.inbox_size;d=d==null?{x:0,y:0}:{x:d.width,y:d.height};b=b?a.large_preview:a.inbox_preview;return{legacy_attachment_id:c,original_dimensions:d,start_muted:!0,hide_controls_on_finish:!0,url:b,is_share:!1}}return{legacy_attachment_id:null,original_dimensions:null,start_muted:!0,hide_controls_on_finish:!0,url:null,is_share:!1}}function k(a){var b=a%60;return String(a/60|0)+(":"+((b<10?"0":"")+String(b)))}function a(a){var c=a.className,d=a.attachment,e=a.isSingle,f=a.onAttachmentLoad,g=a.isVisible,l=a.onClick,m=a.onSelect,n=c!==void 0?c:"";a=function(a){a=d.metadata;var c=d.media;c=a==null?c==null?void 0:b("bs_caml_option").nullable_to_opt(c.duration):b("bs_caml_option").nullable_to_opt(a.duration);if(c!==void 0)return k(c);else return null};var o=function(a){if(l!==void 0)return b("bs_curry")._1(l,d);else return 0};c=function(a){var c=a.legacy_attachment_id;if(c==null)return;else return b("bs_caml_option").some(b("ReasonReact.bs").element(void 0,void 0,b("MessengerVideoPlayerReact.bs").make(b("bs_caml_option").some(d),b("joinClasses")(n,"_ccq","_4tsk","_3o67",e?"_52mr":"",e?"_1byr":""),!0,g,void 0,void 0,a,o,m,[])))};var p=j(d);c=c(p);if(c!==void 0)return b("bs_caml_option").valFromOption(c);else{p={className:b("joinClasses")(n,"_ccq"),attachment:d,isSingle:e,children:[b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_ccr",void 0,void 0,void 0,h("27983"),void 0,void 0,void 0,void 0,[])),i.createElement("span",{className:"_ccs"},a(0))]};f!==void 0&&(p.onAttachmentLoad=b("bs_caml_option").valFromOption(f));l!==void 0&&(p.onClick=b("bs_caml_option").valFromOption(l));return i.createElement(b("MessengerPhotoReact.bs").make,p)}}c=1800;d=a;f.large_window_width=c;f.constructVideoData=j;f.formatDuration=k;f.make=d}),null);
__d("MessengerXMATextBlockReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerXMATextBlock.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){var l;return b("ReasonReact.bs").wrapJsForReason(b("MessengerXMATextBlock.react"),{className:(l=b("bs_js_null_undefined")).fromOption(a),description:l.fromOption(c),source:l.fromOption(d),title:l.fromOption(e),url:l.fromOption(f),width:l.fromOption(g),threadID:l.fromOption(h),isFromViewer:l.fromOption(i),attachment:l.fromOption(j)},k)}f.make=a}),null);
__d("MessengerVideoXMAReact.bs",["cx","React","bs_caml_option","ReasonReact.bs","joinClasses","MessengerVideoPlayerReact.bs","MessengerXMATextBlockReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function i(a){if(a==null)return null;else{var b=a.width>a.height?a.width:a.height,c=window.screen.width>1800?640:450;if(b<=c)return{x:a.width,y:a.height};else{c=c/b;b=a.width*c|0;a=a.height*c|0;return{x:b,y:a}}}}function j(a){var b=a.media;a=a.target;if(b==null||a==null||b.image_size==null||a.video_id==null)return;else{var c=b.image_size;return{legacy_attachment_id:a.video_id,original_dimensions:i(c),start_muted:!0,hide_controls_on_finish:!0,url:b.image,is_share:!0}}}function a(a){var c=a.className,d=a.attachment,e=a.isVisible,f=a.onSelect,g=a.threadID,i=a.isFromViewer,k=c!==void 0?c:"";a=function(a){if(a!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerVideoPlayerReact.bs").make(b("bs_caml_option").some(d),b("joinClasses")(k,"_ccq","_4tsk","_3o67","_52mr","_1byr"),!0,e,void 0,void 0,b("bs_caml_option").valFromOption(a),void 0,f,[]));else return null};c=function(a){var c;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerXMATextBlockReact.bs").make("_2f5n _4br2 _29ew _3dug",(c=b("bs_caml_option")).nullable_to_opt(d.description),c.nullable_to_opt(d.source),c.nullable_to_opt(d.video_title),c.nullable_to_opt(d.uri),a!==void 0?b("bs_caml_option").valFromOption(a).x:void 0,g,i,b("bs_caml_option").some(d),[]))};var l=j(d);a=a(l);return h.createElement("div",{className:"_3duc"},a,c(l!==void 0?b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(l).original_dimensions):void 0))}c=640;d=450;e=1800;g=a;f.large_preview_dim=c;f.thumbinail_inbox_dim=d;f.large_window_width=e;f.adjustSize=i;f.constructVideoData=j;f.make=g}),null);
__d("MessengerPhotosGroupReact.bs",["cx","URI","bs_block","bs_curry","React","Utils.bs","ActorURI","bs_belt_Array","LogHistory","MercuryIDs","bs_belt_Option","bs_caml_option","ReasonReact.bs","joinClasses","bs_caml_primitive","bs_js_null_undefined","MessagesViewerSetID","MessengerPhotoReact.bs","MessengerVideoReact.bs","MercuryAttachmentType","getPageIDFromThreadID","MessengerVideoXMAReact.bs","bs_caml_builtin_exceptions","ChatSpeakingStickerReact.bs","MercuryAttachmentPayload.bs","MessengerAttachmentViewer","MessengerThreadSharedPhotosReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j="empty-spacer";a=b("LogHistory").getInstance("messenger_photo_group");var k=b("ReasonReact.bs").reducerComponent("MessengerPhotosGroup");function l(a,c,d,e,f,g,l,m,n,o,p,q,r,s){var t=d!==void 0?d:"",u=function(a){a=a.length;var c=a===2||a===4;return b("joinClasses")(t,"_2n8h",a===1?"_2n8i":"",c?"_4ksk":"",a>1&&!c?"_2n8k":"","_5fk1")},v=function(a){if(m!==void 0){a=b("bs_caml_option").valFromOption(m);var c=a.thread_fbid;if(!(c==null)&&b("bs_caml_primitive").caml_string_compare(c,"")!==0)return c;else return b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id)}else return null},w=function(a,c){var d=v(0);c=c.metadata;c=c==null?null:c.fbid;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadSharedPhotosReact.bs").make(c,function(c){return b("bs_curry")._1(a.send,0)},d,[]))},x=function(d,k,m,s){var t=k.deduplication_key,u=k.metadata;if(t==null)if(u==null){var w=k.upload_id;w=w==null?"":w}else{u=u.fbid;w=u==null?"":u}else w=t;var x;if(m||f===!0)if(k.large_preview_url==null)x=void 0;else{var y=k.large_preview_url;x=function(a){return window.open(y)}}else{var z=k.metadata;u=0;z==null||z.fbid==null?u=1:x=k.app_attribution==null?function(a){return b("bs_curry")._1(d.send,[a])}:function(c){var d=z;c=c;if(b("Utils.bs").isTruthy(c.preview_uploading))return 0;else if(c.attach_type===b("MercuryAttachmentType").VIDEO){var f=d.dimensions;f=f==null?{x:null,y:null}:{x:f.width,y:f.height};var i=c.url;b("MessengerAttachmentViewer").renderVideo({pageID:b("bs_js_null_undefined").fromOption(p),rootClassName:"_1j1h",videoID:d.fbid,videoSize:f,videoURI:i==null?new(h||(h=b("URI")))(""):i});return 0}else if(c.attach_type===b("MercuryAttachmentType").PHOTO||c.attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER||c.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE){f=a.length===1;i=c.url;i=i==null?new(h||(h=b("URI")))(""):i;if(g!==!0&&c.attach_type===b("MercuryAttachmentType").PHOTO&&e!==void 0){var j=v(0),k=e===1;j=new(h||(h=b("URI")))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:j,image_id:d.fbid});j=p!==void 0?new(b("ActorURI").create)(j,b("bs_caml_option").valFromOption(p)):j;j=[b("MessagesViewerSetID").MESSAGES_VIEW_ALL_IN_THREAD,j,k]}else j=[null,i,f];b("MessengerAttachmentViewer").bootstrapWithConfig({actorid:b("bs_js_null_undefined").fromOption(p),dimensions:d.dimensions,disableForward:p!==void 0,disablePaging:j[2],endpoint:j[1],fbid:d.fbid,rootClassName:"_1j1h",setID:j[0],snapToPhoto:!0,src:c.preview_url});return 0}else if(c.uri==null)return 0;else return window.open(c.uri)};if(u===1)if(k.uri==null)x=void 0;else{var A=k.uri;x=function(a){return window.open(A)}}}t=b("bs_belt_Option").getWithDefault(c,k.attach_type);if(t===b("MercuryAttachmentType").PHOTO||t===b("MercuryAttachmentType").ANIMATED_IMAGE||t===b("MercuryAttachmentType").THIRDPARTYSTICKER){m={attachment:k,isSingle:s,children:[]};l!==void 0&&(m.isVisible=b("bs_caml_option").valFromOption(l));n!==void 0&&(m.onAttachmentLoad=b("bs_caml_option").valFromOption(n));x!==void 0&&(m.onClick=b("bs_caml_option").valFromOption(x));return i.jsx(b("MessengerPhotoReact.bs").make,m,w)}else if(t===b("MercuryAttachmentType").VIDEO){u=k.metadata;if(!(u==null)&&b("Utils.bs").isTruthy(u.render_as_sticker)){m=u.dimensions;u=m==null?{height:null,width:null}:{height:m.height,width:m.width};m=k.url;m=m==null?new(h||(h=b("URI")))(""):m;return b("ReasonReact.bs").element(void 0,void 0,b("ChatSpeakingStickerReact.bs").make(m,u,[]))}if(g===!0){m={attachment:k};l!==void 0&&(m.isVisible=b("bs_caml_option").valFromOption(l));o!==void 0&&(m.onSelect=b("bs_caml_option").valFromOption(o));q!==void 0&&(m.threadID=b("bs_caml_option").valFromOption(q));r!==void 0&&(m.isFromViewer=b("bs_caml_option").valFromOption(r));return i.jsx(b("MessengerVideoXMAReact.bs").make,m,w)}else{u={attachment:k,isSingle:s};n!==void 0&&(u.onAttachmentLoad=b("bs_caml_option").valFromOption(n));l!==void 0&&(u.isVisible=b("bs_caml_option").valFromOption(l));x!==void 0&&(u.onClick=b("bs_caml_option").valFromOption(x));o!==void 0&&(u.onSelect=b("bs_caml_option").valFromOption(o));return i.jsx(b("MessengerVideoReact.bs").make,u,w)}}else if(t===j){m={className:"_4tsk _4rf-"};s=b("bs_caml_option").nullable_to_opt(k.key);s!==void 0&&(m.key=b("bs_caml_option").valFromOption(s));return i.createElement("div",m)}else throw[b("bs_caml_builtin_exceptions").invalid_argument,t+" is not handled by MessengerPhotosGroup"]},y=function(c,a,d){if(a.length!==1){var e=a.length===2||a.length===4?2:3,f=[],g={contents:0},k=a.length;while(g.contents<k){var l=b("bs_caml_primitive").caml_int_min(e,k-g.contents|0);l=b("bs_belt_Array").makeBy(e,function(f){return function(i){if(i<f)return x(c,a[g.contents+i|0],d,!1);else{i="ghost"+String(e-i|0);i=b("MercuryAttachmentPayload.bs").create(j,b("bs_caml_option").some(i),new(h||(h=b("URI")))(""));return x(c,i,d,!1)}}}(l));f.push(i.createElement("div",{key:String(g.contents),className:"_2n8g"},l));g.contents=g.contents+e|0}return f}else{l=a[0];return x(c,l,d,!0)}};return{debugName:k.debugName,reactClassInternal:k.reactClassInternal,handedOffState:k.handedOffState,getDerivedStateFromProps:k.getDerivedStateFromProps,didMount:function(a){b("MessengerAttachmentViewer").preload();return 0},didUpdate:k.didUpdate,willUnmount:k.willUnmount,shouldUpdate:k.shouldUpdate,render:function(c){var d=m!==void 0?!(b("getPageIDFromThreadID")(b("bs_caml_option").valFromOption(m).thread_id)==null):!1;d=y(c,a,d);var e=c.state.findID;c=e!==void 0?w(c,b("bs_caml_option").valFromOption(e)):null;return i.createElement("div",{className:u(a),tabIndex:0},c,d)},initialState:function(a){return{findID:void 0}},retainedProps:k.retainedProps,reducer:function(a,c){if(a)return b("bs_block").__(0,[{findID:b("bs_caml_option").some(a[0])}]);else return b("bs_block").__(0,[{findID:void 0}])},jsElementWrapped:k.jsElementWrapped}}c=b("ReasonReact.bs").wrapReasonForJs(k,function(a){var c;return l(a.attachments,(c=b("bs_caml_option")).nullable_to_opt(a.attachType),c.nullable_to_opt(a.className),c.nullable_to_opt(a.count),c.nullable_to_opt(a.isPageMessage),c.nullable_to_opt(a.isXMA),c.nullable_to_opt(a.isVisible),c.nullable_to_opt(a.message),c.nullable_to_opt(a.onAttachmentLoad),c.nullable_to_opt(a.onSelect),c.nullable_to_opt(a.pageID),c.nullable_to_opt(a.threadID),c.nullable_to_opt(a.isFromViewer),[])});d=b("bs_belt_Option").getWithDefault;f.$pipe$question=d;f.empty_spacer_type=j;f.history=a;f.component=k;f.make=l;f.jsComponent=c}),null);
__d("MessengerURIUtils.bs",["URI","MercuryIDs","MessengerView","MessengerURISerializer"],(function(a,b,c,d,e,f){"use strict";var g;function h(a){var c=b("MessengerURISerializer").deserialize(new(g||(g=b("URI")))(window.location.href)),d=b("MessengerView").DETAIL.THREAD;return b("MessengerURISerializer").serialize(Object.assign(Object.assign({},c),{activeThreadID:a,detailView:d,query:c.queryAll?c.query:void 0}))}function a(a){return h(b("MercuryIDs").getThreadIDFromUserID(a))}function c(a){return h(a.thread_id).setQueryData({mid:a.message_id})}f.getURIForThreadID=h;f.getURIForUserID=a;f.getURIForMessage=c}),null);
__d("XRTCCallabilityController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rtc/callability/",{user_id:{type:"FBID",required:!0}})}),null);
__d("MNRTCCallabilityStore",["MessengerDispatcher","RTCCallabilityStore"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("RTCCallabilityStore"))(b("MessengerDispatcher"))}),null);
__d("shouldNotRenderSegoe",["MessengerConfig","UserAgent"],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("[\u0530-\u05f4\u10a0-\u10ff]"),h=b("UserAgent").isBrowser("Chrome")&&b("UserAgent").isPlatform("Windows 10");e.exports=function(a){return!b("MessengerConfig").SegoeUIDisabled&&h&&g.test(a)}}),null);
__d("MessengerCodeBubble.bs",["React","bs_caml_option","MessengerCodePasteUtils"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.body,d=a.className,e=a.customColor,f=a.isFromViewer,h=a.ranges,i=a.threadID;a=a.thread;c=b("MessengerCodePasteUtils").getCodeAndMessageBubbles(c,h,i,e,f,a);h={children:c};d!==void 0&&(h.className=b("bs_caml_option").valFromOption(d));return g.jsx("div",h)}c=a;f.make=c}),null);
__d("MessengerCodeBubble.re",["MessengerCodeBubble.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerCodeBubble.bs").make;f.make=a}),null);
__d("MessengerBubbleReact.re",["react","MessengerBubble.react","ReasonReact.bs"],(function(a,b,c,d,e,f){var g,h=g||b("react");function a(a){return h.jsx(b("MessengerBubble.react"),babelHelpers["extends"]({},a))}f.MessengerBubbleTypeChecked=a;c=function(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerBubble.react"),{attachments:a,body:c,className:d},e)};f.make=c}),null);
__d("MessengerFileAttachment.bs",["cx","React","Link.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.attachment;var c=a.name;c=c==null?null:c;a=a.url;if(a==null)return null;else return h.jsxs(b("Link.react"),{className:"_4pcn _2uf4",href:a.toString(),target:"_blank",children:[h.jsx("div",{className:"_2uf5"}),c]})}c=a;f.make=c}),null);
__d("MessengerFileAttachment.re",["MessengerFileAttachment.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerFileAttachment.bs").make;f.make=a}),null);
__d("MercuryTypingAnimationReact.bs",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.className;return h.jsx("div",{children:h.jsxs("div",{children:[h.jsx("div",{className:"_5pd7"}),h.jsx("div",{className:"_5pd7"}),h.jsx("div",{className:"_5pd7"})],className:"_4b0g"}),className:b("joinClasses")("_4a0v _1x3z",a!==void 0?a:"")})}c=a;f.make=c}),null);
__d("MessengerTypingIndicatorReact.bs",["cx","bs_block","bs_curry","Image.bs","React","bs_js_dict","bs_caml_obj","immutable","MercuryIDs","bs_belt_Option","bs_caml_option","CurrentUser","ReasonReact.bs","MessengerPersonas.bs","MessengerParticipants.bs","WorkForeignEntityType","MessengerBubbleReact.re","MercuryTypingAnimationReact.bs","MessengerProfileImageWrapperReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("ReasonReact.bs").reducerComponent("MessengerTypingIndicatorReact");function a(a,c,d,e){var f=function(c,a){return b("bs_caml_option").nullable_to_opt(b("MessengerParticipants.bs").getMulti([a],function(d){b("bs_curry")._1(c.send,b("bs_block").__(0,[b("bs_js_dict").get(d,a)]));return 0}))},g=function(a){if(c==null)return;else{a=b("MercuryIDs").getUserIDFromParticipantID(c);if(a==null)return;else return b("bs_caml_option").nullable_to_opt(b("MessengerPersonas.bs").getNow(a))}};return{debugName:i.debugName,reactClassInternal:i.reactClassInternal,handedOffState:i.handedOffState,getDerivedStateFromProps:i.getDerivedStateFromProps,didMount:function(a){var d=a.state.author;if(d!==void 0||c==null)return 0;else{d=b("MessengerParticipants.bs").getNow(c);if(d==null)return b("bs_curry")._1(a.send,b("bs_block").__(1,[f(a,c)]));else return b("bs_curry")._1(a.send,b("bs_block").__(0,[d==null?void 0:b("bs_caml_option").some(d)]))}},didUpdate:function(a){a=a.newSelf;var d=a.state.subscription.contents,e=a.state.author;if(d!==void 0)return 0;else{if(e!==void 0&&(c==null||b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(e).id,c)))return 0;if(c==null)return 0;else return b("bs_curry")._1(a.send,b("bs_block").__(1,[f(a,c)]))}},willUnmount:function(a){a=a.state.subscription.contents;if(a!==void 0)return b("MessengerParticipants.bs").removeCallback(b("bs_caml_option").valFromOption(a));else return 0},shouldUpdate:i.shouldUpdate,render:function(c){var d=g(0);if(c.state.author===void 0&&d===void 0)return null;else{var e=c.state.author;d=d!==void 0?d.profile_picture_url:e!==void 0?b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(e).image_src):void 0;e=b("bs_belt_Option").flatMap(b("bs_belt_Option").flatMap(c.state.author,function(a){return b("bs_caml_option").nullable_to_opt(a.work_foreign_entity_info)}),function(a){return b("bs_caml_option").some(a.type)});e=e!==void 0?b("CurrentUser").isWorkUser()&&b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(e),b("WorkForeignEntityType").FOREIGN):!1;c=c.state.author;return h.createElement("div",{className:"_1t_p _1hbw"},h.createElement("div",{className:"_1t_q"},h.createElement(b("MessengerProfileImageWrapperReact.bs").make,{isMessengerUser:c!==void 0?b("bs_caml_option").valFromOption(c).is_messenger_user:!1,size:32,className:"_1t_r",showBadge:e,children:d!==void 0?b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,d,32,void 0,32,void 0,[])):b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,void 0,32,void 0,32,void 0,[]))})),h.createElement("div",{className:"_41ud"},h.createElement("div",{className:"_o46 _3erg _29_7"},b("ReasonReact.bs").element(void 0,a,b("MessengerBubbleReact.re").make(b("immutable").List([h.jsx(b("MercuryTypingAnimationReact.bs").make,{},"animation")]),"","_3058",[])))))}},initialState:function(a){return{author:c==null?void 0:b("bs_caml_option").nullable_to_opt(b("MessengerParticipants.bs").getNow(c)),subscription:{contents:void 0}}},retainedProps:i.retainedProps,reducer:function(a,c){if(a.tag){c.subscription.contents=a[0];return 0}else{c.subscription.contents=void 0;return b("bs_block").__(0,[{author:a[0],subscription:c.subscription}])}},jsElementWrapped:i.jsElementWrapped}}c=32;f.component=i;f.cIMAGE_SIZE=c;f.make=a}),null);
__d("MessengerTypingIndicatorReact.re",["bs_curry","MessengerTypingIndicatorReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MessengerTypingIndicatorReact.bs").component,function(a){return b("bs_curry")._4(b("MessengerTypingIndicatorReact.bs").make,a.setBubbleRef,a.userID,a.showName,a.children)});f.component=a;f["default"]=a}),null);
__d("MercuryAudioPlayer",["DOM","Event"],(function(a,b,c,d,e,f){var g=200;function h(){var a=b("DOM").create("audio"),c=!1;try{a.canPlayType&&(a.canPlayType("video/mp4;").replace(/^no$/,"")&&(c=!0))}finally{return c}}var i=function(){this.interval=null,this.arbiterInstance=null,this.audio=b("DOM").create("audio"),b("Event").listen(this.audio,"playing",function(){this.informAttachment("playing",this.audio.currentTime),this.interval=window.setInterval(function(){this.informAttachment("playing",this.audio.currentTime)}.bind(this),g)}.bind(this)),b("Event").listen(this.audio,"ended",function(){window.clearInterval(this.interval),this.informAttachment("finished")}.bind(this))};Object.assign(i.prototype,{setAudio:function(a,b){this.audio.setAttribute("src",a),this.arbiterInstance=b},informAttachment:function(a,b){this.arbiterInstance&&this.arbiterInstance.inform(a,b)},play:function(){this.audio.play(),this.informAttachment("played")},resume:function(){this.audio.play(),this.informAttachment("played")},pause:function(){this.audio.pause(),window.clearInterval(this.interval),this.informAttachment("paused")},getType:function(){return"html5"}});function j(){return h()?new i():!1}var k=null,l=null,m=0;function a(a,b){this.src=a;this.arbiterInstance=b;this.audio_id=++m;k!==null||(k=j());if(!k)return!1}Object.assign(a.prototype,{getType:function(){if(!k)return!1;else return k.getType()},play:function(a){a&&l==this.audio_id?k.resume():(this.pause(),l=this.audio_id,k.setAudio(this.src,this.arbiterInstance),k.play())},pause:function(){k.pause()}});e.exports=a}),null);
__d("MessengerVoiceClipAttachmentReact.bs",["cx","cssVar","React","ReactStyle.bs","bs_caml_option","MessengerColors","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","MercuryAttachmentAudioClip.react","WorkChatRedesignedMessageListCheck.bs","MercuryShareAttachmentRenderLocations.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.attachment,d=a.customColor,e=a.message;a=a.thread;var f=c.metadata,g;if(f==null)g=0;else{f=f.duration;g=f==null?0:f/1e3}f=c.app_attribution!==null;var h=d!==void 0;e="audio:"+e.message_id;c=c.url;var j;if(c==null)j=null;else{c={src:c.toString(),duration:g,location:b("MercuryShareAttachmentRenderLocations.bs").getValue(2),rootClassName:"_3czg"+(f?" _4yjw":"")+" _2poz _ui9",showHelp:!1,width:200};d!==void 0&&(c.customColor=b("bs_caml_option").valFromOption(d));j=i.jsx(b("MercuryAttachmentAudioClip.react"),c,e)}return i.jsx("div",{children:j,className:(b("WorkChatRedesignedMessageListCheck.bs").enabled?"":"_hh7")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ybn":"")+(b("WorkChatRedesignedMessageListCheck.bs").enabled?"":" _s1-")+(h?" _5sxi":"")+(f?"":" _52mr")+(f?" _mxz":"")+" _1fz8"+(f?" _1-wa":"")+" _1nqp",style:d!==void 0?b("MessengerDotComAndInboxM4Check.bs").yes?b("ReactStyle.bs").unsafeAddProp(b("MessengerColors").makeLinearGradient(a.gradient_colors,a.solid_color,b("MessengerCustomColorUtils.bs").defaultColor(0)),"backgroundAttachment","fixed"):{backgroundColor:d}:b("WorkChatRedesignedMessageListCheck.bs").enabled?{backgroundColor:"#ece9e7"}:{}})}c=a;f.make=c}),null);
__d("MessengerVoiceClipAttachmentReact.re",["MessengerVoiceClipAttachmentReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerVoiceClipAttachmentReact.bs").make;f.make=a}),null);
__d("isRetina",[],(function(a,b,c,d,e,f){"use strict";e.exports=function(){return(window.devicePixelRatio||1)>1}}),null);
__d("messengerRTLClasses",["cx","isRTL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){a=b("isRTL")(a||"");return c?a?"_4pv0":"":(a?"":"direction_ltr")+(a?" direction_rtl":"")+(a?"":" text_align_ltr")+(a?" text_align_rtl":"")+(a?" _4pv0":"")}e.exports=a}),null);
__d("MercuryShareAttachment.react",["cx","BootloadedComponent.react","DOM","Event","FlexLayout.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareStyleMap","MessengerErrorBoundary.react","React","ReactDOM","WorkChatRedesignedMessageListCheck.re","emptyFunction","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$3=function(a){d.$1(a),b("DOM").scry(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)),"img").forEach(function(a){var c=b("Event").listen(a,"load",function(){d.$1(a.height),c.remove()})})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.$2=function(a,c){this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER&&!this.props.isSubattachment&&(c=b("joinClasses")((b("WorkChatRedesignedMessageListCheck.re").enabled?"":"_52mr")+" _2poz _ui9","_4skb",c));return h.jsxs("div",{className:c,children:[a,this.props.afterDecorators!=null&&this.props.afterDecorators.length>1?h.jsx(b("FlexLayout.react"),{align:"center",className:"_7moe",children:this.props.afterDecorators}):this.props.afterDecorators]})};d.render=function(){var a=b("MercuryShareStyleMap").getStyleFactory(this.props.attachment);if(!a)return null;var c=a.attachment;a=a.factory;return this.$2(h.jsx(b("MessengerErrorBoundary.react"),babelHelpers["extends"]({},this.props,{component:"attachment",children:h.createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({},this.props,{attachment:c,bootloadLoader:a.componentLoader,bootloadPlaceholder:h.jsx("div",{}),key:(c=this)!=null?(c=c.props)!=null?(c=c.attachment)!=null?c.share_id:c:c:c,module:a.componentName,onComponentLoad:this.$3}))})),a.cx&&a.cx.get(this.props.location))};d.$1=function(a){this.props.onComponentLoaded(a)};return c}(h.Component);a.propTypes={attachment:b("MercuryShareAttachmentReactShape"),isFromViewer:(c=b("prop-types")).bool,isPageMessage:c.bool,isSponsored:c.bool,isSubattachment:c.bool,isVisible:c.bool,location:c.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),messageID:c.string,onComponentLoaded:c.func.isRequired,onSelect:c.func,pageID:c.string,threadID:c.string.isRequired,afterDecorators:c.array,timestamp:c.number,author:c.string};a.defaultProps={onComponentLoaded:b("emptyFunction")};e.exports=a}),null);
__d("MercuryAttachmentAttribution.react",["cx","fbt","Image.react","ImmutableObject","Link.react","React","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.$1();return!a?null:i.jsxs("div",{className:b("joinClasses")(this.props.className,"_29ew"),children:[i.jsx(b("Image.react"),{src:a.icon_url,className:"_29ex"}),i.jsx("span",{className:"_29ey",children:a.name}),this.$2()]})};d.$1=function(){return this.props.attachment&&this.props.attachment.app_attribution};d.$2=function(){var a=this.$1();if(!a||!a.metadata)return null;var c="_439n";try{a=JSON.parse(a.metadata)}catch(a){return null}return a.spotify_link?i.jsx(b("Link.react"),{className:c,href:a.spotify_link,target:"_blank",children:h._("Open")}):null};return c}(i.PureComponent);a.propTypes={attachment:b("prop-types").instanceOf(b("ImmutableObject"))};e.exports=a}),null);
__d("MessageList.react",["cx","requireCond","MercuryIDs","MercuryMessageGroup","MercuryShareAttachmentRenderLocations","MessengerDomIDs.bs","MessengerLightweightActionUtils","MessengerMessage.bs","MessengerObjectAssociationType","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","cr:832269","PagesMessageListGreeting.react","React","ReactDOM","cr:1140097","gkx","immutable","nullthrows","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerDomIDs.bs").ids,i=b("MessengerPresenceProvider.bs").jsComponent,j=b("React"),k=2,l=1e3*60*60,m=6,n=function(a){var b;b=(b=a)!=null?(b=b.log_message_data)!=null?b.message_type:b:b;switch(b){case"group_poll":return(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.question_id:b:b:b;case"instant_game_update":return(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.game_id:b:b:b;case"lightweight_event_create":case"lightweight_event_update":case"lightweight_event_delete":case"lightweight_event_update_time":case"lightweight_event_update_title":case"lightweight_event_update_location":case"lightweight_event_notify_before_event":case"lightweight_event_notify":case"lightweight_event_rsvp":return(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.event_id:b:b:b;case"confirm_friend_request":b=((b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.friend_request_subtype:b:b:b)||((b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.subtype:b:b:b);return!b||b.toLowerCase()!=="icebreaker"?null:q(a);case"messenger_icebreaker_vote_cast":return q(a);default:return null}},o=function(a){return b("MessengerLightweightActionUtils").isLWAMessage(a)?"lwa":null};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={activeMessageID:null,messageGroups:[],prevMessages:null,newMessagesGroupIndex:Infinity,lastReadTimestamp:((b=d.props.thread)==null?void 0:b.last_read_timestamp)||Infinity,newMessagesCountForDisplay:0},d.$5=function(a){d.setState(function(b){return{activeMessageID:b.activeMessageID===a?null:b.activeMessageID}})},d.$6=function(a){d.setState({activeMessageID:a})},c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,c){if(c.prevMessages!==a.messages)if(b("cr:832269")!=null){var d=c.lastReadTimestamp;c=a.location;var e=a.messages,f=a.thread,g=b("MercuryIDs").getParticipantIDFromUserID(a.viewer);(f==null?void 0:f.snippet_sender)===g&&(d=Infinity);f=e.findLast(function(a){return a.author===g});f&&f.timestamp>d&&(d=f.timestamp);f=a.messages.filter(function(a){return a.timestamp<=d});var h=a.messages.filter(function(a){return a.timestamp>d});f=b("MercuryMessageGroup").calculateMessageGroups(f,c);c=b("MercuryMessageGroup").calculateMessageGroups(h,c);h=h.filter(function(a){return a.log_message_type==null}).size;return{messageGroups:[].concat(f,c),prevMessages:e,newMessagesGroupIndex:f.length,newMessagesCountForDisplay:h,lastReadTimestamp:d}}else return{messageGroups:b("MercuryMessageGroup").calculateMessageGroups(a.messages,a.location),prevMessages:a.messages};else return null};var d=c.prototype;d.render=function(){var a=this,c=this.props,d=c.DateBreak,e=c.forGameChat,f=c.location,g=c.selectedMessageId,q=c.MessageGroup,v=c.CollapsedLogMessageGroup,w=[],x=[];c=this.props.thread&&this.props.thread.solid_color;var y=c?{backgroundColor:c}:null,z=this.state.activeMessageID,A=this.state.messageGroups,B=A.length,C=this.props.readReceipts;c=C.last();var D=c?c.watermark:0,E=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),F={};for(var c=this.props.messages.size-1;c>=0;c--){var G=this.props.messages.get(c),H=n(G)||o(G);H&&!F[H]&&(F[H]=G.message_id)}var I=function(h){var n=h>0?A[h-1]:null;n=n&&n.length>0?n[n.length-1]:null;var I=A[h],K=I[0],L=I[I.length-1],M=!1;b("cr:832269")!=null&&h>0&&h===a.state.newMessagesGroupIndex&&a.state.newMessagesCountForDisplay>0&&w.push(j.jsx("div",{ref:"newMessageDivider",children:j.jsx(b("cr:832269"),{newMessagesCount:a.state.newMessagesCountForDisplay})},"new-message-divider"));if(!n||K.timestamp-n.timestamp>l){M=!0;n=j.jsx(d,{date:new Date(K.timestamp),ref:"db:"+K.message_id},"db:"+K.message_id);x.length===0&&w.push(n)}n=o(K);if(n&&F[n]!==K.message_id){n=a.$1(K,F);w.push(n);return"continue"}if(K.action_type=="ma-type:log-message"){n=(H=K)!=null?(H=H.log_message_data)!=null?H.message_type:H:H;var N=(G=K)!=null?(G=G.log_message_data)!=null?(G=G.untypedData)!=null?G.friend_request_subtype:G:G:G,O=n==="parties_presence",P=n==="instant_game_update",Q=n==="group_poll";N=n==="messenger_icebreaker_vote_cast"||n==="confirm_friend_request"&&N&&N.toLowerCase()==="icebreaker";var R=["lightweight_event_create","lightweight_event_update","lightweight_event_delete","lightweight_event_update_time","lightweight_event_update_title","lightweight_event_update_location","lightweight_event_notify_before_event","lightweight_event_notify","lightweight_event_rsvp"].includes(n);if((f===b("MercuryShareAttachmentRenderLocations").CHAT||f===b("MercuryShareAttachmentRenderLocations").MESSENGER)&&(K.log_message_type==="log:video-call"||K.log_message_type==="log:phone-call"||n==="messenger_call_log")){n=a.$2(K,E,A,B,h,C,D,L,F,g);w.push(n)}else{n=a.$3(K,F);c=K.message_id;!P&&!Q&&!R&&!N&&x.push(n);if(O)return"continue";(x.length===I.length||P||Q||R||N)&&(a.$4(x,w,c,y,v),x=[]);(P||Q||R||N)&&w.push(n)}return"continue"}I=b("immutable").List(I);var S=r(A,B,h,F),T=!t(C,I,S),U=s(D,L),V=u(a.props.deliveryTimestamp,L),W=I.first().author,X=b("MessengerMessage.bs").getPersona(L),Y=E===K.author;O=Y?0:m+k;var Z=a.props.maxBubbleWidth?a.props.maxBubbleWidth-O:null;w.push(j.jsx(i,{subscribeToIDs:W?[W]:null,children:function(c){return j.jsx(q,{activeMessageID:p(z,I),author:W,deliveryTimestamp:V,forGameChat:e,hasDateBreak:M,isCanonical:a.props.isCanonical,isFromViewer:Y,isPageMessage:a.props.isPageMessage,isOnline:W?b("MessengerParticipantUtils.bs").has(c,W):!1,lastReadTimestamp:U,maxBubbleWidth:Z,messages:I,nextTimestamp:S,onAttachmentLoad:a.props.onAttachmentLoad,onMessageDeselect:a.$5,onMessageSelect:a.$6,onStickerClick:a.props.onStickerClick,onReplyToMessage:a.props.onReplyToMessage,pageID:a.props.isPageMessage===!0?a.props.viewer:null,persona:X,readReceipts:T?C:b("immutable").OrderedMap(),ref:function(b){return a.refs["mg:"+K.message_id]=b},thread:a.props.thread,threadID:a.props.threadID,scrollToRepliedMessage:a.props.scrollToRepliedMessage,selectedMessageId:g,rolesIDWithColor:a.props.rolesIDWithColor},"mg:"+K.message_id)}},"pp:"+K.message_id))};for(var J=0;J<B;J++){var K=I(J);if(K==="continue")continue}K=this.props.thread;I=this.props.threadID||(K==null?void 0:K.thread_id)||(K==null?void 0:K.thread_fbid);J=null;if(f===b("MercuryShareAttachmentRenderLocations").MESSENGER&&I){this.props.isPageMessage?J=j.jsx(b("PagesMessageListGreeting.react"),{messageCount:x.length+B,threadID:I}):b("cr:1140097")&&!b("gkx")("1332693")&&((K==null?void 0:K.object_association_type)===b("MessengerObjectAssociationType").GENERAL_CHAT||(K==null?void 0:K.work_associated_group)!=null)&&(K==null?void 0:(I=K.participants)==null?void 0:I.length)===1&&(J=j.jsx(b("cr:1140097"),{}))}return j.jsxs("div",{id:f===b("MercuryShareAttachmentRenderLocations").MESSENGER?h.CONVERSATION:null,children:[J,w]})};d.getNewMessageDivider=function(){return this.refs.newMessageDivider};d.getMessageElement=function(a,c){if(c===!0){var d=this.refs["db:"+a];if(d)return b("ReactDOM").findDOMNode(d)}d=this.$7(a);if(!d)return null;d=d[0].message_id;var e=this.refs["mg:"+d];if(!e)return null;return c===!0&&d===a?b("ReactDOM").findDOMNode(e):e.getMessageElement(a)};d.getMessageComponent=function(a){var b=this.$7(a);if(!b)return null;b=b[0].message_id;b=this.refs["mg:"+b];return!b?null:b.getMessage(a)};d.$7=function(a){return this.state.messageGroups.find(function(b){return b.some(function(b){return b.message_id===a})})};d.$4=function(a,b,c,d,e){a.length!==0&&(a.length>1?b.push(j.jsx(e,{style:d,children:a},"mg:"+c)):b.push(j.jsx("div",{children:a},"mg:"+c)))};d.$2=function(a,c,d,e,f,g,h,k,l,m){var n=this,o,p,q=this.props.MessageGroup;p=((p=a)!=null?(p=p.log_message_data)!=null?p.untypedData:p:p)||{};o=(o=a)!=null?(o=o.log_message_data)!=null?o.message_type:o:o;if(o==="messenger_call_log"){o={message_type:"messenger_call_log",call_capture_attachments:p.call_capture_attachments,caller:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(p.caller_id,"caller id")),callee:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(p.callee_id,"callee id")),server_info_data:p.server_info,thread_id:a.thread_fbid,answered:p.event!=="missed_call",log_message_type:p.video?"log:video-call":"log:phone-call",event:p.event,added_participants:null,removed_participants:null,untypedData:null,image:null,name:null};a=babelHelpers["extends"]({},a,{log_message_data:o})}p={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:a.log_message_body,log_message_data:a.log_message_data,log_message_type:a.log_message_type,timestamp:a.timestamp}};o=babelHelpers["extends"]({},a,{attachments:[p],body:""});var v=b("immutable").List([o]),w=r(d,e,f,l),x=!t(g,v,w),y=s(h,k),z=u(this.props.deliveryTimestamp,k),A=v.first().author;return j.jsx(i,{subscribeToIDs:A?[A]:null,children:function(d){return j.jsx(q,{author:v.first().author,deliveryTimestamp:z,forGameChat:n.props.forGameChat,isCanonical:n.props.isCanonical,isFromViewer:c===a.author,isOnline:A?b("MessengerParticipantUtils.bs").has(d,A):!1,isPageMessage:n.props.isPageMessage,lastReadTimestamp:y,maxBubbleWidth:n.props.maxBubbleWidth,messages:v,nextTimestamp:w,onAttachmentLoad:n.props.onAttachmentLoad,onMessageDeselect:n.$5,onMessageSelect:n.$6,onStickerClick:n.props.onStickerClick,readReceipts:x?g:b("immutable").OrderedMap(),selectedMessageId:m,thread:n.props.thread,threadID:n.props.threadID})}},a.message_id)};d.$3=function(a,c){var d=this.props.LogMessage,e=n(a);c=e?c[e]:null;return a.log_message_type!=="log:error-msg"?j.jsx(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:c===a.message_id},a.message_id):null};d.$1=function(a,c){c=c[b("nullthrows")(o(a),"other group id first message")];var d=this.props.LogMessage;return j.jsx(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:c===a.message_id},a.message_id)};return c}(j.PureComponent);a.propTypes={CollapsedLogMessageGroup:(c=b("prop-types")).func.isRequired,DateBreak:c.func.isRequired,deliveryTimestamp:c.number.isRequired,forGameChat:c.bool,isCanonical:c.bool,isPageMessage:c.bool,location:c.string.isRequired,LogMessage:c.func.isRequired,loadMoreMessages:c.func,MessageGroup:c.func.isRequired,messages:c.instanceOf(b("immutable").List).isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,onReplyToMessage:c.func,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,viewer:c.string.isRequired,thread:c.object,threadID:c.string,scrollToRepliedMessage:c.func,rolesIDWithColor:c.any};function p(a,b){return b.find(function(b){return b.message_id===a})?a:null}function q(a){return(a=a)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.icebreaker_type:a:a:a}function r(a,b,c,d){if(c>=b-1)return Infinity;var e=a[c+1][0],f=o(e);if(f&&d[f]!==e.message_id||((f=e)!=null?f.action_type:f)=="ma-type:log-message")return r(a,b,c+1,d);else return e.timestamp}function s(a,b){return b.timestamp>a?a:Infinity}function t(a,b,c){return b.isEmpty()||!a.isEmpty()&&(a.last().action<b.first().timestamp||a.first().action>=c)}function u(a,b){return b.timestamp>a?a:Infinity}e.exports=a}),null);
__d("MessengerRemovedMessageTombstone.react",["cssVar","cx","fbt","MercuryTimestamp","MessengerDecorator","MessengerDotComAndInboxM4Check.bs","MessengerInnerDecorators.react","MessengerMessageActionsWrapper.react","MessengerMessageSeenHeadsReact.bs","MessengerSettingsStore","React","RemovedMessageTombstoneContent","TooltipData","WorkChatRedesignedMessageListCheck.re","getViewportDimensions","immutable","joinClasses","messengerRTLClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MessengerMessageSeenHeadsReact.bs").jsComponent,k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={shown:{}},c.$2=function(a,b){c.setState(function(c){return{shown:babelHelpers["extends"]({},c.shown,(c={},c[a]=b,c))}})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.isActive,d=a.isFromViewer;a=a.message;var e=[],f=this.props.message;f&&b("MessengerDecorator").getInnerDecorators().forEach(function(a){a.check(f)&&e.push(a.getAdditionalClassNames())});var g=this.$1();return k.jsxs(b("MessengerMessageActionsWrapper.react"),{className:b("joinClasses").apply(void 0,["clearfix _o46 _3erg"+(c?" _-5k":"")+(d?" _3i_m":"")+(d?" _nd_":"")+(d?"":" _29_7")+"",b("messengerRTLClasses")(a.body)].concat(e)),message:a,onShowMenu:this.$2,children:[g,this.props.hideDeliveryState===!0?null:k.jsx(j,{className:"_4jzq",isFromViewer:d,message:a,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts})]})};d.$1=function(){var a=this.props.message,c=b("RemovedMessageTombstoneContent").getRemovedMessageTombstoneContent(a,this.props.participants),d=this.$3();d=b("TooltipData").propsFor(d,l(this.props.isFromViewer));return k.jsxs("div",babelHelpers["extends"]({className:"_3058 _ui9"+(a.isSelected?" _3xsz":"")+" _7301 _hh7"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ybn":"")+" _s1- _52mr _3oh-"},d||{},{children:[this.props.hideBeforeDecorator===!0?null:k.jsx(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:a,isFromViewer:!!this.props.isFromViewer,hovered:this.state.shown[a.message_id],messageProps:{},isSavedView:!1}),k.jsx("div",{className:"_aok"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w73":""),tabIndex:0,"aria-label":c,children:k.jsx("span",{children:c})})]}))};d.$3=function(){var a=this.props.message.timestamp,c=this.props.message.removed_timestamp;a=i._("Sent: {sent time}",[i._param("sent time",b("MercuryTimestamp").getPreciseTimestamp(a))]);if(!c)return a;c=i._("Removed: {removed time}",[i._param("removed time",b("MercuryTimestamp").getPreciseTimestamp(c))]);return a.toString()+"\n"+c.toString()};return c}(k.Component);function l(a){return b("getViewportDimensions")().width<=parseInt("700px".replace("px",""),10)||b("MessengerSettingsStore").getSettings().info_sidebar_collapsed&&a?"above":a?"right":"left"}e.exports=a}),null);
__d("MessengerUserInputAppDispatcher",["ExplicitRegistrationDispatcher","objectValues"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}var d=c.prototype;d.explicitlyRegisterStoresInMap=function(a){this.explicitlyRegisterStores(b("objectValues")(a))};return c}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!0})}),null);
__d("MessengerUserInputActionsHandler",["MessengerUserInputActions","MessengerUserInputAppDispatcher"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerUserInputActions").MessengerUserInputActions;a={updateUserInputRequested:function(a,c,d){b("MessengerUserInputAppDispatcher").dispatch({type:g.UPDATE_USER_INPUT_REQUESTED,data:{isUserInputRequested:a,requestNumResults:c,requestType:d}})}};e.exports=a}),null);
__d("WorkGalahadScrollToMessageEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("EventEmitter"))()}),null);
__d("EmojiSticker.react",["cx","Image.react","React","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad()};d.render=function(){var a=this.props.emojiImage?this.props.emojiImage:h.jsx(b("Image.react"),{src:this.props.sourceURI});return h.jsx("div",{"aria-label":this.props.emoji,className:b("joinClasses")(this.props.className,"_383m"),tabIndex:"0",children:a})};return c}(h.Component);a.propTypes={emoji:(c=b("prop-types")).string,emojiImage:c.any,onAttachmentLoad:c.func,sourceURI:c.string.isRequired};e.exports=a}),null);
__d("XStickerInTrayController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/in_tray/",{pack_id:{type:"Int",required:!0}})}),null);
__d("StickersPackInTrayQuery",["Promise","AsyncRequest","RelayFBEnvironment","RelayModern","XStickerInTrayController","StickersPackInTrayQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").fetchQuery;b("RelayModern").graphql;var i=g!==void 0?g:g=b("StickersPackInTrayQuery.graphql");a={onIsPackInTray:function(a,c,d){return h(b("RelayFBEnvironment"),i,{stickerInterface:c}).then(function(c){c=c&&c.length>0?c[0]:null;var e=c==null?void 0:(c=c.sticker_store)==null?void 0:(c=c.tray_packs)==null?void 0:c.edges;if(e)return new(b("Promise"))(function(b,c){return b({in_sticker_tray:e.filter(function(b){return b.node.id===a}).length>0})}).then(d);var f=b("XStickerInTrayController").getURIBuilder().setInt("pack_id",a).getURI();return new(b("Promise"))(function(a,c){return new(b("AsyncRequest"))(f).setHandler(function(b){return a(b.getPayload())}).setAllowCrossPageTransition(!0).send()}).then(d)})}};e.exports=a}),null);
__d("MessengerAdsMessageSeenThreadFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("messenger_ads_message_seen_thread");e.exports=a}),null);
__d("MessengerProfileLinkAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLICK:"click",HOVER:"hover"})}),null);
__d("MessengerProfileLinkDomain",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",FB_SLASH_MESSAGES:"fb_slash_messages",WORK_CHAT:"work_chat"})}),null);
__d("MessengerWebDriverTestIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ANIMATED_IMAGE:"animated_image",ATTACHMENT_ROOT:"attachment_root",CHAT_SIDEBAR:"chat_sidebar",INFO_PANEL:"info_panel",SSO_LOGIN_BUTTON:"sso_login_button",INFO_PANEL_BUTTON:"info_panel_button",STICKER:"sticker",SIDEBAR_ITEM:"sidebar_item",DESKTOP_LOGIN_VIEW:"XMessengerDotComLoginViewPlaceholder",CHAT_INPUT:"chat_input:plaintext",CHAT_INPUT_RICH:"chat_input:rich-input"})}),null);
__d("RTWebLoggingComponent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUDIO_CALL:"audio_button",VIDEO_CALL:"video_button",START_CALL:"start_call_button",END_CALL:"end_call_button",JOIN_CALL:"join_call_button",CANCEL:"cancel_button",CALL_BACK:"call_back",CALL_AGAIN:"call_again",CHAT_PANEL_MESSAGE:"chat_panel_message",REDIAL:"redial",SCREENSHARING:"screensharing",SCREENSHARING_POP_OUT:"screensharing_pop_out_button",TOGGLE_VIDEO:"toggle_video",TOGGLE_AUDIO:"toggle_audio",TOGGLE_CHAT:"toggle_chat",TOGGLE_CAMERA:"toggle_camera",CLOSE_CHAT:"close_chat",TOGGLE_FILTERS:"toggle_filters",SCROLL_FILTERS:"scroll_filters",VIDEO_FILTER_OPTION:"video_filter_option",ADD_PARTICIPANT:"add_participant",FULLSCREEN:"fullscreen",FULLSCREEN_ENABLE:"fullscreen_enable",FULLSCREEN_DISABLE:"fullscreen_disable",CLOSE_WINDOW:"close_window",ACCEPT:"accept_button",DECLINE:"decline_button",NOT_NOW:"rating_not_now",SELF_VIEW:"self_view",SELF_VIEW_MINIMIZE:"self_view_minimize",SELF_VIEW_UNMINIMIZE:"self_view_unminimize",PARTICIPANT_REMOVE:"participant_remove",PARTICIPANT_ROW_SELECT:"participant_row_select",PARTICIPANT_ROW_UNSELECT:"participant_row_unselect",STAR_RATING:"star_rating",SUBMIT_FEEDBACK:"submit_feedback",SETTINGS:"settings",CLOSE_DIALOG:"close_dialog",INCOMING_RING_TONE:"incoming_ring_tone",FREE_CALL:"free_call",VIDEO_ESCALATE:"video_escalate",VIDEO_ESCALATE_ACCEPT:"video_escalate_accept",VIDEO_ESCALATE_DECLINE:"video_escalate_decline",RECENT_CALLS:"recent_calls",MESSAGE:"message",SAVE:"save_button",WINDOW_RESIZE:"window_resize",POOR_NETWORK_TOOLTIP:"poor_network_tooltip",VIDEO_LAYOUT_SWITCH:"video_layout_switch",MWEB_ROSTER_ROW:"mweb_roster_row",BANNER:"banner",UPGRADE_EDGE:"upgrade_edge",VIEW_PARTICIPANTS:"view_participants",BROWSER_NOTIFICATION:"browser_notification",MEDIA_ACCESS_PENDING:"media_access_pending",MEDIA_ACCESS_REJECTED:"media_access_rejected"})}),null);
__d("RTWebLoggingSurface",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_CONTROLS:"call_controls",CHAT_PANEL:"chat_panel",CHAT_TAB:"chat_tab",MESSENGER_HEADER:"messenger_header",INCOMING_DIALOG:"incoming_call_dialog",CALL_HEADER:"call_header",GROUP_CALL_ADD_MEMBERS_DIALOG:"group_call_add_members_dialog",GROUP_CALL_VIEW_MEMBERS_DIALOG:"group_call_view_members_dialog",GROUP_CALL_PARTICIPANT_PICKER_DIALOG:"group_call_participant_picker_dialog",CALL_CONTAINER:"call_container",TIMELINE_TOP_SECTION:"timeline_top_section",DROPDOWN_CALL_MENU:"dropdown_call_menu",THREAD_LIST:"thread_list",DESKTOP_NOTIFICATION:"desktop_notification",AUDIO_FALLBACK_DIALOG:"audio_fallback_dialog",STAR_RATING_SURFACE:"star_rating_surface",MISSED_CALL_DIALOG:"missed_call_dialog",UNSUPPORTED_BROWSER_DIALOG:"unsupported_browser_dialog",ADMIN_MESSAGE:"admin_message",WORK_HOVERCARD:"work_hovercard",MESSENGER_BUBBLE:"messenger_bubble",CHAT_SIDEBAR:"chat_sidebar",SETTING_DIALOG:"setting_dialog",SCREENSHARING_POP_OUT:"screensharing_pop_out",MWEB_ROSTER_VIEW:"mweb_roster_view",WORK_PROFILE:"work_profile",MEETING_ROOM_INTERN_SEARCH_CARD:"meeting_room_intern_search_card",MEETING_ROOM_MAP_DIALOG:"meeting_room_map_dialog",MEETING_ROOM_PROFILE:"meeting_room_profile",MESSAGES_JEWEL:"messages_jewel",WWW_ROSTER_VIEW:"www_roster_view"})}),null);
__d("TimeSpentRoomTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT",LOCAL_COMMUNITY:"LOCAL_COMMUNITY"})}),null);
__d("XMessengerContextBannerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/messenger/context_banner/",{profile_id:{type:"Int",required:!0},max_context_items:{type:"Int",defaultValue:3}})}),null);