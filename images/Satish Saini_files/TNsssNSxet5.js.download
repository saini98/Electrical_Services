if (self.CavalryLogger) { CavalryLogger.start_js(["Cf+YR"]); }

__d("InstagramMessageGraphQLThreadItemFetcher",["Promise","BanzaiODS","InstagramMessageThreadItemWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";e.exports={fetch:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadItemWebGraphQLQuery"))(c),{actorID:a,batchName:"InstagramMessageGraphQLThreadItemFetcher"}),function(a){b("BanzaiODS").bumpEntityKey(2966,"Instagram_message_webgraphql","InstagramMessageGraphQLThreadItemFetcher.success"),d(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey(2966,"Instagram_message_webgraphql","InstagramMessageGraphQLThreadItemFetcher.failure");e(a)})})}}}),null);
__d("InstagramMessageGraphQLThreadItemsFetcher",["Promise","BanzaiODS","InstagramMessageThreadItemsWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";e.exports={fetch:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadItemsWebGraphQLQuery"))(c),{actorID:a,batchName:"InstagramMessageGraphQLThreadItemsFetcher"}),function(a){b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadItemsFetcher.success"),d(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadItemsFetcher.failure");e(a)})})},fetchFromUser:function(a){return new(b("Promise"))(function(c,d){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadItemsWebGraphQLQuery"))(a)),function(a){b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadItemsFetcher.success"),c(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadItemsFetcher.failure");d(a)})})}}}),null);
__d("InstagramMessageGraphQLThreadsFetcher",["Promise","BanzaiODS","InstagramBusinessMessageInboxQueryWebGraphQLQuery","InstagramMessageThreadsWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";e.exports={fetch:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadsWebGraphQLQuery"))(c),{actorID:a,batchName:"InstagramMessageGraphQLThreadsFetcher"}),function(a){b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadsFetcher.success"),d(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramMessageGraphQLThreadsFetcher.failure");e(a)})})},fetchFromUser:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramBusinessMessageInboxQueryWebGraphQLQuery"))({inbox_id:a,limit:c.limit,after:c.after,folder:c.folder,is_follow_up:c.is_follow_up,is_unread:c.is_unread,loadThreads:c.loadThreads,assigned_admin_id:c.assigned_admin_id})),function(a){var c;b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramDirectMessageGraphQLThreadsFetcher.success");d({viewer:{instagram_message_threads:{sync_sequence_id:(c=a.instagram_business_message_inbox)==null?void 0:c.sync_sequence_id,unseen_count:(c=a.instagram_business_message_inbox)==null?void 0:c.unseen_count,nodes:(c=a.instagram_business_message_inbox)==null?void 0:(a=c.instagram_direct_message_threads)==null?void 0:a.nodes,ig_user:{instagram_user_id:"",profile_picture:{uri:""}}}}})},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey(2966,"instagram_message_webgraphql","InstagramDirectMessageGraphQLThreadsFetcher.failure");e(a)})})}}}),null);
__d("IGMessageInboxStore",["invariant","FBLogger","FluxLoadObjectStore","IGMessageDataDispatcher","IGMessageDataMutateActionTypes","InstagramMessageGraphQLThreadItemFetcher","InstagramMessageGraphQLThreadItemsFetcher","InstagramMessageGraphQLThreadsFetcher","LoadObject","PagesManagerInboxUnifiedThreadlistAction","immutable","keyMirror","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h="1",i="IGMessageID",j={INBOX:"INBOX",THREAD:"THREAD",ITEM:"ITEM"},k=b("keyMirror")({LOADED:""});a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$IGMessageInboxStore1=new Map(),c.$IGMessageInboxStore2=new Map(),c.$IGMessageInboxStore3=!0,c.$IGMessageInboxStore4=null,c.$IGMessageInboxStore5=null,c.$IGMessageInboxStore6=null,c.$IGMessageInboxStore7=null,c.$IGMessageInboxStore8=void 0,c.$IGMessageInboxStore9=void 0,c.$IGMessageInboxStore10=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getItemToken=function(a,b,c){a=[h,i,a,b,c];return a.join(":")};d.getInboxFromUser=function(a,b,c,d,e,f,g){return this.getInbox(a,b,c,d,e,f,g,!0)};d.getInbox=function(a,c,d,e,f,h,i,k){var l,m;k===void 0&&(k=!1);if(!a){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);return b("LoadObject").empty()}this.$IGMessageInboxStore3===!1&&b("PagesManagerInboxUnifiedThreadlistAction").setIsLoadingInbox(!1);l=(l=c)!=null?l:1;l>=1||g(0,11872);var n=this.$IGMessageInboxStore11({type:j.INBOX,inboxID:a,limit:l,cursor:d,folder:e,is_follow_up:f,is_unread:h,assigned_admin_id:i,fetch_from_user:k});this.$IGMessageInboxStore5=a;this.$IGMessageInboxStore6=c;this.$IGMessageInboxStore7=e;this.$IGMessageInboxStore8=f;this.$IGMessageInboxStore9=h;c=this.get(n);if(c.isDeleting()){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);return b("LoadObject").deleting()}else if(!c.hasValue()){if(c.hasError()){b("FBLogger")("pages_messaging_www").mustfix("Encounter error when loading IG inbox: %s",a);this.$IGMessageInboxStore12(this.$IGMessageInboxStore11({type:j.INBOX,inboxID:a,limit:l,folder:e,is_follow_up:f,is_unread:h,assigned_admin_id:i,fetch_from_user:k}));b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);b("PagesManagerInboxUnifiedThreadlistAction").setInstagramLoadingError(!0);return b("LoadObject").loading().setError(c.getError())}d&&g(0,3361);b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);return b("LoadObject").loading()}m=(m=c.value)!=null?m:{};m=m.inbox;if(m===null||m===void 0){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);return b("LoadObject").withValue(null)}var o=this.$IGMessageInboxStore1.get(n);if(o&&o.stateData.inbox===m){o.isLoading!==c.isLoading()&&(o={stateData:b("nullthrows")(c.value),returnedData:o.returnedData,isLoading:c.isLoading(),error:c.getError()},this.$IGMessageInboxStore1.set(n,o));if(o.isLoading){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(o.returnedData.inbox);return b("LoadObject").withValue(o.returnedData.inbox).loading().setError(o.error)}else if(!(o.error instanceof Error)){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(o.returnedData.inbox);return b("LoadObject").withValue(o.returnedData.inbox)}}o=(o=m.nodes)!=null?o:[];var p=0;if(d!==null&&d!==void 0){var q=-1;for(var r=o.length-1;r>=0;r--)if(o[r].token===d.lastEntityToken){q=r;break}else if(this.largeNumberCompare(d.lastEntityTime,b("nullthrows")(o[r].last_activity_at))===-1)break;if(q===-1){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(null);return b("LoadObject").withValue(null)}p=q+1}d=Object.assign({},m);r=!1;if(p+l<=o.length)d.nodes=o.slice(p,p+l),d.page_info={has_next_page:p+l<o.length||m.page_info&&m.page_info.has_next_page};else if(!m.page_info&&!m.nodes)this.$IGMessageInboxStore12(this.$IGMessageInboxStore11({type:j.INBOX,inboxID:a,limit:l,folder:e,is_follow_up:f,is_unread:h,assigned_admin_id:i,fetch_from_user:k})),r=!0;else if(!m.page_info||!b("nullthrows")(m.page_info).has_next_page)d.nodes=o.slice(p,o.length),d.page_info={has_next_page:!1};else{q=null;o.length>0&&(q={lastEntityTime:b("nullthrows")(o[o.length-1].last_activity_at),lastEntityToken:b("nullthrows")(o[o.length-1].token)});this.$IGMessageInboxStore12(this.$IGMessageInboxStore11({type:j.INBOX,inboxID:a,limit:p+l-o.length,cursor:q,folder:e,is_follow_up:f,is_unread:h,assigned_admin_id:i,graphqlCursor:b("nullthrows")(m.page_info).end_cursor,fetch_from_user:k}));d.nodes=o.slice(p,o.length);d.page_info={has_next_page:!0};r=!0}this.$IGMessageInboxStore1.set(n,{stateData:b("nullthrows")(c.value),returnedData:{inbox:d},isLoading:r,error:c.getError()});if(r){b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(d);return b("LoadObject").withValue(d).loading().setError(c.getError())}else{b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(d);return b("LoadObject").withValue(d).setError(c.getError())}};d.getThreadFromUser=function(a,b,c,d){return this.getThread(a,b,c,d,!0)};d.getThread=function(a,c,d,e,f){var h,i;f===void 0&&(f=!1);if(c===""||!a)return b("LoadObject").empty();d=(d=d)!=null?d:1;d>=1||g(0,11872);var k=this.$IGMessageInboxStore11({type:j.THREAD,inboxID:a,token:c,limit:d,cursor:e,fetch_from_user:f}),l=this.get(k);if(l.isDeleting())return b("LoadObject").deleting();else if(!l.hasValue()){if(l.hasError()){b("FBLogger")("pages_messaging_www").mustfix("Encounter error when loading IG thread: %s, $s",a,c);return b("LoadObject").empty().setError(l.getError())}e&&g(0,3361);return b("LoadObject").loading()}h=(h=l.value)!=null?h:{};h=h.thread;if(h===null||h===void 0)return b("LoadObject").withValue(null);var m=this.$IGMessageInboxStore1.get(k);if(m&&m.stateData.thread===h){m.isLoading!==l.isLoading()&&(m={stateData:b("nullthrows")(l.value),returnedData:m.returnedData,isLoading:l.isLoading(),error:l.getError()},this.$IGMessageInboxStore1.set(k,m));if(m.isLoading)return b("LoadObject").withValue(m.returnedData.thread).loading().setError(m.error);else if(!(m.error instanceof Error))return b("LoadObject").withValue(m.returnedData.thread)}m=(m=h.thread_items)!=null?m:{};i=(i=m.nodes)!=null?i:[];var n=0;if(e!==null&&e!==void 0){var o=-1;for(var p=i.length-1;p>=0;p--)if(i[p].token===e.lastEntityToken){o=p;break}else if(this.largeNumberCompare(e.lastEntityTime,b("nullthrows")(i[p].time_stamp))===-1)break;if(o===-1)return b("LoadObject").withValue(null);n=o+1}e=Object.assign({},h);p=Object.assign({},m);o=!1;e.thread_items=p;if(n+d<=i.length)p.nodes=i.slice(n,n+d),p.page_info={has_next_page:n+d<i.length||m.page_info&&m.page_info.has_next_page};else if(!m.page_info&&!m.nodes)this.$IGMessageInboxStore12(this.$IGMessageInboxStore11({type:j.THREAD,inboxID:a,token:c,limit:d,fetch_from_user:f})),o=!0;else if(!m.page_info||!b("nullthrows")(m.page_info).has_next_page)p.nodes=i.slice(n,i.length),p.page_info={has_next_page:!1};else{h=null;i.length>0&&(h={lastEntityTime:b("nullthrows")(i[i.length-1].time_stamp),lastEntityToken:b("nullthrows")(i[i.length-1].token)});this.$IGMessageInboxStore12(this.$IGMessageInboxStore11({type:j.THREAD,inboxID:b("nullthrows")(a),token:c,limit:n+d-i.length,cursor:h,graphqlCursor:b("nullthrows")(m.page_info).end_cursor,fetch_from_user:f}));p.nodes=i.slice(n,i.length);p.page_info={has_next_page:!0};o=!0}this.$IGMessageInboxStore1.set(k,{stateData:b("nullthrows")(l.value),returnedData:{thread:e},isLoading:o,error:l.getError()});if(o)return b("LoadObject").withValue(e).loading().setError(l.getError());else return b("LoadObject").withValue(e).setError(l.getError())};d.getThreadItem=function(a,c){if(!a||c==="")return b("LoadObject").empty();a=this.get(this.$IGMessageInboxStore11({type:j.ITEM,inboxID:a,token:c}));if(a.isDeleting())return b("LoadObject").deleting();else if(!a.hasValue())return b("LoadObject").loading();else if(a.isCreating())return b("LoadObject").withValue(a.getValueEnforcing().item).creating();return b("LoadObject").withValue(a.getValueEnforcing().item)};d.__load=function(a){a=this.$IGMessageInboxStore13(a);switch(a.type){case j.INBOX:this.$IGMessageInboxStore14(a);break;case j.THREAD:this.$IGMessageInboxStore15(a);break;case j.ITEM:this.$IGMessageInboxStore16(a);break}};d.$IGMessageInboxStore14=function(a){Boolean(a.fetch_from_user)?b("InstagramMessageGraphQLThreadsFetcher").fetchFromUser(a.inboxID,{limit:a.limit,folder:a.folder,is_follow_up:a.is_follow_up,is_unread:a.is_unread,assigned_admin_id:a.assigned_admin_id,after:a.graphqlCursor,loadThreads:!0}).then(function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:{inbox:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})}):b("InstagramMessageGraphQLThreadsFetcher").fetch(a.inboxID,{limit:a.limit,folder:a.folder,is_follow_up:a.is_follow_up,is_unread:a.is_unread,assigned_admin_id:a.assigned_admin_id,after:a.graphqlCursor,loadThreads:!0}).then(function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:{inbox:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})})};d.$IGMessageInboxStore15=function(a){Boolean(a.fetch_from_user)?b("InstagramMessageGraphQLThreadItemsFetcher").fetchFromUser({token:b("nullthrows")(a.token),instagram_user_id:a.inboxID,item_limit:a.limit,item_after:a.graphqlCursor,load_items:!0,width:480,height:480}).then(function(c){c.instagram_message_thread===null?b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error("Failed to fetch thread"),type:k.LOADED}):b("IGMessageDataDispatcher").dispatch({request:a,payload:{thread:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})}):b("InstagramMessageGraphQLThreadItemsFetcher").fetch(a.inboxID,{token:b("nullthrows")(a.token),item_limit:a.limit,item_after:a.graphqlCursor,load_items:!0,width:480,height:480}).then(function(c){c.instagram_message_thread===null?b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error("Failed to fetch thread"),type:k.LOADED}):b("IGMessageDataDispatcher").dispatch({request:a,payload:{thread:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})})};d.$IGMessageInboxStore16=function(a){b("InstagramMessageGraphQLThreadItemFetcher").fetch(a.inboxID,{token:b("nullthrows")(a.token),width:480,height:480}).then(function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:{item:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})})};d.__getActionTypes=function(){var a;return[this.getActionTypeStartLoad(),k.LOADED,(a=b("IGMessageDataMutateActionTypes")).CREATE,a.CREATING,a.DELETE,a.DELETING,a.FORCE_FETCH,a.UPDATE]};d.reduce=function(a,c){var d;switch(c.type){case k.LOADED:var e=c.payload;this.$IGMessageInboxStore2.set(this.$IGMessageInboxStore11(c.request),!1);if(e instanceof Error)return this.$IGMessageInboxStore17(a,c.request,e);switch(c.request.type){case j.INBOX:this.$IGMessageInboxStore3=!1;b("PagesManagerInboxUnifiedThreadlistAction").setIsLoadingInbox(!1);return this.$IGMessageInboxStore18(a,c.request,b("nullthrows")(e.inbox));case j.THREAD:return this.$IGMessageInboxStore19(a,c.request,b("nullthrows")(e.thread));case j.ITEM:return this.$IGMessageInboxStore20(a,c.request,b("nullthrows")(e.item))}return a;case b("IGMessageDataMutateActionTypes").FORCE_FETCH:switch(c.request.type){case j.INBOX:b("PagesManagerInboxUnifiedThreadlistAction").setIsLoadingInbox(!0),this.$IGMessageInboxStore3=!0}this.$IGMessageInboxStore12(this.$IGMessageInboxStore11(c.request));return a;case b("IGMessageDataMutateActionTypes").DELETING:return this.__setDeleting(a,b("immutable").List.of(this.$IGMessageInboxStore21(c.request)));case b("IGMessageDataMutateActionTypes").DELETE:e=a;switch(c.request.type){case j.THREAD:e=this.$IGMessageInboxStore22(a,c.request.inboxID,b("nullthrows")(c.request.token));break;case j.ITEM:e=this.$IGMessageInboxStore23(a,c.request.inboxID,b("nullthrows")((d=c)!=null?(d=d.extraData)!=null?d.threadToken:d:d),b("nullthrows")(c.request.token));break}return this.__setEmpty(e,b("immutable").List.of(this.$IGMessageInboxStore21(c.request)));case b("IGMessageDataMutateActionTypes").CREATING:if(c.request.type===j.ITEM){var f,g,h;e=b("nullthrows")((d=c)!=null?(d=d.payload)!=null?d.item:d:d);d=b("nullthrows")(e.client_context);e=Object.assign({},e,{token:d});h=b("nullthrows")((h=c)!=null?(h=h.extraData)!=null?h.threadToken:h:h);var i=this.$IGMessageInboxStore24(a,c.request.inboxID,h,null,e),l=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.request.inboxID,token:h}),m=this.$IGMessageInboxStore25(i,l);m=(m=m)!=null?(m=m.value)!=null?m.thread:m:m;g=((g=e)!=null?g.time_stamp:g)||this.getNowTimestamp();f=(f=(f=m)!=null?f.last_activity_at:f)!=null?f:g;i=this.$IGMessageInboxStore26(i,c.request.inboxID,h,{token:h,last_activity_at:f},0);var n=this.getInboxIGID();h=(((h=m)!=null?h.last_seen_at:h)||[]).find(function(a){return a.user_id==n});if(this.largeNumberCompare(((h=h)!=null?h.timestamp:h)||"0",g)==-1){g=(((h=m)!=null?h.last_seen_at:h)||[]).filter(function(a){return a.user_id!==n});g.push({item_id:d,timestamp:e.time_stamp,user_id:n});h=Object.assign({},m,{last_seen_at:g,last_activity_at:f});i=this.$IGMessageInboxStore27(i,l,{thread:h})}return i.set(this.$IGMessageInboxStore21({type:j.ITEM,inboxID:c.request.inboxID,token:d}),b("LoadObject").withValue({item:e}).creating())}return a;case b("IGMessageDataMutateActionTypes").CREATE:switch(c.request.type){case j.THREAD:g=b("nullthrows")((m=c)!=null?(m=m.payload)!=null?m.thread:m:m);f=this.$IGMessageInboxStore26(a,c.request.inboxID,null,{token:b("nullthrows")(g.token),last_activity_at:b("nullthrows")(g.last_activity_at)},0);i=(h=(l=g)!=null?(l=l.thread_items)!=null?l.nodes:l:l)!=null?h:[];d=i.map(function(a){return{token:a.token,time_stamp:a.time_stamp}});e=Object.assign({},g.thread_items,{nodes:d});m=Object.assign({},g,{thread_items:e});return this.$IGMessageInboxStore27(f,this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.request.inboxID,token:b("nullthrows")(g.token)}),{thread:m});case j.ITEM:h=b("nullthrows")((l=c)!=null?(l=l.payload)!=null?l.item:l:l);i=this.$IGMessageInboxStore21({type:j.ITEM,inboxID:c.request.inboxID,token:b("nullthrows")(h.token)});if(!this.$IGMessageInboxStore25(a,i).isEmpty())return a;e=b("nullthrows")((d=c)!=null?(d=d.extraData)!=null?d.threadToken:d:d);f=this.$IGMessageInboxStore24(a,c.request.inboxID,e,h.client_context,h);g=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.request.inboxID,token:e});m=this.$IGMessageInboxStore25(f,g);i=(l=m)!=null?(l=l.value)!=null?l.thread:l:l;m=(f=(d=i)!=null?d.last_activity_at:d)!=null?f:h.time_stamp;l=0;d=a;if(i!==null&&i!==void 0){var o=this.getInboxIGID();f=(((f=i)!=null?f.last_seen_at:f)||[]).find(function(a){return a.user_id==o});var p={};if(f!==null&&f!==void 0&&(f.item_id===h.client_context||h.sender_id===o)){f=(((f=i)!=null?f.last_seen_at:f)||[]).filter(function(a){return a.user_id!==o});f.push({item_id:h.token,timestamp:h.time_stamp,user_id:o});p.last_seen_at=f}if(h.ig_item_type==="raven_media"&&h.sender_id!==o){f=(f=(f=i)!=null?(f=f.direct_story)!=null?f.unseen_count:f:f)!=null?f:0;p.direct_story={unseen_count:f+1,media_type:(f=h)!=null?(f=f.raven_media)!=null?f.media_type:f:f}}p.last_activity_at=h.sender_id!==this.getInboxIGID()?h.time_stamp:(f=(f=i)!=null?f.last_activity_at:f)!=null?f:h.time_stamp;f=Object.assign({},i,p);if(h.sender_id!==this.getInboxIGID()){p=(i=this.$IGMessageInboxStore25(a,g))!=null?(i=i.value)!=null?i.thread:i:i;l=this.getUnseenCountDelta(c.request.inboxID,p,f)}d=this.$IGMessageInboxStore27(d,g,{thread:f})}else h.sender_id!==this.getInboxIGID()&&(l=1);d=this.$IGMessageInboxStore26(d,c.request.inboxID,e,{token:e,last_activity_at:m},l);return this.$IGMessageInboxStore28(d,c.request.inboxID,h.client_context,h)}return a;case b("IGMessageDataMutateActionTypes").UPDATE:switch(c.request.type){case j.INBOX:p=b("nullthrows")((i=c)!=null?(i=i.payload)!=null?i.inbox:i:i);g=this.$IGMessageInboxStore21(c.request);f=this.$IGMessageInboxStore25(a,g);m=(e=f)!=null?(e=e.value)!=null?e.inbox:e:e;if(m===null||m===void 0)return a;l=Object.assign({},m,p);return this.$IGMessageInboxStore27(a,g,{inbox:l});case j.THREAD:h=b("nullthrows")((d=c)!=null?(d=d.payload)!=null?d.thread:d:d);i=this.$IGMessageInboxStore21(c.request);f=this.$IGMessageInboxStore25(a,i);m=(e=f)!=null?(e=e.value)!=null?e.thread:e:e;if(m===null||m===void 0)return a;p=Object.assign({},m,h);var q=h.last_seen_at||[];if(q.length>0){var r=q.slice();(m.last_seen_at||[]).map(function(a){q.find(function(b){return b.user_id===a.user_id})||r.push(a)});p.last_seen_at=r}else p.last_seen_at=m.last_seen_at;p.is_read=(l=(g=c.payload.thread)==null?void 0:g.is_read)!=null?l:m.is_read;d=this.$IGMessageInboxStore27(a,i,{thread:p});f=this.getUnseenCountDelta(c.request.inboxID,m,p);if(f!==0){e=this.$IGMessageInboxStore21({type:j.INBOX,inboxID:c.request.inboxID});g=(h=this.$IGMessageInboxStore25(d,e))!=null?(h=h.value)!=null?h.inbox:h:h;i=(l=g==null?void 0:g.unseen_count)!=null?l:0;m=Object.assign({},g,{unseen_count:i+f});return this.$IGMessageInboxStore27(d,e,{inbox:m})}return d;case j.ITEM:h=b("nullthrows")((p=c)!=null?(p=p.payload)!=null?p.item:p:p);l=this.$IGMessageInboxStore21(c.request);g=this.$IGMessageInboxStore25(a,l);f=(i=g)!=null?(i=i.value)!=null?i.item:i:i;if(f===null||f===void 0)return a;e=Object.assign({},f,h);if(e.time_stamp===f.time_stamp&&e.raven_media===f.raven_media)return this.$IGMessageInboxStore27(a,l,{item:e});d=b("nullthrows")((m=c)!=null?(m=m.extraData)!=null?m.threadToken:m:m);p=this.$IGMessageInboxStore24(a,c.request.inboxID,d,e.token,e,f);g=this.$IGMessageInboxStore25(a,this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.request.inboxID,token:d})).getValue();i=this.$IGMessageInboxStore25(p,this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.request.inboxID,token:d})).getValue();m=(h=i)!=null?(h=h.thread)!=null?h.last_activity_at:h:h;f=this.getUnseenCountDelta(c.request.inboxID,g==null?void 0:g.thread,i==null?void 0:i.thread);h=this.$IGMessageInboxStore26(p,c.request.inboxID,d,{token:d,last_activity_at:m},f);return this.$IGMessageInboxStore27(h,l,{item:e})}return a;default:return a}};d.$IGMessageInboxStore18=function(a,c,d){var e=this;d=(d=d.viewer)!=null?d:{};d=d.instagram_message_threads;if(!d)return this.$IGMessageInboxStore17(a,c,{inbox:null});var f=Object.assign({},d),g=a,h=d.nodes;if(h){var i=new Map(),k=c.cursor;if(!k)f.nodes=h.filter(function(a){return a.token!==null&&a.token!==void 0}).map(function(d){var a=b("nullthrows")(d.token);a=e.$IGMessageInboxStore11({type:j.THREAD,inboxID:c.inboxID,token:a});i.set(a,{thread:Object.assign({},d)});return{token:d.token,last_activity_at:d.last_activity_at}});else{var l,m,n;m=(m=this.$IGMessageInboxStore25(a,this.$IGMessageInboxStore21(c)).value)!=null?m:{};m=(m=m.inbox)!=null?m:{};n=(n=m.nodes)!=null?n:[];var o=-1;if(b("nullthrows")(c.graphqlCursor)===((l=m)!=null?(l=l.page_info)!=null?l.end_cursor:l:l))o=n.length-1;else for(var l=n.length-1;l>=0;l--){var p=this.largeNumberCompare(k.lastEntityTime,b("nullthrows")(n[l].last_activity_at));if(p===0){o=l;break}else if(p===-1)break}if(o===-1)return a;p=o+1;k=0;l=m.page_info;o=n.slice(0,p);while(k<h.length&&p<n.length){m=h[k];var q=m.token;if(q===null||q===void 0){k++;continue}var r=n[p];q===r.token?(o.push(r),p++,k++):this.largeNumberCompare(b("nullthrows")(r.last_activity_at),b("nullthrows")(m.last_activity_at))===1?p++:k++}if(k<h.length){l=d.page_info;while(k<h.length){q=h[k];r=q.token;if(r===null||r===void 0){k++;continue}m=this.$IGMessageInboxStore11({type:j.THREAD,inboxID:c.inboxID,token:r});p=this.$IGMessageInboxStore25(a,m);p.hasValue()||i.set(m,{thread:Object.assign({},q)});o.push({token:q.token,last_activity_at:q.last_activity_at});k++}}f=Object.assign({},d,{nodes:o,page_info:l})}g=this.__handleMap(a,i)}return this.$IGMessageInboxStore17(g,c,{inbox:f})};d.$IGMessageInboxStore19=function(a,c,d){var e=this;d=d.instagram_message_thread;if(!d)return this.$IGMessageInboxStore17(a,c,{thread:null});var f=Object.assign({},d),g=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c.inboxID,token:c.token});g=(g=this.$IGMessageInboxStore25(a,g))!=null?(g=g.value)!=null?g.thread:g:g;g&&(f.is_read=g.is_read);g=a;d=d.thread_items;if(d){var h=Object.assign({},d),i=new Map(),k=c.cursor;if(!k)h.nodes=d.nodes.map(function(d){var b=d.token;if(b!==null&&b!==void 0){b=e.$IGMessageInboxStore11({type:j.ITEM,inboxID:c.inboxID,token:b});var f=e.$IGMessageInboxStore25(a,b);f.hasValue()||i.set(b,{item:Object.assign({},d)})}return{token:d.token,time_stamp:d.time_stamp}});else{var l,m,n;m=(m=this.$IGMessageInboxStore25(a,this.$IGMessageInboxStore21(c)).value)!=null?m:{};m=(m=m.thread)!=null?m:{};m=(m=m.thread_items)!=null?m:{};var o=d.nodes;n=(n=m.nodes)!=null?n:[];var p=-1;if(b("nullthrows")(c.graphqlCursor)===((l=m)!=null?(l=l.page_info)!=null?l.end_cursor:l:l))p=n.length-1;else for(var l=n.length-1;l>=0;l--){var q=this.largeNumberCompare(k.lastEntityTime,b("nullthrows")(n[l].time_stamp));if(q===0){p=l;break}else if(q===-1)break}if(p===-1)return a;q=p+1;k=0;l=m.page_info;p=n.slice(0,q);while(k<o.length&&q<n.length){m=o[k];var r=m.token;if(r===null||r===void 0){k++;continue}var s=n[q];r===s.token?(p.push(s),q++,k++):this.largeNumberCompare(b("nullthrows")(s.time_stamp),b("nullthrows")(m.time_stamp))===1?q++:k++}if(k<o.length){l=d.page_info;while(k<o.length){r=o[k];s=r.token;if(s===null||s===void 0){k++;continue}m=this.$IGMessageInboxStore11({type:j.ITEM,inboxID:c.inboxID,token:s});q=this.$IGMessageInboxStore25(a,m);q.hasValue()||i.set(m,{item:Object.assign({},r)});p.push({token:r.token,time_stamp:r.time_stamp});k++}}h=Object.assign({},d,{nodes:p,page_info:l})}f.thread_items=h;g=this.__handleMap(a,i)}return this.$IGMessageInboxStore17(g,c,{thread:f})};d.$IGMessageInboxStore20=function(a,b,c){return this.$IGMessageInboxStore17(a,b,{item:c.instagram_message_thread_item})};d.$IGMessageInboxStore22=function(a,b,c,d){var e;d===void 0&&(d=j.INBOX);d=this.$IGMessageInboxStore21({type:d,inboxID:b});var f=this.$IGMessageInboxStore25(a,d);f=(f=f)!=null?(f=f.value)!=null?f.inbox:f:f;if(f===null||f===void 0)return a;e=(e=f.nodes)!=null?e:[];if(e.length>0&&e.find(function(a){return a.token===c})){var g,h=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:b,token:c});h=(h=this.$IGMessageInboxStore25(a,h))!=null?(h=h.value)!=null?h.thread:h:h;g=(g=(g=f)!=null?g.unseen_count:g)!=null?g:0;b=this.isThreadUnread(b,h);b&&g>0&&(g-=1);h=Object.assign({},f,{nodes:e.filter(function(a){return a.token!==c}),unseen_count:g});return this.$IGMessageInboxStore27(a,d,{inbox:h})}return a};d.$IGMessageInboxStore23=function(a,b,c,d){var e;b=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:b,token:c});c=this.$IGMessageInboxStore25(a,b);c=(c=c)!=null?(c=c.value)!=null?c.thread:c:c;if(c===null||c===void 0)return a;e=(e=(e=c)!=null?(e=e.thread_items)!=null?e.nodes:e:e)!=null?e:[];if(e.length>0&&e.find(function(a){return a.token===d})){e=Object.assign({},c.thread_items,{nodes:e.filter(function(a){return a.token!==d})});c=Object.assign({},c,{thread_items:e});return this.$IGMessageInboxStore27(a,b,{thread:c})}return a};d.$IGMessageInboxStore26=function(a,c,d,e,f,g){var h;g===void 0&&(g=j.INBOX);g=this.$IGMessageInboxStore21({type:g,inboxID:c});c=this.$IGMessageInboxStore25(a,g);c=(c=c)!=null?(c=c.value)!=null?c.inbox:c:c;if(c===null||c===void 0)return a;h=(h=c.nodes)!=null?h:[];if(d===e.token){var i=h.find(function(a){return a.token===d});if(i!==null&&i!==void 0&&i.last_activity_at===e.last_activity_at&&f===0)return a}i=d!==null&&d!==void 0?h.filter(function(a){return d!==a.token}):h;for(h=0;h<i.length;h++)if(this.largeNumberCompare(b("nullthrows")(e.last_activity_at),b("nullthrows")(i[h].last_activity_at))!==-1)break;var k=i.slice(0,h);k.push({token:e.token,last_activity_at:e.last_activity_at});e=(e=c.unseen_count)!=null?e:0;c=Object.assign({},c,{nodes:k.concat(i.slice(h)),unseen_count:e+f});return this.$IGMessageInboxStore27(a,g,{inbox:c})};d.$IGMessageInboxStore24=function(a,c,d,e,f,g){var h,i,k;c=this.$IGMessageInboxStore21({type:j.THREAD,inboxID:c,token:d});d=this.$IGMessageInboxStore25(a,c);d=(d=d)!=null?(d=d.value)!=null?d.thread:d:d;if(d===null||d===void 0)return a;k=(k=(k=d)!=null?(k=k.thread_items)!=null?k.nodes:k:k)!=null?k:[];k=e!==null&&e!==void 0?k.filter(function(a){return e!==a.token}):k;var l;for(l=0;l<k.length;l++)if(this.largeNumberCompare(b("nullthrows")(f.time_stamp),b("nullthrows")(k[l].time_stamp))!==-1)break;var m=k.slice(0,l);i=(i=(i=d)!=null?(i=i.direct_story)!=null?i.unseen_count:i:i)!=null?i:0;h=(h=d)!=null?h.direct_story:h;var n=this.getInboxIGID();if(f.ig_item_type==="RAVEN_MEDIA"&&n!==f.sender_id){var o;g=g!=null?this.isRavenSeenByInbox(g,(g=(g=d)!=null?g.is_group:g)!=null?g:!1,n):!1;o=this.isRavenSeenByInbox(f,(o=(o=d)!=null?o.is_group:o)!=null?o:!1,n);if(g!==o)if(g){h={unseen_count:i-1,media_type:(n=f)!=null?(n=n.raven_media)!=null?n.media_type:n:n}}else{h={unseen_count:i+1,media_type:(o=f)!=null?(o=o.raven_media)!=null?o.media_type:o:o}}}m.push({token:f.token,time_stamp:f.time_stamp});g=Object.assign({},d.thread_items,{nodes:m.concat(k.slice(l))});n=Object.assign({},d,{thread_items:g,last_activity_at:g.nodes[0].time_stamp,direct_story:h});return this.$IGMessageInboxStore27(a,c,{thread:n})};d.$IGMessageInboxStore28=function(a,c,d,e){var f=this.$IGMessageInboxStore21({type:j.ITEM,inboxID:c,token:b("nullthrows")(e.token)});if(d===null||d===void 0)return this.$IGMessageInboxStore27(a,f,{item:e});c=this.$IGMessageInboxStore21({type:j.ITEM,inboxID:c,token:d});d=this.$IGMessageInboxStore25(a,c);e=b("LoadObject").withValue({item:e});d.isDeleting()&&(e=e.deleting());d=this.__setEmpty(a,b("immutable").List.of(c));return d.set(f,e)};d.getCached=function(b){return a.prototype.getCached.call(this,this.$IGMessageInboxStore21(this.$IGMessageInboxStore13(b)))};d.$IGMessageInboxStore25=function(a,c){return a.get(c)||b("LoadObject").empty()};d.__setLoading=function(b,c){var d=[];for(var c=c,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;d.push(this.$IGMessageInboxStore21(this.$IGMessageInboxStore13(g)))}return a.prototype.__setLoading.call(this,b,d)};d.$IGMessageInboxStore17=function(a,b,c){b=this.$IGMessageInboxStore21(b);return this.$IGMessageInboxStore27(a,b,c)};d.$IGMessageInboxStore27=function(c,d,e){var f=a.prototype.getCached.call(this,d);if(e instanceof Error)return c.set(d,f.setError(e).done());else{e.inbox&&(b("PagesManagerInboxUnifiedThreadlistAction").setInstagramInbox(e.inbox),b("PagesManagerInboxUnifiedThreadlistAction").setInstagramLoadingError(!1));return c.set(d,f.setValue(e).removeError().done())}};d.$IGMessageInboxStore11=function(a){return JSON.stringify(a)};d.$IGMessageInboxStore21=function(a){return JSON.stringify({type:a.type,inboxID:a.inboxID,token:a.token})};d.$IGMessageInboxStore13=function(a){return JSON.parse(a)};d.getIsInitLoading=function(){return this.$IGMessageInboxStore3};d.largeNumberCompare=function(a,b){if(a.length>b.length)return 1;return a.length<b.length?-1:a===b?0:a>b?1:-1};d.convertTimestamp=function(a){return parseInt(a.slice(0,a.length-3),10)};d.getNowTimestamp=function(){return Date.now().toString()+"000"};d.setInboxIGID=function(a){this.$IGMessageInboxStore4=a};d.getInboxIGID=function(){return this.$IGMessageInboxStore4};d.getInboxID=function(){return this.$IGMessageInboxStore5};d.setInboxProfilePic=function(a){this.$IGMessageInboxStore10=a};d.getInboxProfilePic=function(){return this.$IGMessageInboxStore10};d.getItemType=function(a,b){a=this.getThreadItem(a,b).getValue();return(b=a)!=null?b.ig_item_type:b};d.$IGMessageInboxStore12=function(a){this.$IGMessageInboxStore2.get(a)||(this.$IGMessageInboxStore2.set(a,!0),this.__queueLoadAll(b("immutable").List.of(a)))};d.isMessageExpired=function(a){a=this.largeNumberCompare(a+"000",Date.now().toString());return a<0?!0:!1};d.getUnseenCountDelta=function(a,b,c){b=this.isThreadUnread(a,b);a=this.isThreadUnread(a,c);if(b===a)return 0;return b?-1:1};d.isThreadUnread=function(a,b){return!b?!1:this.hasUnseenMessage(a,b)||this.hasUnseenEphemeral(b)||this.hasMarkedUnread(b)};d.hasUnseenMessage=function(a,c){var d=this.getInboxIGID();if(d===null||d===void 0)return!1;a=c.last_seen_at.find(function(a){return a.user_id===d});if(a===null||a===void 0)return!0;c=b("nullthrows")((c=c)!=null?c.last_activity_at:c);return this.largeNumberCompare(c,b("nullthrows")(a.timestamp))===1};d.hasUnseenEphemeral=function(a){a=(a=a)!=null?(a=a.direct_story)!=null?a.unseen_count:a:a;return a===null||a===void 0||a===0?!1:!0};d.hasMarkedUnread=function(a){a=(a=a)!=null?a.is_read:a;return a===null||a===void 0||a===!1?!0:!1};d.isRavenSeenByInbox=function(a,b,c){var d;if(c===null||c===void 0)return!1;d=(d=(d=a)!=null?(d=d.raven_media)!=null?d.seen_count:d:d)!=null?d:0;a=(a=(a=a)!=null?(a=a.raven_media)!=null?a.seen_user_ids:a:a)!=null?a:[];if(b)return a.some(function(a){return a===c});else return d>0};d.getLocallyUpdatedUnreadCount=function(a){a===void 0&&(a=!1);if(this.$IGMessageInboxStore5==null)return null;var c=b("LoadObject").empty(),d=Boolean(this.$IGMessageInboxStore8),e=Boolean(this.$IGMessageInboxStore9);c=this.getInbox(b("nullthrows")(this.$IGMessageInboxStore5),this.$IGMessageInboxStore6,null,this.$IGMessageInboxStore7,d,e,null,a);if(c.hasValue()){return(d=c.getValue())!=null?d.unseen_count:d}a=c.hasError()?(e=c.getError())!=null?e.message:e:null;b("PagesManagerInboxUnifiedThreadlistAction").setInstagramLoadingError(c.hasError());a!=null&&b("FBLogger")("pages_messaging_www").warn("Encounter error when loading IG inbox for updating unread count: %s",a);return null};return c}(b("FluxLoadObjectStore"));a.__moduleID=e.id;e.exports=new a(b("IGMessageDataDispatcher"))}),null);
__d("PagesCommsInboxTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setClientTime=function(a){this.$1.client_time=a;return this};c.setCustomerID=function(a){this.$1.customer_id=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setFunnel=function(a){this.$1.funnel=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setMessagingPlatform=function(a){this.$1.messaging_platform=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setStatus=function(a){this.$1.status=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={client_time:!0,customer_id:!0,event:!0,funnel:!0,message_id:!0,messaging_platform:!0,page_id:!0,status:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("PageInstagramDirectSyncProtocolTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PageInstagramDirectSyncProtocolLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PageInstagramDirectSyncProtocolLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PageInstagramDirectSyncProtocolLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setInstagramUserID=function(a){this.$1.instagram_user_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={event:!0,instagram_user_id:!0,page_id:!0,session_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("IGMessageConnectionUtils",["InstagramDirectMessageEventStream"],(function(a,b,c,d,e,f){"use strict";e.exports={processInstagramMessageEventStream:function(a,c,d,e,f){e===void 0&&(e=null);f===void 0&&(f=!1);var g=b("InstagramDirectMessageEventStream").getForFBID(a).getLatestIrisSeqID();d!=null&&parseInt(d.sync_sequence_id,10)>g&&b("InstagramDirectMessageEventStream").getForFBID(a).onInboxLoad(parseInt(d.sync_sequence_id,10),a,c,e,null,f)}}}),null);
__d("SUILiveRailThemeDEPRECATED",["cssVar","Icon.atlas","React","SUIAtlasIcon.react","SUITheme","SUITypeStyle"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i={black:"#000000",blackOpacity40:"rgba(0, 0, 0, .4)",neutral80:"#303030",neutral72:"#464646",neutral50:"#808080",neutral30:"#B3B3B3",neutral15:"#D8D8D8",neutral06:"#EEEEEE",neutral03:"#F6F6F6",neutral02:"#F9F9F9",white:"#FFFFFF",green:"#88C55C",greenTint85:"#EDF6E6",greenTint50:"#C3E2AD",greenShade10:"#7AB052",greenShade25:"#659344",blue:"#5590CC",blueTint85:"#E5EEF7",blueTint50:"#AAC7E5",blueShade10:"#4C81B7",blueShade25:"#3F6B98",orange:"#F05442",orangeTint85:"#FCE5E2",orangeTint50:"#F6A8A0",orangeShade10:"#D74A3B",orangeShade25:"#B33E31",yellow:"#FDCC50",yellowTint85:"#FEF7E4",yellowTint50:"#FEE4AA",yellowShade10:"#E3B747",yellowShade25:"#BE983C",purple:"#9977BB",purpleTint85:"#EFEAF4",purpleTint50:"#CCBBDD",purpleShade10:"#896AA8",purpleShade25:"#72598C"};c={type40:new(a=b("SUITypeStyle"))({fontSize:"40px",color:"#464646",fontFamily:"Source Sans Pro, Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"300"}),type32:new a({fontSize:"32px",color:"#464646",fontFamily:"Source Sans Pro, Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"300"}),type32Value:new a({fontSize:"32px",color:"#464646",fontFamily:"Source Sans Pro, Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"300"}),type24:new a({fontSize:"24px",color:"#464646",fontFamily:"Source Sans Pro, Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"600"}),type24Value:new a({fontSize:"24px",color:"#464646",fontFamily:"Source Sans Pro, Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"600"}),type16:new a({fontSize:"16px",color:"#464646",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type12:new a({fontSize:"12px",color:"#464646",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type12Form:new a({fontSize:"12px",color:"#464646",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type12Label:new a({fontSize:"12px",fontWeight:"normal",textTransform:"uppercase",color:"#808080",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type12Toast:new a({fontSize:"12px",fontWeight:"normal",color:"#FFFFFF",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type11:new a({fontSize:"11px",color:"#464646",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif"}),type11Bold:new a({fontSize:"11px",color:"#464646",fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif",fontWeight:"700"})};d=function(a){return h.jsx(b("SUIAtlasIcon.react"),babelHelpers["extends"]({},a,{colorDefault:i.neutral50,colorDisabled:i.neutral15,colorHover:i.neutral72,name:"delete"}))};f=function(a){return h.jsx(b("SUIAtlasIcon.react"),babelHelpers["extends"]({},a,{colorDefault:i.neutral15,colorDisabled:i.neutral30,colorHover:i.neutral06,name:"delete"}))};d={SUIButton:{height:{normal:32,"short":32,tall:48},padding:{normal:{button:"16px",icon:"6px",onlyIcon:"19px"},"short":{button:"16px",icon:"6px",onlyIcon:"19px"},tall:{button:"16px",icon:"6px",onlyIcon:"19px"}},typeStyle:c.type12,use:{confirm:{active:{background:i.blueShade25,borderColor:i.blueShade25,color:i.white},disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},hover:{background:i.blueShade10,borderColor:i.blueShade10,color:i.white},normal:{background:i.blue,borderColor:i.blue,color:i.white}},"default":{active:{background:i.neutral06,borderColor:i.neutral15,color:i.neutral72},disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},hover:{background:i.neutral03,borderColor:i.neutral15,color:i.neutral72},normal:{background:i.white,borderColor:i.neutral15,color:i.neutral72}},special:{active:{background:i.orange,borderColor:i.orange,color:i.white},disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},hover:{background:i.orangeShade10,borderColor:i.orangeShade10,color:i.white},normal:{background:i.orangeShade25,borderColor:i.orangeShade25,color:i.white}},flat:{active:{background:i.neutral06,borderColor:i.neutral15,color:i.neutral72},disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},hover:{background:i.neutral03,borderColor:i.neutral15,color:i.neutral72},normal:{background:i.white,borderColor:i.neutral15,color:i.neutral72}},flatWhite:{active:{background:i.neutral06,borderColor:i.neutral15,color:i.neutral72},disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},hover:{background:i.neutral03,borderColor:i.neutral15,color:i.neutral72},normal:{background:i.white,borderColor:i.neutral15,color:i.neutral72}}}},SUIButtonIcon:{colorConfirm:i.blueTint50,colorDefault:i.neutral50,colorDisabled:i.white,colorSpecial:i.orangeTint50,defaultSize:18,iconComponent:g=b("SUIAtlasIcon.react")},SUICardDEPRECATED:{colors:{background:i.white,border:i.neutral06,footerBackground:i.neutral02,innerBorder:i.neutral15},typeStyles:{content:c.type12,footer:c.type12,header:c.type16}},SUIThreeStateCheckboxInput:{activeCheckboxBackgroundColor:i.white,activeCheckboxBorderColor:i.blueTint50,checkboxBackgroundColor:i.white,checkboxBorderColor:i.neutral15,checkedIcon:h.jsx(g,{colorDefault:i.neutral72,name:"check",size:14}),disabledCheckboxBackgroundColor:i.neutral15,disabledLabelColor:i.neutral30,labelColor:i.neutral72,partiallyCheckedIcon:h.jsx(g,{colorDefault:i.neutral72,name:"dash",size:14}),typeStyle:c.type12},SUICloseButton:{dark:{large:d,small:d},light:{large:f,small:f},iconSize:{large:20,small:14}},SUICustomPopover_DEPRECATED:{backgroundColor:i.white,borderColor:i.neutral15,borderHighlightColor:i.green,color:i.neutral72},SUITooltip:{backgroundColor:i.neutral80,color:i.white,showArrow:!0,typeStyle:babelHelpers["extends"]({},c.type12,{WebkitFontSmoothing:"auto"})},SUIDateInput:{inputIcon:h.jsx(g,{colorDefault:i.neutral30,name:"calendarMonth",size:24}),layerBackgroundColor:i.white,layerBorderColor:i.neutral15},SUICalendarPager:{dayColor:i.neutral72,dayDisabledColor:i.neutral30,dayNameColor:i.neutral30,gridBorderColor:i.neutral15,pagerBackgroundColor:i.neutral03,pagerBorderColor:i.neutral06,rangeBackgroundColor:i.neutral15,selectedBackgroundColor:i.blueTint50,typeStyle:c.type12},SUIDateTimeRangePicker:{backgroundColor:i.white,borderColor:i.neutral15,typeStyle:c.type12},SUIError:{error:{borderColor:i.orange,icon:h.jsx(g,{colorDefault:i.orange,name:"warning",size:24})},warning:{borderColor:i.yellow,icon:h.jsx(g,{colorDefault:i.yellow,name:"warning",size:24})}},SUIFileSelector:{backgroundColor:{"default":i.white,hovering:i.neutral03},borderColor:{"default":i.neutral15,error:i.orange},typeStyles:{content:c.type12,header:c.type24}},SUIFormRow:{childrenText:c.type12,emphasizedBackgroundColor:i.neutral06,labelText:c.type12,positions:{helpPosition:"11px",requiredPosition:"16px",requiredPositionWithHelp:"32px"},requiredColor:i.orange},SUIHelpMessage:{icon:h.jsx(g,{name:"information",style:{color:i.neutral30}})},SUIHighlightedText:{backgroundColor:i.greenTint50},SUIInlineTypeahead:{dividerBorderColor:i.neutral15,searchIcon:h.jsx(g,{colorDefault:i.neutral50,name:"search"})},SUILoadingBar:{backgroundColor:i.orange,movingColor:i.orangeTint50},SUILink:{hoverColor:i.blueShade25,normalColor:i.blue},SUIModalDEPRECATED:{margin:24},SUIModalBackgroundDEPRECATED:{backgroundColor:i.blackOpacity40},SUIModalCardDEPRECATED:{boxShadow:"0px 1px 0px 0px rgba(0, 0, 0, 0.10)",colors:{background:i.neutral02,border:i.neutral06,footerBackground:i.white,headerBackground:i.white,innerBorder:i.neutral15},fullWidthFooterDivider:!0,padding:{contentLightPadding:{paddingBottom:"8px",paddingLeft:"24px",paddingRight:"24px",paddingTop:"8px"},contentNormalPadding:{paddingBottom:"24px",paddingLeft:"24px",paddingRight:"24px",paddingTop:"24px"},footer:{paddingBottom:"0",paddingLeft:"24px",paddingRight:"8px",paddingTop:"0"},header:{paddingBottom:"0",paddingLeft:"24px",paddingRight:"8px",paddingTop:"0"}},typeStyles:{content:c.type12,footer:c.type16,header:c.type16}},SUINameCell:{description:{color:i.neutral72,typeStyle:c.type11},height:48},SUINestedTable:{borderColor:i.neutral15,evenBackgroundColor:i.white,loadingBackgroundColor:i.neutral03,loadingColor:i.neutral30,oddBackgroundColor:i.neutral02,rowIconClosedName:"chevronRight",rowIconComponent:b("Icon.atlas"),rowIconOpenName:"chevronDown",textColor:i.neutral72,textStyle:c.type12},SUINotice:{textStyle:c.type12Form,type:{error:{icon:h.jsx(g,{colorDefault:i.white,name:"warning"}),iconBackgroundColor:i.orange,messageBackgroundColor:i.white,messageBorderColor:i.neutral15},information:{icon:h.jsx(g,{colorDefault:i.white,name:"information-open"}),iconBackgroundColor:i.blue,messageBackgroundColor:i.white,messageBorderColor:i.neutral15},success:{icon:h.jsx(g,{colorDefault:i.white,name:"check"}),iconBackgroundColor:i.blue,messageBackgroundColor:i.white,messageBorderColor:i.neutral15},warning:{icon:h.jsx(g,{colorDefault:i.white,name:"warning"}),iconBackgroundColor:i.orange,messageBackgroundColor:i.white,messageBorderColor:i.neutral15}}},SUIRadioList:{activeBackgroundColor:"#dddfe2",activeBorderColor:"#bec2c9",activeDotColor:"#4b4f56",backgroundColor:"#f6f7f9",borderColor:"#dddfe2",disabledBackgroundColor:"#f6f7f9",disabledBorderColor:"#dddfe2",disabledDotColor:"#dddfe2",disabledTypeColor:i.neutral30,dotColor:"#4b4f56",enabledTypeColor:i.neutral72,typeStyle:c.type12},SUISearchableSelector:{disabledSubtitleTypeStyle:c.type12,disabledTitleTypeStyle:c.type12,dropdownBackgroundColor:i.white,dropdownBorderColor:i.neutral15,headerBackgroundColor:i.white,headerTypeStyle:c.type12,subtitleColor:i.neutral30,subtitleTypeStyle:c.type12,titleTypeStyle:c.type12},SUISearchInput:{cancelIcon:h.jsx(g,{colorDefault:i.neutral15,colorHover:i.neutral50,name:"delete"}),searchIcon:h.jsx(g,{colorDefault:i.neutral15,colorFocused:i.neutral50,name:"search",size:24})},SUISectionHeading:{borderColor:i.neutral15,color:i.neutral50,typeStyle:c.type24},SUISelector:{backgroundColor:i.white,borderColor:i.neutral15,boxShadow:"none"},SUISelectorButton:{use:{"default":{chevron:h.jsx(g,{colorDefault:i.neutral72,colorDisabled:i.neutral30,name:"chevronDown",size:12})}},padding:"12px"},SUISelectorOption:{activeBackgroundColor:i.blueTint85,activeColor:i.neutral72,color:i.neutral72,descriptionColor:i.neutral50,descriptionSelectedColor:i.neutral15,disabledBackgroundColor:i.neutral15,disabledColor:i.white,highlightedBackgroundColor:i.blueTint85,highlightedColor:i.neutral72,padding:{bottom:"8px",left:"12px",right:"24px",top:"8px"},paddingWhenNoValue:{bottom:"8px",left:"12px",right:"24px",top:"8px"},selectedBackgroundColor:i.blue,selectedColor:i.white,selectedTypeStyle:c.type12,typeStyle:c.type12},SUISelectorSeparator:{color:i.neutral15,margin:{bottom:"12px",left:"12px",right:"12px",top:"12px"}},SUISpinner:{activeColor:i.neutral50,backgroundColor:i.neutral15,darkActiveColor:i.neutral50,darkBackgroundColor:i.neutral15,sizes:{large:{border:2,diameter:20},small:{border:1.5,diameter:12}}},SUIStatusIndicator:{colors:{active:i.green,error:i.orange,empty:i.white,inactive:i.neutral15,warning:i.yellow},size:{border:2,diameter:10}},SUITabGroup:{},SUITabItem:{activeBorderBottomColor:i.neutral72,activeTypeStyle:c.type12,disabledColor:i.neutral30,height:44,hoverBackgroundColor:i.neutral03,iconMargin:4,subtextTypeStyle:c.type11,typeStyle:c.type12},SUITableDEPRECATED:{cellPadding:8,colors:{cell:i.neutral72,cellBorder:i.neutral03,cellErrorBackground:i.orangeTint85,cellHoverBackground:i.neutral06,cellModifiedBackground:i.neutral15,cellSelectedBackground:i.blueTint85,cellSelectedHoverBackground:i.neutral06,cellWarningBackground:i.yellowTint85,error:i.orange,heading:i.neutral72,headingBackground:i.white,headingRule:i.neutral15,highlight:i.blue,loading:i.neutral30,loadingBackground:i.neutral03,noItemsMessage:i.neutral72,rowBackground:i.white,rowStripe:i.neutral02,text:i.neutral72,warning:i.yellow},minimumViewportHeightForStickyHeader:"480px",textStyles:{cell:c.type12,heading:c.type12,table:c.type12}},SUITextArea:{disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},enabled:{background:i.white,borderColor:i.neutral15},focusedBorderColor:"#4080ff",placeholderColor:i.neutral30,placeholderColorFocused:i.neutral15,typeStyle:c.type12Form},SUITextInput:{characterCountTypeStyle:new a({color:i.neutral30,fontFamily:"Helvetica, Arial, Lucida Grande, sans-serif",fontSize:"11px",fontWeight:"normal"}),disabled:{background:i.neutral15,borderColor:i.neutral15,color:i.white},enabled:{background:i.white,borderColor:i.neutral15},errorIconMargin:"3px",focusedBorderColor:"#4080ff",height:32,maxLengthHighlightColor:"rgba(250, 62, 62, 0.3)",placeholderColor:i.neutral30,placeholderColorFocused:i.neutral15,typeStyle:c.type12Form},SUIToast:{errorBackgroundColor:i.orange,errorIcon:h.jsx(g,{colorDefault:i.white,name:"warning"}),informationBackgroundColor:i.neutral72,informationIcon:h.jsx(g,{colorDefault:i.white,name:"information"}),isSpinnerDark:!0,messageBackgroundColor:i.neutral72,messageBorderColor:i.neutral72,successBackgroundColor:i.neutral72,successIcon:h.jsx(g,{colorDefault:i.white,name:"check"}),typeStyle:c.type12Toast,warningBackgroundColor:i.yellow,warningIcon:h.jsx(g,{colorDefault:i.white,name:"warning"})},SUIToggle:{height:26,off:{hover:{backgroundColor:i.neutral30,color:i.neutral72},normal:{backgroundColor:i.neutral15,color:i.neutral50}},on:{hover:{backgroundColor:i.neutral72,color:i.neutral02},normal:{backgroundColor:i.neutral50,color:i.neutral02}},switchColor:i.white,typeStyle:c.type12},SUIToggleButtonGroup:{selected:{backgroundColor:i.neutral50,color:i.white}},SUIToken:{backgroundColor:i.blue,color:i.white,typeStyle:c.type12,closeButtonShade:"light"},SUITokenizer:{disabled:{backgroundColor:i.neutral06,borderColor:i.neutral15},enabled:{backgroundColor:i.white,borderColor:i.neutral15},errorIconMarginRight:"0px",typeaheadInput:{typeStyle:c.type12}},SUITokenizerItem:{disabled:{color:i.neutral30,subtitleColor:i.neutral15},highlighted:{backgroundColor:i.blueTint85,color:i.neutral80,subtitleColor:i.neutral50},normal:{color:i.neutral72,subtitleColor:i.neutral50},remove:{disabledIcon:h.jsx(g,{colorDefault:i.neutral30,name:"delete",size:14}),highlightedIcon:h.jsx(g,{colorDefault:i.neutral80,name:"delete",size:14}),normalIcon:h.jsx(g,{colorDefault:i.neutral72,name:"delete",size:14}),selectedIcon:h.jsx(g,{colorDefault:i.white,name:"delete",size:14})},selected:{backgroundColor:i.blue,color:i.white,disabledIcon:h.jsx(g,{colorDefault:i.neutral30,name:"check",size:14}),highlightedIcon:h.jsx(g,{colorDefault:i.neutral80,name:"check",size:14}),isIconShownForSingleSelection:!1,normalIcon:h.jsx(g,{colorDefault:i.neutral72,name:"check",size:14}),selectedIcon:h.jsx(g,{colorDefault:i.white,name:"check",size:14}),subtitleColor:i.blueTint50}},SUITokenizerItemList:{backgroundColor:i.white,borderColor:i.neutral15,categoryHeader:{borderColor:i.neutral06,typeStyle:c.type16},typeStyle:c.type12},SUITypeahead:{input:{backgroundColor:i.white,borderColor:i.neutral15,errorBorderColor:i.orange,focusedBorderColor:"#4080ff",typeStyle:c.type12Form,height:32},disabled:{backgroundColor:i.neutral15,borderColor:i.neutral15,color:i.white},dropdown:{backgroundColor:i.white,borderColor:i.neutral06,boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.10)",itemPadding:{bottom:"8px",left:"12px",right:"12px",top:"8px"}},highlight:{backgroundColor:i.blueTint85}},SUIHorizontalLayout:{margin:8}};f=new(b("SUITheme"))({id:"liverail",components:d});e.exports=f}),null);
__d("LDPSendAvailabilityDialogRoot.react",["JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("LDPSendAvailabilityViewRoot.react").__setRef("LDPSendAvailabilityDialogRoot.react"));a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){var a=babelHelpers["extends"]({},this.props);return g.jsx(g.Suspense,{fallback:null,children:g.jsx(h,babelHelpers["extends"]({},a))})};return b}(g.Component);e.exports=a}),null);
__d("PagesManagerInboxComposerSendAvailabilityButton.react",["cx","fbt","LDPSendAvailabilityDialogRoot.react","Link.react","PagesInboxThreadActionSystemDispatcher","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={dialogShown:!1},c.handleClick=function(){c.setState({dialogShown:!0})},c.handleToggleDialog=function(a){c.setState({dialogShown:a})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.$1=function(a){a&&b("PagesInboxThreadActionSystemDispatcher").dispatch(!0)};d.renderSendAvailabilityDialog=function(){var a=this;return!this.state.dialogShown?null:i.jsx(b("LDPSendAvailabilityDialogRoot.react"),{causalElementRef:function(){return a},onToggle:this.handleToggleDialog,onSubmitCompleted:this.$1,pageID:this.props.pageID,referrer:"PMA Admin Booking Composer",shown:this.state.dialogShown,userID:this.props.recipientID})};d.render=function(){var a=h._("Send Availability");return i.jsxs("div",{children:[i.jsx(b("Link.react"),{"aria-label":this.props.showTooltip?a:null,className:"_2em3","data-hover":"tooltip","data-tooltip-align":"right","data-tooltip-content":this.props.showTooltip?a:null,onClick:this.handleClick,children:i.jsx("i",{className:"_2em5"})}),this.renderSendAvailabilityDialog()]})};return c}(i.Component);e.exports=a}),null);
__d("CRMEventsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:CRMEventsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:CRMEventsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:CRMEventsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBusinessPresenceID=function(a){this.$1.business_presence_id=a;return this};c.setCrmReminderID=function(a){this.$1.crm_reminder_id=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setErrorTrace=function(a){this.$1.error_trace=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIsServerLog=function(a){this.$1.is_server_log=a;return this};c.setPageContactID=function(a){this.$1.page_contact_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setReferrerUIComponent=function(a){this.$1.referrer_ui_component=a;return this};c.setReferrerUISurface=function(a){this.$1.referrer_ui_surface=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setUIComponent=function(a){this.$1.ui_component=a;return this};c.setUISurface=function(a){this.$1.ui_surface=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={business_presence_id:!0,crm_reminder_id:!0,error_message:!0,error_trace:!0,event:!0,is_server_log:!0,page_contact_id:!0,page_id:!0,referrer_ui_component:!0,referrer_ui_surface:!0,time:!0,ui_component:!0,ui_surface:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerAdsConversionFunnelTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsConversionFunnelLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsConversionFunnelLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsConversionFunnelLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAuthFlag=function(a){this.$1.auth_flag=a;return this};c.setClassifier=function(a){this.$1.classifier=a;return this};c.setConsumerID=function(a){this.$1.consumer_id=a;return this};c.setConversionType=function(a){this.$1.conversion_type=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setEventSubtype=function(a){this.$1.event_subtype=a;return this};c.setEventType=function(a){this.$1.event_type=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setPageCountry=function(a){this.$1.page_country=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setRadioType=function(a){this.$1.radio_type=a;return this};c.setRawClientTime=function(a){this.$1.raw_client_time=a;return this};c.setSamplingFrequency=function(a){this.$1.sampling_frequency=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={auth_flag:!0,classifier:!0,consumer_id:!0,conversion_type:!0,country:!0,event_subtype:!0,event_type:!0,name:!0,page_country:!0,page_id:!0,radio_type:!0,raw_client_time:!0,sampling_frequency:!0,time:!0,weight:!0};e.exports=a}),null);
__d("PagesManagerInboxTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAutomatedResponseTriggerType=function(a){this.$1.automated_response_trigger_type=a;return this};c.setBroadcastAudience=function(a){this.$1.broadcast_audience=a;return this};c.setBroadcastMessageFormat=function(a){this.$1.broadcast_message_format=a;return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setFirstPayloadTime=function(a){this.$1.first_payload_time=a;return this};c.setFolder=function(a){this.$1.folder=a;return this};c.setHadError=function(a){this.$1.had_error=a;return this};c.setHref=function(a){this.$1.href=a;return this};c.setIsCached=function(a){this.$1.is_cached=a;return this};c.setIsInboxRedesignWithSideNav=function(a){this.$1.is_inbox_redesign_with_side_nav=a;return this};c.setItemsCount=function(a){this.$1.items_count=a;return this};c.setLoadTime=function(a){this.$1.load_time=a;return this};c.setMessage=function(a){this.$1.message=a;return this};c.setModuleName=function(a){this.$1.module_name=a;return this};c.setNuxID=function(a){this.$1.nux_id=a;return this};c.setPageCommItemID=function(a){this.$1.page_comm_item_id=a;return this};c.setPageCommItemStatus=function(a){this.$1.page_comm_item_status=a;return this};c.setPageCommSearch=function(a){this.$1.page_comm_search=a;return this};c.setPageCommSearchType=function(a){this.$1.page_comm_search_type=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setScreenHeight=function(a){this.$1.screen_height=a;return this};c.setScreenWidth=function(a){this.$1.screen_width=a;return this};c.setStackTrace=function(a){this.$1.stack_trace=a;return this};c.setThreadToken=function(a){this.$1.thread_token=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTimeSinceLoad=function(a){this.$1.time_since_load=a;return this};c.setTraceID=function(a){this.$1.trace_id=a;return this};c.setUsesStreamingPagination=function(a){this.$1.uses_streaming_pagination=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setViewMode=function(a){this.$1.view_mode=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={automated_response_trigger_type:!0,broadcast_audience:!0,broadcast_message_format:!0,event_name:!0,first_payload_time:!0,folder:!0,had_error:!0,href:!0,is_cached:!0,is_inbox_redesign_with_side_nav:!0,items_count:!0,load_time:!0,message:!0,module_name:!0,nux_id:!0,page_comm_item_id:!0,page_comm_item_status:!0,page_comm_search:!0,page_comm_search_type:!0,page_id:!0,platform:!0,screen_height:!0,screen_width:!0,stack_trace:!0,thread_token:!0,time:!0,time_since_load:!0,trace_id:!0,uses_streaming_pagination:!0,vc:!0,view_mode:!0,weight:!0};e.exports=a}),null);
__d("PagesMessagingInboxActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setInboxAction=function(a){this.$1.inbox_action=a;return this};c.setPageCommSearchType=function(a){this.$1.page_comm_search_type=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={inbox_action:!0,page_comm_search_type:!0,platform:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("PagesMessagingPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setExceptionCode=function(a){this.$1.exception_code=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPerfTime=function(a){this.$1.perf_time=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setStack=function(a){this.$1.stack=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setThreadOffset=function(a){this.$1.thread_offset=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event_name:!0,exception_code:!0,exception_message:!0,page_id:!0,perf_time:!0,platform:!0,stack:!0,thread_id:!0,thread_offset:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("ServicesLeadGenBookableTasksSurveyTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:ServicesLeadGenBookableTasksSurveyLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:ServicesLeadGenBookableTasksSurveyLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ServicesLeadGenBookableTasksSurveyLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAdditionalData=function(a){this.$1.additional_data=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setCurrentView=function(a){this.$1.current_view=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setErrorTrace=function(a){this.$1.error_trace=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setOtherBookableTasks=function(a){this.$1.other_bookable_tasks=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setReferrer=function(a){this.$1.referrer=a;return this};c.setSelectedBookableTasks=function(a){this.$1.selected_bookable_tasks=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setServicesCategory=function(a){this.$1.services_category=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={additional_data:!0,current_view:!0,error_message:!0,error_trace:!0,event:!0,other_bookable_tasks:!0,page_id:!0,referrer:!0,selected_bookable_tasks:!0,services_category:!0,session_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MercuryShareLinkUploader",["ArbiterMixin","AsyncRequest","CSS","DOM","Event","Form","URLScraper","isEmpty","mixin"],(function(a,b,c,d,e,f){var g;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.__initialize.apply(babelHelpers.assertThisInitialized(b),arguments);return b}var d=c.prototype;d.__initialize=function(a,c,d,e,f){this.$MercuryShareLinkUploader1=a,this.$MercuryShareLinkUploader2=c,this.$MercuryShareLinkUploader3=d,this.$MercuryShareLinkUploader4=f,this.$MercuryShareLinkUploader5=!1,this.$MercuryShareLinkUploader6=null,this.$MercuryShareLinkUploader7=null,b("Event").listen(e,"click",this.close.bind(this)),b("Event").listen(f,"keyup",function(){f.value.length||this.$MercuryShareLinkUploader8.enable()}.bind(this)),this.$MercuryShareLinkUploader8=new(b("URLScraper"))(f),this.$MercuryShareLinkUploader8.subscribe("match",function(a,b){this.loadShare(b&&b.url)}.bind(this))};d.getAttachData=function(){return this.loadAttachData(this.$MercuryShareLinkUploader5,this.$MercuryShareLinkUploader1,this.$MercuryShareLinkUploader4)};d.getShareDataFromStage=function(a,c){a=b("Form").serialize(c);c=a.attachment&&a.attachment.params;if(!c)return null;if(c instanceof Object){var d=[];d.push(c[0]);d.push(c[1]);c=d}return{params:c,type:a.attachment.type}};d.loadAttachData=function(a,c,d){if(!a)return null;a=b("Form").serialize(c);c=a.attachment&&a.attachment.params;var e=a.attachment&&a.attachment.type;a=a.link_metrics?a.link_metrics.no_image:!0;if(!c||(g||(g=b("isEmpty")))(c)||!e)return null;d=d.value;if(d.indexOf(c.url)===-1)return{share_params:c,share_type:e};return!c.summary&&!c.favicon&&a&&c.title&&c.url&&c.url.substr(0,c.title.length)===c.title?null:{share_params:c,share_type:e}};d.check=function(){this.$MercuryShareLinkUploader8.check()};d.close=function(){this.$MercuryShareLinkUploader9(),this.$MercuryShareLinkUploader8.disable(),this.inform("closed")};d.clear=function(){this.$MercuryShareLinkUploader9(),this.$MercuryShareLinkUploader8.enable()};d.enable=function(){this.$MercuryShareLinkUploader8.enable()};d.disable=function(){this.$MercuryShareLinkUploader8.disable()};d.loadShare=function(a){this.$MercuryShareLinkUploader6=a,this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort(),this.$MercuryShareLinkUploader7=new(b("AsyncRequest"))().setMethod("POST").setURI("/ajax/share_scrape.php").setData({u:a}).setHandler(this.$MercuryShareLinkUploader10.bind(this).bind(null,a)).setStatusElement(this.$MercuryShareLinkUploader3),this.$MercuryShareLinkUploader7.send(),this.inform("link-detected")};d.$MercuryShareLinkUploader10=function(a,c){if(this.$MercuryShareLinkUploader6!==a)return;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7=null;b("CSS").show(this.$MercuryShareLinkUploader1);b("DOM").empty(this.$MercuryShareLinkUploader2);b("DOM").setContent(this.$MercuryShareLinkUploader2,c.payload);this.$MercuryShareLinkUploader5=!0;if(!this.getAttachData()){this.close();return}};d.$MercuryShareLinkUploader9=function(){b("CSS").hide(this.$MercuryShareLinkUploader1),this.$MercuryShareLinkUploader5=!1,this.$MercuryShareLinkUploader6=null,this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort(),this.$MercuryShareLinkUploader7=null,this.$MercuryShareLinkUploader8.reset()};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("ChatShareLinkUploader",["AsyncRequest","CSS","DOM","Event","MercuryAttachmentTemplates","MercuryShareLinkUploader","URLScraper","XShareScrapeAsyncController"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__initialize=function(a,c,d){this.$ChatShareLinkUploader1=a,this.$ChatShareLinkUploader2=c,this.$ChatShareLinkUploader3=d,this.$ChatShareLinkUploader4=!1,this.$ChatShareLinkUploader5=null,this.$ChatShareLinkUploader6=!1,b("Event").listen(c,"keyup",function(){this.getInputValue().length||this.$ChatShareLinkUploader7.enable()}.bind(this)),this.$ChatShareLinkUploader7=new(b("URLScraper"))(c,null),this.$ChatShareLinkUploader7.subscribe("match",function(a,b){this.loadShare(b&&b.url)}.bind(this)),this.$ChatShareLinkUploader8=1337,this.$ChatShareLinkUploader9=null};d.getInputValue=function(){return this.$ChatShareLinkUploader2.value};d.getAttachData=function(){return this.loadAttachData(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader2)};d.getShareData=function(){return!this.$ChatShareLinkUploader4?null:this.getShareDataFromStage(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1)};d.close=function(){this.$ChatShareLinkUploader10(),this.$ChatShareLinkUploader7.disable(),this.inform("closed")};d.clear=function(){this.$ChatShareLinkUploader10(),this.$ChatShareLinkUploader7.enable()};d.$ChatShareLinkUploader10=function(){var a=this.$ChatShareLinkUploader9;delete this.$ChatShareLinkUploader9;a&&(b("DOM").remove(a),this.inform("dom-updated"));this.$ChatShareLinkUploader11();this.$ChatShareLinkUploader4=!1;this.$ChatShareLinkUploader6=!1;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader7&&this.$ChatShareLinkUploader7.reset()};d.loadShareFromParams=function(a,c){this.$ChatShareLinkUploader6=!0,this.$ChatShareLinkUploader12(new(b("AsyncRequest"))().setMethod("POST").setURI("/ajax/share_params.php").setData({chat:!0,share_type:a,share_params:c}))};d.__getLoadShareURI=function(){return b("XShareScrapeAsyncController").getURIBuilder().getURI()};d.loadShare=function(a,c){this.$ChatShareLinkUploader12(new(b("AsyncRequest"))(this.__getLoadShareURI()).setMethod("POST").setData({chat:!0,extra_params:JSON.stringify(c),u:a}),a)};d.loadedFromFeed=function(){return this.$ChatShareLinkUploader6};d.$ChatShareLinkUploader11=function(){return++this.$ChatShareLinkUploader8};d.$ChatShareLinkUploader13=function(){return this.$ChatShareLinkUploader8};d.$ChatShareLinkUploader12=function(a,c){var d=this;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();var e=b("MercuryAttachmentTemplates")[":fb:mercury:share-link-row"].build();this.$ChatShareLinkUploader9&&b("DOM").remove(this.$ChatShareLinkUploader9);this.$ChatShareLinkUploader9=e.getRoot();b("Event").listen(e.getNode("closeFileUpload"),"click",function(a){d.close(),a.kill()});b("DOM").appendContent(this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader9);b("CSS").show(this.$ChatShareLinkUploader1);this.inform("dom-updated");var f=this.$ChatShareLinkUploader11();this.$ChatShareLinkUploader5=a.setHandler(function(a){return d.$ChatShareLinkUploader14(f,a,c)});this.$ChatShareLinkUploader5.send();this.inform("link-detected")};d.$ChatShareLinkUploader14=function(a,c,d){if(this.$ChatShareLinkUploader13()!==a)return;this.$ChatShareLinkUploader5=null;b("DOM").appendContent(this.$ChatShareLinkUploader9,c.payload);this.$ChatShareLinkUploader3();this.$ChatShareLinkUploader4=!0;this.inform("share-loaded");if(!this.getAttachData()){this.close();return}b("CSS").addClass(this.$ChatShareLinkUploader9,"done")};return c}(b("MercuryShareLinkUploader"));e.exports=a}),null);
__d("ChatFileUploaderMixin",["React","SubscriptionsHandler","prop-types"],(function(a,b,c,d,e,f){b("React");c={propTypes:{attachmentsShelf:(a=b("prop-types")).object,onFileUploaderMounted:a.func,onUploadFinished:a.func,onUpdateAttachmentsShelf:a.func,onSubmit:a.func},setUpSubscriptionsHandler:function(a){this._uploader=a,this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscriptions.addSubscriptions(this._uploader.subscribe(["all-uploads-completed","upload-canceled"],this._handleUploadFinished),this._uploader.subscribe("dom-updated",this._handleUpdateAttachmentsShelf),this._uploader.subscribe("submit",this._handleSubmit)),this.props.onFileUploaderMounted(this._uploader)},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release(),this.props.uploaderIsFromHigherLevel||this._uploader&&this._uploader.destroy()},isUploading:function(){return this._uploader.isUploading()},getAttachments:function(){return this._uploader.getAttachments()},getImageFiles:function(){return this._uploader.getImageFiles()},getVideoFiles:function(){return this._uploader.getVideoFiles()},getAudioFiles:function(){return this._uploader.getAudioFiles()},getFiles:function(){return this._uploader.getFiles()},removeAttachments:function(){return this._uploader.removeAttachments()},_handleUploadFinished:function(){if(this.props.onUploadFinished){var a;(a=this.props).onUploadFinished.apply(a,arguments)}},_handleUpdateAttachmentsShelf:function(){if(this.props.onUpdateAttachmentsShelf){var a;(a=this.props).onUpdateAttachmentsShelf.apply(a,arguments)}},_handleSubmit:function(){if(this.props.onSubmit){var a;(a=this.props).onSubmit.apply(a,arguments)}}};e.exports=c}),null);
__d("MercuryLWARenderer",["MercuryConfig","MessengerLightweightActionUtils","MessengerTextWithEntities.react","React","TextWithEntities.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a={renderCollapsedText:function(a){var c;b("MercuryConfig").MessengerNewEmojiGK?c=g.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:b("MessengerLightweightActionUtils").getCollapsedLWAText(a)}):c=g.jsx(b("TextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:b("MessengerLightweightActionUtils").getCollapsedLWAText(a)});return g.jsx("span",{children:c})}};e.exports=a}),null);
__d("LinkCTAXMATAsyncLink.react",["AsyncRequest","FDSLink.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onClick=function(){new(b("AsyncRequest"))().setURI(d.props.uri).setMethod("POST").send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return g.jsx(b("FDSLink.react"),{onClick:this.onClick,children:this.props.text})};return c}(g.Component);e.exports=a}),null);
__d("MessengerGroupCreatePollButtonReact.bs",["ReasonReact.bs","MessengerGroupCreatePollButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerGroupCreatePollButton.react"),{name:a,questionID:c,participants:d,threadID:e},f)}f.make=a}),null);
__d("FacepileRounded.bs",["ReasonReact.bs","bs_js_null_undefined","FacepileRounded.react"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a!==void 0)if(a)return"descending";else return"ascending"}function h(a){if(a!==void 0)switch(a){case 0:return"none";case 1:return"name";case 2:return"hovercard"}}function a(a,c,d,e,f,i,j,k){var l;return b("ReasonReact.bs").wrapJsForReason(b("FacepileRounded.react"),{className:(l=b("bs_js_null_undefined")).fromOption(a),direction:l.fromOption(g(c)),hoverBehavior:l.fromOption(h(d)),imageSize:e,numProfilesToDisplay:f,profiles:i,remainingProfilesCount:l.fromOption(j)},k)}f.stringOfDirection=g;f.stringOfHoverBehavior=h;f.make=a}),null);
__d("AbstractTextInputReact.bs",["ReasonReact.bs","bs_js_null_undefined","AbstractTextInput.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("AbstractTextInput.react"),{className:b("bs_js_null_undefined").fromOption(a),maxLength:c,onChange:d,onFocus:e,onKeyDown:f,placeholder:g,value:b("bs_js_null_undefined").fromOption(h)},i)}f.make=a}),null);
__d("MessengerAbstractTextInputWithFocusReact.bs",["bs_curry","bs_caml_option","ReasonReact.bs","AbstractTextInputReact.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("ReasonReact.bs").reducerComponent("MessengerAbstractTextInputWithFocusReact");function h(a,c){c.state.inputRef.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function i(a){a=a.inputRef.contents;if(a!==void 0)return b("bs_caml_option").valFromOption(a).focusInput();else return 0}function j(a){a=a.inputRef.contents;if(a!==void 0)return b("bs_caml_option").valFromOption(a).blurInput();else return 0}function k(a,c,d,e,f,k,l,m,n){var o=function(a){if(c)return i(a);else return j(a)};return{debugName:g.debugName,reactClassInternal:g.reactClassInternal,handedOffState:g.handedOffState,getDerivedStateFromProps:g.getDerivedStateFromProps,didMount:function(a){return o(a.state)},didUpdate:function(a){return o(a.newSelf.state)},willUnmount:g.willUnmount,shouldUpdate:g.shouldUpdate,render:function(c){return b("ReasonReact.bs").element(void 0,b("bs_curry")._1(c.handle,h),b("AbstractTextInputReact.bs").make(a,d,e,f,k,l,m,[]))},initialState:function(a){return{inputRef:{contents:void 0}}},retainedProps:g.retainedProps,reducer:function(a,b){return 0},jsElementWrapped:g.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return k(b("bs_caml_option").nullable_to_opt(a.className),a.focused,a.maxLength,a.onChange,a.onFocus,a.onKeyDown,a.placeholder,b("bs_caml_option").nullable_to_opt(a.value),[])});f.component=g;f.setInputRef=h;f.focus=i;f.blur=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerGroupPollingCheckboxReact.bs",["cx","cssVar","Keys","bs_curry","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.checked,d=a.customColor,e=a.onToggle;a=function(a){return b("bs_curry")._1(e,!c)};var f=function(a){if(a.keyCode===b("Keys").SPACE){a.preventDefault();return b("bs_curry")._1(e,!c)}else return 0},g=c?d:"rgba(0, 0, 0, 0.10)";return i.cloneElement(i.jsx("div",{children:i.jsx("span",{className:"_2m5r",style:{backgroundColor:d,borderColor:g}}),className:"_2m5p"+(c?" _2m5q":""),role:"checkbox",tabIndex:0,onKeyDown:f,onClick:a}),{"aria-checked":c})}c=a;d=a;f.make=c;f.jsComponent=d}),null);
__d("MessengerGroupPollingFlyoutReact.bs",["cx","ix","fbt","FBID.bs","Keys","bs_block","bs_curry","React","qex","bs_belt_Array","bs_caml_int32","Link.react","MercuryIDs","bs_belt_Option","bs_caml_option","CurrentUser","ReasonReact.bs","AsyncRequest","FacepileRounded.bs","MessengerEnvironment","ScrollableArea.react","MessengerParticipants.bs","MessengerSpinnerReact.bs","MessengerAddIconSVGReact.bs","MessengerTextWithEntities.react","MessengerGroupPollingCheckboxReact.bs","MessengerAbstractTextInputWithFocusReact.bs","XMessengerGroupPollingUpdateVoteController"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");function k(a,c,d){if(d){var e=b("CurrentUser").getID();d=b("bs_belt_Array").keep(c,function(a){return a!==e});d=b("bs_belt_Array").concat([e],d)}else d=c;return b("bs_belt_Array").mapWithIndex(d,function(c,d){var e=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(d));if(e==null)return{image_src:h("98939"),name:"Facebook User"};else if(c<a)return{image_src:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(e.image_src),h("98939")),name:e.name};else return{image_src:d,name:e.name}})}function l(a,c,d,e,f){var g=d===3?3:2;return b("ReasonReact.bs").element(void 0,void 0,b("FacepileRounded.bs").make(a,1,1,c,g,k(g,e,f),d===3?0:d-2|0,[]))}var m=b("ReasonReact.bs").reducerComponent("MessengerGroupPollingFlyoutReact");function n(a,c,d,e,f,g){return{debugName:m.debugName,reactClassInternal:m.reactClassInternal,handedOffState:m.handedOffState,getDerivedStateFromProps:m.getDerivedStateFromProps,didMount:m.didMount,didUpdate:m.didUpdate,willUnmount:m.willUnmount,shouldUpdate:m.shouldUpdate,render:function(g){var h=g.state,k=b("MessengerEnvironment").messengerui;if(e!==void 0){var m=e,n=k?24:16,o=m.length+h.newOptions.length|0;o=b("bs_caml_int32").imul(k?36:28,o);o=Math.min(Math.max(o,50),200);m=b("bs_belt_Array").map(m,function(c){return j.jsxs("div",{children:[j.createElement(b("MessengerGroupPollingCheckboxReact.bs").make,{checked:b("bs_belt_Array").some(h.selectedOptionIDs,function(a){return a===c.id}),customColor:a,onToggle:function(a){return b("bs_curry")._1(g.send,b("bs_block").__(3,[c.id]))}}),j.jsxs("div",{children:[j.jsx("div",{children:j.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:c.text}),className:"_1mq-"+(k?"":" _2a5a")}),l("_4ic7"+(k?"":" _8kg"),n,c.voters.count,c.voters.edges.map(function(a){return a.node.id}),b("bs_caml_option").nullable_to_opt(c.viewer_has_voted)===!0)],className:"_2f83"+(k?"":" _vhn")})],className:"_1mqz"+(k?"":" _5k8c")},c.id)});var p=b("bs_belt_Array").mapWithIndex(h.newOptions,function(c,d){var e=h.focusIndex;return j.jsxs("div",{children:[j.createElement(b("Link.react"),{onClick:function(a){return b("bs_curry")._1(g.send,0)},role:"button",tabIndex:0,children:j.createElement(b("MessengerAddIconSVGReact.bs").make,{label:i._("Add Option"),className:"_8i7",customColor:a})}),b("ReasonReact.bs").element(void 0,void 0,b("MessengerAbstractTextInputWithFocusReact.bs").make("_8i5",e!==void 0?e===c:!1,140,function(a){return b("bs_curry")._1(g.send,b("bs_block").__(2,[c,a.target.value]))},function(a){return b("bs_curry")._1(g.send,b("bs_block").__(1,[c]))},function(a){if(a.keyCode===b("Keys").RETURN){a.preventDefault();a=c+1|0;if(a===h.newOptions.length)return b("bs_curry")._1(g.send,0);else return b("bs_curry")._1(g.send,b("bs_block").__(1,[a]))}else return 0},i._("Add an option"),b("bs_belt_Option").getWithDefault(d,""),[]))],className:"_1mqz"+(k?"":" _5k8c")},String(c))});if(!b("CurrentUser").isWorkUser()&&!b("qex")._("1343060"))return j.jsx("div",{children:j.jsx("div",{children:i._("Polls are temporarily unavailable while we work to make improvements to Messenger. Check again soon for the updated version of polls."),className:"_1mr_",style:{paddingTop:"50px",paddingBottom:"50px"}}),className:"_1mq_"+(k?"":" _1mr-")});else return j.jsxs("div",{children:[j.jsx("div",{children:j.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:d}),className:"_1mr_"}),j.jsxs("div",{children:[j.jsx("div",{children:b("bs_belt_Option").getWithDefault(h.errorTitle,""),className:"_3lpx"}),j.jsx("div",{children:b("bs_belt_Option").getWithDefault(h.errorMessage,""),className:"_3lpy"})],className:"_3lpw"}),j.jsx(b("ScrollableArea.react"),{height:o,children:j.jsxs("div",{children:[m,p],className:"_1ms0"})}),j.jsx("div",{children:h.isLoading?j.jsx(b("MessengerSpinnerReact.bs").make,{}):i._("Submit"),className:"_1ms1"+(h.isLoading?" _m1v":""),role:"button",style:{backgroundColor:a},tabIndex:0,onKeyUp:function(a){a.preventDefault();if(a.keyCode===b("Keys").RETURN)return b("bs_curry")._1(g.send,b("bs_block").__(0,[c,f]));else return 0},onClick:function(a){return b("bs_curry")._1(g.send,b("bs_block").__(0,[c,f]))}})],className:"_1mq_"+(k?"":" _1mr-")})}else return j.jsx("div",{children:j.jsx(b("MessengerSpinnerReact.bs").make,{color:"gray"}),className:"_8bt"+(k?"":" _5il4")})},initialState:function(a){return{focusIndex:0,errorTitle:void 0,errorMessage:void 0,selectedOptionIDs:e!==void 0?b("bs_belt_Array").keepMap(e,function(a){var b=a.viewer_has_voted;if(!(b==null)&&b)return a.id}):[],newOptions:[void 0],isLoading:!1}},retainedProps:m.retainedProps,reducer:function(d,e){if(typeof d==="number"){var f=b("bs_belt_Array").concat(e.newOptions,[void 0]);return b("bs_block").__(0,[{focusIndex:f.length-1|0,errorTitle:e.errorTitle,errorMessage:e.errorMessage,selectedOptionIDs:e.selectedOptionIDs,newOptions:f,isLoading:e.isLoading}])}else switch(d.tag|0){case 0:if(e.isLoading)return 0;else{var c=d[1],a=d[0];return b("bs_block").__(2,[{focusIndex:e.focusIndex,errorTitle:e.errorTitle,errorMessage:e.errorMessage,selectedOptionIDs:e.selectedOptionIDs,newOptions:e.newOptions,isLoading:!0},function(f){var d=b("bs_belt_Array").keepMap(f.state.newOptions,function(a){return a}),g=b("XMessengerGroupPollingUpdateVoteController").getURIBuilder().getURI();new(b("AsyncRequest"))(g).setMethod("POST").setData({question_id:b("FBID.bs").ofStringExn(a),selected_options:b("bs_belt_Array").map(e.selectedOptionIDs,b("FBID.bs").ofStringExn),new_options:d}).setAllowCrossPageTransition(!0).setHandler(function(a){if(a.payload.status==="failure"&&a.payload.showUser===!0)return b("bs_curry")._1(f.send,b("bs_block").__(4,[a.payload.errorTitle,a.payload.errorMessage]));else return b("bs_curry")._1(c,0)}).send();return 0}])}case 1:return b("bs_block").__(0,[{focusIndex:d[0],errorTitle:e.errorTitle,errorMessage:e.errorMessage,selectedOptionIDs:e.selectedOptionIDs,newOptions:e.newOptions,isLoading:e.isLoading}]);case 2:var g=d[1],h=d[0];f=b("bs_belt_Array").mapWithIndex(e.newOptions,function(a,b){if(a===h)return g;else return b});return b("bs_block").__(0,[{focusIndex:h,errorTitle:void 0,errorMessage:void 0,selectedOptionIDs:e.selectedOptionIDs,newOptions:f,isLoading:e.isLoading}]);case 3:var i=d[0];f=b("bs_belt_Array").some(e.selectedOptionIDs,function(a){return a===i})?b("bs_belt_Array").keep(e.selectedOptionIDs,function(a){return a!==i}):b("bs_belt_Array").concat(e.selectedOptionIDs,[i]);return b("bs_block").__(0,[{focusIndex:void 0,errorTitle:e.errorTitle,errorMessage:e.errorMessage,selectedOptionIDs:f,newOptions:e.newOptions,isLoading:e.isLoading}]);case 4:return b("bs_block").__(0,[{focusIndex:e.focusIndex,errorTitle:d[0],errorMessage:d[1],selectedOptionIDs:e.selectedOptionIDs,newOptions:e.newOptions,isLoading:!1}])}},jsElementWrapped:m.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(m,function(a){return n(a.customColor,a.questionID,a.questionText,b("bs_caml_option").nullable_to_opt(a.options),a.onSubmitHandler,[])});c=b("bs_belt_Option").getWithDefault;d=16;e=24;g=28;var o=36,p=50,q=200,r=140;f.$pipe$question=c;f.facebookFacepileImageSize=d;f.messengerFacepileImageSize=e;f.facebookOptionRowHeight=g;f.messengerOptionRowHeight=o;f.minimumFlyoutScrollareaHeight=p;f.maximumFlyoutScrollareaHeight=q;f.pollOptionMaxLength=r;f.getProfilePictures=k;f.renderVoterFacepiles=l;f.component=m;f.make=n;f.jsComponent=a}),null);
__d("MessengerPollingFlyoutBootLoader.bs",["ReasonReact.bs","MessengerPollingFlyoutBootLoader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("MessengerPollingFlyoutBootLoader.react"),{customColor:a,questionID:c,questionText:d,options:e,onSubmitHandler:f},g)}f.make=a}),null);
__d("MessengerGroupPollingAdminMessageReact.bs",["cx","ix","fbt","cssVar","bs_block","bs_curry","React","gkx","bs_js_dict","bs_js_json","bs_belt_Array","Link.react","bs_belt_Option","bs_caml_option","Image.react","ReasonReact.bs","AsyncRequest","MessengerEnvironment","MessengerContextualDialogReact.bs","MessengerTextWithEntities.react","MessengerGroupPollingFlyoutReact.bs","MessengerPollingFlyoutBootLoader.bs","XMessagingGetPollOptionsController","MessengerGroupCreatePollButtonReact.bs"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("React"),l=b("ReasonReact.bs").reducerComponent("MessengerGroupPollingAdminMessageReact");function m(a,c,d,e,f){return{debugName:l.debugName,reactClassInternal:l.reactClassInternal,handedOffState:l.handedOffState,getDerivedStateFromProps:l.getDerivedStateFromProps,didMount:function(a){if(a.state.options===void 0){var d=c.log_message_data.untypedData.question_id;d=b("XMessagingGetPollOptionsController").getURIBuilder().setFBID("question_id",d).getURI();new(b("AsyncRequest"))(d).setHandler(function(c){b("bs_curry")._1(a.send,b("bs_block").__(0,[c.payload]));if(e!==void 0)return b("bs_curry")._1(e,0);else return 0}).setErrorHandler(function(c){b("bs_curry")._1(a.send,b("bs_block").__(0,[[]]));if(e!==void 0)return b("bs_curry")._1(e,0);else return 0}).send();return 0}else return 0},didUpdate:l.didUpdate,willUnmount:l.willUnmount,shouldUpdate:l.shouldUpdate,render:function(e){var f=e.state,g;if(a!==void 0){var j=a;g=j===""?"#0084ff":j}else g="#0084ff";j=k.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:c.log_message_body});var l=b("MessengerEnvironment").messengerui;if(!d&&!(f.flyoutOpen&&l))return j;else{var m;try{m=b("bs_caml_option").some(JSON.parse(c.log_message_data.untypedData.question_json))}catch(a){m=void 0}var n=f.options;if(m!==void 0&&n!==void 0){n=n;m=b("bs_js_json").classify(b("bs_caml_option").valFromOption(m));if(typeof m==="number"||m.tag!==2)return j;else{var o;m=m[0];var p=(o=b("bs_js_dict")).get(m,"id"),q=o.get(m,"text"),r=o.get(m,"total_count");o=o.get(m,"viewer_has_voted");if(p!==void 0&&q!==void 0&&r!==void 0&&o!==void 0){m=b("bs_js_json").classify(b("bs_caml_option").valFromOption(p));p=b("bs_js_json").classify(b("bs_caml_option").valFromOption(q));q=b("bs_js_json").classify(b("bs_caml_option").valFromOption(r));if(typeof m==="number"||m.tag||typeof p==="number"||p.tag||typeof q==="number"||q.tag!==1)return j;else{r=p[0];var s=m[0],t=n.slice(0,3).map(function(a){var b=a.voters.edges.map(function(a){return a.node.id});return{id:a.id,text:a.text,num_of_votes:a.voters.count,viewer_has_voted:a.viewer_has_voted,voter_ids:b}});p=b("bs_belt_Array").map(t,function(d){var a=b("bs_belt_Array").get(t,0);if(a!==void 0){a=b("bs_caml_option").valFromOption(a);a=a.num_of_votes!==0?(d.num_of_votes/a.num_of_votes*100).toString()+"%":"0%"}else a="0%";return k.jsxs("div",{children:[k.jsxs("div",{children:[k.jsx("div",{children:k.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:d.text}),className:(l?"_3b4f":"")+(l?"":" _4ic6")}),b("MessengerGroupPollingFlyoutReact.bs").renderVoterFacepiles("_4ic7"+(l?"":" _8kg"),l?24:16,d.num_of_votes,d.voter_ids,d.viewer_has_voted),b("ReasonReact.bs").element(void 0,void 0,b("MessengerGroupCreatePollButtonReact.bs").make(d.text,s,d.voter_ids,c.thread_id,[]))],className:"_3b4c"}),k.jsx("div",{children:k.jsx("span",{style:{backgroundColor:g,width:a}}),className:"_3b4h"+(l?"":" _4ic8")})],className:"_3b4a"+(l?"":" _4ic5")},d.id)});m=(q[0]|0)-3|0;if(b("gkx")("994335"))q=null;else{o=b("bs_js_json").classify(b("bs_caml_option").valFromOption(o));q=k.jsxs(b("Link.react"),{className:"_4icb"+(l?"":" _4icc")+(l?" uiContextualLayerParent":"")+(l?" _5f0v":""),linkRef:f.cb,onClick:function(a){a.stopPropagation();if(!f.flyoutOpen&&!f.clickGuard.contents)return b("bs_curry")._1(e.send,1);else return 0},onMouseDown:function(a){f.clickGuard.contents=f.flyoutOpen;return 0},role:"button",style:{color:g,textDecoration:"none"},tabIndex:0,children:[typeof o==="number"?o!==1?i._("Vote"):i._("Change Vote"):i._("Vote"),f.flyoutOpen?b("ReasonReact.bs").element(void 0,void 0,b("MessengerContextualDialogReact.bs").make(void 0,void 0,function(a){return f.linkRef.contents},function(a){return b("bs_curry")._1(e.send,0)},void 0,function(a){return b("bs_curry")._1(e.send,b("bs_block").__(1,[a]))},f.flyoutOpen,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerPollingFlyoutBootLoader.bs").make(g,s,r,n,function(a){return b("bs_curry")._1(e.send,0)},[]))])):null]})}return k.jsxs("div",{children:[j,k.jsxs("div",{children:[k.jsxs("div",{children:[k.jsx(b("Image.react"),{className:"_4ica"+(l?"":" _2ozk"),src:l?h("86887"):h("86886")}),i._("Poll")],className:"_3b4u"+(l?"":" _2wew")}),k.jsx("div",{children:k.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:r}),className:(l?"_3b4v":"")+(l?"":" _2wex")}),k.jsx("div",{children:p,className:"_3b4w"}),k.jsx("div",{children:m<=0?null:i._({"*":"{number of remaining answer options} more options...","_1":"{number of remaining answer options} more option..."},[i._param("number of remaining answer options",String(m)),i._plural(m)]),className:"_8bu"}),q],className:"_3b4t"+(l?"":" _4ic9")})]})}}else return j}}else return j}},initialState:function(a){var c={contents:void 0};a=function(a){c.contents=a==null?void 0:b("bs_caml_option").some(a);return 0};return{flyoutOpen:!1,linkRef:c,cb:a,clickGuard:{contents:!1},options:void 0}},retainedProps:l.retainedProps,reducer:function(a,c){if(typeof a==="number")if(a===0)return b("bs_block").__(0,[{flyoutOpen:!1,linkRef:c.linkRef,cb:c.cb,clickGuard:c.clickGuard,options:c.options}]);else return b("bs_block").__(0,[{flyoutOpen:!c.flyoutOpen,linkRef:c.linkRef,cb:c.cb,clickGuard:c.clickGuard,options:c.options}]);else if(a.tag)return b("bs_block").__(0,[{flyoutOpen:a[0],linkRef:c.linkRef,cb:c.cb,clickGuard:c.clickGuard,options:c.options}]);else return b("bs_block").__(0,[{flyoutOpen:c.flyoutOpen,linkRef:c.linkRef,cb:c.cb,clickGuard:c.clickGuard,options:a[0]}])},jsElementWrapped:l.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(b("bs_caml_option").nullable_to_opt(a.customColor),a.message,a.isLastOfType,b("bs_caml_option").nullable_to_opt(a.onLoad),[])});c=b("bs_belt_Option").getWithDefault;d=16;e=24;g=3;f.$pipe$question=c;f.facebookFacepileImageSize=d;f.messengerFacepileImageSize=e;f.numOfDisplayedOptions=g;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerLogMessageBody.react",["ImmutableObject","MercuryLogMessageType","MessengerParticipants.bs","P2PMercuryLogMessage.react","React","ReactComponentWithPureRenderMixin","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f){var g=b("React");a=b("createReactClass_DEPRECATED")({displayName:"MessengerLogMessageBody",_subscription:null,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{thread:b("prop-types").instanceOf(b("ImmutableObject")),message:b("prop-types").object.isRequired,viewer:b("prop-types").string.isRequired},getInitialState:function(){return{extraParticipants:{}}},componentDidMount:function(){this._subscription=this._computeParticipants()},_computeParticipants:function(){var a=this,c=this._getIDsToFetch(this.props);if(c.length===0)return null;var d=[],e={};c.forEach(function(a){var c=b("MessengerParticipants.bs").getNow(a);e[a]=c;c||d.push(a)});this.setState({extraParticipants:e});return d.length>0?b("MessengerParticipants.bs").getMulti(d,function(b){var c=a.state.extraParticipants;d.forEach(function(a){c[a]=b[a]});a._subscription=null;a.setState({extraParticipants:c})}):null},_getIDsToFetch:function(a){var c=[];a=a.message;var d=a.log_message_data;a=a.log_message_type;a===b("MercuryLogMessageType").ORION&&c.push(d.senderId,d.receiverId);return c},componentDidUpdate:function(){var a=this,b=this._getIDsToFetch(this.props);!this._subscription&&!b.every(function(b){return a.state.extraParticipants[b]})&&(this._subscription=this._computeParticipants())},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},render:function(){var a=this.props.message.log_message_type;if(a!==b("MercuryLogMessageType").ORION)return null;switch(a){case b("MercuryLogMessageType").ORION:return this._renderP2PLogMessage(this.props.message);default:return null}},_renderP2PLogMessage:function(a){var c=a.log_message_data,d=c.senderId,e=c.receiverId,f=this.state.extraParticipants;d=f[d]||new(b("ImmutableObject"))();f=f[e]||new(b("ImmutableObject"))();return g.jsx(b("P2PMercuryLogMessage.react"),{amount:c.formattedAmount,receiver:f,sender:d,subtype:c.subtype,threadFBID:a.thread_fbid,threadID:a.thread_id,transferID:c.transfer_id})}});e.exports=a}),null);
__d("MessengerLogMessageRenderer.bs",["fbt","invariant","bs_curry","React","bs_js_dict","FBLogger","bs_caml_array","bs_caml_option","MercuryViewer","TooltipLink.react","MessengerParticipants.bs","MercuryMessageRendererUtils","MessengerTextWithEntities.react","MessengerTextWithEmoticons.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a){if(a!==void 0)return i.jsx(b("MessengerTextWithEmoticons.react"),{renderEmoji:!0,renderEmoticons:!0,text:b("bs_caml_option").valFromOption(a).name});else{b("FBLogger")("messenger.com").mustfix("Could not find participant for renderParticipantName");return null}}function k(a,c,d){c.length>2||h(0,17765);var e=function(a){var c=i.jsx("div",{children:a.map(function(a){if(a!==void 0)return i.jsx("div",{children:b("bs_caml_option").valFromOption(a).name});else{b("FBLogger")("messenger.com").mustfix("Could not find participant for renderTooltipLink");return null}})});return i.createElement(b("TooltipLink.react"),{children:g._({"*":"{num} more"},[g._param("num",a.length,[0])]),tooltip:c,alignH:"center",position:"above"})},f=c.concat([a.author]);b("MessengerParticipants.bs").getMulti(f,function(f){var h=c.map(function(a){return b("bs_js_dict").get(f,a)});if(a.author===b("MercuryViewer").getID())return b("bs_curry")._1(d,g._("You added {subscriber1} and {more_people}.",[g._param("subscriber1",j(b("bs_caml_array").caml_array_get(h,0))),g._param("more_people",e(h.slice(1,h.length)))]));else if(b("bs_caml_array").caml_array_get(c,0)===b("MercuryViewer").getID())return b("bs_curry")._1(d,g._("{actor} added you and {more_people}.",[g._param("actor",j(b("bs_js_dict").get(f,a.author))),g._param("more_people",e(h.slice(1,h.length)))]));else return b("bs_curry")._1(d,g._("{actor} added {subscriber1} and {more_people}.",[g._param("actor",j(b("bs_js_dict").get(f,a.author))),g._param("subscriber1",j(b("bs_js_dict").get(f,b("bs_caml_array").caml_array_get(c,0)))),g._param("more_people",e(h.slice(1,h.length)))]))});return 0}function a(a,c){var d=a.log_message_data;if(d==null){b("FBLogger")("messenger.com").mustfix("Argument to renderSubscribeMessage was not a log message!");return 0}else{d=b("MercuryMessageRendererUtils").moveCurrentUserToFront(d.added_participants);var e=d.length;if(e>=3)return k(a,d,c);else switch(e){case 0:b("FBLogger")("messenger.com").mustfix("Cannot render subscribe log message with no added participants");return 0;case 1:case 2:break}d=a.log_message_body;if(d==null){b("FBLogger")("messenger.com").mustfix("Could not render subscribe log message with no log_message_body");return 0}else return b("bs_curry")._1(c,i.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:d}))}}f.getParticipantName=j;f.renderManySubscribersMessage=k;f.renderSubscribeMessage=a}),null);
__d("MessengerLogMessageRenderer.re",["bs_curry","MessengerLogMessageRenderer.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("MessengerLogMessageRenderer.bs").renderSubscribeMessage,a,c);return a};f.renderSubscribeMessage=a}),null);
__d("MessengerMessage.re",["bs_curry","MessengerMessage.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._6(b("MessengerMessage.bs").makeFakeMessage,a.messageId,a.threadId,a.author,a.actionType,a.timestamp,c);return a};f.makeFakeMessage=a;c=b("MessengerMessage.bs").hasError;f.hasError=c}),null);
__d("MessengerLogMessage.react",["cx","fbt","ix","EventRemindersGating","EventsMessengerComActionContextJSConfig","Image.react","JSResource","Link.react","MercuryLWARenderer","MercuryXMATRenderer","MessengerDialogs.re","MessengerLightweightActionUtils","MessengerLogMessageBody.react","MessengerLogMessageRenderer.re","MessengerMessage.re","MNCommerceLogMessageUtils","React","WorkChatRedesignedMessageListCheck.re","convertMIGColorToFIGColor","joinClasses","lazyLoadComponent","prop-types","requireWeak","EventReminderRequestHelper"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=b("React");var k=a.useEffect,l=a.useState,m=b("lazyLoadComponent")(b("JSResource")("MessengerEventPlanContainer.react").__setRef("MessengerLogMessage.react")),n=i("86913");function o(a){var c=a.message,d=a.thread;a=a.viewer;var e=l(null),f=e[0],g=e[1];k(function(){c.log_message_type==="log:subscribe"&&b("MessengerLogMessageRenderer.re").renderSubscribeMessage(c,g)},[c]);if(f!=null)return f;return b("MessengerLightweightActionUtils").isLWAMessage(c)?b("MercuryLWARenderer").renderCollapsedText(c):j.jsx(b("MessengerLogMessageBody.react"),{message:c,viewer:a,thread:d})}c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showEventPlanDialog:!1},d.$5=function(a){var c;a.stopPropagation();if(d.state.showEventPlanDialog)return;d.setState({showEventPlanDialog:!0});if(!d.props.thread)return;var e=d.props.thread;a=b("EventReminderRequestHelper");var f={action_history:[{surface:b("EventsMessengerComActionContextJSConfig").messenger_com,mechanism:b("EventsMessengerComActionContextJSConfig").reminder_admin_text}]},g=(c=d.props.message)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;!g?d.setState({showEventPlanDialog:!1}):a.fetchEventReminder(e.thread_id,g,function(){b("MessengerDialogs.re").showDialog(function(){return j.jsx(j.Suspense,{fallback:j.jsx("div",{}),children:j.jsx(m,{threadID:e.thread_id,eventID:g,dialogOnly:!0,dialogHandleToggle:d.$6,actionContext:f})})})})},d.$6=function(a){d.setState({showEventPlanDialog:!1}),b("MessengerDialogs.re").removeAllDialogs()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("EventRemindersGating").shouldShowPlansOnMessengerCom?j.jsx("span",{className:"_ofg",ref:"attachment",children:this.$1()}):null,c=this.$2();if(c==null&&this.props.message.log_message_type!=="log:orion"){var d=b("convertMIGColorToFIGColor")(this.props.thread&&this.props.thread.solid_color);c=b("MercuryXMATRenderer").renderText(d,this.props.message,this.props.isLastOfType,this.props.onImageLoad,this.props.isPageMessage,this.props.viewer)}return j.jsxs("div",{className:this.$3(),children:[this.$4(),j.jsx("i",{className:"_uwa"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _8lms":"")}),j.jsx("span",{className:"_3oh-",children:c?c:j.jsx(o,{message:this.props.message,viewer:this.props.viewer,thread:this.props.thread})}),a]})};d.$2=function(){var a=this.props.message;if(b("MNCommerceLogMessageUtils").isCommercePageAdminMessage(a))return b("MNCommerceLogMessageUtils").getCommercePageManage(a,!0);return b("MNCommerceLogMessageUtils").isThreadResurrectionXMAT(a)?b("MNCommerceLogMessageUtils").getThreadResurrectionManage(a):null};d.$4=function(){return!b("MessengerMessage.re").hasError(this.props.message)?null:j.jsx(b("Image.react"),{className:"_41-9",src:n})};d.$3=function(){var a,c=this.props.message,d=c.log_message_type==="log:unsubscribe"&&c.log_message_data.removed_participants.indexOf(c.author)!==-1,e=this.props.viewer;switch(c.log_message_type){case"log:subscribe":a="_uwb";break;case"log:unsubscribe":a=d?"_uwc":"_uwe";break;case"log:phone-call":a=c.log_message_data.caller.indexOf(e)!==-1?"_uwf":"_uwg";break;case"log:video-call":a=c.log_message_data.caller.indexOf(e)!==-1?"_uwh":"_uwi";break;case"log:thread-name":a="_uwj";break;case"log:thread-image":a="_uwk";break;case"log:error-msg":a="_uwl";break;case"log:live-listen":a="_uwm";break;case"log:wallpaper":a="_uwn";break;case"log:orion":a="_uwo";break;case"log:switch":a="_uwp";break;case"log:page-reply":a="_uwq";break}return b("joinClasses")("_497p"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w5v":"")+((c.log_message_type==="log:phone-call"||c.log_message_type==="log:video-call")&&!c.log_message_data.answered?" _3no3":"")+(c.log_message_data&&c.log_message_data.message_type==="instant_game_update"?" _11es":""),a)};d.$1=function(){var a;if(!this.props.thread)return null;var c=this.props.thread;if(!c.lightweight_event||!this.props.message.log_message_data)return null;var d=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a,e;b("requireWeak")("EventReminderStateStore",function(a){e=a.getEvent(c.thread_id,d)});if(!e||!e.exists)return null;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_time:a:a:a;if(!a)return null;typeof a==="string"&&(a=parseInt(a,10));if(a<=Math.floor(Date.now()/1e3))return null;var f;switch(this.props.message.log_message_data.message_type){case"lightweight_event_create":case"lightweight_event_update_time":case"lightweight_event_update_title":case"lightweight_event_update_location":case"lightweight_event_update":f=h._("Change");break;default:f=null}a=j.jsx(b("Link.react"),{href:"#",onClick:this.$5,title:h._("Edit Event"),ref:"event_rem_link",children:f});this.props.displayItems&&(a=null);return a};return c}(j.PureComponent);c.propTypes={message:(d=b("prop-types")).object.isRequired,viewer:d.string.isRequired,isLastOfType:d.bool.isRequired,onImageLoad:d.func};e.exports=c}),null);
__d("MessengerDateBreak.bs",["cx","React","FBLogger","formatDate","joinClasses","WorkChatRedesignedMessageListCheck.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.date;a=a.className;a=a!==void 0?a:"";try{var d={today:"g:ia",thisYear:"M jS, g:ia",withinWeek:"D g:ia",older:"m/d/Y g:ia",future:"g:ia"};c=b("formatDate")(c,d);return h.jsx("h4",{children:h.jsx("time",{children:c,className:"_3oh-"}),className:b("joinClasses")(a,"_497p"+(b("WorkChatRedesignedMessageListCheck.bs").enabled?" _7w5v":"")+(b("WorkChatRedesignedMessageListCheck.bs").enabled?" _7w78":"")+" _2lpt")})}catch(a){b("FBLogger")("messaging").mustfix("invalid timestamp: Js.Date.getTime(date)");return null}}c=h.memo(a,function(a,b){return a.date.getTime()===b.date.getTime()});f.make=c}),null);
__d("MessengerDateBreak.re",["MessengerDateBreak.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerDateBreak.bs").make;f.make=a}),null);
__d("MercuryExperimentUtils",["fbt","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=b("qex")._("1269176");a===null&&(a=26214400);var c;switch(a){case 52428800:c=50;break;case 78643200:c=75;break;default:c=25}a=g._("The file you have selected is too large. The maximum size is {=size}MB",[g._param("=size",c)]);return a.toString()}c={getMaxAttachmentSizeExceededDialog:a};e.exports=c}),null);
__d("MercuryFileUploader",["csx","fbt","ArbiterMixin","ChatFileUploadLoggingUtils","CSS","Dialog","DOM","Event","FBLogger","FileForm","FileFormResetOnSubmit","FileInput","FormSubmitOnChange","MercuryAttachment","MercuryAttachmentTemplates","MercuryConstants","MercuryExperimentUtils","PhotosUploadID","SubscriptionsHandler","getObjectValues","gkx","mixin","shield"],(function(a,b,c,d,e,f,g,h){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b,c,d,e){var f;f=a.call(this)||this;f.$MercuryFileUploader1=b;f.$MercuryFileUploader2={};f.$MercuryFileUploader3={};f.$MercuryFileUploader4={};f.$MercuryFileUploader5={};f.$MercuryFileUploader6={};f.$MercuryFileUploader7={};f.$MercuryFileUploader8={};f.$MercuryFileUploader9={};f.$MercuryFileUploader10={};f.updateElements(c,d,e);return f}var d=c.prototype;d.updateElements=function(a,c,d){this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release();this.$MercuryFileUploader11=new(b("SubscriptionsHandler"))();this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy();this.$MercuryFileUploader12=new(b("FileForm"))(a,[b("FormSubmitOnChange"),b("FileFormResetOnSubmit")]);this.$MercuryFileUploader12.setAllowCrossOrigin(!0);this.$MercuryFileUploader12.setUploadInParallel(!0);a=b("DOM").find(a,"._4q60");var e=b("DOM").find(a,"._4q61");new(b("FileInput"))(a,e,c);this.$MercuryFileUploader11.addSubscriptions(this.$MercuryFileUploader12.subscribe("submit",function(){var a={count:0,file_sizes:[],files:[]};if(c.files){for(var e=0;e<c.files.length;e++){b("ChatFileUploadLoggingUtils").log(c.files[e]);if(c.files[e].size>b("MercuryConstants").AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return!1}}e={};for(var f=0;f<c.files.length;f++){var g=this.$MercuryFileUploader13();this.$MercuryFileUploader14(g,c.files[f].name);a.count++;a.file_sizes.push(c.files[f].size);e[g]=c.files[f];a.files.push({upload_id:g,metadata:c.files[f]})}this.$MercuryFileUploader12.setFiles(e)}else d.value=this.$MercuryFileUploader13(),this.$MercuryFileUploader14(d.value,c.value),a.count=1;this.inform("submit",a)}.bind(this)),this.$MercuryFileUploader12.subscribe("success",this.$MercuryFileUploader15.bind(this)),this.$MercuryFileUploader12.subscribe("failure",this.$MercuryFileUploader16.bind(this)),b("Event").listen(e,"click",b("shield")(this.inform,this,"open")))};d.showAttachmentSizeErrorDialog=function(){this.$MercuryFileUploader12.abort();this.$MercuryFileUploader12.clear();var a=b("MercuryExperimentUtils").getMaxAttachmentSizeExceededDialog();new(b("Dialog"))().setTitle(h._("The file you have selected is too large")).setBody(b("gkx")("1147754")?h._("The file you have selected is too large. The maximum size is 75MB"):a).setButtons(b("Dialog").OK).setSemiModal(!0).show();b("FBLogger")("messenger_upload_file").warn("Uploading file is too large")};d.addDroppedFiles=function(a){if(!this.$MercuryFileUploader12||!this.$MercuryFileUploader12.canUseXHR())return;var c={},d={count:0,file_sizes:[],files:[]};for(var e=0;e<a.length;e++){var f=a[e];if(f.size>b("MercuryConstants").AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return!1}var g=this.$MercuryFileUploader13();this.$MercuryFileUploader14(g,f.name);c[g]=f;d.file_sizes.push(f.size);d.count++;d.files.push({upload_id:g,metadata:f})}this.$MercuryFileUploader12.setFiles(c);this.$MercuryFileUploader12.forceSendViaXHR();this.inform("submit",d)};d.isUploading=function(){return!!Object.keys(this.$MercuryFileUploader8).length};d.addCachedAttachments=function(a){a.forEach(function(a){var b=this.$MercuryFileUploader13();this.$MercuryFileUploader14(b,a.filename);this.inform("cached-file-added",{upload_id:b,metadata:a});this.$MercuryFileUploader17(b,a)}.bind(this))};d.addCachedImageFiles=function(a){var b=h._("Photo");a.forEach(function(a){var c=this.$MercuryFileUploader13();this.$MercuryFileUploader14(c,b);this.$MercuryFileUploader17(c,{filename:a,image_id:a,filetype:"image/jpeg"})}.bind(this))};d.getAttachments=function(){return b("getObjectValues")(this.$MercuryFileUploader2)};d.getImageFiles=function(){var a=this,b=Object.keys(this.$MercuryFileUploader3).sort(),c=[];b.forEach(function(b){return c.push(a.$MercuryFileUploader3[b])});return c};d.getAnimatedImageFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader4)};d.getVideoFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader5)};d.getAudioFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader6)};d.getFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader7)};d.removeOneAttachment=function(a){this.$MercuryFileUploader18(a)};d.removeAttachments=function(){this.$MercuryFileUploader1&&b("DOM").empty(this.$MercuryFileUploader1),this.$MercuryFileUploader2={},this.$MercuryFileUploader3={},this.$MercuryFileUploader4={},this.$MercuryFileUploader5={},this.$MercuryFileUploader6={},this.$MercuryFileUploader7={},this.$MercuryFileUploader9={},this.$MercuryFileUploader8={},this.$MercuryFileUploader10={},this.$MercuryFileUploader1&&b("CSS").hide(this.$MercuryFileUploader1),this.inform("dom-updated")};d.destroy=function(){this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release(),this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy(),this.removeAttachments()};d.$MercuryFileUploader14=function(a,c){var d=b("MercuryAttachmentTemplates")[":fb:mercury:upload-file-row"].build(),e={};this.$MercuryFileUploader9[a]=d;this.$MercuryFileUploader8[a]=!0;this.$MercuryFileUploader10[a]=Date.now();c=i(c);b("DOM").appendContent(d.getNode("iconText"),c);e.fileName=c;b("Event").listen(d.getNode("closeFileUpload"),"click",this.$MercuryFileUploader18.bind(this,a));this.$MercuryFileUploader1&&(b("DOM").appendContent(this.$MercuryFileUploader1,d.getRoot()),b("CSS").show(this.$MercuryFileUploader1));this.inform("dom-updated",e)};d.$MercuryFileUploader18=function(a,c){this.$MercuryFileUploader8[a]?this.inform("upload-canceled-during-upload"):(this.$MercuryFileUploader2[a]||this.$MercuryFileUploader3[a]||this.$MercuryFileUploader4[a]||this.$MercuryFileUploader5[a]||this.$MercuryFileUploader6[a]||this.$MercuryFileUploader7[a])&&this.inform("upload-canceled-after-uploaded");delete this.$MercuryFileUploader2[a];delete this.$MercuryFileUploader3[a];delete this.$MercuryFileUploader4[a];delete this.$MercuryFileUploader5[a];delete this.$MercuryFileUploader6[a];delete this.$MercuryFileUploader7[a];delete this.$MercuryFileUploader8[a];delete this.$MercuryFileUploader10[a];c=this.$MercuryFileUploader9[a];delete this.$MercuryFileUploader9[a];c&&(b("DOM").remove(c.getRoot()),this.inform("dom-updated"));this.inform("upload-canceled");return!1};d.$MercuryFileUploader19=function(a,c){a=this.$MercuryFileUploader9[a];c=b("MercuryAttachment").getAttachIconClassByMime(c);b("CSS").addClass(a.getNode("iconText"),c);b("CSS").addClass(a.getRoot(),"done")};d.$MercuryFileUploader17=function(a,b){this.$MercuryFileUploader8[a]&&(delete this.$MercuryFileUploader8[a],b.image_id?this.$MercuryFileUploader3[a]=b.image_id:b.gif_id?this.$MercuryFileUploader4[a]=b.gif_id:b.video_id?this.$MercuryFileUploader5[a]=b.video_id:b.audio_id?this.$MercuryFileUploader6[a]=b.audio_id:b.file_id?this.$MercuryFileUploader7[a]=b.file_id:this.$MercuryFileUploader2[a]=b,this.$MercuryFileUploader19(a,b.filetype),this.inform("one-upload-completed",{upload_time_ms:Date.now()-this.$MercuryFileUploader10[a],upload_id:a,metadata:b})),this.isUploading()||this.inform("all-uploads-completed",{count:this.getAttachments().length})};d.$MercuryFileUploader15=function(a,b){a=b.response.getPayload();this.$MercuryFileUploader17(this.$MercuryFileUploader20(b),a.metadata[0])};d.$MercuryFileUploader16=function(a,b){this.inform("one-upload-failed"),this.$MercuryFileUploader18(this.$MercuryFileUploader20(b),a)};d.$MercuryFileUploader13=function(){return"upload_"+b("PhotosUploadID").getNewID()};d.$MercuryFileUploader20=function(a){var b=a.response.getPayload();if(a.upload)return a.upload.getName();else return b.uploadID};return c}(b("mixin")(b("ArbiterMixin")));function i(a){return a&&a.startsWith("C:\\fakepath\\")?a.substring(12):a}e.exports=a}),null);
__d("MercuryOrderedThreadlist",["invariant","ChatReliabilityInstrumentation","LogHistory","MercuryAPIArgsSource","MercuryDispatcher","MercuryFilters.bs","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInformer","MessagingTag","MessengerFolders.bs","MessengerState.bs","RangedCallbackManager"],(function(a,b,c,d,e,f,g){"use strict";var h=b("LogHistory").getInstance("ordered_threadlist_model"),i=b("MercuryFilters.bs").getSupportedFilters().concat([b("MercuryFilters.bs").all,b("MessagingTag").GROUPS]),j=b("MessengerFolders.bs").getSupportedFolders().concat([b("MessagingTag").SPAM,b("MessagingTag").PAGE_BACKGROUND]);a=function(){a.getForFBID=function(a){return l.getForFBID(a)};a.get=function(){return l.get()};function a(a){var c=this;this.$1=a;this.$2=b("MercuryThreadIDMap").getForFBID(this.$1);this.$3=b("MercuryThreadInformer").getForFBID(this.$1);this.$4=b("MercuryDispatcher").getForFBID(this.$1);this.$5={};this.$6();this.$4.subscribe("update-threadlist",function(a,b){if(!k(b))return;a=b.ordered_threadlists;if(a&&a.length)c.$7(a);else{a=(b.actions||[]).filter(function(a){return a.thread_id});c.$8(b.threads||[]);c.$9(a)}c.$3.updatedThreadlist()});this.$4.subscribe("invalidate-global-state",function(){return c.$10()})}var c=a.prototype;c.getThreadlistOrderMap=function(a,c){var d=this;this.$5[a][c]||(i=i.concat([c]),j.forEach(function(a){d.$5[a][c]=new(b("RangedCallbackManager"))(function(a){a=b("MessengerState.bs").getThreadMetaNow(d.$1,a);return a&&a.timestamp},function(a,b){return b-a},d.$2.canLinkExternally.bind(d.$2))}));return this.$5[a][c]};c.getThreadlist=function(a,c,d,e,f,g){return this.getFilteredThreadlist(a,c,d,b("MercuryFilters.bs").all,e,f,g)};c.getFilteredThreadlist=function(a,c,d,e,f,g,i){var j=this.getThreadlistOrderMap(d,e);f=j.executeOrEnqueue(a,c,f,g);g=j.getUnavailableResources(f);if(g.length){if(j.getCurrentArraySize()<a){a={start:a,limit:c,filter:e,resources_size:j.getCurrentArraySize()};h.warn("range_with_gap",JSON.stringify(a))}this.getServerRequests().fetchThreadlistInfo(j.getCurrentArraySize(),g.length,d,e==b("MercuryFilters.bs").all?null:e,i,this.$11(j.getAllResources()))}return f};c.getServerRequests=function(){return b("MercuryServerRequests").getForFBID(this.$1)};c.getThreadlistUntilTimestamp=function(a,c,d){d=d||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(c,d).getElementsUntil(a)};c.getAvailableThreadlistNow=function(a,c){c=c||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(a,c).getAllResources()};c.getThreadCount=function(a,c){c=c||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(a,c).getCurrentArraySize()};c.hasLoadedThreadlist=function(a,c){c=c||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(a,c).hasReachedEndOfArray()};c.unsubscribe=function(a,c,d){d=d||b("MercuryFilters.bs").all,this.getThreadlistOrderMap(c,d).unsubscribe(a)};c.$10=function(){this.$5={},this.$6()};c.$6=function(){var a=this;j.forEach(function(c){a.$5[c]={},i.forEach(function(d){a.$5[c][d]=new(b("RangedCallbackManager"))(function(c){c=b("MessengerState.bs").getThreadMetaNow(a.$1,c);return c&&c.timestamp},function(a,b){return b-a},a.$2.canLinkExternally.bind(a.$2))})})};c.$12=function(a,c,d){var e=b("MessengerState.bs").getThreadMetaNow(this.$1,a);return!!(e&&e.timestamp&&d&&c&&this.$13(a)==c&&this.$14(a).includes(d))};c.$15=function(a,c,d){var e=[],f=!1;a=(a||[]).filter(function(a){var e=a.filter||b("MercuryFilters.bs").all;return(a.folder==c||!a.folder&&c==b("MessagingTag").INBOX)&&e==d});var g=this.$5[c][d].getAllResources(),i;a.forEach(function(a){e=e.concat(a.thread_ids);var b=a.limit;a.thread_ids.length<b&&(f=!0);(!i||a.end>i)&&(i=a.end)});this.$16(e,c,d);if(f)this.$5[c][d].setReachedEndOfArray();else{a=this.$5[c][d].getCurrentArraySize();if(i&&a<i){var j={};g=g.concat(e);g=g.filter(function(a){var b=j[a];j[a]=!0;return b});g.length&&(b("ChatReliabilityInstrumentation").logERROR("duplicate_thread_ids: "+JSON.stringify(g)),h.warn("duplicate_threads",JSON.stringify({folder:c,expected_final_size:i,actual_final_size:a,duplicate_thread_ids:g})),this.getServerRequests().fetchThreadlistInfo(i,g.length,c,d==b("MercuryFilters.bs").all?null:d,b("MercuryAPIArgsSource").MERCURY,this.$11(this.$5[c][d].getAllResources())))}}};c.$7=function(a){var b=this;j.forEach(function(c){i.forEach(function(d){b.$15(a,c,d)})})};c.$9=function(a){var c=this,d={};j.forEach(function(a){d[a]={},i.forEach(function(b){d[a][b]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}}})});a.forEach(function(a){var e=a.thread_id;c.$17(e,function(f){c.$18(e,function(h){var k=function(){h.forEach(function(a){if(!i.includes(a))return;!f&&g(0,2886);d[f][a].to_add.push(e);!c.$5[f][a].hasReachedEndOfArray()&&!c.$5[f][a].hasResource(e)&&(d[f][a].to_remove_if_last_after_add[e]=!0)})};function l(a){!f&&g(0,2887),i.includes(a)&&(h.includes(a)?d[f][a].to_add.push(e):d[f][a].to_remove.push(e))}if(!f){(a.action_type==="ma-type:change-folder"||a.action_type==="ma-type:change-archived-status")&&j.forEach(function(a){a!==f&&i.forEach(function(b){c.$5[a][b].removeResources([e])})});return}!f&&g(0,2888);switch(a.action_type){case"ma-type:delete-thread":h.forEach(function(a){if(!i.includes(a))return;d[f][a].to_remove.push(e)});break;case"ma-type:change-archived-status":case"ma-type:change-folder":k();break;case"ma-type:change_read_status":l(b("MessagingTag").UNREAD);break;case"ma-type:user-generated-message":case"ma-type:log-message":h.forEach(function(a){if(!i.includes(a))return;c.$12(e,f,a)&&d[f][a].to_add.push(e)});break;case"ma-type:change_flag":l("flag");break}})})});j.forEach(function(a){i.forEach(function(b){var e=c.$5[a][b];c.$16(d[a][b].to_add,a,b);for(var f=e.getCurrentArraySize()-1;f>=0;f--){var g=e.getResourceAtIndex(f);if(!d[a][b].to_remove_if_last_after_add[g])break;d[a][b].to_remove.push(g)}e.removeResources(d[a][b].to_remove)})})};c.$8=function(a){var b=this,c={};j.forEach(function(a){c[a]={},i.forEach(function(b){c[a][b]=[]})});a.forEach(function(a){b.$17(a.thread_id,function(d){b.$18(a.thread_id,function(e){d&&e.forEach(function(e){b.$12(a.thread_id,d,e)&&c[d][e].push(a.thread_id)})})})});j.forEach(function(a){i.forEach(function(d){c[a][d].length>0&&b.$16(c[a][d],a,d)})})};c.$16=function(a,c,d){var e=this;d=d||b("MercuryFilters.bs").all;this.$5[c][d].addResources(a);j.forEach(function(b){b!=c&&e.$5[b][d].removeResources(a)})};c.$17=function(a,c){var d=this;b("MessengerState.bs").getThreadMeta(this.$1,a,function(b){c(d.$13(a,b))})};c.$13=function(a,c){c=c||b("MessengerState.bs").getThreadMetaNow(this.$1,a);var d=null;!c?d="No thread metadata":c.folder||(d="No thread folder");if(d){d={error:d,tid:a};h.warn("no_thread_folder",JSON.stringify(d));b("ChatReliabilityInstrumentation").logERROR("no_thread_folder");return null}!c&&g(0,2889);a=c.folder;c.is_archived&&(a=b("MessagingTag").ACTION_ARCHIVED);if(this.$5[a])return a;else return null};c.$18=function(a,c){var d=this;b("MessengerState.bs").getThreadMeta(this.$1,a,function(b){c(d.$14(a,b))})};c.$14=function(a,c){c=c||b("MessengerState.bs").getThreadMetaNow(this.$1,a);var d=[b("MercuryFilters.bs").all];if(!c){a={error:"no_thread_metadata",tid:a};h.warn("no_thread_metadata",JSON.stringify(a));return[]}c.unread_count&&d.push(b("MessagingTag").UNREAD);c.is_canonical||d.push(b("MessagingTag").GROUPS);a=c.page_thread_info;a&&a.flagged&&d.push("flag");return d};c.$11=function(a){var c=null;if(a.length>0){a=b("MessengerState.bs").getThreadMetaNow(this.$1,a[a.length-1]);c=a?a.timestamp:null}return c};return a}();function k(a){switch(a.payload_source){case"client_change-archived_status":case"client_change-pinned_status":case"client_change_page_follow_up_status":case"client_change_read_status":case"client_change_folder":case"client_channel_message":case"client_delete_messages":case"client_delete_thread":case"client_send_message":case"server_send_message":case"server_fetch_threadlist_info":case"server_thread_sync":case"server_invalidate_global_state":case"client_update_comm_status":return!0;case"server_initial_data":return!!a.ordered_threadlists;default:return!1}}var l=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryDragDropPrompt.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){var i=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return i.jsx("div",{className:"_4g6x",children:i.jsxs("div",{className:"_4g6y",children:[i.jsx("div",{className:"_4g6z _4g71",children:h._("Drag Links\/Files Here")}),i.jsx("div",{className:"_4g6z _4g6- _4g6_",children:h._("Drop Files Here")}),i.jsx("div",{className:"_4g6z _4g6- _4g70",children:h._("Drop Link Here")})]})})};return b}(i.Component);e.exports=a}),null);