if (self.CavalryLogger) { CavalryLogger.start_js(["cEIYt"]); }

__d("TimelineScrubber",["cx","Arbiter","CSS","DOM","Event","Focus","Keys","Parent","ProfileTabUtils","ProfileTimelineUILogger","TimelineComponentKeys","TimelineController","Vector","$","getElementText","nullthrows"],(function(a,b,c,d,e,f,g){var h="_3rrn";a=function(){"use strict";function a(c){var d=this;this.$9=c;this.$6={};this.$10={};this.$8={};this.$7={};var e=c.children;this.$2=e[0];for(var f=0;f<e.length;f++){var g=e[f].getAttribute("data-key");if(!g)continue;this.$6[g]=e[f];var h=b("DOM").scry(e[f],"ul");this.$10[g]={};if(h.length){h=h[0].children;for(var i=0;i<h.length;i++)this.$10[g][h[i].getAttribute("data-key")]=h[i]}g=e[f].getAttribute("data-rollup");g&&(this.$8[g]=this.$8[g]||[],this.$8[g].push(e[f]))}this.$1=b("Event").listen(c,"click",this.$13.bind(this));this.$5=b("Event").listen(c,"keydown",this.$14.bind(this));this.$11=b("DOM").scry(c,"a")[0];b("CSS").show(c);i=b("Vector").getViewportDimensions().y-a.SCRUBBER_NO_ADS_VERTICAL_BUFFER;h=this.getHeight();h&&h>i&&this.fold(h-i);this.$12=b("Arbiter").subscribe("TimelineController/sectionKeyChange",function(a,b){return d.$15(b[0])});b("TimelineController").register(b("TimelineComponentKeys").SCRUBBER,this);b("TimelineController").scrubberHasLoaded(this)}var c=a.prototype;c.reset=function(){this.$1&&this.$1.remove(),this.$5&&this.$5.remove(),this.$12&&this.$12.unsubscribe(),this.$9=null,this.$6={},this.$10={},this.$8={},this.$7={}};c.getRoot=function(){return this.$9};c.getNav=function(a){return this.$6[a]};c.getSubnav=function(a,b){a=this.$10[a];return a&&a[b]};c.getHeight=function(){var a;return(a=this.$9)==null?void 0:a.offsetHeight};c.getLabelForNav=function(a){a=this.getNav(a);return!a?"":b("getElementText")(b("DOM").scry(a,"a")[0])};c.getLabelForSubnav=function(a,c){a=this.getSubnav(a,c);return!a?"":b("getElementText")(b("DOM").scry(a,"a")[0])};c.fold=function(a){return this.$16(a,!0)};c.unfold=function(a){return this.$16(a,!1)};c.$15=function(a){this.$9&&b("CSS").conditionShow(this.$9,b("ProfileTabUtils").tabHasScrubber(a))};c.getOffset=function(){return a.OFFSET+(b("CSS").hasClass(b("$")("rightColContent"),"pagesTimelineRightColumn")?48:0)};c.updateSection=function(a,c){if(!this.$6[a])return;var d=this.$6[a].getAttribute("data-rollup");this.$3&&this.$3.getAttribute("data-rollup")!==d&&(b("CSS").removeClass(this.$3,h),b("CSS").removeClass(b("DOM").scry(this.$3,"ul")[0],"loaded"),delete this.$3);if(d&&this.$7[d]){d=this.$7[d];d instanceof HTMLElement&&d.getAttribute("data-rollup")&&(this.$3=d,b("CSS").addClass(this.$3,h),b("CSS").addClass(b("DOM").scry(this.$3,"ul")[0],"loaded"))}this.$2&&b("CSS").removeClass(this.$2,h);this.$4&&b("CSS").removeClass(this.$4,h);this.$2=null;this.$4=null;this.$6[a]&&(this.$2=this.$6[a],b("CSS").addClass(this.$2,h),c&&this.$10[a][c]&&(this.$4=this.$10[a][c],b("CSS").addClass(this.$4,h)))};c.$17=function(c){var d=this.$2,e=d&&d.getAttribute("data-rollup"),f=a.KEY_HEIGHT*(this.$8[c].length-1);c==e&&(f+=a.SUBKEY_HEIGHT*b("DOM").scry(d,"li").length,f-=a.SUBKEY_HEIGHT*(this.$8[c].length-1));return f};c.$16=function(a,b){var c=a,d=Object.keys(this.$8);while(a>0&&d.length){var e=b?d.pop():d.shift();if(!b==!this.$7[e])continue;var f=this.$17(e);if(f<=0)continue;if(!b&&f>a)break;var g;b?g=this.$18(e):g=this.$19(e);g&&(a-=f)}return c-a};c.$18=function(a){var c=this.$8[a];if(!c||c.length<2||this.$7[a])return!1;var d=c[0].previousSibling,e=c[0],f=e.firstElementChild;if(!(f instanceof HTMLAnchorElement))return!1;f=b("DOM").create("a",{href:f.href,rel:"ignore",tabindex:"-1"},[a]);var g=b("DOM").create("ul",{className:"clearfix"});for(var h=0;h<c.length;h++)g.appendChild(c[h]);h=b("DOM").create("li",null,[f,g]);h.setAttribute("data-key",e.getAttribute("data-key"));h.setAttribute("data-rollup",a);d?b("DOM").insertAfter(d,h):b("DOM").prependContent(this.$9,h);this.$7[a]=h;this.$20();this.$21();return!0};c.$19=function(a){if(!this.$7[a])return!1;var c=this.$7[a],d=b("DOM").scry(c,"ul")[0],e=document.createDocumentFragment();while(d.childNodes.length)e.appendChild(d.firstChild);b("DOM").replace(c,e);this.$7[a]=!1;this.$20();return!0};c.$20=function(){if(this.$2){var a=null;this.$4&&(a=this.$4.getAttribute("data-key"));var b=this.$2.getAttribute("data-key");b&&this.updateSection(b,a)}};c.$13=function(a){var c=a.getModifiers();if(a.isMiddleClick()||c.access||c.meta)return!0;c=b("Parent").byTag(a.getTarget(),"a");c=c&&b("Parent").byAttribute(c,"data-key");if(c){c=b("nullthrows")(c.getAttribute("data-key"));b("TimelineController").navigateToSection(c);b("ProfileTimelineUILogger").logScrubberClick(c);a.prevent()}return void 0};c.$21=function(){var a=this.$11;while(a&&!(a.offsetHeight||a.offsetWidth)){a.tabIndex=-1;var c=b("Parent").byTag(a,"li");if(!c)return;c=b("Parent").byTag(c,"li");c=b("DOM").scry(c,"a")[0];if(c===a)return;this.$11=c;this.$11.tabIndex=0;a=c}};c.$14=function(a){if(a.getModifiers().any)return;var c=b("Event").getKeyCode(a);if(c===b("Keys").UP||c===b("Keys").DOWN){var d=b("DOM").scry(this.$9,"a").filter(function(a){return a.offsetHeight||a.offsetWidth}),e=this.$11,f=d.indexOf(e);if(e&&f!==-1){d=d[f+(c===b("Keys").UP?-1:1)];d&&(d.tabindex=0,b("Focus").set(d),e.tabIndex=-1,this.$11=d,a.prevent())}}};return a}();a.KEY_HEIGHT=23;a.SUBKEY_HEIGHT=16;a.OFFSET=38;a.SCRUBBER_NO_ADS_VERTICAL_BUFFER=125;e.exports=a}),null);
__d("ServiceWorkerNub",["DOM","pageLoadedViaSWCache"],(function(a,b,c,d,e,f){a={addNub:function(a,c,d){b("DOM").setContent(a,b("pageLoadedViaSWCache")()?c:d)}};e.exports=a}),null);