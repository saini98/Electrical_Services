if (self.CavalryLogger) { CavalryLogger.start_js(["WwKJB"]); }

__d("MNCommercePromotionStateActions",["MessengerDispatcher","MNCommerceActionTypes"],(function(a,b,c,d,e,f){"use strict";a={stateLoaded:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").PROMOTION_STATE.LOADED,state:a})},stateLoadError:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").PROMOTION_STATE.LOAD_ERROR,pageID:a})},stateReload:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").PROMOTION_STATE.RELOAD,pageID:a})}};e.exports=a}),null);
__d("MNCommercePromotionBlockDataManager",["AsyncRequest","MNCommercePromotionStateActions","XMNCommercePromotionBlockController"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.block=function(a,c){a=b("XMNCommercePromotionBlockController").getURIBuilder().setString("page_id",a).setString("type",c).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$1).setErrorHandler(this.$2).send()};c.$1=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MNCommercePromotionStateActions").stateReload(a)};c.$2=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MNCommercePromotionStateActions").stateLoadError(a)};return a}();e.exports=new a()}),null);
__d("MNCommerceReportFlowType",[],(function(a,b,c,d,e,f){a=Object.freeze({HIDE:"hide",REPORT:"report",WHY:"why",USEFUL:"useful",WHAT:"what"});e.exports=a}),null);
__d("MNAdsMessageUtils",["ix","cx","fbt","Bootloader","FBJSON","Image.react","Link.react","MercuryIDs","MessengerPopoverMenu.react","MNCommerceDialogStateActions","MNCommercePromotionBlockDataManager","MNCommerceReportFlowType","QE2Logger","React","ReactXUIMenu","XAsyncRequest","XMessengerDotComSponsoredMessagesXOutReportMutationController","XMessengerDotComSponsoredMessagesXOutSubmitPageController","fbglyph","getPageIDFromThreadID","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=b("ReactXUIMenu").Item,l="offsite_ad";a=function(){function a(){}var c=a.prototype;c.isAdsAdminMessage=function(a){return a&&a.log_message_data&&a.log_message_data.message_type&&a.log_message_data.message_type==="ad_manage_message"};c.isOffsiteAd=function(a){if(a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_properties){a=b("FBJSON").parse(a.log_message_data.untypedData.ad_properties);for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e===l)return!0}}return!1};c.getadPreferencesUrl=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_preferences_link?a.log_message_data.untypedData.ad_preferences_link:""};c.hasAdProperties=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_properties?!0:!1};c.getadId=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_id?a.log_message_data.untypedData.ad_id:null};c.getadClientToken=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_client_token?a.log_message_data.untypedData.ad_client_token:null};c.getAdsPageManage=function(a,c){var d=this,e=null;if(b("gkx")("678671"))if(a.is_sponsored&&b("gkx")("678672")){var f=this.getadId(a),h=this.getadClientToken(a),l=function(){var c=b("getPageIDFromThreadID")(a.thread_id);c||(c=b("MercuryIDs").getUserIDFromParticipantID(a.author));if(f!==null){var d=b("XMessengerDotComSponsoredMessagesXOutReportMutationController").getURIBuilder().setString("ad_id",f).setString("ad_client_token",h).getURI();new(b("XAsyncRequest"))(d).setHandler(function(a){(a.payload.err||a.payload===!1)&&b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){a.show(i._("We couldn't hide this ad. Please try again later."))},"MNAdsMessageUtils")}).setMethod("POST").send()}var e=function(a){if(h!==null){a=b("XMessengerDotComSponsoredMessagesXOutSubmitPageController").getURIBuilder().setString("ad_token",h).setString("selected_option_type",a).setString("event_type",b("MNCommerceReportFlowType").HIDE).getURI();new(b("XAsyncRequest"))(a).setMethod("POST").send()}};b("Bootloader").loadModules(["MNAdsHideAdDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{onConfirmButtonClick:e,pageID:c})},"MNAdsMessageUtils")},m=function(){var c=b("getPageIDFromThreadID")(a.thread_id);c||(c=b("MercuryIDs").getUserIDFromParticipantID(a.author));var d=function(a){if(f!==null){var c=b("XMessengerDotComSponsoredMessagesXOutReportMutationController").getURIBuilder().setString("ad_id",f).setString("ad_client_token",h).getURI();new(b("XAsyncRequest"))(c).setHandler(function(a){(a.payload.err||a.payload===!1)&&b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){a.show(i._("We couldn't hide this ad. Please try again later."))},"MNAdsMessageUtils")}).setMethod("POST").send()}if(h!==null){c=b("XMessengerDotComSponsoredMessagesXOutSubmitPageController").getURIBuilder().setString("ad_token",h).setString("selected_option_type",a).setString("event_type",b("MNCommerceReportFlowType").REPORT).getURI();new(b("XAsyncRequest"))(c).setMethod("POST").send()}};b("Bootloader").loadModules(["MNAdsReportAdDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{onConfirmButtonClick:d,pageID:c})},"MNAdsMessageUtils")},n=function(){b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){if(h!==null){var c=b("XMessengerDotComSponsoredMessagesXOutSubmitPageController").getURIBuilder().setString("ad_token",h).setString("selected_option_type","useful").setString("event_type",b("MNCommerceReportFlowType").USEFUL).getURI();new(b("XAsyncRequest"))(c).setMethod("POST").send()}a.show(i._("Thank you for the feedback"))},"MNAdsMessageUtils")},o="https://www.facebook.com/help/messenger-app/948677458561379",p=this.getadPreferencesUrl(a);l=j.jsxs(b("ReactXUIMenu"),{children:[j.jsx(k,{icon:j.jsx(b("Image.react"),{src:g("123107")}),onclick:l,children:i._("Hide ad")},b("MNCommerceReportFlowType").HIDE),j.jsx(k,{icon:j.jsx(b("Image.react"),{src:g("123502")}),onclick:m,children:i._("Report ad")},b("MNCommerceReportFlowType").REPORT),j.jsx(k,{href:p,icon:this.hasAdProperties(a)?j.jsx(b("Image.react"),{src:g("122203")}):j.jsx(b("Image.react"),{src:g("123137")}),target:"_blank",children:i._("Why am I seeing this?")},b("MNCommerceReportFlowType").WHY),j.jsx(k,{icon:j.jsx(b("Image.react"),{src:g("122574")}),onclick:n,children:i._("This ad is useful")},b("MNCommerceReportFlowType").USEFUL),j.jsx(k,{href:o,icon:j.jsx(b("Image.react"),{src:g("123230")}),target:"_blank",children:i._("What are sponsored messages?")},b("MNCommerceReportFlowType").WHAT)]});e=j.jsx(b("MessengerPopoverMenu.react"),{"aria-label":"Manage Messages","data-tooltip-content":"Manage Messages","data-hover":"tooltip",menu:l,children:j.jsx(b("Link.react"),{className:(c?"":"_3kyk")+(c?" _3kyl":""),children:i._("Manage")})})}else{m=function(){var c=d.isOffsiteAd(a),e=b("getPageIDFromThreadID")(a.thread_id);e||(e=b("MercuryIDs").getUserIDFromParticipantID(a.author));var f=d.getadPreferencesUrl(a),g=function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)};b("Bootloader").loadModules(["MNAdsMessagesManageBlockDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{adPreferencesUrl:f,isOffsiteAd:c,onConfirmButtonClick:g,pageID:e})},"MNAdsMessageUtils")};e=j.jsx(b("Link.react"),{className:(c?"":"_3kyk")+(c?" _3kyl":""),onClick:m,children:i._("Manage")})}return j.jsxs("span",{className:c?"":"_3kym",children:[a.log_message_body," \xb7 ",e]})};c.getadUrl=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_url?a.log_message_data.untypedData.ad_url:""};c.getShouldShowUrl=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.should_show_url?a.log_message_data.untypedData.should_show_url:!1};c.getAdContextAdminMessage=function(a){var c=this.getadUrl(a);c=j.jsx(b("Link.react"),{className:"_36ql",href:c,children:i._("View ad")});return j.jsxs("span",{className:"_3kym",children:[a.log_message_body," ",c]})};c.getAdReplyAdminMessage=function(a){var c=this.getadUrl(a),d=this.getShouldShowUrl(a);if(c===""||!d)return j.jsx("span",{className:"_3kym",children:a.log_message_body});d=a.other_user_fbid.replace("fbid:","");b("QE2Logger").logExposureForUser("ctm_admin_text_ad_url",d);d=j.jsx(b("Link.react"),{className:"_36ql",href:c,target:"_blank",children:i._("View ad")});return j.jsxs("span",{className:"_3kym",children:[a.log_message_body," ",d]})};return a}();e.exports=new a()}),null);
__d("MNCommerceLoggingConstants",[],(function(a,b,c,d,e,f){a={DIALOG_SURFACE:{CHECKOUT_ORDER_CONFIG:"checkout_order_config",SHIPMENT:"shipment",RECEIPT:"receipt",UNLINK:"unlink",UNLINK_ERROR:"unlink_error",MANAGE:"manage"}};e.exports=a}),null);
__d("MNCommerceButton.react",["MessengerDialogButton.react","MessengerEnvironment","React","XUIButton.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialogButton.react"):b("XUIButton.react"),d=this.props.type;d||(d=this.props.type==="confirm"?"primary":"secondary");a=a?"default":this.props.use;d=babelHelpers["extends"]({},this.props,{type:d,use:a});return g.jsx(c,babelHelpers["extends"]({},d,{children:this.props.children}))};return c}(g.Component);e.exports=a}),null);
__d("MNCommerceAttachmentConstants",[],(function(a,b,c,d,e,f){a={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:"subTotal",SHIPPING:"shippingCost",TAX:"tax",TOTAL:"totalCost"}};e.exports=a}),null);
__d("MNCommerceDialog.react",["cx","LayerFadeOnHide","LayerHideOnEscape","MessengerDialog.react","MessengerEnvironment","MNCommerceAttachmentConstants","React","XUIDialog.react","createReactClass_DEPRECATED","emptyFunction","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=b("createReactClass_DEPRECATED")({displayName:"MNCommerceDialog",propTypes:{onToggle:b("prop-types").func,shown:b("prop-types").bool,width:b("prop-types").number.isRequired},getDefaultProps:function(){return{onToggle:b("emptyFunction"),repositionOnUpdate:!0,shown:!0,width:b("MessengerEnvironment").messengerui?b("MNCommerceAttachmentConstants").MDOTCOMDIALOG.WIDTH:b("MNCommerceAttachmentConstants").DIALOG.WIDTH}},componentDidUpdate:function(){this.props.repositionOnUpdate&&setTimeout(function(){this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer&&this.refs.dialog.layer.updatePosition()}.bind(this),0)},render:function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialog.react"):b("XUIDialog.react");return h.jsx(c,babelHelpers["extends"]({behaviors:{LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")}},this.props,{className:b("joinClasses")(this.props.className,a?"_3rx0":""),ref:"dialog",children:this.props.children}))}});e.exports=a}),null);
__d("MNCommerceDialogBody.react",["MessengerDialogBody.react","MessengerEnvironment","React","XUIDialogBody.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;a=a?b("MessengerDialogBody.react"):b("XUIDialogBody.react");return g.jsx(a,babelHelpers["extends"]({},this.props,{children:this.props.children}))};return c}(g.Component);e.exports=a}),null);
__d("MNCommerceDialogTitle.react",["MessengerDialogHeaderReact.re","MessengerEnvironment","React","XUIDialogTitle.react"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerDialogHeaderReact.re").make,h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;a=a?g:b("XUIDialogTitle.react");return h.jsx(a,babelHelpers["extends"]({},this.props,{children:this.props.children}))};return c}(h.Component);e.exports=a}),null);
__d("MNCommerceDetailsDialog.react",["cx","fbt","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogTitle.react","React","XUIButton.react","XUISpinner.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(){return i.jsxs("div",{className:"_4y9b",children:[i.jsx("p",{className:"_4y9c",children:h._("Sorry, something went wrong")}),i.jsx("p",{className:"_4y9d",children:d.props.errorMessage}),i.jsx(b("XUIButton.react"),{onClick:d.props.onTryAgain,label:h._("Try Again")})]})},d.$1=function(){return i.jsx("div",{className:"_4y9e",children:i.jsx(b("XUISpinner.react"),{background:"light",size:"large",paused:!1})})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=null;this.props.loading?a=this.$1():this.props.error?a=this.$2():a=this.props.children;return i.jsxs(b("MNCommerceDialog.react"),{className:this.props.className,modal:!0,onToggle:this.props.onToggle,shown:this.props.shown,children:[this.$3(),i.jsx(b("MNCommerceDialogBody.react"),{useCustomPadding:!0,children:a})]})};d.$3=function(){return this.props.title?i.jsx(b("MNCommerceDialogTitle.react"),{children:this.props.title}):null};return c}(i.Component);a.propTypes={error:(c=b("prop-types")).object,errorMessage:c.node,loading:c.bool.isRequired,onToggle:c.func,onTryAgain:c.func,title:c.node,shown:c.bool.isRequired};a.defaultProps={shown:!1};e.exports=a}),null);
__d("MNCommerceDialogFooter.react",["cx","MessengerDialogFooter.react","MessengerEnvironment","React","XUIDialogFooter.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialogFooter.react"):b("XUIDialogFooter.react"),d,e=this.props.children;a&&(d=h.Children.count(this.props.children),e=h.Children.map(this.props.children,function(a,c){return!a?null:h.cloneElement(a,{className:b("joinClasses")(a.props.className,"_4ec0"),type:c===0&&d===2?"secondary":"primary"})}));return h.jsx(c,babelHelpers["extends"]({},this.props,{children:e}))};return c}(h.Component);e.exports=a}),null);
__d("MNCommercePromotionManageBlockDialog.react",["fbt","CurrentUser","Link.react","MessengerEnvironment","MessengerRadioList.react","MNCommerceButton.react","MNCommerceDetailsDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","MNCommerceBlockTypeJSInstance","prop-types","React","URI","WorkModeConfig","XUIRadioList.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("MessengerRadioList.react").Item,j=b("React"),k=b("XUIRadioList.react").Item;a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c){var d;d=a.call(this,b,c)||this;d.onTypeChange=function(a){d.setState({type:a})};d.$3=function(a){a=d.props;a.onToggle(!1);if(!a.onConfirmButtonClick)return;var b=a.pageID;a.onConfirmButtonClick(b,d.state.type)};d.state=d.$1();return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.$1(a))};d.$1=function(a){a=a||this.props;var c=b("MNCommerceBlockTypeJSInstance").ALL;(a.isAllBlocked||a.isPromotionBlocked)&&(c=b("MNCommerceBlockTypeJSInstance").NONE);return{type:c}};d.render=function(){var a=this.props.merchantName||"";a=g._("Manage messages from {label for merchant name}",[g._param("label for merchant name",a)]);var c=g._("Cancel"),d=g._("Confirm"),e=g._("Manage Options couldn't be shown."),f=b("CurrentUser").isWorkUser()?new(h||(h=b("URI")))("https://facebook.com/help/work/1731361900459513").setSubdomain(b("WorkModeConfig").company_subdomain||""):new(h||(h=b("URI")))("https://www.facebook.com/help/389645087895231");f=j.jsx(b("Link.react"),{href:f,target:"_blank",children:g._("Learn more")});return j.jsxs(b("MNCommerceDetailsDialog.react"),babelHelpers["extends"]({errorMessage:e,onToggle:this.props.onToggle,shown:this.props.shown},this.props,{children:[j.jsx(b("MNCommerceDialogTitle.react"),{showCloseButton:!0,children:a}),j.jsx(b("MNCommerceDialogBody.react"),{children:this.$2()}),j.jsxs(b("MNCommerceDialogFooter.react"),{leftContent:f,children:[j.jsx(b("MNCommerceButton.react"),{label:c,onClick:this.props.onCancelButtonClick,use:"default"}),j.jsx(b("MNCommerceButton.react"),{label:d,onClick:this.$3,use:"confirm"})]})]}))};d.$2=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerRadioList.react"):b("XUIRadioList.react");a=a?i:k;return j.jsxs(c,{selectedValue:this.state.type,onValueChange:this.onTypeChange,children:[j.jsx(a,{value:b("MNCommerceBlockTypeJSInstance").ALL,children:g._("Receive all messages")}),j.jsx(a,{value:b("MNCommerceBlockTypeJSInstance").NONE,children:g._("Turn off all messages")})]})};return c}(j.Component);a.propTypes={isAllBlocked:(c=b("prop-types")).bool,isPromotionBlocked:c.bool,error:c.object,loading:c.bool.isRequired,merchantName:c.string,onCancelButtonClick:c.func,onConfirmButtonClick:c.func.isRequired,pageID:c.string};e.exports=a}),null);
__d("MNCommerceCacheTimeoutLimits",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SUCCESS_TIMEOUT:10,ERROR_TIMEOUT:1});e.exports=a}),null);
__d("MNCommercePromotionStateDataManager",["AsyncRequest","MNCommercePromotionStateActions","XMNCommercePromotionStateController"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.fetchPromotionState=function(a){a=b("XMNCommercePromotionStateController").getURIBuilder().setString("page_id",a).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$1).setErrorHandler(this.$2).send()};c.$1=function(a){var c=a.getRequest().uri.getQueryData();c=c.page_id;a.payload.pageID=c;b("MNCommercePromotionStateActions").stateLoaded(a.payload)};c.$2=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MNCommercePromotionStateActions").stateLoadError(a)};return a}();e.exports=new a()}),null);
__d("MNCommercePromotionStateStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommercePromotionStateDataManager"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("MessengerDispatcher"))||this;c.$MNCommercePromotionStateStore1=new(b("Cache"))();return c}var d=c.prototype;d.__onDispatch=function(a){var c=a.type,d=a.pageID||a.state&&a.state.pageID;switch(c){case b("MNCommerceActionTypes").PROMOTION_STATE.LOADED:c=a.state;this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").withValue(c),null,b("MNCommerceCacheTimeoutLimits").SUCCESS_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").PROMOTION_STATE.LOAD_ERROR:this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").empty().setError(new Error("Unable to load permissions for: "+d)),null,b("MNCommerceCacheTimeoutLimits").ERROR_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").PROMOTION_STATE.RELOAD:d&&(this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").loading()),b("MNCommercePromotionStateDataManager").fetchPromotionState(d));this.__emitChange();break}};d.getPromotionState=function(a){a&&!this.$MNCommercePromotionStateStore1.has(a)&&(this.$MNCommercePromotionStateStore1.set(a,b("LoadObject").loading().setValue({pageID:a})),b("MNCommercePromotionStateDataManager").fetchPromotionState(a));return this.$MNCommercePromotionStateStore1.get(a)||b("LoadObject").empty()};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("MNCommercePromotionManageBlockDialogContainer.react",["MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialog.react","MNCommercePromotionStateActions","MNCommercePromotionStateStore","PureStoreBasedStateMixin","React","createReactClass_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=b("createReactClass_DEPRECATED")({displayName:"MNCommercePromotionManageBlockDialogContainer",mixins:[b("PureStoreBasedStateMixin")(b("MNCommercePromotionStateStore"))],statics:{calculateState:function(){var a=b("MNCommerceDialogStateStore").getState(),c=null;a&&(c=a.pageID);var d=b("MNCommercePromotionStateStore").getPromotionState(c);return{shown:!!a,loading:d.isLoading(),pageID:c,promotionState:d.getValue(),error:d.getError()}}},render:function(){var a=this.state.promotionState;return g.jsx(b("MNCommercePromotionManageBlockDialog.react"),{error:this.state.error,isAllBlocked:a&&a.is_all_blocked,isPromotionBlocked:a&&a.is_promotion_blocked,loading:this.state.loading,merchantName:a&&a.name,onCancelButtonClick:this._hideDialog,onToggle:this._onToggle,pageID:this.state.pageID,onTryAgain:this._onTryAgainClick,onConfirmButtonClick:this._handleConfirmButtonClick,shown:this.state.shown})},_onToggle:function(a){a||this._hideDialog()},_onTryAgainClick:function(){b("MNCommercePromotionStateActions").stateReload(this.state.pageID)},_hideDialog:function(){b("MNCommerceDialogStateActions").hideDialog()},_handleConfirmButtonClick:function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)}});e.exports=a}),null);
__d("MNCommerceUnlinkDataManager",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.unlink=function(a,b){};return a}();e.exports=new a()}),null);
__d("MNCommerceUnlinkDialog.react",["fbt","MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=g._("Cancel"),c=g._("Turn Off");return h.jsxs(b("MNCommerceDialog.react"),{onToggle:this.props.onToggle,shown:this.props.shown,children:[h.jsx(b("MNCommerceDialogTitle.react"),{showCloseButton:!1,children:g._("Unlink account?")}),h.jsx(b("MNCommerceDialogBody.react"),{children:h.jsx("div",{children:g._("You can turn off updates if you haven't signed up or just no longer want to get them.")})}),h.jsxs(b("MNCommerceDialogFooter.react"),{children:[h.jsx(b("MNCommerceButton.react"),{label:a,onClick:this.props.onCancelButtonClick,use:"default"}),h.jsx(b("MNCommerceButton.react"),{label:c,onClick:this.props.onTurnOffButtonClick,use:"confirm"})]})]})};return c}(h.Component);a.propTypes={onCancelButtonClick:b("prop-types").func,onTurnOffButtonClick:b("prop-types").func};e.exports=a}),null);
__d("MNCommerceUnlinkErrorDialog.react",["fbt","MNCommerceAttachmentConstants","MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","MNCommerceErrors","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=g._("OK"),c=null,d=null;switch(this.props.errorType){case b("MNCommerceErrors").ALREADY_UNLINKED:d=h.jsx("div",{children:g._("Updates are already off")});c=h.jsx("div",{children:g._("You aren't getting updates in Messenger.")});break;default:d=h.jsx("div",{children:g._("Couldn't turn off updates")});c=h.jsx("div",{children:g._("Sorry, something went wrong. Please try again.")});break}return h.jsxs(b("MNCommerceDialog.react"),{onToggle:this.props.onToggle,shown:this.props.shown,width:b("MNCommerceAttachmentConstants").UNLINK_ERROR_DIALOG.WIDTH,children:[h.jsx(b("MNCommerceDialogTitle.react"),{children:d}),h.jsx(b("MNCommerceDialogBody.react"),{children:c}),h.jsx(b("MNCommerceDialogFooter.react"),{children:h.jsx(b("MNCommerceButton.react"),{label:a,onClick:this.props.onOkayButtonClick,use:"confirm"})})]})};return c}(h.Component);a.propTypes={errorType:b("prop-types").number,onOkayButtonClick:b("prop-types").func};e.exports=a}),null);
__d("MNCommerceUnlinkDialogContainer.react",["BanzaiLogger","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggingConstants","MNCommerceUnlinkDialog.react","MNCommerceUnlinkErrorDialog.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){a||d.$2()},d.$2=function(){b("MNCommerceDialogStateActions").hideDialog()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("MNCommerceDialogStateStore").getState();if(a&&a.errorType){b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:"dialog_load_success",debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.UNLINK_ERROR})});return g.jsx(b("MNCommerceUnlinkErrorDialog.react"),{onToggle:this.$1,shown:!!a,errorType:a.errorType,onOkayButtonClick:this.$2})}else{b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:"dialog_load_success",debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.UNLINK})});return g.jsx(b("MNCommerceUnlinkDialog.react"),{onToggle:this.$1,shown:!!a,onCancelButtonClick:this.$2,onTurnOffButtonClick:a&&a.onTurnOffButtonClick})}};return c}(g.Component);e.exports=a}),null);
__d("MNCommerceLogMessageUtils",["cx","fbt","invariant","BanzaiLogger","CurrentUser","Link.react","MercuryIDs","MessengerEnvironment","MessengerState.bs","MNCommerceDialogStateActions","MNCommerceLoggingConstants","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialogContainer.react","MNCommerceReplyTypes","MNCommerceUnlinkDataManager","MNCommerceUnlinkDialogContainer.react","React","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(){function a(){}var c=a.prototype;c.isCommercePageAdminMessage=function(a){return!!(a&&a.log_message_data&&(a.log_message_data.replyType===b("MNCommerceReplyTypes").COMMERCE_LINK||a.log_message_data.replyType===b("MNCommerceReplyTypes").COMMERCE_UNLINK))};c.getCommercePageManage=function(a,c){var d=this,e=null;if(b("gkx")("678671")){var f=function(){var c=b("MercuryIDs").getUserIDFromParticipantID(a.author);d.openManageMessagesDialog(a,c);b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:"dialog_opened",debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.MANAGE})})};e=this.getManageLink(f,c)}else if(a.log_message_data.replyType===b("MNCommerceReplyTypes").COMMERCE_LINK){f=function(){var c=b("MercuryIDs").getUserIDFromParticipantID(a.author),d=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),a.thread_id);d||i(0,3713,a.thread_id);var e=null;d.participants.every(function(c){if(c!==a.author){e=b("MercuryIDs").getUserIDFromParticipantID(c);return!1}return!0});d=function(){b("MNCommerceDialogStateActions").hideDialog(),b("MNCommerceUnlinkDataManager").unlink(c,e)};b("MNCommerceDialogStateActions").showDialog(b("MNCommerceUnlinkDialogContainer.react"),{onTurnOffButtonClick:d});b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:"dialog_opened",debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.UNLINK})})};e=j.jsx(b("Link.react"),{className:(c?"":"_2w2m")+(c?" _1jvn":""),onClick:f,children:h._("Turn off")})}return j.jsxs("span",{children:[a.log_message_body," ",e]})};c.openManageMessagesDialog=function(a,c){a=function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)};b("MNCommerceDialogStateActions").showDialog(b("MNCommercePromotionManageBlockDialogContainer.react"),{pageID:c,onConfirmButtonClick:a})};c.getManageLink=function(a,c){return j.jsx(b("Link.react"),{className:(c?"":"_2w2m")+(c?" _1jvn":""),onClick:a,children:h._("Manage messages")})};c.getThreadResurrectionManage=function(a){var c=this,d=a.other_user_fbid,e=function(){return c.openManageMessagesDialog(a,d)};e=this.getManageLink(e,b("MessengerEnvironment").messengerui);return j.jsxs("span",{children:[a.log_message_body," ",e]})};c.isThreadResurrectionXMAT=function(a){a=(a=a)!=null?(a=a.log_message_data)!=null?a.message_type:a:a;return a==="messenger_thread_resurrection_notice"};return a}();e.exports=new a()}),null);
__d("MessengerGamesCustomUpdateAdmin.react",["cx","fbt","Image.react","Link.react","MessengerButtonReact.re","MessengerContactImageReact.bs","React","RelayModern","MessengerGamesCustomUpdateAdmin_gameInfo.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("MessengerButtonReact.re").make,k=b("MessengerContactImageReact.bs").jsComponent,l=b("React");a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.data.getImageURL(),c=this.props.data.getText(),d=this.props.data.getTitle()?this.props.data.getTitle():h._("Play");return!this.props.gameInfo?l.jsx("span",{children:c}):l.jsxs("div",{children:[l.jsx(b("Link.react"),{className:"_fy2 _2621","aria-haspopup":"true","aria-label":h._("View Less"),href:"#",onClick:this.props.hideAdmin,role:"button"}),l.jsxs("div",{className:"_261_",children:[l.jsx(k,{size:25,src:this.props.gameInfo.iconURI}),l.jsx("h2",{className:"_2620",children:this.props.gameInfo.name})]}),l.jsxs("div",{className:"_3rpv",children:[l.jsx(b("Image.react"),{className:"_3rp-",onClick:this.props.playGame,src:a}),l.jsx("div",{className:"_3rp_",children:c}),l.jsx("div",{className:"_3cnr",children:l.jsx(j,{className:"_3rq0 _fy2",label:d,onClick:this.props.playGame,type:"primary",use:"default"})})]})]})};return c}(l.Component);e.exports=a(c,{gameInfo:i!==void 0?i:i=b("MessengerGamesCustomUpdateAdmin_gameInfo.graphql")})}),null);
__d("MessengerGamesCustomUpdateAdminContainer.react",["fbt","MessengerGamesCustomUpdateAdmin.react","React","RelayFBEnvironment","RelayModern","MessengerGamesCustomUpdateAdminContainerQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j=b("RelayModern").QueryRenderer;b("RelayModern").graphql;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this;return i.jsx(j,{environment:b("RelayFBEnvironment"),query:h!==void 0?h:h=b("MessengerGamesCustomUpdateAdminContainerQuery.graphql"),variables:{gameID:this.props.gameID},render:function(c){var d=c.error;c=c.props;if(d)return i.jsx("div",{children:g._("Failed to load")});else if(c){d=c.node&&c.node.gameInfo;return!d?i.jsx("div",{children:a.props.text}):i.jsx(b("MessengerGamesCustomUpdateAdmin.react"),babelHelpers["extends"]({},a.props,{gameInfo:d}))}return a.props.renderLoading()}})};return c}(i.Component);e.exports=a}),null);
__d("MessengerGamesCustomUpdateData",["GamesQuicksilverContextKey","URI"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a){var c;this.$1=null;this.$2=(c=a.custom_image_url)!=null?c:null;this.$4=(c=(c=(c=a.text)!=null?c:a.collapsed_text)!=null?c:a.expanded_text)!=null?c:"";this.$5=a.cta_title;this.$6=(c=a.template)!=null?c:null;c=new(g||(g=b("URI")))(a.cta_url).getQueryData();this.$3=c.payload||null;a=c.context_id||null;c=c.context_type;c&&(this.$1=new(b("GamesQuicksilverContextKey"))({id:null,size:null,sourceID:a,type:c}))}var c=a.prototype;c.getContextKey=function(){return this.$1};c.getImageURL=function(){return this.$2};c.getPayload=function(){return this.$3};c.getTitle=function(){return this.$5};c.getText=function(){return this.$4};c.getTemplate=function(){return this.$6};return a}();e.exports=a}),null);
__d("MessengerGameAdminMessage.react",["cx","fbt","AppCustomEventType","Bootloader","ImmutableObject","InstantGamesAnalyticsLogger","Link.react","MercuryIDs","MessengerDialogs.bs","MessengerGamesCustomUpdateAdminContainer.react","MessengerGamesCustomUpdateData","React","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state=d.$1(),d.renderText=function(){return i.jsxs("span",{children:[i.jsxs("span",{children:[d.props.text," "]}),i.jsx(b("Link.react"),{className:"_fy2",onClick:d.state.isExpanded?d.$2:d.$4,children:h._("View")})]})},d.$3=function(){if(d.state.playerOpen)return;b("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react"],function(a){b("MessengerDialogs.bs").showDialog(function(){var c=d.getXMATData(),e=c.update_data?JSON.parse(c.update_data):c;e=new(b("MessengerGamesCustomUpdateData"))(e);c.update_type==="custom_message"&&d.$5(c.game_id,e);var f=b("MercuryIDs").getThreadFBIDFromThreadID(d.props.message.thread_id),g="SOLO",h=null,j=e.getContextKey();j?(g=j.getType(),h=j.getSourceID()):f&&(g="THREAD",h=f);return i.jsx(a,{initialContextSourceID:h,initialContextType:g,initialEntryPointData:e.getPayload()||void 0,initialGameID:c.game_id,onHide:d.$6,initialSource:"admin_message",sourceID:f,invitationID:d.props.message.message_id,threadID:d.props.message.thread_id},c.game_id)})},"MessengerGameAdminMessage.react");d.setState({playerOpen:!0})},d.$6=function(){b("MessengerDialogs.bs").removeAllDialogs(),d.setState({playerOpen:!1})},d.$4=function(){d.setState({isExpanded:!0})},d.$2=function(){d.setState({isExpanded:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(){return{isExpanded:this.props.isLastOfType,playerOpen:!1}};d.componentDidMount=function(){this.props.onLoad&&this.props.onLoad()};d.UNSAFE_componentWillReceiveProps=function(a){this.props.isLastOfType!==a.isLastOfType&&this.setState({isExpanded:a.isLastOfType})};d.getXMATData=function(){return this.props.message.log_message_data&&this.props.message.log_message_data.untypedData?new(b("ImmutableObject"))(this.props.message.log_message_data.untypedData):new(b("ImmutableObject"))()};d.render=function(){var a=this.getXMATData(),c=null;switch(a.update_type){case"custom_message":var d=a.update_data?JSON.parse(a.update_data):a;d=new(b("MessengerGamesCustomUpdateData"))(d);return this.state.isExpanded?i.jsx("span",{children:i.jsx(b("MessengerGamesCustomUpdateAdminContainer.react"),{data:d,gameID:a.game_id,hideAdmin:this.$2,playGame:this.$3,renderLoading:this.renderText,text:this.props.text})}):i.jsxs("span",{children:[this.renderText(),c]});default:return i.jsx("span",{children:this.props.text})}};d.$5=function(a,c){a=new(b("InstantGamesAnalyticsLogger"))(a);var d={};d.fb_instant_games_template_name=c.getTemplate();a.logCustomAppEvent(b("AppCustomEventType").FB_INSTANT_GAMES_UPDATE_CLICK,null,d)};return c}(i.Component);a.propTypes={message:b("prop-types").object.isRequired,text:b("prop-types").string.isRequired,isLastOfType:b("prop-types").bool.isRequired};e.exports=a}),null);
__d("MessengerGroupCreatePollButton.react",["CurrentUser","React"],(function(a,b,c,d,e,f){"use strict";b("React");function a(a){a.name;a.questionID;a.threadID;a=a.participants;var c=b("CurrentUser").getAccountID(),d=a.indexOf(c.toString())>=0;d&&a.splice(a.indexOf(c.toString()),1);return null}e.exports=a}),null);
__d("MessengerPollingFlyoutBootLoader.react",["cx","JSResource","LazyComponent.react","MessengerEnvironment","MessengerSpinner.react","React","ReasonBootloadOnRender.react","ReasonResource"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;return h.jsx(b("ReasonBootloadOnRender.react"),{component:h.jsx(b("LazyComponent.react"),{customColor:this.props.customColor,questionID:this.props.questionID,questionText:this.props.questionText,options:this.props.options,onSubmitHandler:this.props.onSubmitHandler}),loader:b("ReasonResource")(b("JSResource")("MessengerGroupPollingFlyoutReact.bs").__setRef("MessengerPollingFlyoutBootLoader.react")),placeholder:h.jsx("div",{className:"_8bt"+(a?"":" _5il4"),children:h.jsx(b("MessengerSpinner.react"),{color:"grey"})})})};return c}(h.PureComponent);e.exports=a}),null);
__d("MessengerPagesCommercePaymentEnabledAdminMessage.react",["cssVar","cx","fbt","ix","Image.react","Link.react","MessengerEnvironment","PagesCommerceBuyerNUXDialog.react","React","cxMargin"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={showDialog:!1},c.$1=function(){c.setState({showDialog:!1})},c.$2=function(){c.setState({showDialog:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;return k.jsxs("div",{className:a?"_2piv":"",children:[k.jsx(b("Image.react"),{className:"_3-96",src:j("275999")}),k.jsx("div",{children:this.props.message.log_message_body}),k.jsx("div",{className:"_3-8w",children:k.jsx(b("Link.react"),{onClick:this.$2,style:{color:"#0084ff",textDecoration:"none"},children:i._("Learn more")})}),k.jsx(b("PagesCommerceBuyerNUXDialog.react"),{isShown:this.state.showDialog,onConfirm:this.$1})]})};return c}(k.PureComponent);e.exports=a}),null);
__d("MessengerReminderAdminMessage.react",["cx","fbt","AsyncRequest","CurrentUser","EventPlanStrings","EventReminderConstants","EventsMessengerComActionContextJSConfig","FBJSON","MessengerButtonReact.re","React","XEventReminderRSVPController","formatDate","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerButtonReact.re").make,j=b("React"),k=b("EventReminderConstants").GuestStates;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.guest_state_list:a:a:a;if(typeof a==="string")try{a=JSON.parse(a)}catch(a){return[]}return Array.isArray(a)?a:[]};d.$2=function(){return this.$1().filter(function(a){return a.guest_list_state==="GOING"}).length};d.$3=function(){var a=this.$2();return j.jsx("div",{className:"_3wan"+(this.props.isMessenger?"":" _3wao"),children:b("EventPlanStrings").getSubtitle(a,null,!1)})};d.$4=function(){var a=this,c;if(!this.props.isMessenger)return null;c=(c=this.props.message)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;if(c==="lightweight_event_delete")return null;c=this.$5();if(!c)return null;var d=Math.floor(Date.now()/1e3);if(c<=d)return null;c="INVITED";d=this.$1();for(var e=0;e<d.length;e++)d[e].node&&d[e].node.id===b("CurrentUser").getID()&&(c=d[e].guest_list_state);e=h._("Going");d=h._("Can't go");return j.jsxs("div",{className:"_3waq",children:[j.jsx("div",{className:"_3war",children:j.jsx(i,{className:"_3waw"+(c==="GOING"?" _3wat":""),onClick:function(b){b.stopPropagation(),a.$6(k.GOING)},label:e,type:"primary",use:"default"})}),j.jsx("div",{className:"_3wax",children:j.jsx(i,{className:"_3waw"+(c==="DECLINED"?" _3wat":""),onClick:function(b){b.stopPropagation(),a.$6(k.DECLINED)},label:d,type:"primary",use:"default"})})]})};d.$6=function(a){var c;c=(c=this.props.message)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;if(!c)return;var d={action_history:[{surface:b("EventsMessengerComActionContextJSConfig").messenger_com,mechanism:b("EventsMessengerComActionContextJSConfig").reminder_admin_text}]};c=b("XEventReminderRSVPController").getURIBuilder().setInt("event_reminder_id",c).setEnum("guest_state",a).setString("acontext",b("FBJSON").stringify(d));new(b("AsyncRequest"))(c.getURI()).send()};d.$5=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_time:a:a:a;if(!a)return null;typeof a==="string"&&(a=parseInt(a,10));return a};d.$7=function(){var a,c=this.$5();if(!c)return[null,null];a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_end_time:a:a:a;typeof a==="string"?a=parseInt(a,10):typeof a!=="number"&&(a=0);var d=Math.floor(Date.now()/1e3),e=b("formatDate")(c,"j"),f=e[e.length-1]>="0"&&e[e.length-1]<=9,g=b("formatDate")(c,"M"),i=[];i.push(this.props.isMessenger?j.jsxs("div",{className:"_3way",children:[j.jsx("div",{className:"_3waz",children:g.toUpperCase()}),j.jsx("div",{className:"_3wa-"+(f?"":" _279y"),children:e})]}):null);c<=d&&d<=a?g=h._("Happening now"):g=b("EventPlanStrings").getDisplayDateAndTimeFBT(c);i.push(j.jsx("div",{className:"_3wan"+(this.props.isMessenger?"":" _3wao"),children:g}));return i};d.$8=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_title:a:a:a;return a?j.jsx("div",{className:"_3wb0"+(this.props.isMessenger?"":" _3wao"),children:a}):null};d.$9=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_location_name:a:a:a;return a?j.jsx("div",{className:"_3wan"+(this.props.isMessenger?"":" _3wao"),children:a}):null};d.render=function(){var a=this.props.message;a=a.log_message_body;if(!this.props.isLastOfType)return j.jsxs("span",{children:[" ",a," "]});var b=this.$3(),c=this.$4(),d=this.$7(),e=d[0];d=d[1];var f=this.$8(),g=this.$9();return j.jsxs("div",{children:[a,j.jsxs("div",{className:"_3wb1",children:[e,j.jsxs("div",{className:"_3wb3"+(this.props.isMessenger?"":" _3wb4"),children:[f,d,g||b]}),c]})]})};return c}(j.Component);a.propTypes={message:b("prop-types").object.isRequired,isLastOfType:b("prop-types").bool.isRequired,isMessenger:b("prop-types").bool.isRequired};e.exports=a}),null);
__d("PagesManagerActionType",["ImmutableObject","keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";a=new(b("ImmutableObject"))(b("keyMirrorRecursive")({LIST:{FETCH:"",FETCHED:"",UPDATED:"",LOAD_MORE:"",LOADING:"",PREVENT_SCROLL:"",SELECT:"",DESELECT_ALL:"",VIEW:"",INITIAL_VIEW:"",CLEAR_INITIAL_VIEW:"",SET_RESPONSE_DATA:"",CONTENT_SEARCH_SELECTED_INDEX:"",ITEM_FOLDER_CHANGE:"",TOGGLE_FOLDER_SELECTOR:"",TOGGLE_FILTER_SELECTOR:"",REMOVE_ITEM_FOLDER_CHANGE:"",BAN_STATUS_CHANGE:"",REMOVE_BAN_NOTICE:"",SET_THREAD_LABELS:"",SELECT_THREAD:"",BULK_SELECTION_TOGGLE:"",CLEAR_BULK_SELECTION:"",BULK_ACTION_RESULT:"",REMOVE_BULK_ACTION_RESULT:"",SET_INSTAGRAM_INBOX:"",LOADING_INSTAGRAM_INBOX:"",SET_INSTAGRAM_LOADING_ERROR:"",SET_CREATOR_STUDIO_INBOX_MESSENGER_RANKED_USERS_DATA:"",SET_CREATOR_STUDIO_INBOX_MESSENGER_RANKED_USERS_ERROR:""},NAVIGATION_UNIT:{CHANGE:"",CHANGE_PLATFORM:"",CHANGE_UTL_FOLDER:"",NOTIFICATION_COUNT_CHANGE:""},FILTER_PANEL:{TOGGLE_PANEL:""},LAYOUT:{HEIGHT_CHANGE:"",LIST_HEIGHT_CHANGE:"",FOOTER_HEIGHT_CHANGE:"",HEADER_HEIGHT_CHANGE:"",LIST_HEADER_HEIGHT_CHANGE:""},SEARCH:{TOGGLE:"",CHANGE_TYPE:"",CHANGE_SEARCH_TERM:"",IS_SEARCHING_CHANGED:"",ADD_SEARCH_CUSTOM_TAG:"",REMOVE_SEARCH_CUSTOM_TAG:"",FETCH_CUSTOM_TAG_THREAD_COUNTS:"",UPDATE_CUSTOM_TAG_THREAD_COUNTS:"",SELECT_CUSTOMER:"",CLEAR:"",CUSTOMER_SEARCH_DONE:"",LABEL:""},CTA:{CTA_ID_FETCH_SUCCESS:"",CTA_ID_FETCH_ERROR:""},COMMENTS:{CHANGE_TAB:"",MARK_ALL_ITEMS_AS_READ:""}}));e.exports=a}),null);
__d("PagesManagerDispatcher",["ReactDispatcher_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ReactDispatcher_DEPRECATED"))()}),null);
__d("PagesManagerStore",["FluxStore","PagesManagerActionType","PagesManagerDispatcher","PagesManagerInboxStore","immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,b("PagesManagerDispatcher"))||this;c.$PagesManagerStore6=null;c.$PagesManagerStore1=0;c.$PagesManagerStore2=0;c.$PagesManagerStore3=0;c.$PagesManagerStore4=[];c.$PagesManagerStore5=new Map();c.$PagesManagerStore8=0;c.$PagesManagerStore9=0;c.$PagesManagerStore10=0;c.$PagesManagerStore11=null;c.$PagesManagerStore12=b("immutable").Set();c.$PagesManagerStore13=!1;c.$PagesManagerStore14=null;return c}var d=c.prototype;d.__onDispatch=function(a){switch(a.type){case b("PagesManagerActionType").LIST.VIEW:this.$PagesManagerStore6=a.listItem;this.__emitChange();break;case b("PagesManagerActionType").LIST.SELECT:this.$PagesManagerStore15(a);this.__emitChange();break;case b("PagesManagerActionType").LAYOUT.HEIGHT_CHANGE:this.$PagesManagerStore2=a.layoutHeight;this.__emitChange();break;case b("PagesManagerActionType").LAYOUT.LIST_HEIGHT_CHANGE:this.$PagesManagerStore3=a.height;this.__emitChange();break;case b("PagesManagerActionType").LAYOUT.FOOTER_HEIGHT_CHANGE:this.$PagesManagerStore8=a.height;this.__emitChange();break;case b("PagesManagerActionType").LAYOUT.HEADER_HEIGHT_CHANGE:this.$PagesManagerStore9=a.height;this.__emitChange();break;case b("PagesManagerActionType").LAYOUT.LIST_HEADER_HEIGHT_CHANGE:this.$PagesManagerStore10=a.height;this.__emitChange();break;case b("PagesManagerActionType").LIST.DESELECT_ALL:this.$PagesManagerStore15({selectedRowsMap:new Map()});this.__emitChange();break;case b("PagesManagerActionType").LIST.INITIAL_VIEW:this.$PagesManagerStore16(a.item);break;case b("PagesManagerActionType").LIST.CLEAR_INITIAL_VIEW:this.$PagesManagerStore7=null;break;case b("PagesManagerActionType").LIST.SET_THREAD_LABELS:var c=a.currentThreadID?a.currentThreadID:this.$PagesManagerStore6;if(c!==null&&c!==void 0)if(this.$PagesManagerStore11)this.$PagesManagerStore11=this.$PagesManagerStore11.set(c,a.selectedThreadLabels);else{var d={};d[c]=a.selectedThreadLabels;this.$PagesManagerStore11=b("immutable").Map(d)}this.__emitChange();break;case b("PagesManagerActionType").LIST.SELECT_THREAD:this.$PagesManagerStore17(a.threadID,a.toggle)&&this.__emitChange();break;case b("PagesManagerActionType").LIST.BULK_SELECTION_TOGGLE:this.$PagesManagerStore18();this.__emitChange();break;case b("PagesManagerActionType").LIST.CLEAR_BULK_SELECTION:this.$PagesManagerStore19()&&this.__emitChange();break;case b("PagesManagerActionType").LIST.BULK_ACTION_RESULT:this.$PagesManagerStore20(a.result);this.__emitChange();break;case b("PagesManagerActionType").LIST.REMOVE_BULK_ACTION_RESULT:this.$PagesManagerStore21()&&this.__emitChange();break;default:return}};d.$PagesManagerStore16=function(a){this.$PagesManagerStore7=a,this.$PagesManagerStore6=a};d.$PagesManagerStore15=function(a){var b=this;if(Object.prototype.hasOwnProperty.call(a,"selectedRowsMap")){this.$PagesManagerStore5=a.selectedRowsMap;this.$PagesManagerStore4=Array.from(this.$PagesManagerStore5.keys());return}this.$PagesManagerStore4=a.selectedRows;a.rowsAdded.forEach(function(a){b.$PagesManagerStore5.set(a,!0)});a.rowsRemoved.forEach(function(a){b.$PagesManagerStore5.set(a,!1)})};d.$PagesManagerStore17=function(a,b){if(this.$PagesManagerStore12.has(a)!==b){this.$PagesManagerStore12=b?this.$PagesManagerStore12.add(a):this.$PagesManagerStore12.remove(a);return!0}return!1};d.$PagesManagerStore19=function(){if(!this.$PagesManagerStore12.isEmpty()){this.$PagesManagerStore12=this.$PagesManagerStore12.clear();return!0}return!1};d.$PagesManagerStore18=function(){this.$PagesManagerStore13=!this.$PagesManagerStore13,this.$PagesManagerStore13||(this.$PagesManagerStore12=b("immutable").Set())};d.$PagesManagerStore20=function(a){this.$PagesManagerStore14=a};d.$PagesManagerStore21=function(){this.$PagesManagerStore14=null};d.getLastBulkActionResult=function(){return this.$PagesManagerStore14};d.isBulkSelectionMode=function(){return this.$PagesManagerStore13};d.isThreadSelected=function(a){return this.$PagesManagerStore12.has(a)};d.getSelectedThreads=function(){return!b("PagesManagerInboxStore").shouldShowBulkActions()?b("immutable").Set():this.$PagesManagerStore12};d.getThreadLabelMap=function(){return this.$PagesManagerStore11};d.getViewingListItem=function(){return this.$PagesManagerStore6};d.getInitialViewingItem=function(){return this.$PagesManagerStore7};d.getLayoutHeight=function(){return this.$PagesManagerStore2};d.getListNavigationHeight=function(){return this.$PagesManagerStore3};d.getFooterHeight=function(){return this.$PagesManagerStore8};d.getHeaderHeight=function(){return this.$PagesManagerStore9};d.getListHeaderHeight=function(){return this.$PagesManagerStore10};d.getIsRowSelected=function(a){return this.$PagesManagerStore5.has(a)?this.$PagesManagerStore5.get(a):!1};d.getSelectedRows=function(){return this.$PagesManagerStore4};d.isSelectionMode=function(){return this.$PagesManagerStore4.length!==0};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a(b("PagesManagerDispatcher"))}),null);
__d("MercuryXMATRenderer",["cx","fbt","ix","ErrorBoundary.react","EventRemindersGating","FacepileRounded.react","Image.react","JSResource","Link.react","LinkCTAXMATAsyncLink.react","MercuryIDs","MessengerEnvironment","MessengerGameAdminMessage.react","MessengerGroupPollingAdminMessageReact.bs","MessengerPagesCommercePaymentEnabledAdminMessage.react","MessengerParticipants.bs","MessengerReminderAdminMessage.react","MessengerTextWithEntities.react","MNAdsMessageUtils","MNCommerceLogMessageUtils","PagesInboxAddDetailsToInteractionText.react","PagesManagerInboxStore","PagesMarkAsPaidMessagingActionText.react","QE2Logger","React","ServicesAppointmentOptOutRequestsAdminText.react","ServicesAppointmentReminderAdminText.react","ServicesLeadGenBookableServicesAdminText.react","WorkGalahadScrollToMessageEventEmitter","cxMargin","gkx","isWebGLEnabled","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MessengerGroupPollingAdminMessageReact.bs").jsComponent,k=b("React"),l=b("lazyLoadComponent")(b("JSResource")("MessengerIcebreakersVoteCastMessage.react").__setRef("MercuryXMATRenderer"));function m(a,c){return a?k.jsx(b("Image.react"),{className:"_6-fd _3-94",src:c}):null}function n(a){return a?null:k.jsx(b("Image.react"),{className:"_3-94",src:i("676168")})}a={renderText:function(a,c,d,e,f,g){var o;g=c.log_message_body?k.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:c.log_message_body}):null;o=(o=c)!=null?(o=o.log_message_data)!=null?o.message_type:o:o;switch(o){case"journey_prompt_color":g=h._("You need to be on the latest version of Messenger on a mobile device to pick a colour for this conversation.");break;case"journey_prompt_nickname":var p=null,q=b("MercuryIDs").getUserIDFromParticipantID(c.author);if(c.other_user_fbid&&q!==c.other_user_fbid){q=b("MercuryIDs").getParticipantIDFromUserID(c.other_user_fbid);p=b("MessengerParticipants.bs").getNow(q)}p&&p.short_name?g=h._("You need to be using the latest version of Messenger on a mobile device to set a nickname for {admin-text-message}.",[h._param("admin-text-message",p.short_name)]):g=h._("You need to be on the latest version of Messenger on a mobile device to set a nickname for yourself.");break;case"journey_prompt_like":g=h._("You need to be on the latest version of Messenger on a mobile device to pick an emoji for this conversation.");break;case"instant_game_update":b("gkx")("678262")&&b("isWebGLEnabled")()&&(g=k.jsx(b("MessengerGameAdminMessage.react"),{message:c,text:c.log_message_body,isLastOfType:d,onLoad:e}));break;case"ads_welcome_msg":break;case"ad_manage_message":b("MNAdsMessageUtils").isAdsAdminMessage(c)&&(g=b("MNAdsMessageUtils").getAdsPageManage(c,!1));break;case"work_invite_claimed":g=c.log_message_body?c.log_message_body:h._("You're now connected on Workplace Chat.");if(c.log_message_data.untypedData){q=c.log_message_data.untypedData.invite_recipient;p=c.log_message_data.untypedData.invite_sender;q=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(q));p=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(p));if(p!=null&&q!=null){q=[q,p];g=k.jsx(b("FacepileRounded.react"),{profiles:q,message:g,numProfilesToDisplay:2,className:"_8lx"})}}break;case"generic_new_connection":case"confirm_friend_request":p=o==="confirm_friend_request";q=c.log_message_data.untypedData;if(!q)break;o=p?q.friend_request_recipient:q.recipient_id;p=p?q.friend_request_sender:q.initiator_id;o=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(o));p=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(p));if(p==null||o==null)break;o=[o,p];p=q.friend_request_subtype||q.subtype;q=p&&p.toLowerCase()==="icebreaker"?k.jsx(b("ErrorBoundary.react"),{children:k.jsx(k.Suspense,{fallback:null,children:k.jsx(l,{message:c,onLoad:e,isLastOfType:d})})}):null;b("QE2Logger").logExposureForUser("messenger_growth_tombstone");g=k.jsxs("div",{children:[k.jsx(b("FacepileRounded.react"),{profiles:o,message:c.log_message_body,numProfilesToDisplay:2,className:"_8lx"}),q]});break;case"group_thread_created":break;case"group_poll":g=k.jsx(j,{customColor:a,message:c,isLastOfType:d,onLoad:e});break;case"pages_commerce_payment_enabled":g=k.jsx(b("MessengerPagesCommercePaymentEnabledAdminMessage.react"),{message:c});break;case"thread_customization_upsell":b("MessengerEnvironment").messengerui?g=h._("Customise this conversation: choose the colour, emoji and nicknames from the sidebar."):g=h._("Choose the colour, emoji and nicknames from the sidebar of your conversation on www.messenger.com.");break;case"pages_mark_as_paid":case"pages_mark_as_paid_new":p=c.log_message_data.untypedData;o=p&&p.user_id;q=p&&p.page_id;a=k.jsxs("div",{className:"_86l3",children:[k.jsx(b("Image.react"),{className:"_86kw",src:i("94379")}),h._("Only you can see this.")]});g=k.jsxs(k.Fragment,{children:[a,k.jsx(b("PagesMarkAsPaidMessagingActionText.react"),{pageID:q,detectionType:p?p.detection_type:null,message:c.log_message_body,messageID:c.message_id,isPageMessage:f,userID:o})]});break;case"page_thread_action_system_add_details":a=c.log_message_data.untypedData;q=a&&a.user_id;p=a&&a.page_id;o=a&&a.interaction_type;var r=a&&a.interaction_id;a=a&&a.should_show_cta;var s=k.jsxs("div",{className:"_86l3",children:[k.jsx(b("Image.react"),{className:"_86kw",src:i("94379")}),h._("Only you can see this.")]});g=k.jsxs("div",{children:[s,k.jsx(b("PagesInboxAddDetailsToInteractionText.react"),{defaultCurrency:b("PagesManagerInboxStore").getConfig().defaultCurrency,pageID:p,interactionID:r,interactionType:o,message:c.log_message_body,messageID:c.message_id,isPageMessage:f,userID:q,shouldShowCTA:!!a})]});break;case"ad_reply_message":g=b("MNAdsMessageUtils").getAdReplyAdminMessage(c);break;case"messenger_ad_context":g=b("MNAdsMessageUtils").getAdContextAdminMessage(c);break;case"post_shared_from_group":s=c.log_message_data.untypedData;p=s.post_uri;if(p!==null){r=h._("View post");g=k.jsxs("div",{children:[g," ",k.jsx(b("Link.react"),{href:p,children:r})]})}break;case"workchat_reminder_link_cta":var t=c.log_message_data.untypedData;o=function(){b("WorkGalahadScrollToMessageEventEmitter").emit("scrollToMessage",t.message_id)};g=k.jsxs("div",{children:[c.log_message_body," ",k.jsx(b("Link.react"),{href:"#",onClick:o,children:h._("View Message")})]});break;case"link_cta":q=c.log_message_data.untypedData;a=q.primary_text?q.primary_text:q.link_cta_xmat_primary_text;s=q.primary_text?q.cta_text:q.link_cta_xmat_cta_text;if(q.www_is_async_url){p=q.async_url;g=k.jsxs("div",{children:[a," ",k.jsx(b("LinkCTAXMATAsyncLink.react"),{text:s,uri:p})]})}else{r=q.primary_text?q.cta_url:q.link_cta_xmat_cta_url;g=k.jsxs("div",{children:[a," ",k.jsx(b("Link.react"),{href:r,children:s})]})}break;case"pages_platform_appointment_reminder":p=(o=c)!=null?(o=o.log_message_data)!=null?o.untypedData:o:o;q=p&&p.product_name;a=p&&p.start_time;r=p&&p.user_name;g=k.jsx(b("ServicesAppointmentReminderAdminText.react"),{isPageMessage:f,message:c.log_message_body,productName:q,startTime:a,timestamp:c.timestamp,userName:r});break;case"services_vertical_opt_out_requests":o=(s=c)!=null?(s=s.log_message_data)!=null?(s=s.untypedData)!=null?s.page_id:s:s:s;g=o&&k.jsx(b("ServicesAppointmentOptOutRequestsAdminText.react"),{message:c.log_message_body,pageID:o,userID:c.other_user_fbid});break;case"services_vertical_lead_gen_survey":f=(p=c)!=null?(p=p.log_message_data)!=null?(p=p.untypedData)!=null?p.page_id:p:p:p;g=f&&k.jsx(b("ServicesLeadGenBookableServicesAdminText.react"),{edit:!1,message:c.log_message_body,pageID:f});break;case"services_vertical_lead_gen_survey_edit":a=(q=c)!=null?(q=q.log_message_data)!=null?(q=q.untypedData)!=null?q.page_id:q:q:q;g=a&&k.jsx(b("ServicesLeadGenBookableServicesAdminText.react"),{edit:!0,message:c.log_message_body,pageID:a});break;case"messenger_group_sync_opt_in":break;case"lightweight_event_create":case"lightweight_event_update":case"lightweight_event_delete":case"lightweight_event_update_time":case"lightweight_event_update_title":case"lightweight_event_update_location":case"lightweight_event_notify_before_event":case"lightweight_event_notify":case"lightweight_event_rsvp":b("QE2Logger").logExposureForUser("omni_m_experiments_reminders");s=b("EventRemindersGating").omniMRenderXMATForAllReminderTypes||"M_REMINDER"===((r=c)!=null?(r=r.log_message_data)!=null?(r=r.untypedData)!=null?r.event_type:r:r:r)&&b("EventRemindersGating").omniMRenderXMATForMReminderType;s&&(g=k.jsx(b("MessengerReminderAdminMessage.react"),{message:c,isLastOfType:d,isMessenger:b("MessengerEnvironment").messengerui}));break;case"messenger_growth_generic_admin_text":o=c.log_message_data.untypedData;if(!o||!o.facepile_ids||o.facepile_ids.length!=2)break;p=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(o.facepile_ids[0]));f=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(o.facepile_ids[1]));q=[p,f];a=b("MessengerEnvironment").messengerui;r=o.title;s=o.description;p=o.cta_uri;f=a?60:40;q=k.jsx("div",{children:k.jsx(b("FacepileRounded.react"),{direction:"descending",profiles:q,message:"",numProfilesToDisplay:2,className:"_8lx",imageSize:f})});f=o.banner_uri!==null;var u=m(f,o.banner_uri),v=n(f);f=!a&&f;var w=null;o.is_two_way||(w=k.jsxs("div",{className:"_74da",children:[k.jsx(b("Image.react"),{className:"_74db",src:i("94379")}),h._("Only you can see this.")]}));g=k.jsxs("div",{children:[w,k.jsxs("div",{className:(f?"_6-fe":"")+(f?"":" _32xu"),children:[u,v,k.jsx("div",{className:"_32xz"+(a?" _6kxz":"")+(f?" _6-ff":""),children:r}),k.jsx("div",{className:"_32x-"+(f?" _6-ff":""),children:s}),q,p?k.jsx("div",{className:"_6u9q"+(f?" _6-ff":""),children:k.jsx(b("Link.react"),{href:p,children:h._("See Friendship")})}):null]})]});break;case"messenger_icebreaker_vote_cast":o=c.log_message_data.untypedData;if(!o)break;w=c.log_message_body;g=k.jsxs("div",{children:[w,k.jsx(b("ErrorBoundary.react"),{children:k.jsx(k.Suspense,{fallback:null,children:k.jsx(l,{message:c,onLoad:e,isLastOfType:d})})})]});break;case"messenger_thread_resurrection_notice":b("MNCommerceLogMessageUtils").isThreadResurrectionXMAT(c)&&(g=b("MNCommerceLogMessageUtils").getThreadResurrectionManage(c));break;default:break}return k.jsx("span",{children:g})}};e.exports=a}),null);
__d("MercurySyncPageEnvironment",["Arbiter","ChannelInitialData","ChannelManager","MercurySyncDeltaHandler","MessengerMQTTConnection"],(function(a,b,c,d,e,f){"use strict";b("ChannelManager").startChannelManager();function a(a,c){if(Object.keys(b("ChannelInitialData")).length===0&&JSON.stringify(b("ChannelInitialData"))===JSON.stringify({}))return;c||(c=0);b("MercurySyncDeltaHandler").getForFBID(a);b("MessengerMQTTConnection").addDeltaStream({fbid:a,irisSeqID:c.toString()});b("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:a,seqID:c})}function c(a){}e.exports={setUp:a,tearDown:c}}),null);
__d("MercuryPageServerRequests",["CurrentUser","MercuryAPIArgsSource","MercuryAssert","MercuryServerDispatcher","MercuryServerRequests","MercurySingletonProvider","MessagingTag","MessengerServerPayloadTransformer.bs","PagesMessagingPerfTypedLogger","PagesMessengerThreadUtils"],(function(a,b,c,d,e,f){"use strict";var g=b("MercuryAPIArgsSource").MERCURY;a=function(a){babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return h.getForFBID(a)};c.get=function(){return h.get()};function c(c){var d;d=a.call(this,c)||this;c={"/pages/messaging/thread_tag/add/":{request_user_id:c,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,batch_function:d.$MercuryPageServerRequests1,handler:function(a,b){return d.__handleUpdate(a,b)}},"/pages/messaging/thread_tag/remove/":{request_user_id:c,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,batch_function:d.$MercuryPageServerRequests1,handler:function(a,b){return d.__handleUpdate(a,b)}},"/pages/messaging/thread_tag/list/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.$MercuryPageServerRequests2(a,b)}},"/pages/messaging/thread_custom_tags/list/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.$MercuryPageServerRequests2(a,b)}},"/pages/messaging/create_note/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.__handleUpdate(a,b)}},"/pages/messaging/owner/list/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.$MercuryPageServerRequests2(a,b)}}};b("MercuryServerDispatcher").registerEndpoints(c);return d}var d=c.prototype;d.$MercuryPageServerRequests2=function(a,c){if(a.graphql_payload){var d=a.graphql_payload.map(function(c){return b("MessengerServerPayloadTransformer.bs").transformThread(a.viewer,c,a.for_page)});d={ordered_threadlists:a.ordered_threadlists,payload_source:a.payload_source,threads:d};this.__handleUpdate(d,c)}};d.$MercuryPageServerRequests1=function(a,b){var c=a?a.tag_name:b.tag_name;a=a?a.thread_ids:[];b=b?b.thread_ids:[];a=a.concat(b);b={tag_name:c,thread_ids:a};return b};d.addThreadFlag=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){a={thread_ids:[a],tag_name:"flag"};d.__sendRequest("/pages/messaging/thread_tag/add/",a)})};d.createNote=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(d);this.__threadIDMap.getServerIDFromClientID(d,function(b){b={body:a,message_id:c,other_user_fbid:b};e.__sendRequest("/pages/messaging/create_note/",b)})};d.fetchThreadlistInfo=function(c,d,e,f,h,i){e===void 0&&(e=b("MessagingTag").INBOX);h===void 0&&(h=g);var j={folder:e,offset:c,limit:d,tag_name:null,custom_tags_filter:null,custom_tags:[],enum_tag:"",owner:"",owner_filter:null};if(b("PagesMessengerThreadUtils").isPageSpecficEnumFilter(f)){j.tag_name=f;this.__sendRequest("/pages/messaging/thread_tag/list/",j);return}if(f&&b("PagesMessengerThreadUtils").isCustomTagsFilter(f)){j.custom_tags_filter=f;j.custom_tags=b("PagesMessengerThreadUtils").parseCustomTagsFilter(f);b("PagesMessengerThreadUtils").isCustomTagsWithFlagFilter(f)&&(j.enum_tag="flag");this.__sendRequest("/pages/messaging/thread_custom_tags/list/",j);return}if(f&&b("PagesMessengerThreadUtils").isOwnerFilter(f)){j.owner_filter=f;j.owner=b("PagesMessengerThreadUtils").parseOwnerFilter(f);this.__sendRequest("/pages/messaging/owner/list/",j);return}a.prototype.fetchThreadlistInfo.call(this,c,d,e,f,h,i)};d.removeThreadFlag=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){a={thread_ids:[a],tag_name:"flag"};d.__sendRequest("/pages/messaging/thread_tag/remove/",a)})};d.toString=function(){return"MercuryPageServerRequests"};d.__logMercurySendError=function(c){new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.__getFBID()).setEventName("messages_send_message_js_handle_error").setExceptionMessage(c.error_data.description).setExceptionCode(c.error_data.code).log(),a.prototype.__logMercurySendError.call(this,c)};d.__getForAsyncRequest=function(a){a=a.getData();a=a.request_user_id?a.request_user_id:b("CurrentUser").getID();return c.getForFBID(a)};return c}(b("MercuryServerRequests"));var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryPageMessageActions",["MercuryMessageActions","MercuryPageServerRequests","MercurySingletonMixin"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.__serverRequests=b("MercuryPageServerRequests").getForFBID(c);return d}var d=c.prototype;d.createNote=function(a,b,c){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({action_type:"ma-type:create-page-admin-note",message_id:c,note:a,thread_id:b},"client_create_page_admin_note")),this.__serverRequests.createNote(a.body.text,c,b)};return c}(b("MercuryMessageActions"));Object.assign(a,b("MercurySingletonMixin"),{_instances:{}});e.exports=a}),null);
__d("MercuryPageOrderedThreadlist",["MercuryOrderedThreadlist","MercuryPageServerRequests","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return g.getForFBID(a)};c.get=function(){return g.get()};function c(b){var c;c=a.call(this,b)||this;c.$MercuryPageOrderedThreadlist1=b;return c}var d=c.prototype;d.getServerRequests=function(){return b("MercuryPageServerRequests").getForFBID(this.$MercuryPageOrderedThreadlist1)};return c}(b("MercuryOrderedThreadlist"));var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryWECServerSendMessageQueue",["MercuryServerSendMessageQueue","MessengerAttachmentTransformer.bs","MessengerMessageTransformer.bs","XWECMessagingSendController"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__getSendURI=function(){return b("XWECMessagingSendController").getURIBuilder().getURI().toString()};d.handleSuccess=function(a,c){var d=this,e=(a.actions||[]).map(function(a){d.pending_message=null;var c=babelHelpers["extends"]({},a);if(a.graphql_payload&&a.graphql_payload.node){var e=a.graphql_payload.node.story_attachment;e={legacy_attachment_id:a.graphql_payload.node.legacy_attachment_id,story_attachment:e==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(e)};e=b("MessengerAttachmentTransformer.bs").transformAttachment(d.sender_id,{extensible_attachment:e,blob_attachments:[],sticker:null},a.message_id,!0);c=Object.assign(c,{attachments:e})}return c});a.actions=e;this.resumeAfterSuccess(a,c)};return c}(b("MercuryServerSendMessageQueue"));e.exports=a}),null);
__d("MercuryWECServerSendMessageQueueRouter",["MercurySingletonProvider","MercuryWECServerSendMessageQueue"],(function(a,b,c,d,e,f){"use strict";a=function(){a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.queues=new Map(),this.fbid=a}var c=a.prototype;c.enqueue=function(a,c,d,e){var f=this.queues.get(a);f===void 0&&(f=new(b("MercuryWECServerSendMessageQueue"))(this.fbid,a,c,d),this.queues.set(a,f));f.enqueue(e)};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryWECServerRequests",["MercuryAPIArgsSource","MercuryIDs","MercuryMessageClientState","MercuryPageServerRequests","MercuryServerDispatcher","MercurySingletonProvider","MercuryWECServerSendMessageQueueRouter"],(function(a,b,c,d,e,f){"use strict";var g=b("MercuryAPIArgsSource").MERCURY;a=function(a){babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return h.getForFBID(a)};c.get=function(){return h.get()};function c(c){var d;d=a.call(this,c)||this;d.$MercuryWECServerRequests1=c;c={"/wec/messaging/remove_group_participants/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.__handleUpdate(a,b)}}};b("MercuryServerDispatcher").registerEndpoints(c);return d}var d=c.prototype;d.sendNewMessage=function(a,c){c===void 0&&(c=g);if(a.client_state&&a.client_state!==b("MercuryMessageClientState").SEND_TO_SERVER)return;var d=b("MercuryIDs").tokenize(a.thread_id);a=babelHelpers["extends"]({},a,{thread_id:null,other_user_fbid:d.value});b("MercuryWECServerSendMessageQueueRouter").getForFBID(this.$MercuryWECServerRequests1).enqueue(a.other_user_fbid,this.__getSendMessageQueueOptions(),c,a)};d.leaveGroup=function(a){a={group_id:a,participant_ids:[this.$MercuryWECServerRequests1]};this.__sendRequest("/wec/messaging/remove_group_participants/",a)};return c}(b("MercuryPageServerRequests"));var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryWECMessageActions",["MercuryMessageActions","MercurySingletonMixin","MercuryWECServerRequests"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$MercuryWECMessageActions1=c;d.__serverRequests=b("MercuryWECServerRequests").getForFBID(c);return d}var d=c.prototype;d.leaveGroup=function(a){this.__serverRequests.leaveGroup(a)};return c}(b("MercuryMessageActions"));Object.assign(a,b("MercurySingletonMixin"),{_instances:{}});e.exports=a}),null);
__d("ChatAppointmentUtil",["fbt","DateTime","MercuryShareAttachmentRenderLocations","ServicesDateTimeUtils","getTimezoneAbbreviation"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.freeze({LONG_DATE_FORMAT:"l, M j, Y",SHORT_DATE_FORMAT:"D M j, y",TIME_FORMAT:"g:i A",LONG_DATE_TIME_FORMAT:"l, M j, Y g:ia",SHORT_DATE_TIME_FORMAT:"D M j, g:ia"}),i={getAbbreviationMonthText:function(a){switch(a.getMonth()){case 1:return g._("JAN");case 2:return g._("FEB");case 3:return g._("MAR");case 4:return g._("APR");case 5:return g._("MAY");case 6:return g._("JUN");case 7:return g._("JUL");case 8:return g._("AUG");case 9:return g._("SEP");case 10:return g._("OCT");case 11:return g._("NOV");case 12:return g._("DEC")}return null},getDateFormat:function(a){return a===b("MercuryShareAttachmentRenderLocations").CHAT||a===b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW?h.SHORT_DATE_FORMAT:h.LONG_DATE_FORMAT},getDateTimeFormat:function(a){return a===b("MercuryShareAttachmentRenderLocations").CHAT||a===b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW?h.SHORT_DATE_TIME_FORMAT:h.LONG_DATE_TIME_FORMAT},maybeAppendTimezone:function(a,c){return b("ServicesDateTimeUtils").isTimezoneDifferentThanLocal(c)?a+" ("+b("getTimezoneAbbreviation")(b("DateTime").now(c))+")":a},validateAppointment:function(a){return Boolean(a.product_item&&a.page)},isEndDayDifferentFromStartDay:function(a,c){var d=new(b("DateTime"))(a.start,c);a=new(b("DateTime"))(a.end,c);return d.getDayOfMonth()!==a.getDayOfMonth()},parseJSON:function(a){if(a===null||a===void 0||a.length===0)return null;try{return JSON.parse(a)}catch(a){return null}},renderDate:function(a,c,d){if(!a)return null;a=new(b("DateTime"))(a.start,c);return a.format(i.getDateFormat(d))},renderTimeRange:function(a,c,d){if(!a)return null;d=new(b("DateTime"))(a.start,c);a=new(b("DateTime"))(a.end,c);var e=h.TIME_FORMAT,f;d.equals(a)?f=d.format(e):f=d.format(e)+" - "+a.format(e);return this.maybeAppendTimezone(f,c)},renderDateTimeRange:function(a,c,d){if(!a)return null;a=new(b("DateTime"))(a.start,c);return a.format(i.getDateTimeFormat(d))},renderDateTime:function(a,b){return!a?null:a.format(i.getDateTimeFormat(b))},renderStartDateTime:function(a,c,d){if(!a)return null;a=new(b("DateTime"))(a.start,c);return this.maybeAppendTimezone(i.renderDateTime(a,d),c)},renderEndDateTime:function(a,c,d){if(!a)return null;a=new(b("DateTime"))(a.end,c);return this.maybeAppendTimezone(i.renderDateTime(a,d),c)}};e.exports=i}),null);
__d("ChatFileUploadLoggingUtils",["CurrentUser","WorkContentActivityTypedLogger"],(function(a,b,c,d,e,f){"use strict";a={log:function(a,c){c===void 0&&(c="CHAT_MAIN"),b("CurrentUser").isWorkUser()&&new(b("WorkContentActivityTypedLogger"))().setSurfaceType(c).setEvent("CHAT_FILE_UPLOAD").setAdditionalData({file_size:a.size.toString(),file_type:a.type}).log()}};e.exports=a}),null);
__d("curryRight",["curry","reverseArgs"],(function(a,b,c,d,e,f){"use strict";function a(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("reverseArgs")(b("curry").apply(void 0,[b("reverseArgs")(a)].concat(d)))}e.exports=a}),null);
__d("P2PGroupSendReceiptDialog.react",["cx","fbt","FacepileRounded.react","Image.react","Link.react","MessengerEnvironment","P2PAmountUtils","P2PBigAmount.react","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLinkConstants","P2PLogger","P2PText.react","React","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.handleClose=function(){c.log("UI_Actn_3rd_Party_Receipt_Dismissed"),c.props.onClose()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.log("UI_Actn_3rd_Party_Receipt_Shown",{raw_amount:this.props.amount})};d.getReceiverStatusMap=function(){var a;return this.props.individualRequests.reduce(function(a,b){switch(b.currentStatus){case 7:case 2:case 4:a[b.currentStatus].push(b);break;default:a[1].push(b);break}return a},(a={},a[2]=[],a[7]=[],a[1]=[],a[4]=[],a))};d.getRequestProfile=function(a){a=a.requestee||{};return{image_src:a.picture,name:a.full_name}};d.log=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:this.props.eventFlow},c))};d.renderBody=function(){return i.jsxs(b("P2PDialogBody.react"),{children:[i.jsxs("ul",{children:[this.renderParticipantRow(this.props.sender,!0),this.renderParticipantRow(this.props.receiver,!1)]}),this.renderReceiverStatusList(),i.jsx("div",{className:"_bpy",children:i.jsx(b("P2PBigAmount.react"),{amount:b("P2PAmountUtils").sanitizeAmount(this.props.amount),currencyCode:this.props.currencyCode,isPending:this.props.isGrayAmount,size:"large"})}),i.jsxs(b("P2PText.react"),{className:"_bpt",size:"small",type:"secondary",children:[this.props.bodyText," ",i.jsx(b("Link.react"),{className:"_1ed3",href:b("P2PLinkConstants").helpCenterURI,target:"_blank",children:h._("Learn More")})]})]})};d.renderParticipantRow=function(a,c){return!c&&this.props.individualRequests.length>1?null:i.jsxs("li",{className:"_2chg",children:[i.jsx("div",{className:"_2chh",children:i.jsx(b("Link.react"),{href:a.profile_uri,onClick:this.props.onClose,children:i.jsx(b("Image.react"),{height:50,src:a.picture,width:50})})}),i.jsx("div",{className:"_2chi",children:i.jsxs(b("P2PText.react"),{type:"primary",children:[i.jsx(b("P2PText.react"),{type:"secondary",children:this.renderParticipantText(c)}),a.full_name]})})]},a.id)};d.renderParticipantText=function(a){return a?h._("From"):h._("To")};d.renderReceiverStatusList=function(){if(this.props.individualRequests.length<2)return null;var a=this.getReceiverStatusMap();return i.jsxs("ul",{children:[this.renderStatus(a,4),this.renderStatus(a,2),this.renderStatus(a,1),this.renderStatus(a,7)]})};d.renderStatus=function(a,c){a=a[c].map(this.getRequestProfile);return a.length===0?null:i.jsxs("li",{className:"_5-av",children:[i.jsx(b("P2PText.react"),{className:"_2chi _2pir",type:"secondary",children:this.renderStatusText(c)}),i.jsx(b("FacepileRounded.react"),{className:"_3-8w",hoverBehavior:"name",imageSize:40,numProfilesToDisplay:9,profiles:a})]},c)};d.renderStatusText=function(a){switch(a){case 2:return h._("Declined");case 7:return h._("Expired");case 4:return h._("Paid");case 1:default:return h._("Pending")}};d.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?380:360,d=this.props.title;return i.jsxs(b("P2PDialog.react"),{className:a?"_bpv":"",layerHideOnBlur:!1,onToggle:this.props.onClose,width:c,children:[i.jsx(b("P2PDialogTitle.react"),{children:d}),this.renderBody(),i.jsx(b("P2PDialogFooter.react"),{children:i.jsx(b("P2PButton.react"),{label:h._("OK"),onClick:this.handleClose,type:"primary"})})]})};return c}(i.Component);a.defaultProps={bodyText:h._("You can send money to friends in groups."),eventFlow:"UI_Flow_P2P_Group_Send",individualRequests:[],isGrayAmount:!1,title:h._("Payment Details")};e.exports=a}),null);
__d("P2PGroupPaymentRequestReceiptDialog.react",["fbt","P2PActions","P2PGroupSendReceiptDialog.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("P2PGroupSendReceiptDialog.react"),{amount:this.props.amount,currencyCode:this.props.currencyCode,bodyText:g._("You can send payment requests to friends in groups"),eventFlow:"UI_Flow_P2P_Group_Request",individualRequests:this.props.individualRequests,isGrayAmount:!0,receiver:this.props.requestee,sender:this.props.requester,title:g._("Payment request details"),onClose:this.props.onClose||b("P2PActions").hideDialog})};return c}(h.Component);e.exports=a}),null);
__d("P2PMercuryLogMessage.react",["cx","fbt","CurrentUser","Link.react","MercuryIDs","MessengerEnvironment","P2PGroupPaymentRequestReceiptDialog.react","P2PGroupSendReceiptDialog.react","P2PPaymentLogMessageSubtype","React","ReactLayeredComponentMixin_DEPRECATED","XP2PPaymentRequestReceiptController","XP2PTransactionDetailController","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");c=b("createReactClass_DEPRECATED")({displayName:"P2PMercuryLogMessage",mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{amount:(a=b("prop-types")).string,receiver:a.object.isRequired,sender:a.object.isRequired,subtype:a.oneOf(Object.keys(b("P2PPaymentLogMessageSubtype")).map(function(a){return b("P2PPaymentLogMessageSubtype")[a]})),transferID:a.string.isRequired,threadFBID:a.string,threadID:a.string},getDefaultProps:function(){return{amount:"",sender:null,receiver:null,subtype:null}},getInitialState:function(){return{groupPaymentRequestReceiptDetailsShown:!1,groupSendReceiptDetailsShown:!1}},handleGroupDetailsLinkClicked:function(){this.setState({groupSendReceiptDetailsShown:!0})},handleGroupPaymentRequestDetailsLinkClicked:function(){this.setState({groupPaymentRequestReceiptDetailsShown:!0})},handleThirdPartyReceiptDialogClosed:function(){this.setState({groupPaymentRequestReceiptDetailsShown:!1,groupSendReceiptDetailsShown:!1})},isViewerSender:function(){var a=this.props.sender.id;return a&&b("MercuryIDs").getUserIDFromParticipantID(a)===b("CurrentUser").getID()},isViewerReceiver:function(){var a=this.props.receiver.id;return a&&b("MercuryIDs").getUserIDFromParticipantID(a)===b("CurrentUser").getID()},renderPaymentRequestDetailsLink:function(){var a=b("XP2PPaymentRequestReceiptController").getURIBuilder().setString("id",this.props.transferID).getURI();return i.jsx(b("Link.react"),{className:"_kiq",href:a,target:"_blank",children:h._("See details")})},renderTransferDetailsLink:function(){var a=b("XP2PTransactionDetailController").getURIBuilder().setString("id",this.props.transferID).getURI();return i.jsx(b("Link.react"),{className:"_kiq",href:a,target:"_blank",children:h._("See details")})},renderGroupDetailsLink:function(){return i.jsx(b("Link.react"),{className:"_kiq",href:"#",onClick:this.handleGroupDetailsLinkClicked,children:h._("See details")})},renderGroupPaymentRequestDetailsLink:function(){return i.jsx(b("Link.react"),{className:"_kiq",href:"#",onClick:this.handleGroupPaymentRequestDetailsLinkClicked,children:h._("See details")})},renderLayers:function(){var a={},c={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},d={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};this.state.groupSendReceiptDetailsShown?a.groupSendReceiptDetailsDialog=i.jsx(b("P2PGroupSendReceiptDialog.react"),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:c,sender:d}):this.state.groupPaymentRequestReceiptDetailsShown&&(a.groupPaymentRequestReceiptDetailsDialog=i.jsx(b("P2PGroupPaymentRequestReceiptDialog.react"),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,requestee:c,requester:d}));return a},render:function(){var a=null,c=this.props.amount,d=this.props.subtype,e=this.isViewerSender(),f=this.isViewerReceiver(),g;!e&&!f?g=this.renderGroupDetailsLink():g=this.renderTransferDetailsLink();switch(d){case"sent_in_group":a=h._("{sendername} sent {amount} to {receivername}. {details}",[h._param("sendername",this.props.sender.name),h._param("amount",c),h._param("receivername",this.props.receiver.name),h._param("details",g)]);break;case"canceled_expired":case"canceled_same_card":case"canceled_sender_risk":case"canceled_recipient_risk":case"canceled_customer_service":e?a=h._("Your payment of {amount} was cancelled. {details}",[h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):f?a=h._("{name}'s payment of {amount} was cancelled. {details}",[h._param("name",this.props.sender.name),h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):a=h._("{sender_name}'s payment of {amount} to {receiver_name} was cancelled. {details}",[h._param("sender_name",this.props.sender.name),h._param("amount",c),h._param("receiver_name",this.props.receiver.name),h._param("details",g)]);a=i.jsx("span",{className:"_5rdx",children:a});break;case"canceled_declined":e?a=h._("{name} didn't accept your payment of {amount}. {details}",[h._param("name",this.props.receiver.name),h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):f?a=h._("You didn't accept {name}'s payment of {amount}. {details}",[h._param("name",this.props.sender.name),h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):a=h._("{receiver_name} didn't accept {sender_name}'s payment of {amount}. {details}",[h._param("receiver_name",this.props.receiver.name),h._param("sender_name",this.props.sender.name),h._param("amount",c),h._param("details",g)]);a=i.jsx("span",{className:"_5rdx",children:a});break;case"request_canceled_by_requester":e?a=h._("You cancelled your request for {payment request amount}. {details}",[h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):f?a=h._("{sender's name} cancelled their request for {payment request amount}. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):a=h._("{sender's name} cancelled their request for {payment request amount} from {receiver's name}. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("receiver's name",this.props.receiver.name),h._param("details",this.renderGroupPaymentRequestDetailsLink())]);a=i.jsx("span",{className:"_5rdx",children:a});break;case"request_declined_by_requestee":e?a=h._("{receiver's name} declined your request for {payment request amount}. {details}",[h._param("receiver's name",this.props.receiver.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):f?a=h._("You declined {sender's name}'s request for {payment request amount}. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):a=h._("{receiver's name} declined {sender's name}'s request for {payment request amount}. {details}",[h._param("receiver's name",this.props.receiver.name),h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderGroupPaymentRequestDetailsLink())]);a=i.jsx("span",{className:"_5rdx",children:a});break;case"request_expired":e?a=h._("Your request for {payment request amount} expired, so it was cancelled. {details}",[h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):f?a=h._("{sender's name}'s request for {payment request amount} expired so it was cancelled. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):a=h._("{sender's name}'s request to {receiver's name} for {payment request amount} expired so it was cancelled. {details}",[h._param("sender's name",this.props.sender.name),h._param("receiver's name",this.props.receiver.name),h._param("payment request amount",c),h._param("details",this.renderGroupPaymentRequestDetailsLink())]);a=i.jsx("span",{className:"_5rdx",children:a});break}return i.jsx("div",{className:b("MessengerEnvironment").messengerui?"_5rdy":"",children:a})}});e.exports=c}),null);
__d("PagesMessageSuggestedResponseHandler",["invariant","ActorURI","AsyncRequest","XPagesMessagingSuggestedResponseController","XPagesMessagingSuggestedResponseFeedbackController","isEmpty"],(function(a,b,c,d,e,f,g){var h;a=function(){"use strict";function a(a,b){this.$2=a,this.$1=b,this.$3=!1,this.$5=!1}var c=a.prototype;c.requestSuggestedResponseAsync=function(a,c){var d=this;this.$3=!0;var e=b("XPagesMessagingSuggestedResponseController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(b("ActorURI").create(e,this.$1)).setData({message:this.$2.body}).setMethod("POST").setHandler(function(b){return d.$6(b.payload,a)}).setErrorHandler(c).send()};c.sendFeedback=function(a){this.hasReceviedSuggestedResponse()||g(0,1526);var c=b("XPagesMessagingSuggestedResponseFeedbackController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(b("ActorURI").create(c,this.$1)).setMethod("POST").setData({message_id:this.$4,accepted:a}).send()};c.$6=function(a,b){a.messageFound&&(this.$4=a.messageID),b(this.$2.message_id,a)};c.shouldBeTreatedAsRejected=function(){return!this.getHasBeenAccepted()&&this.hasReceviedSuggestedResponse()};c.hasReceviedSuggestedResponse=function(){return!(h||(h=b("isEmpty")))(this.$4)};c.alreadyRequested=function(){return this.$3};c.getMessageID=function(){return this.$2.message_id};c.getHasBeenAccepted=function(){return this.$5};return a}();e.exports=a}),null);
__d("MultiToggleButton.react",["cx","React","ShimButton.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.onClick(c.props.value)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return h.jsx(b("ShimButton.react"),{"aria-pressed":this.props.isChecked,className:"_2xzo"+(this.props.isChecked?" _2xzq":""),onClick:this.$1,children:this.props.label})};return c}(h.Component);e.exports=a}),null);
__d("MultiToggleButtonGroup.react",["cx","MultiToggleButton.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=b("joinClasses")("_3hf7",this.props.className);return h.jsx("div",{className:c,children:this.props.options.map(function(c){return h.jsx(b("MultiToggleButton.react"),{label:c.label,value:c.value,isChecked:a.props.selectedOptions.has(c.value),onClick:a.props.onOptionClicked},c.value)})})};return c}(h.Component);e.exports=a}),null);
__d("PagesDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("PagesSelectableSimpleListActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";a="PAGES_SELECTABLE_SIMPLE_LIST";c=b("keyMirrorRecursive")({ROW:{ALL_DESELECTED:"",ALL_SELECTED:"",SELECTED:""}},a);e.exports=c}),null);
__d("PagesSelectableSimpleListAction",["PagesDispatcher","PagesSelectableSimpleListActionType"],(function(a,b,c,d,e,f){"use strict";a={rowSelected:function(a,c){b("PagesDispatcher").dispatch({type:b("PagesSelectableSimpleListActionType").ROW.SELECTED,rowKey:a,selected:c})},selectAll:function(a,c){b("PagesDispatcher").dispatch({type:b("PagesSelectableSimpleListActionType").ROW.ALL_SELECTED,rowKeys:a,selected:c})},deselectAll:function(){b("PagesDispatcher").dispatch({type:b("PagesSelectableSimpleListActionType").ROW.ALL_DESELECTED})}};e.exports=a}),null);
__d("PagesSelectableSimpleListStore",["FluxStore","PagesDispatcher","PagesSelectableSimpleListActionType"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("PagesDispatcher"))||this;c.$PagesSelectableSimpleListStore1=new Map();return c}var d=c.prototype;d.__onDispatch=function(a){switch(a.type){case b("PagesSelectableSimpleListActionType").ROW.SELECTED:this.$PagesSelectableSimpleListStore2(a.rowKey,a.selected);this.__emitChange();break;case b("PagesSelectableSimpleListActionType").ROW.ALL_SELECTED:this.$PagesSelectableSimpleListStore3(a.rowKeys,a.selected);this.__emitChange();break;case b("PagesSelectableSimpleListActionType").ROW.ALL_DESELECTED:this.$PagesSelectableSimpleListStore1=new Map();this.__emitChange();break}};d.$PagesSelectableSimpleListStore2=function(a,b){b?this.$PagesSelectableSimpleListStore1.set(a,!0):this.$PagesSelectableSimpleListStore1["delete"](a)};d.$PagesSelectableSimpleListStore3=function(a,b){var c=this;a.forEach(function(a){return c.$PagesSelectableSimpleListStore2(a,b)})};d.isRowSelected=function(a){return this.$PagesSelectableSimpleListStore1.has(a)};d.getSelectedCount=function(){return this.$PagesSelectableSimpleListStore1.size};d.getSelectedRowsMap=function(){return this.$PagesSelectableSimpleListStore1};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesSelectableSimpleListCheckboxContainer.react",["FluxContainer","PagesSelectableListCheckbox.react","PagesSelectableSimpleListAction","PagesSelectableSimpleListStore","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("PagesSelectableSimpleListAction").selectAll(d.props.allRowKeysGetter(),!d.state.checked);var a=d.props.onChange;a&&a(b("PagesSelectableSimpleListStore").getSelectedRowsMap())},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("PagesSelectableSimpleListStore")]};c.calculateState=function(a,c){a=b("PagesSelectableSimpleListStore").getSelectedCount();var d;a===0?d=!1:a===c.rowCount?d=!0:d=null;return{checked:d}};var d=c.prototype;d.render=function(){return g.jsx(b("PagesSelectableListCheckbox.react"),{checked:this.state.checked,onChange:this.$1})};return c}(g.PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesSelectableSimpleListRowContainer.react",["FluxContainer","PagesSelectableSimpleListAction","PagesSelectableSimpleListStore","React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){b("PagesSelectableSimpleListAction").rowSelected(d.props.rowKey,a),d.props.onSelected&&d.props.onSelected(b("PagesSelectableSimpleListStore").getSelectedRowsMap())},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("PagesSelectableSimpleListStore")]};c.calculateState=function(a,c){return{selected:b("PagesSelectableSimpleListStore").isRowSelected(c.rowKey)}};var d=c.prototype;d.render=function(){return this.props.rowRenderer(this.props.rowData.rowIndex,this.state.selected,this.$1)};return c}(a.PureComponent);e.exports=b("FluxContainer").create(c,{withProps:!0})}),null);
__d("PagesSelectableSimpleList.react",["cx","CenteredContainer.react","LeftRight.react","OnVisible.react","PagesSelectableSimpleListCheckboxContainer.react","PagesSelectableSimpleListRowContainer.react","React","ResponsiveBlock.react","SimpleList.react","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={headerHeight:0},d.$3=function(a,b){d.setState({headerHeight:b})},d.$5=function(a){return d.props.canLoadMoreRows&&a.rowIndex===d.props.rowCount?d.$7():h.jsx(b("PagesSelectableSimpleListRowContainer.react"),{onSelected:d.$2,ref:d.props.rowKeyGetter(a.rowIndex),rowData:a,rowKey:d.props.rowKeyGetter(a.rowIndex),rowRenderer:d.props.rowRenderer})},d.$8=function(){d.props.onRequestMoreRows&&!d.props.isLoadingMoreRows&&d.props.onRequestMoreRows()},d.$2=function(a){d.props.onSelectionChange&&d.props.onSelectionChange(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(){if(!this.props.showHeader)return null;var a=this.props.allRowKeysGetter?h.jsx(b("PagesSelectableSimpleListCheckboxContainer.react"),{allRowKeysGetter:this.props.allRowKeysGetter,onChange:this.$2,rowCount:this.props.rowCount}):null;return h.jsxs(b("ResponsiveBlock.react"),{onResize:this.$3,children:[h.jsxs(b("LeftRight.react"),{className:"_2x3m",children:[h.jsxs("div",{children:[a,h.jsx("span",{children:this.props.actionBarLeftComponent})]}),h.jsx("div",{children:this.props.actionBarRightComponent})]}),this.props.header]})};d.$4=function(){var a=this.props.height-this.state.headerHeight;if(a<=0)return null;return this.props.replaceContent||!this.props.rowCount?h.jsx("div",{style:{height:a},children:this.props.replaceContent}):h.jsx(b("SimpleList.react"),{goToRowIndex:this.props.goToRowIndex,height:a,hideScrollShadow:!0,item:this.$5,ref:"simpleList",rowCount:this.$6(),rowHeight:this.props.rowHeight,scrollbarOnHoverOnly:!0})};d.getSimpleList=function(){return this.refs.simpleList};d.$6=function(){return this.props.rowCount+(this.props.canLoadMoreRows?1:0)};d.$7=function(){return h.jsx(b("OnVisible.react"),{onVisible:this.$8,style:{height:this.props.rowHeight},children:this.props.loadingIndicator})};d.render=function(){return h.jsxs("div",{className:this.props.className,children:[this.$1(),this.$4()]})};return c}(h.PureComponent);a.defaultProps={canLoadMoreRows:!1,isLoadingMoreRows:!1,loadingIndicator:h.jsx(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!0,children:h.jsx(b("XUISpinner.react"),{size:"large"})}),showHeader:!1};e.exports=a}),null);
__d("BusinessCRMConfigStore",["undux"],(function(a,b,c,d,e,f){"use strict";a=b("undux").createConnectedStore;c={config:null};e.exports=a(c)}),null);
__d("CRMAddAdditionalFieldDialog.react",["cx","fbt","FDSButton.react","FDSCancelButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSSimplePopover.react","FDSText.react","FDSTextInput.react","React","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=560,k=90,l=50;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={value:"",showError:!1},c.$1=function(a){c.setState({value:a})},c.$3=function(){var a=c.state.value&&c.state.value.trim();c.$2(a)?c.props.onConfirm(a):c.setState({showError:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.$2=function(a){return a!=null&&a.length>0&&a.length<=l};d.render=function(){var a=this.state.value&&this.state.value.trim(),c=this.state.showError?h._("Field name should be between 1 and 50 characters in length"):null;this.$2(a)&&(c=null);return i.jsx(b("FDSModal.react"),{footer:i.jsx(b("FDSModalFooter.react"),{primaryButton:i.jsx(b("FDSButton.react"),{isDisabled:!!c,label:h._("Add Contact Field"),margin:"_3-9a",onClick:this.$3,use:"primary"}),secondaryButton:i.jsx(b("FDSCancelButton.react"),{})}),header:i.jsx(b("FDSModalHeader.react"),{title:h._("Create contact field")}),isShown:!0,onHide:this.props.onCancel,width:j,children:i.jsx(b("FDSSection.react"),{children:i.jsxs("div",{className:"_7rcj",children:[i.jsx(b("FDSText.react"),{display:"inline",weight:"bold",width:k,children:h._("Field name")}),i.jsx("div",{className:"_3-90",children:i.jsx(b("FDSSimplePopover.react"),{content:h._("Contact fields are added to all contacts."),position:"below"})}),i.jsx(b("FDSTextInput.react"),{errorMessage:c,label:this.state.value,labelIsHidden:!0,onChange:this.$1,placeholder:h._("Name this contact field"),value:this.state.value})]})})})};return c}(i.PureComponent);e.exports=a}),null);
__d("CRMAdditionalFieldsList.react",["cx","fbt","FDSLink.react","FDSText.react","React","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=5;function a(a){var c=a.rowClassName!=null?a.rowClassName:"_7q3e",d=a.additionalFieldList.map(function(d,e){var f;f=(f=d.custom_field)==null?void 0:f.display_name;d=d.value!=null&&d.value!==""?d.value:"-";if(!a.showAll)if(e===j)return i.jsx("div",{className:"_7q3f",children:i.jsx(b("FDSLink.react"),{onClick:a.onClickSeeMore,showUnderline:"never",children:h._("See more")})},"0");else if(e>j)return null;return f==null?null:i.jsxs("div",{className:c,children:[i.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",children:f}),i.jsx(b("FDSText.react"),{display:"block",margin:"_3-8w",size:"body3",children:d})]},f+":"+e)});return i.jsx("div",{className:a.className,children:d})}e.exports=a}),null);
__d("CRMCSVFileInput.react",["ix","cx","fbt","DragDropTarget","FDSButton.react","FDSCloseButton.react","FDSProgressBar.react","FDSText.react","FileInput.react","Image.react","Link.react","React","ReactDOM","asset","cxMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.$2=function(a){c.$1=a},c.$4=function(a){return c.props.onUpload(a.target.files,a.target)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;if(this.$1){var c=b("ReactDOM").findDOMNode(this.$1);new(b("DragDropTarget"))(c).setOnFilesDropCallback(function(b){a.props.onUpload(b,c)}).enable()}};d.$3=function(a){if(a===null||a===void 0)return null;var b=a/1024/1024;if(b>1)return b.toFixed(1).toString().concat("MB");b=a/1024;return b.toFixed(1).toString().concat("KB")};d.$5=function(){var a=this.props,c=a.fileName;a=a.fileError;return j.jsx("div",{className:"_7ose _7jwq",ref:this.$2,children:j.jsxs("div",{className:"_7jwr",children:[j.jsx("div",{className:"_7jwt",children:j.jsx(b("FDSCloseButton.react"),{onClick:this.props.onClose})}),j.jsxs("div",{className:"_7jws",children:[j.jsx(b("Image.react"),{className:"_3-90",src:g("651651")}),j.jsx(b("FDSText.react"),{color:"secondary",size:"header3",weight:"bold",children:c})]}),j.jsx("div",{className:"_3-96",children:j.jsx(b("FDSText.react"),{color:"secondary",size:"body1",children:a})}),j.jsx(b("FileInput.react"),{accept:".csv,.xls,.xlsx",name:"file",onChange:this.props.onUpload,value:"",children:j.jsx(b("FDSButton.react"),{href:"#",icon:j.jsx(b("Image.react"),{className:"_3-90",src:g("651651")}),label:i._("Choose File"),margin:"_3-90",size:"large",use:"default"})})]})})};d.$6=function(){var a=this.props,c=a.fileName,d=a.fileSize;a=a.isUploading;return a?j.jsx("div",{className:"_7jwq _7osf",children:j.jsxs("div",{className:"_7jwr",children:[j.jsxs("div",{className:"_7jws",children:[j.jsx(b("Image.react"),{className:"_3-90",src:g("538041")}),j.jsx(b("FDSText.react"),{color:"secondary",size:"header3",weight:"bold",children:i._("Uploading \"{filename}\"",[i._param("filename",c)])})]}),j.jsx("div",{children:j.jsx(b("FDSProgressBar.react"),{type:"buffering"})})]})}):j.jsx("div",{className:"_7jwq _7osf",children:j.jsxs("div",{className:"_7jwr",children:[j.jsx("div",{className:"_7jwt",children:j.jsx(b("FDSCloseButton.react"),{onClick:this.props.onClose})}),j.jsxs("div",{className:"_7jws",children:[j.jsx(b("Image.react"),{className:"_3-90",src:g("651651")}),j.jsx(b("FDSText.react"),{color:"secondary",size:"header3",weight:"bold",children:c})]}),j.jsx("div",{children:j.jsx(b("FDSText.react"),{color:"secondary",size:"body1",children:this.$3(d)})})]})})};d.render=function(){if(this.props.fileError!=null)return this.$5();return this.props.isUploading||this.props.fileName!==null?this.$6():j.jsxs("div",{className:"_7j3x _7jwq",ref:this.$2,children:[j.jsx("div",{children:j.jsx(b("FDSText.react"),{color:"secondary",size:"body1",weight:"bold",children:i._("Upload file")})}),j.jsx(b("FDSText.react"),{color:"secondary",margin:"_3-8p",size:"body3",children:i._("Choose a CSV, XLS or XLSX file, or drag and drop to upload. Maximum file size is 1 MB.")}),this.props.csvTemplate!=null?j.jsxs(b("Link.react"),{className:"_8p_2",href:this.props.csvTemplate,children:[j.jsx(b("Image.react"),{className:"_3-90",src:g("406900")}),j.jsx(b("FDSText.react"),{color:"blueLink",size:"body2",children:i._("Download Template")})]}):null,j.jsx(b("FileInput.react"),{accept:".csv,.xls,.xlsx",name:"file",onChange:this.$4,value:"",children:j.jsx(b("FDSButton.react"),{href:"#",icon:j.jsx(b("Image.react"),{src:g("651653")}),label:i._("Choose File"),margin:"_3-8p",size:"large",use:"primary"})})]})};return c}(j.PureComponent);e.exports=a}),null);
__d("CRMCSVImportColumnMatchTable.react",["ix","cx","fbt","FDSDropdownSelector.react","FDSDropdownSelectorOption.react","FDSSimplePopover.react","FDSTable.react","FDSTableColumn.react","FDSTableGenericCell.react","FDSText.react","Image.react","Link.react","React","SUIBusinessThemeContainer.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=340,l=90;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isMatchedTableCollapsed:!1,isUnMatchedTableCollapsed:!1},d.$1=function(){d.setState(function(a){return{isMatchedTableCollapsed:!a.isMatchedTableCollapsed}})},d.$2=function(){d.setState(function(a){return{isUnMatchedTableCollapsed:!a.isUnMatchedTableCollapsed}})},d.$4=function(a){return j.jsx(b("FDSTableGenericCell.react"),{align:"left",content:j.jsx(b("FDSDropdownSelector.react"),{buttonUse:"default",onChange:d.props.onChangeFieldForMatchedTable,placeholder:i._("Field options"),value:d.props.selectedFieldsForMatchedTable.get(a.rowIndex),width:200,children:d.props.fieldSelectorOptions}),height:80},"Selector")},d.$6=function(a){return j.jsx(b("FDSTableGenericCell.react"),{align:"left",content:j.jsx(b("FDSDropdownSelector.react"),{buttonUse:"default",onChange:d.props.onChangeFieldForUnmatchedTable,placeholder:i._("Field options"),value:d.props.selectedFieldsForUnmatchedTable.get(a.rowIndex),width:200,children:d.props.fieldSelectorOptions}),height:80},"Preview")},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$3=function(){var a;if(this.props.selectedFieldsForMatchedTable.size===0)return null;a=(a=this.props.csvImportData)==null?void 0:a.matched_data;return j.jsxs("div",{className:"_7ndc",children:[j.jsxs("div",{className:"_7ndd",children:[j.jsx(b("Link.react"),{className:"_7ndi",onClick:this.$1,children:j.jsx(b("Image.react"),{src:this.state.isMatchedTableCollapsed?g("496753"):g("504840")})}),j.jsx(b("Image.react"),{className:"_7ndj",src:g("393775")}),j.jsx(b("FDSText.react"),{color:"primary",size:"header3",weight:"bold",children:i._("{num_of_matched_fields} matched fields",[i._param("num_of_matched_fields",a&&Object.entries(a).length)])})]}),this.state.isMatchedTableCollapsed?null:j.jsx(b("SUIBusinessThemeContainer.react"),{children:j.jsxs(b("FDSTable.react"),{borders:"rows",hasFlexibleColumnWidths:!0,headerProps:{item:this.props.headerItems,height:50},items:a?Object.entries(a):[],maxHeight:k,onRowClick:this.props.onRowClickForMatchedTable,rowHeight:l,children:[j.jsx(b("FDSTableColumn.react"),{cell:n,header:m,width:33}),j.jsx(b("FDSTableColumn.react"),{cell:this.$4,header:m,width:33}),j.jsx(b("FDSTableColumn.react"),{cell:o,header:m,width:34})]})})]})};d.$5=function(){var a;a=(a=this.props.csvImportData)==null?void 0:a.unmatched_data;return j.jsxs("div",{className:"_7ndc",children:[j.jsxs("div",{className:"_7ndd",children:[j.jsx(b("Link.react"),{className:"_7ndi",onClick:this.$2,children:j.jsx(b("Image.react"),{src:this.state.isUnMatchedTableCollapsed?g("496753"):g("504840")})}),j.jsx(b("Image.react"),{className:"_7ndj",src:g("480790")}),j.jsx(b("FDSText.react"),{color:"primary",size:"header3",weight:"bold",children:i._("{num_of_unmatched_fields} unmatched fields",[i._param("num_of_unmatched_fields",a&&Object.entries(a).length)])})]}),this.state.isUnMatchedTableCollapsed?null:j.jsx(b("SUIBusinessThemeContainer.react"),{children:j.jsxs(b("FDSTable.react"),{borders:"rows",hasFlexibleColumnWidths:!0,headerProps:{item:this.props.headerItems,height:50},items:a?Object.entries(a):[],maxHeight:this.props.selectedFieldsForMatchedTable.size===0?k*2:k,onRowClick:this.props.onRowClickForUnmatchedTable,rowHeight:l,children:[j.jsx(b("FDSTableColumn.react"),{cell:n,header:m,width:33}),j.jsx(b("FDSTableColumn.react"),{cell:this.$6,header:m,width:33}),j.jsx(b("FDSTableColumn.react"),{cell:o,header:m,width:34})]})})]})};d.render=function(){return j.jsxs(j.Fragment,{children:[this.$3(),this.$5()]})};return c}(j.PureComponent);var m=function(a){var c=a.item.labels[a.columnIndex].tooltip;return j.jsx(b("FDSTableGenericCell.react"),{align:"left",content:j.jsxs(j.Fragment,{children:[j.jsx(b("FDSText.react"),{color:"secondary",display:"truncate",size:"body1",weight:"bold",children:a.item.labels[a.columnIndex].label}),c!=null&&j.jsx(b("FDSSimplePopover.react"),{content:c})]}),height:50},"columnHeader")},n=function(a){return j.jsx(b("FDSTableGenericCell.react"),{align:"left",content:j.jsx(b("FDSText.react"),{display:"truncate",size:"body2",weight:"bold",children:a.item[0]}),height:a.rowHeight})},o=function(a){var c=a.item[1].map(function(a,c){return j.jsx(b("FDSText.react"),{display:"truncate",size:"body3",children:a},c)});return j.jsx(b("FDSTableGenericCell.react"),{align:"left",content:j.jsx("div",{className:"_7kq-",children:c}),height:a.rowHeight})};e.exports=a}),null);
__d("CRMCancelImportDialog.react",["fbt","FDSButton.react","FDSCancelButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSText.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("FDSModal.react"),{footer:h.jsx(b("FDSModalFooter.react"),{primaryButton:h.jsx(b("FDSButton.react"),{label:g._("Confirm"),onClick:this.props.onConfirmCancel,use:"primary"}),secondaryButton:h.jsx(b("FDSCancelButton.react"),{})}),header:h.jsx(b("FDSModalHeader.react"),{title:g._("Cancel upload?")}),isShown:this.props.isShown,label:"Modal Title",onHide:this.props.onHide,children:h.jsx(b("FDSSection.react"),{children:h.jsx(b("FDSText.react"),{color:"secondary",size:"body1",children:g._("If you cancel your upload, none of your new contacts will be saved. Do you want to continue?")})})})};return c}(h.PureComponent);e.exports=a}),null);
__d("CRMClientContactsSearchableEntry",["SearchableEntry"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,{title:b.title,subtitle:b.subtitle,uniqueID:b.uniqueID,uri:b.uri})||this;c.$CRMClientContactsSearchableEntry1=b.platform;return c}var c=b.prototype;c.getPlatform=function(){return this.$CRMClientContactsSearchableEntry1};return b}(b("SearchableEntry"));e.exports=a}),null);
__d("CRMClientContactSearchViewItem.react",["cx","CRMClientContactsSearchableEntry","Image.react","React","ServicesUINoProfileImage.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=32;function j(a){var c=null;a.entry.getURI()!=null&&a.entry.getURI()!==""?c=h.jsx(b("Image.react"),{className:"_8jmw",height:i,src:a.entry.getURI(),width:i}):c=h.jsx(b("ServicesUINoProfileImage.react"),{className:"_3-91",letter:a.entry.getTitle()[0],size:"xsmall"});if(a.entry instanceof b("CRMClientContactsSearchableEntry")){a=a.entry.getPlatform();return h.jsxs("div",{className:"_7yyd"+(a==="FACEBOOK"?" _5m15":"")+(a==="INSTAGRAM"?" _5m16":""),height:i,width:i,children:[c,h.jsx("div",{className:"_5m17",children:h.jsx("div",{className:"_5m18"})})]})}return c}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){var a=this,b=this.props.entry;return h.jsxs("li",{className:"_8jun",onMouseDown:function(c){return a.props.onSelect(b,c)},children:[h.jsx(j,{entry:b}),h.jsxs("div",{children:[this.props.renderHighlight(b.getTitle()),b.getSubtitle()]})]},b.getUniqueID())};return b}(h.PureComponent);e.exports=a}),null);
__d("CRMClientDetailsAboutSectionFacebook.react",["ix","cx","fbt","ErrorBoundary.react","FDSText.react","Image.react","LeftRight.react","Link.react","PageCustomerProfileUnitType","PagesManagerInboxRealtimeClock.react","React","RelayModern","TextWithEntities.react","Timezone","asset","emptyFunction","linkifyEntityRange","nullthrows","TimezoneNamesData","CRMClientDetailsAboutSectionFacebook_details.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=b("React");c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;b("Timezone").registerNamesModule(b("TimezoneNamesData"));var l=(d={},d[(f=b("PageCustomerProfileUnitType")).EDUCATION]=g("532669"),d[f.EMPLOYMENT]=g("542610"),d[f.HOMETOWN]=g("528432"),d[f.LIKE_SINCE]=g("529235"),d[f.LOCAL_TIME]=g("508064"),d[f.LOCATION]=g("542398"),d);function a(a){var c,d;c=(c=a.details.profile_uris)==null?void 0:(c=c[0])==null?void 0:c.uri;d=((d=a.details.page_customer)==null?void 0:d.profile_units)||[];d=d.length>0?d.map(function(c){if(c.unit_type===b("PageCustomerProfileUnitType").LOCAL_TIME){var d;d=(d=a.details.page_customer)==null?void 0:(d=d.city)==null?void 0:(d=d.location)==null?void 0:d.timezone;if(d==null)return null;d=i._("Local time: {formatted time}",[i._param("formatted time",k.jsx(b("PagesManagerInboxRealtimeClock.react"),{timezoneID:b("Timezone").getByName(d)}))])}else{var e;d=k.jsx(b("TextWithEntities.react"),{interpolator:b("linkifyEntityRange"),ranges:(e=c.text)==null?void 0:e.ranges,text:(e=c.text)==null?void 0:e.text})}e=b("nullthrows")(c.unit_type);return k.jsx(b("ErrorBoundary.react"),{children:k.jsxs("div",{className:"_6tt2",children:[k.jsx(b("Image.react"),{src:l[e]}),k.jsx("div",{className:"_2pi9",children:d})]})},e)}):k.jsx("span",{className:"_6tt2",children:i._("No public information available.")});return k.jsxs("div",{className:"_2pif",children:[k.jsxs(b("LeftRight.react"),{children:[k.jsx(b("FDSText.react"),{color:"placeholder",size:"header3",children:"Facebook"}),a.shouldSuppressProfileLink?null:k.jsx(b("Link.react"),{href:c,onClick:b("emptyFunction"),target:"_blank",children:i._("View profile")})]}),k.jsx("div",{className:"_3-8y",children:d})]})}e.exports=c(a,{details:j!==void 0?j:j=b("CRMClientDetailsAboutSectionFacebook_details.graphql")})}),null);
__d("CRMClientDetailsAboutSectionInstagram.react",["ix","cx","fbt","FDSLink.react","FDSText.react","Image.react","LeftRight.react","Link.react","React","RelayModern","asset","emptyFunction","CRMClientDetailsAboutSectionInstagram_details.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=b("React");c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;function a(a){var c;c=(c=a.details.profile_uris)==null?void 0:(c=c[0])==null?void 0:c.uri;var d=a.details.ig_profile_info;d=d!=null?k.jsxs("span",{children:[k.jsxs("div",{className:"_6tt2",children:[k.jsx(b("Image.react"),{src:g("687382")}),k.jsxs("div",{className:"_2pi9",children:[k.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",children:d.ig_username}),k.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",children:d.ig_name})]})]}),d.ig_bio!==""||d.ig_website!==""?k.jsxs("div",{className:"_6tt2",children:[k.jsx(b("Image.react"),{src:g("490681")}),k.jsxs("div",{className:"_2pi9",children:[k.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",children:d.ig_bio}),d.ig_website!=null?k.jsx(b("FDSLink.react"),{href:d.ig_website,onClick:b("emptyFunction"),target:"_blank",children:d.ig_website}):null]})]}):null]}):k.jsx("span",{className:"_6tt2",children:i._("No public information available.")});return k.jsxs("div",{className:"_2pie",children:[k.jsxs(b("LeftRight.react"),{children:[k.jsx(b("FDSText.react"),{color:"placeholder",size:"header3",children:i._("Instagram")}),a.shouldSuppressProfileLink?null:k.jsx(b("Link.react"),{href:c,onClick:b("emptyFunction"),target:"_blank",children:i._("View profile")})]}),k.jsx("div",{className:"_3-8y",children:d})]})}e.exports=c(a,{details:j!==void 0?j:j=b("CRMClientDetailsAboutSectionInstagram_details.graphql")})}),null);
__d("CRMClientListActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({ADD_OR_REMOVE_CSV:null,CRM_BACK_TO_FILE_UPLOAD:null,CRM_LIST_BACK_TO_CLIENT_LIST:null,CRM_LIST_FORCE_ACTIVITY_REFETCH:null,CRM_LIST_FORCE_REFETCH:null,CRM_LIST_SHOW_CLIENT_DETAILS:null,CRM_LIST_UNSET_FORCE_ACTIVITY_REFETCH:null,CRM_LIST_UNSET_FORCE_REFETCH:null,CRM_LIST_ADD_CONTACT_TO_BULK_EDIT:null,CRM_LIST_REMOVE_CONTACT_TO_BULK_EDIT:null,CRM_LIST_REMOVE_CONTACT_FROM_UNSELECTED_BULK_EDIT:null,CRM_LIST_CLEAR_CONTACT_TO_BULK_EDIT:null,CRM_LIST_SET_TOTAL_CONTACT_COUNT:null,CRM_UPDATE_SEARCH_TERM:null,CRM_CONTACT_SEARCH_DONE:null,CRM_IMPORT_CONTACTS:null,CRM_LIST_MATCH_COLUMN:null,CRM_CREATE_CONTACTS_FROM_CSV:null,CRM_COMPLETE_CONTACTS_CREATION_FROM_CSV:null,CRM_DISMISS_TOAST:null,CRM_INIT_MERGE_CONTACT:null,CRM_COMPLETE_MERGE_CONTACT:null,CRM_DISMISS_MERGE_TOAST:null,CRM_MERGE_CONTACT_ERROR:null,CRM_LIST_SELECT_ALL_TO_BULK_EDIT:null,CRM_LIST_ADD_CONTACT_TO_UNSELECTED_BULK_EDIT:null,CRM_LIST_CLEAR_UNSELECTED_CONTACT_TO_BULK_EDIT:null,CRM_START_BULK_ACTION:null,CRM_COMPLETE_BULK_ACTION:null,CRM_DISMISS_BULK_ACTION_TOAST:null,CRM_SET_EXPORT_CONTACTS_URL:null,CRM_UPDATE_PROGRESS:null,CRM_UPDATE_SELECTED_DATE_RANGE:null,CRM_UPDATE_SELECTED_PLATFORMS:null,CRM_UPDATE_SELECTED_ACTIVITIES:null,CRM_UPDATE_SELECTED_OTHER_FILTERS:null,CRM_CLEAR_SELECTED_OTHER_FILTERS:null,CRM_UPDATE_SAVED_FILTERS:null,CRM_UPDATE_SELECTED_SAVED_FILTER:null,CRM_CLEAR_LIST_SELECTION:null,CRM_UPDATE_INPUT_DATA:null,CRM_UPDATE_IS_LOADING:null,CRM_CLEAR_SELECTED_DATE_RANGE:null,CRM_CLEAR_SELECTED_PLATFORM:null,CRM_SHOW_SEARCH_RESULTS:null,CRM_ADD_CUSTOM_LABEL:null,CRM_REMOVE_CUSTOM_LABEL:null,CRM_CLEAR_TYPEAHEAD_SEARCH:null});e.exports=a}),null);
__d("PagesReactDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationReactDispatcher"))({strict:!0})}),null);
__d("CRMClientListActions",["CRMClientListActionTypes","PagesReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("CRMClientListActionTypes")).ADD_OR_REMOVE_CSV,h=a.CRM_ADD_CUSTOM_LABEL,i=a.CRM_BACK_TO_FILE_UPLOAD,j=a.CRM_CLEAR_LIST_SELECTION,k=a.CRM_CLEAR_SELECTED_DATE_RANGE,l=a.CRM_CLEAR_SELECTED_OTHER_FILTERS,m=a.CRM_CLEAR_SELECTED_PLATFORM,n=a.CRM_CLEAR_TYPEAHEAD_SEARCH,o=a.CRM_COMPLETE_BULK_ACTION,p=a.CRM_COMPLETE_CONTACTS_CREATION_FROM_CSV,q=a.CRM_COMPLETE_MERGE_CONTACT,r=a.CRM_CONTACT_SEARCH_DONE,s=a.CRM_CREATE_CONTACTS_FROM_CSV,t=a.CRM_DISMISS_BULK_ACTION_TOAST,u=a.CRM_DISMISS_MERGE_TOAST,v=a.CRM_DISMISS_TOAST,w=a.CRM_IMPORT_CONTACTS,x=a.CRM_INIT_MERGE_CONTACT,y=a.CRM_LIST_ADD_CONTACT_TO_BULK_EDIT,z=a.CRM_LIST_ADD_CONTACT_TO_UNSELECTED_BULK_EDIT,A=a.CRM_LIST_BACK_TO_CLIENT_LIST,B=a.CRM_LIST_CLEAR_CONTACT_TO_BULK_EDIT,C=a.CRM_LIST_CLEAR_UNSELECTED_CONTACT_TO_BULK_EDIT,D=a.CRM_LIST_FORCE_ACTIVITY_REFETCH,E=a.CRM_LIST_FORCE_REFETCH,F=a.CRM_LIST_MATCH_COLUMN,G=a.CRM_LIST_REMOVE_CONTACT_FROM_UNSELECTED_BULK_EDIT,H=a.CRM_LIST_REMOVE_CONTACT_TO_BULK_EDIT,I=a.CRM_LIST_SELECT_ALL_TO_BULK_EDIT,J=a.CRM_LIST_SET_TOTAL_CONTACT_COUNT,K=a.CRM_LIST_SHOW_CLIENT_DETAILS,L=a.CRM_LIST_UNSET_FORCE_ACTIVITY_REFETCH,M=a.CRM_LIST_UNSET_FORCE_REFETCH,N=a.CRM_MERGE_CONTACT_ERROR,O=a.CRM_REMOVE_CUSTOM_LABEL,P=a.CRM_SET_EXPORT_CONTACTS_URL,Q=a.CRM_SHOW_SEARCH_RESULTS,R=a.CRM_START_BULK_ACTION,S=a.CRM_UPDATE_INPUT_DATA,T=a.CRM_UPDATE_IS_LOADING,U=a.CRM_UPDATE_PROGRESS,V=a.CRM_UPDATE_SAVED_FILTERS,W=a.CRM_UPDATE_SEARCH_TERM,X=a.CRM_UPDATE_SELECTED_DATE_RANGE,Y=a.CRM_UPDATE_SELECTED_OTHER_FILTERS,Z=a.CRM_UPDATE_SELECTED_PLATFORMS,$=a.CRM_UPDATE_SELECTED_SAVED_FILTER;c={updateSearchTerm:function(a){b("PagesReactDispatcher").dispatch({type:W,payload:{searchTerm:a}})},showSearchResults:function(a){b("PagesReactDispatcher").dispatch({type:Q,payload:{showSearchResults:a}})},forceRefetch:function(){b("PagesReactDispatcher").dispatch({type:E,payload:{}})},importContacts:function(){b("PagesReactDispatcher").dispatch({type:w,payload:{}})},unsetForceFetch:function(){b("PagesReactDispatcher").dispatch({type:M,payload:{}})},forceActivityRefetch:function(){b("PagesReactDispatcher").dispatch({type:D,payload:{}})},unsetActivityForceFetch:function(){b("PagesReactDispatcher").dispatch({type:L,payload:{}})},showClientDetails:function(a){b("PagesReactDispatcher").dispatch({type:K,payload:{contactID:a}})},addOrRemoveFile:function(a){b("PagesReactDispatcher").dispatch({type:g,payload:{sampleData:a}})},backToClientList:function(){b("PagesReactDispatcher").dispatch({type:A})},backToFileUpload:function(){b("PagesReactDispatcher").dispatch({type:i})},createContactsFromCSV:function(a){b("PagesReactDispatcher").dispatch({type:s,payload:{uploadedFileName:a}})},completeContactsCreation:function(){b("PagesReactDispatcher").dispatch({type:p})},dismissToast:function(){b("PagesReactDispatcher").dispatch({type:v})},goMatchColumn:function(){b("PagesReactDispatcher").dispatch({type:F})},addBulkEditClient:function(a){b("PagesReactDispatcher").dispatch({type:y,payload:{contact:a}})},removeBulkEditClient:function(a){b("PagesReactDispatcher").dispatch({type:H,payload:{contactID:a}})},clearBulkEditClient:function(){b("PagesReactDispatcher").dispatch({type:B,payload:{}})},setTotalContactCount:function(a){b("PagesReactDispatcher").dispatch({type:J,payload:{totalContactCount:a}})},initMergeContact:function(){b("PagesReactDispatcher").dispatch({type:x})},completeMergeContact:function(a){b("PagesReactDispatcher").dispatch({type:q,payload:{mergedID:a}})},dismissMergeToast:function(){b("PagesReactDispatcher").dispatch({type:u})},mergeContactError:function(){b("PagesReactDispatcher").dispatch({type:N})},selectAllBulkEditClient:function(a){b("PagesReactDispatcher").dispatch({type:I,payload:{isAllSelected:a}})},addUnselectedBulkEditClient:function(a){b("PagesReactDispatcher").dispatch({type:z,payload:{contact:a}})},removeUnselectedBulkEditClient:function(a){b("PagesReactDispatcher").dispatch({type:G,payload:{contactID:a}})},clearUnselectedBulkEditClient:function(){b("PagesReactDispatcher").dispatch({type:C,payload:{}})},startBulkAction:function(a){b("PagesReactDispatcher").dispatch({type:R,payload:{bulkActionType:a}})},completeBulkAction:function(){b("PagesReactDispatcher").dispatch({type:o})},dismissBulkActionToast:function(){b("PagesReactDispatcher").dispatch({type:t})},exportContactsUrl:function(a){b("PagesReactDispatcher").dispatch({type:P,payload:{url:a}})},updateProgress:function(a){b("PagesReactDispatcher").dispatch({type:U,payload:{progressUpdate:a}})},updateSelectedDateRange:function(a){b("PagesReactDispatcher").dispatch({type:X,payload:{selectedDateRange:a}})},updateSelectedPlatforms:function(a){b("PagesReactDispatcher").dispatch({type:Z,payload:{selectedPlatforms:a}})},updateSelectedOtherFilters:function(a,c){b("PagesReactDispatcher").dispatch({type:Y,payload:{selectedField:a,selectedOption:c}})},clearSelectedOtherFilters:function(){b("PagesReactDispatcher").dispatch({type:l})},updateSavedFilters:function(a,c){b("PagesReactDispatcher").dispatch({type:V,payload:{savedFilter:a,savedName:c}})},updateIsLoading:function(a){b("PagesReactDispatcher").dispatch({type:T,payload:{isLoading:a}})},updateSelectedSavedFilter:function(a){b("PagesReactDispatcher").dispatch({type:$,payload:{savedFilter:a}})},clearListSelection:function(){b("PagesReactDispatcher").dispatch({type:j})},updateInputData:function(a){b("PagesReactDispatcher").dispatch({type:S,payload:{inputData:a}})},clearSelectedDateRange:function(){b("PagesReactDispatcher").dispatch({type:k})},clearSelectedPlatform:function(){b("PagesReactDispatcher").dispatch({type:m})},addCustomLabel:function(a){b("PagesReactDispatcher").dispatch({type:h,payload:{label:a}})},removeCustomLabel:function(a){b("PagesReactDispatcher").dispatch({type:O,payload:{label:a}})},clearTypeaheadSearch:function(){b("PagesReactDispatcher").dispatch({type:n})},setContactSearchLoaded:function(){b("PagesReactDispatcher").dispatch({type:r})}};e.exports=c}),null);
__d("CRMManualContactCreationDialogActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({CRM_CLEAR_CONTACT_FORM:null,CRM_CONTACT_ADD_CLIENT_SAVE_FAIL:null,CRM_CONTACT_ADD_CLIENT_SAVE_SUCCESS:null,CRM_CONTACT_ADD_CLIENT_SAVING:null,CRM_CONTACT_DIALOG_INIT_LOADED_CONTACT:null,CRM_CONTACT_FETCHED_NO_CONTACT_PAGE_INFO:null,CRM_CONTACT_INIT_COMPLETED:null,CRM_CONTACT_PHONE_CONSENT_CHECKBOX_CHANGE:null,CRM_CONTACT_PHOTO_UPLOAD_FAIL:null,CRM_CONTACT_PHOTO_UPLOAD_START:null,CRM_CONTACT_PHOTO_UPLOAD_SUCCESS:null,CRM_CONTACT_REMOVE_PHOTO:null,CRM_CONTACT_SET_INITIAL_PARAMS:null,CRM_CONTACT_UPDATE_FIELD:null,CRM_CONTACT_UPDATE_PHONE_VALIDATION:null,CRM_CREATE_DIALOG_HIDE_ERROR_DIALOG:null,CRM_CREATE_DIALOG_VALILDATE_BEFORE_SAVE:null,CRM_CONTACT_UPDATE_LEGAL_NOTICE:null,CRM_CONTACT_MARK_LEGAL_NOTICE_AS_READ:null});e.exports=a}),null);
__d("CRMPageContactsFilterOptionTypes",[],(function(a,b,c,d,e,f){"use strict";e.exports={FACEBOOK:"FB",INSTAGRAM:"IG",OFFLINE:"OFFLINE",ALL:"ALL",ACTIVITY:"ACTIVITY",PREVIOUS_APPOINTMENTS:"PAST_APPOINTMENTS",UPCOMING_APPOINTMENTS:"UPCOMING_APPOINTMENTS",LIKES_PAGE:"LIKED_PAGE",PHONE:"PHONE",WITH_PHONE:"WITH_PHONE",WITHOUT_PHONE:"WITHOUT_PHONE",CONFIRMED_SMS:"CONFIRMED_SMS",UNCONFIRMED_SMS:"UNCONFIRMED_SMS",EMAIL:"EMAIL",WITH_EMAIL:"WITH_EMAIL",WITHOUT_EMAIL:"WITHOUT_EMAIL",UNCONFIRMED_PREFERENCE:"UNCONFIRMED_PREFERENCE",CONFIRMED_SUBSCRIBED:"CONFIRMED_SUBSCRIBED",CONFIRMED_UNSUBSCRIBED:"CONFIRMED_UNSUBSCRIBED",CONFIRMED_UNKNOWN:"CONFIRMED_UNKNOWN",ADDRESS:"ADDRESS",WITH_ADDRESS:"WITH_ADDRESS",WITHOUT_ADDRESS:"WITHOUT_ADDRESS",BIRTHDAY:"BIRTHDAY",WITH_BIRTHDAY:"WITH_BIRTHDAY",WITHOUT_BIRTHDAY:"WITHOUT_BIRTHDAY",SAVED_FILTER:"SAVED_FILTER"}}),null);
__d("CRMClientListStore",["CRMClientListActionTypes","CRMManualContactCreationDialogActionTypes","FluxReduceStore","LocalDate","LocalDateInterval","PagesReactDispatcher","Timezone","immutable","nullthrows","CRMPageContactsFilterOptionTypes"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("CRMClientListActionTypes")).ADD_OR_REMOVE_CSV,h=a.CRM_ADD_CUSTOM_LABEL,i=a.CRM_BACK_TO_FILE_UPLOAD,j=a.CRM_CLEAR_LIST_SELECTION,k=a.CRM_CLEAR_SELECTED_DATE_RANGE,l=a.CRM_CLEAR_SELECTED_OTHER_FILTERS,m=a.CRM_CLEAR_SELECTED_PLATFORM,n=a.CRM_CLEAR_TYPEAHEAD_SEARCH,o=a.CRM_COMPLETE_BULK_ACTION,p=a.CRM_COMPLETE_CONTACTS_CREATION_FROM_CSV,q=a.CRM_COMPLETE_MERGE_CONTACT,r=a.CRM_CONTACT_SEARCH_DONE,s=a.CRM_CREATE_CONTACTS_FROM_CSV,t=a.CRM_DISMISS_BULK_ACTION_TOAST,u=a.CRM_DISMISS_MERGE_TOAST,v=a.CRM_DISMISS_TOAST,w=a.CRM_IMPORT_CONTACTS,x=a.CRM_INIT_MERGE_CONTACT,y=a.CRM_LIST_ADD_CONTACT_TO_BULK_EDIT,z=a.CRM_LIST_ADD_CONTACT_TO_UNSELECTED_BULK_EDIT,A=a.CRM_LIST_BACK_TO_CLIENT_LIST,B=a.CRM_LIST_CLEAR_CONTACT_TO_BULK_EDIT,C=a.CRM_LIST_CLEAR_UNSELECTED_CONTACT_TO_BULK_EDIT,D=a.CRM_LIST_FORCE_ACTIVITY_REFETCH,E=a.CRM_LIST_FORCE_REFETCH,F=a.CRM_LIST_MATCH_COLUMN,G=a.CRM_LIST_REMOVE_CONTACT_FROM_UNSELECTED_BULK_EDIT,H=a.CRM_LIST_REMOVE_CONTACT_TO_BULK_EDIT,I=a.CRM_LIST_SELECT_ALL_TO_BULK_EDIT,J=a.CRM_LIST_SET_TOTAL_CONTACT_COUNT,K=a.CRM_LIST_SHOW_CLIENT_DETAILS,L=a.CRM_LIST_UNSET_FORCE_ACTIVITY_REFETCH,M=a.CRM_LIST_UNSET_FORCE_REFETCH,N=a.CRM_MERGE_CONTACT_ERROR,O=a.CRM_REMOVE_CUSTOM_LABEL,P=a.CRM_SET_EXPORT_CONTACTS_URL,Q=a.CRM_SHOW_SEARCH_RESULTS,R=a.CRM_START_BULK_ACTION,S=a.CRM_UPDATE_INPUT_DATA,T=a.CRM_UPDATE_IS_LOADING,U=a.CRM_UPDATE_PROGRESS,V=a.CRM_UPDATE_SAVED_FILTERS,W=a.CRM_UPDATE_SEARCH_TERM,aa=a.CRM_UPDATE_SELECTED_DATE_RANGE,ba=a.CRM_UPDATE_SELECTED_OTHER_FILTERS,ca=a.CRM_UPDATE_SELECTED_PLATFORMS,da=a.CRM_UPDATE_SELECTED_SAVED_FILTER,ea=b("CRMManualContactCreationDialogActionTypes").CRM_CONTACT_ADD_CLIENT_SAVE_SUCCESS;c=b("Timezone").getEnvironmentTimezoneID()||b("Timezone").PST8PDT;var X=b("LocalDate").today(c).addDays(1),Y=b("LocalDate").fromInstant(123084e4,c),Z=b("CRMPageContactsFilterOptionTypes").ALL,fa=b("CRMPageContactsFilterOptionTypes").ACTIVITY,$=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({isUploaded:!1,searchTerm:null,showSearchResults:!1,forceActivityRefetch:!1,forceRefetch:!1,contactID:null,showImportContactsView:!1,sampleData:null,showMatchColumns:!1,isCreatingContactsFromCSV:!1,isContactCreationComplete:!1,showConfirmationDialog:!1,uploadedFileName:null,progress:5,contactsToBulkEdit:b("immutable").Map([]),unSelectedContactsToBulkEdit:b("immutable").Map([]),totalContactCount:0,isMergingContact:!1,mergedContactID:null,mergeContactError:!1,isAllSelected:!1,isDoingBulkAction:!1,isBulkActionComplete:!1,exportContactsUrl:"",selectedDateRange:new(b("LocalDateInterval"))(Y,X),selectedPlatforms:[Z],selectedOtherFilters:b("immutable").Map([]),savedFilters:b("immutable").Map([]),inputData:null,isLoading:!0,bulkActionType:null,labelFilterIDs:[],isTypeAheadActive:!1,isLoadingContactSearch:!1}));d=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new $()};d.reduce=function(a,c){var d=c.type,e=c.payload;switch(d){case ea:return e.addedOrUpdatedClientID!==null?a.contactID===e.addedOrUpdatedClientID?a.set("forceRefetch",!0):a.set("contactID",e.addedOrUpdatedClientID):a.set("forceRefetch",!0);case D:return a.set("forceActivityRefetch",!0);case E:return a.set("forceRefetch",!0);case L:return a.set("forceActivityRefetch",!1);case M:return a.set("forceRefetch",!1);case K:return a.set("contactID",e.contactID);case A:return a.set("contactID",null).set("isUploaded",!1).set("sampleData",null).set("showMatchColumns",!1).set("showImportContactsView",!1);case w:return a.set("showImportContactsView",!0);case g:return e.sampleData===null||e.sampleData===void 0?a.set("isUploaded",!1).set("sampleData",null):a.set("isUploaded",!0).set("sampleData",e.sampleData);case F:return a.set("showMatchColumns",!0);case i:return a.set("showMatchColumns",!1).set("isUploaded",!1);case s:return a.set("contactID",null).set("isUploaded",!1).set("sampleData",null).set("showMatchColumns",!1).set("showImportContactsView",!1).set("showConfirmationDialog",!1).set("isContactCreationComplete",!1).set("isCreatingContactsFromCSV",!0).set("uploadedFileName",e.uploadedFileName);case p:return a.set("isContactCreationComplete",!0).set("isCreatingContactsFromCSV",!1).set("progress",5);case v:return a.set("isContactCreationComplete",!1).set("isCreatingContactsFromCSV",!1).set("progress",5);case y:c=e.contact;if(c!==null&&c!==void 0){d=b("nullthrows")(c.contactID);d=this.getState().contactsToBulkEdit.set(d,c);return a.set("contactsToBulkEdit",d)}return a;case H:c=this.getState().contactsToBulkEdit["delete"](b("nullthrows")(e.contactID));return a.set("contactsToBulkEdit",c);case B:d=this.getState().contactsToBulkEdit.clear();return a.set("contactsToBulkEdit",d);case J:return a.set("totalContactCount",e.totalContactCount);case x:return a.set("isMergingContact",!0);case q:return a.set("isMergingContact",!1).set("mergedContactID",e.mergedID);case u:return a.set("mergedContactID",null).set("isMergingContact",!1).set("mergeContactError",!1);case N:return a.set("isMergingContact",!1).set("mergeContactError",!0).set("isMergingContact",!1);case I:return a.set("isAllSelected",e.isAllSelected);case z:c=e.contact;if(c!=null&&c!==void 0){d=b("nullthrows")(c.contactID);d=this.getState().unSelectedContactsToBulkEdit.set(d,c);return a.set("unSelectedContactsToBulkEdit",d)}return a;case G:c=this.getState().unSelectedContactsToBulkEdit["delete"](b("nullthrows")(e.contactID));return a.set("unSelectedContactsToBulkEdit",c);case C:d=this.getState().unSelectedContactsToBulkEdit.clear();return a.set("unSelectedContactsToBulkEdit",d);case R:return a.set("isBulkActionComplete",!1).set("isDoingBulkAction",!0).set("progress",5).set("bulkActionType",e.bulkActionType);case o:return a.set("isBulkActionComplete",!0).set("isDoingBulkAction",!1).set("progress",5);case t:return a.set("isBulkActionComplete",!1).set("isDoingBulkAction",!1).set("progress",5);case P:return a.set("exportContactsUrl",e.url);case U:c=this.getState().progress+e.progressUpdate;return a.set("progress",c);case aa:return a.set("selectedDateRange",e.selectedDateRange);case ca:return a.set("selectedPlatforms",e.selectedPlatforms);case ba:d=e.selectedField;var f=e.selectedOption;c=this.getState().selectedOtherFilters.get(d);c==null&&(c=[]);var $=[].concat(c);c.includes(f)?$=$.filter(function(a){return a!==f}):(d!==fa&&($=[]),$.push(f));c=this.getState().selectedOtherFilters.set(d,$);return a.set("selectedOtherFilters",c);case l:return a.set("selectedOtherFilters",b("immutable").Map([]));case V:d=a.savedFilters.set(e.savedName,e.savedFilter);return a.set("savedFilters",d);case da:$=b("immutable").Map(e.savedFilter);return a.set("selectedOtherFilters",$);case j:return a.set("isAllSelected",!1).set("contactsToBulkEdit",b("immutable").Map([])).set("unSelectedContactsToBulkEdit",b("immutable").Map([]));case S:return a.set("inputData",e.inputData);case T:return a.set("isLoading",e.isLoading);case k:return a.set("selectedDateRange",new(b("LocalDateInterval"))(Y,X));case m:return a.set("selectedPlatforms",[Z]);case W:return a.set("searchTerm",e.searchTerm).set("isTypeAheadActive",e.searchTerm!==""||a.labelFilterIDs.length!==0).set("isLoadingContactSearch",!0);case Q:return a.set("showSearchResults",e.showSearchResults).set("labelFilterIDs",[]);case h:c=[].concat(a.labelFilterIDs);d=c.findIndex(function(a){return a.name===e.label.name});d===-1&&c.push(e.label);return a.set("labelFilterIDs",c).set("searchTerm","");case O:$=[].concat(a.labelFilterIDs);d=$.findIndex(function(a){return a.name===e.label.name});d!==-1&&$.splice(d,1);return a.set("labelFilterIDs",$).set("isTypeAheadActive",a.searchTerm!==""||$.length!==0).set("searchTerm","");case r:return a.set("isLoadingContactSearch",!1);case n:return a.set("searchTerm","").set("labelFilterIDs",[]).set("isTypeAheadActive",!1).set("isLoadingContactSearch",!1).set("showSearchResults",!1);default:return a}};d.getShowDetailsView=function(){var a=this.getState();return a.contactID!==null};d.getShowContactImportView=function(){var a=this.getState();return a.showImportContactsView};return c}(b("FluxReduceStore"));d.__moduleID=e.id;e.exports=new d(b("PagesReactDispatcher"))}),null);
__d("CRMClientDetailsAboutSection.react",["ix","cx","fbt","CRMClientDetailsAboutSectionFacebook.react","CRMClientDetailsAboutSectionInstagram.react","CRMClientListActions","CRMClientListStore","CRMEventsLogger","FDSCard.react","FDSLink.react","FDSSection.react","FDSText.react","FluxContainer","Image.react","LineClamp.react","React","RelayModern","asset","cxMargin","keyMirror","CRMClientDetailsAboutSection_contact.graphql","CRMClientDetailsAboutSectionRefetchQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=b("React");a=b("RelayModern").createRefetchContainer;b("RelayModern").graphql;var m=b("keyMirror")({ADDRESS:null,BIRTHDAY:null,EMAIL:null,PHONE:null,IG:null}),n="customer_details_view";c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){d.props.onEdit(),b("CRMEventsLogger").log(d.props.pageID,"click_edit_contact","edit_contact_button",n)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){a=b("CRMClientListStore").getState();return{forceRefetch:a.forceRefetch}};var d=c.prototype;d.componentDidUpdate=function(a,b){!b.forceRefetch&&this.state.forceRefetch&&this.refetch()};d.refetch=function(){this.props.relay.refetch({page_contact_id:this.props.contact.id,page_id:this.props.pageID},null,function(){b("CRMClientListActions").unsetForceFetch()},{force:!0})};d.getRow=function(a){var c,d,e=null,f=null,h=null,j=null;c=(c=this.props.contact)==null?void 0:(c=c.phone)==null?void 0:c.phoneNumber;d=(d=this.props.contact)==null?void 0:d.fallback_phone;var k=i._("Primary");c==null&&(c=d);switch(a){case m.PHONE:e=l.jsx(b("Image.react"),{src:g("506679")});c==null?f=i._("Phone number"):(f=c,j=k);break;case m.EMAIL:e=l.jsx(b("Image.react"),{src:g("506660")});c=(d=this)!=null?(d=d.props)!=null?(d=d.contact)!=null?d.email:d:d:d;c==null?f=i._("Email address"):(f=c,this.props.isPageEligibleForEmail?j=l.jsx(b("FDSText.react"),{color:"placeholder",display:"inline",size:"meta1",children:i._("Primary {concatenate-symbol}{info-source}",[i._param("concatenate-symbol"," "+String.fromCodePoint(183)+" "),i._param("info-source",this.getEmailWithSubscriptionDescription())])}):j=k);break;case m.BIRTHDAY:e=l.jsx(b("Image.react"),{src:g("665080")});f=((d=this)!=null?(d=d.props)!=null?(d=d.contact)!=null?d.birthday:d:d:d)||i._("Date of birth");break;case m.ADDRESS:e=l.jsx(b("Image.react"),{src:g("542398")});f=((c=this)!=null?(c=c.props)!=null?(c=c.contact)!=null?c.address:c:c:c)||i._("Address");h=(d=this)!=null?(d=d.props)!=null?(d=d.contact)!=null?d.cityStateLine:d:d:d;(((c=this)!=null?(c=c.props)!=null?(c=c.contact)!=null?c.address:c:c:c)||((d=this)!=null?(d=d.props)!=null?(d=d.contact)!=null?d.cityStateLine:d:d:d))&&(j=k);break}return l.jsxs("div",{className:"_6tt2",children:[e,l.jsxs("div",{className:"_2pi9",children:[l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:f})}),h!==null?l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:h})}):null,this.props.shouldShowMergeContact?l.jsx(b("FDSText.react"),{color:"placeholder",display:"inline",size:"meta1",children:j}):null]})]},a+"_row")};d.getSecondaryRows=function(a){var c=this,d=null;switch(a){case m.PHONE:d=this.props.contact.SecondaryPhoneNumbers.map(function(a,c){return l.jsx("div",{className:"_6tt2",children:l.jsx("div",{className:"_89cw",children:l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:a.display_phone_number})})})},c+"SecondaryPhoneNumbers")});break;case m.EMAIL:d=this.props.contact.SecondaryEmails.map(function(a,d){return l.jsx("div",{className:"_6tt2",children:l.jsxs("div",{className:"_89cw",children:[l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:a.email_address})}),c.props.isPageEligibleForEmail?l.jsx(b("FDSText.react"),{color:"placeholder",display:"block",size:"meta1",children:c.getEmailWithSubscriptionDescription()}):null]})},d+"SecondaryEmails")});break;case m.ADDRESS:d=this.props.contact.SecondaryAddresses.map(function(a,c){var d;d=(d=a.address)!=null?d:"";a=(a=a.address_second_line)!=null?a:"";return l.jsx("div",{className:"_6tt2",children:l.jsxs("div",{className:"_89cw",children:[d.length?l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:d})}):null,a.length?l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:a})}):null]})},c+"SecondaryAddresses")});break}return l.jsx("div",{children:d},a+"_secondaryRow")};d.getEmailWithSubscriptionRow=function(){var a,c=null;switch((a=this.props)==null?void 0:(a=a.contact)==null?void 0:a.email_subscription_status){case"SUBSCRIBED":c=l.jsxs("div",{className:"_7-aq",children:[l.jsx("div",{className:"_3-8_",children:l.jsx(b("Image.react"),{src:g("497634")})}),l.jsx(b("FDSText.react"),{display:"block",size:"body3",children:i._("Subscribed")})]});break;case"NONSUBSCRIBER":c=l.jsxs("div",{className:"_7-aq",children:[l.jsx("div",{className:"_3-8_",children:l.jsx(b("Image.react"),{src:g("504587")})}),l.jsx(b("FDSText.react"),{display:"block",size:"body3",children:i._("Preference unknown")})]});break;case"UNSUBSCRIBED":c=l.jsxs("div",{className:"_7-aq",children:[l.jsx("div",{className:"_3-8_",children:l.jsx(b("Image.react"),{src:g("504587")})}),l.jsx(b("FDSText.react"),{display:"block",size:"body3",children:i._("Unsubscribed")})]});break;case"UNCONFIRMED":c=l.jsxs("div",{className:"_7-aq",children:[l.jsx("div",{className:"_3-8_",children:l.jsx(b("Image.react"),{src:g("513799")})}),l.jsx(b("FDSText.react"),{display:"block",size:"body3",children:i._("Confirm email preference")})]});break}return l.jsxs("div",{className:"_6tt2",children:[l.jsx(b("Image.react"),{src:g("506660")})," ",l.jsxs("div",{className:"_7-ar",children:[l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.email:a:a:a)||i._("Email address")})}),((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.email:a:a:a)?c:null]})]})};d.getEmailWithSubscriptionDescription=function(){var a,b=null;switch((a=this.props)==null?void 0:(a=a.contact)==null?void 0:a.email_subscription_status){case"SUBSCRIBED":b=i._("Subscribed");break;case"NONSUBSCRIBER":b=i._("Preference unknown");break;case"UNSUBSCRIBED":b=i._("Unsubscribed");break;case"UNCONFIRMED":b=i._("Confirm email preference")}return b};d.getIGRow=function(){var a,c,d,e;if(this.props.contact==null||this.props.contact.ig_profile_info==null)return;e=(e=this)!=null?(e=e.props)!=null?(e=e.contact)!=null?(e=e.ig_profile_info)!=null?e.ig_username:e:e:e:e;d=(d=this)!=null?(d=d.props)!=null?(d=d.contact)!=null?(d=d.ig_profile_info)!=null?d.ig_name:d:d:d:d;c=(c=this)!=null?(c=c.props)!=null?(c=c.contact)!=null?(c=c.ig_profile_info)!=null?c.ig_bio:c:c:c:c;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?(a=a.ig_profile_info)!=null?a.ig_website:a:a:a:a;return l.jsxs("div",{className:"_7wwy",children:[l.jsx(b("Image.react"),{src:g("687386")}),l.jsxs("div",{className:"_2pi9",children:[l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:e})}),d!==null?l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:d})}):null,l.jsxs("div",{className:"_2pi3",children:[c!==null?l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:c})}):null,a!==null?l.jsx(b("FDSText.react"),{color:"secondary",display:"block",size:"meta1",children:l.jsx(b("LineClamp.react"),{lines:1,children:a})}):null]})]})]})};d.render=function(){var a;return l.jsx(b("FDSCard.react"),{children:l.jsxs(b("FDSSection.react"),{children:[l.jsxs("div",{className:"_6tt3",children:[l.jsx(b("FDSText.react"),{size:"header2",children:i._("About")}),l.jsx("div",{className:"_6tt4",children:l.jsx(b("FDSLink.react"),{onClick:this.$1,showUnderline:"never",children:i._("Edit")})})]}),this.props.shouldShowMergeContact?l.jsx(b("FDSText.react"),{color:"placeholder",margin:"_3-8z",size:"header3",children:i._("Added Details")}):null,this.getRow(m.PHONE),this.props.shouldShowMergeContact?this.getSecondaryRows(m.PHONE):null,this.props.isPageEligibleForEmail&&!this.props.shouldShowMergeContact?this.getEmailWithSubscriptionRow():this.getRow(m.EMAIL),this.props.shouldShowMergeContact?this.getSecondaryRows(m.EMAIL):null,this.getRow(m.BIRTHDAY),this.getRow(m.ADDRESS),this.props.shouldShowMergeContact?this.getSecondaryRows(m.ADDRESS):null,this.props.shouldShowMergeContact?null:this.getIGRow(),this.props.shouldShowMergeContact&&this.props.contact.fbUserId!=null?l.jsx(b("CRMClientDetailsAboutSectionFacebook.react"),{details:this.props.contact,shouldSuppressProfileLink:this.props.shouldShowMergeContact}):null,this.props.shouldShowMergeContact&&((a=this.props.contact.igId)==null?void 0:a.id)!=null?l.jsx(b("CRMClientDetailsAboutSectionInstagram.react"),{details:this.props.contact,shouldSuppressProfileLink:this.props.shouldShowMergeContact}):null]})})};return c}(l.PureComponent);d=b("FluxContainer").create(c);f=a(d,{contact:j!==void 0?j:j=b("CRMClientDetailsAboutSection_contact.graphql")},k!==void 0?k:k=b("CRMClientDetailsAboutSectionRefetchQuery.graphql"));e.exports=f}),null);
__d("CRMClientDetailsActivityRoot.react",["cx","fbt","ix","Clipboard","CRMClientListActions","CRMClientListStore","CRMEventsLogger","FDSButton.react","FDSCard.react","FDSDropdownMenu.react","FDSSection.react","FDSSpinner.react","FDSText.react","FluxContainer","Image.react","PagesPlatformBookingMessageViewer","React","RelayModern","ServicesAppointmentDialogButtonTexts","ServicesAppointmentDialogRoot.react","ServicesAppointmentManagementDialogEnum","ServicesDateTimeUtils","XUITextInput.react","cxMargin","formatDate","setTimeout","CRMClientDetailsActivityRoot_contact.graphql","CRMClientDetailsActivityRootRefetchQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=b("React");a=b("RelayModern").createRefetchContainer;b("RelayModern").graphql;var m=b("ServicesAppointmentDialogButtonTexts").ACTIONS,n=b("ServicesAppointmentDialogButtonTexts").CANCEL_APPOINTMENT,o=b("ServicesAppointmentDialogButtonTexts").EDIT,p="customer_details_view",q={referrerUIComponent:"crm_client_activity_view",referrerUISurface:"crm"},r=function(c){babelHelpers.inheritsLoose(a,c);function a(){var a,b;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=b=c.call.apply(c,[this].concat(e))||this,b.onBookAgainClick=function(){b.props.onBookAgainClick(b.props.appointment)},a)||babelHelpers.assertThisInitialized(b)}var d=a.prototype;d.render=function(){var a=this,c,d,e;c=(c=this.props.appointment)==null?void 0:(c=c.suggestedTimeRange)==null?void 0:c.start;if(!this.props.appointment||!c)return null;d=!b("ServicesDateTimeUtils").isTimestampInPast(c,(d=this.props.appointment)==null?void 0:(d=d.suggestedTimeRange)==null?void 0:d.end);var f=[{label:o,onClick:function(){a.props.onEditClick(a.props.appointment)},type:"item"},{label:n,onClick:function(){a.props.onCancelClick(a.props.appointment)},type:"item"}];return l.jsxs("div",{className:"_2pie _6xec",children:[l.jsxs("div",{className:"_6yjf",children:[l.jsx(b("FDSText.react"),{display:"block",margin:"_3-94",size:"header3",children:((e=this.props.appointment)==null?void 0:(e=e.productItem)==null?void 0:e.name)||h._("No service selected")}),l.jsx(b("FDSText.react"),{display:"block",margin:"_3-94",size:"body1",children:(e=this.props.appointment)==null?void 0:e.readableDurationPrice}),l.jsxs(b("FDSText.react"),{color:"placeholder",display:"block",size:"body2",children:[b("formatDate")(c,"l, M j, Y")," ",h._("at")," ",b("formatDate")(c,"g:iA")]})]}),l.jsx("div",{className:"_6yjg",children:d?l.jsx(b("FDSDropdownMenu.react"),{isDisabled:this.props.disabled,items:f,label:m}):l.jsx(b("FDSButton.react"),{isDisabled:this.props.disabled,label:h._("Book Again"),onClick:this.onBookAgainClick})})]})};return a}(l.PureComponent);c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onBookAgainClick=function(a){if(d.state.showBookAgainDialog)return;b("CRMEventsLogger").log(d.props.pageID,"click_book_now","book_now_button_activity_item",p);d.setState({showBookAgainDialog:!0,selectedAppointment:a})},d.$1=function(a){d.setState({showEditDialog:a})},d.$2=function(a){d.setState({showBookAgainDialog:a})},d.$3=function(a){d.setState({showCancelDialog:a})},d.onCancelClick=function(a){if(d.state.showCancelDialog)return;b("CRMEventsLogger").log(d.props.pageID,"click_appointment_activity_delete","appointment_activity_delete_button",p);d.setState({showCancelDialog:!0,selectedAppointment:a})},d.onEditClick=function(a){if(d.state.showEditDialog)return;b("CRMEventsLogger").log(d.props.pageID,"click_appointment_activity_change","appointment_activity_change_button",p);d.setState({showEditDialog:!0,selectedAppointment:a})},d.copyFBAppointmentUrl=function(){d.setState({copiedLink:!0}),b("Clipboard").copy(d.props.bookFBAppointmentUrl||""),b("setTimeout")(function(){d.setState({copiedLink:!1})},2e3)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return!a?{copiedLink:!1,forceActivityRefetch:c.forceActivityRefetch,refetchLoading:!1,selectedAppointment:null,showBookAgainDialog:!1,showCancelDialog:!1,showEditDialog:!1}:{copiedLink:a.copiedLink,forceActivityRefetch:c.forceActivityRefetch,refetchLoading:a.refetchLoading,selectedAppointment:a.selectedAppointment,showBookAgainDialog:a.showBookAgainDialog,showCancelDialog:a.showCancelDialog,showEditDialog:a.showEditDialog}};var d=c.prototype;d.componentDidUpdate=function(){var a=this;if(this.state.forceActivityRefetch){var c;this.setState({refetchLoading:!0});b("CRMClientListActions").unsetActivityForceFetch();this.props.relay.refetch({pageContactID:(c=this.props.contact)==null?void 0:c.id,pageID:this.props.pageID},null,function(){a.setState({refetchLoading:!1})},{force:!0})}};d.onUpdateCompleted=function(a){a&&b("CRMClientListActions").forceActivityRefetch()};d.renderCancelDialog=function(){var a=this,c;return!this.state.showCancelDialog?null:l.jsx(b("ServicesAppointmentDialogRoot.react"),{causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").ADMIN_CANCEL,onToggle:this.$3,onUpdateCompleted:this.onUpdateCompleted,pageContactID:(c=this.state.selectedAppointment)==null?void 0:(c=c.pageContact)==null?void 0:c.id,pageID:this.props.pageID,referrerData:q,requestID:(c=this.state.selectedAppointment)==null?void 0:c.id,shown:this.state.showCancelDialog,userID:(c=this.state.selectedAppointment)==null?void 0:(c=c.user)==null?void 0:c.id,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};d.renderShowCreateAnotherDialog=function(){var a=this,c;return!this.state.showBookAgainDialog?null:l.jsx(b("ServicesAppointmentDialogRoot.react"),{causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").MANUAL_CREATE,onToggle:this.$2,pageContactID:(c=this.state.selectedAppointment)==null?void 0:(c=c.pageContact)==null?void 0:c.id,onUpdateCompleted:this.onUpdateCompleted,pageID:this.props.pageID,referrerData:q,shown:this.state.showBookAgainDialog,userID:(c=this.state.selectedAppointment)==null?void 0:(c=c.user)==null?void 0:c.id,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};d.renderShowDetailsDialog=function(){var a=this,c;return!this.state.showEditDialog?null:l.jsx(b("ServicesAppointmentDialogRoot.react"),{causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").EDIT,onToggle:this.$1,onUpdateCompleted:this.onUpdateCompleted,pageContactID:(c=this.state.selectedAppointment)==null?void 0:(c=c.pageContact)==null?void 0:c.id,pageID:this.props.pageID,referrerData:q,requestID:(c=this.state.selectedAppointment)==null?void 0:c.id,shown:this.state.showEditDialog,userID:(c=this.state.selectedAppointment)==null?void 0:(c=c.user)==null?void 0:c.id,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};d.render=function(){var a=this,c;c=(c=this.props.contact)==null?void 0:(c=c.appointments)==null?void 0:c.nodes;if(!c||!c.length){var d;return l.jsx(l.Fragment,{children:l.jsx(b("FDSCard.react"),{margin:this.props.margin,children:l.jsx(b("FDSSection.react"),{children:l.jsxs("div",{className:"_6-3l",children:[l.jsx(b("Image.react"),{src:i("693524")}),l.jsx(b("FDSText.react"),{color:"secondary",display:"block",margin:"_3-8-",size:"body1",textAlign:"center",children:h._("Follow up with {name} and let them book their next appointment online.",[h._param("name",(d=this.props.contact)==null?void 0:d.first_name)])}),l.jsxs("div",{className:"_3-8-",children:[l.jsx(b("XUITextInput.react"),{className:"_6-3m",height:"tall",value:this.props.bookFBAppointmentUrl}),l.jsx(b("FDSButton.react"),{isDisabled:this.state.copiedLink,label:this.state.copiedLink?h._("Copied!"):h._("Copy Link"),margin:"_3-9a",onClick:this.copyFBAppointmentUrl,use:"primary"})]})]})})})})}return l.jsxs("div",{children:[l.jsx(b("FDSCard.react"),{margin:this.props.margin,children:l.jsxs(b("FDSSection.react"),{children:[this.state.refetchLoading&&l.jsx("div",{className:"_6yjh",children:l.jsx(b("FDSSpinner.react"),{center:!0})}),l.jsx("div",{className:"_6xeo",children:l.jsx(b("FDSText.react"),{size:"header2",children:h._("Activity")})}),c&&c.map(function(b,c){return l.jsx(r,{appointment:b,disabled:a.state.refetchLoading,onBookAgainClick:a.onBookAgainClick,onCancelClick:a.onCancelClick,onEditClick:a.onEditClick},c)})]})}),this.renderShowCreateAnotherDialog(),this.renderShowDetailsDialog(),this.renderCancelDialog()]})};return c}(l.PureComponent);d=b("FluxContainer").create(c);f=a(d,{contact:j!==void 0?j:j=b("CRMClientDetailsActivityRoot_contact.graphql")},k!==void 0?k:k=b("CRMClientDetailsActivityRootRefetchQuery.graphql"));e.exports=f}),null);
__d("CRMEditAdditionalFieldsBody.react",["ix","cx","FDSText.react","FDSTextInput.react","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){c.props.onChangeValue(a,c.props.index)},c.$2=function(){c.props.onDeleteField(c.props.index)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return i.jsxs("div",{className:"_7r3w",children:[i.jsx("div",{className:"_7r2l",children:i.jsx(b("FDSText.react"),{size:"body1",weight:"bold",children:this.props.name})}),i.jsx(b("FDSTextInput.react"),{label:this.props.name,labelIsHidden:!0,onChange:this.$1,placeholder:"-",value:this.props.value}),i.jsx("div",{className:"_7r2m",children:i.jsx(b("Image.react"),{onClick:this.$2,src:g("478812")})})]})};return c}(i.PureComponent);e.exports=a}),null);
__d("CRMMutationUtils",["ClientIDs","RelayAPIConfig","RelayFBEnvironment","RelayModern","CRMMutationUtilsConsentForCrmLegalMutation.graphql","CRMMutationUtilsPageDeleteUploadedFileMutation.graphql","CRMMutationUtilsPageCustomFieldCreateMutation.graphql","CRMMutationUtilsRemovePageCustomFieldMutation.graphql","CRMMutationUtilsEditContactCustomFieldMutation.graphql","CRMMutationUtilsPagebulkCreateContactsFromCSVMutation.graphql","CRMMutationUtilsPageContactDeleteMutation.graphql","CRMMutationUtilsBanUserMutation.graphql","CRMMutationUtilsPageContactUpdateMutation.graphql","CRMMutationUtilsPageContactCreateMutation.graphql","CRMMutationUtilsUpdateLegalNoticeShouldShowMutation.graphql","CRMMutationUtilsBackfillPageCRMMutation.graphql","CRMMutationUtilsMergePageContactMutation.graphql","CRMMutationUtilsExportContactsListMutation.graphql","CRMMutationUtilsSaveFilterMutation.graphql","CRMMutationUtilsEditContactsFieldMutation.graphql","CRMMutationUtilsCreateNewLabelMutation.graphql","CRMMutationUtilsApplyAddedLabelMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=b("ClientIDs").getNewClientID,z=b("RelayModern").commitMutation;b("RelayModern").graphql;var A=g!==void 0?g:g=b("CRMMutationUtilsConsentForCrmLegalMutation.graphql"),B=h!==void 0?h:h=b("CRMMutationUtilsPageDeleteUploadedFileMutation.graphql"),C=i!==void 0?i:i=b("CRMMutationUtilsPageCustomFieldCreateMutation.graphql"),D=j!==void 0?j:j=b("CRMMutationUtilsRemovePageCustomFieldMutation.graphql"),E=k!==void 0?k:k=b("CRMMutationUtilsEditContactCustomFieldMutation.graphql"),F=l!==void 0?l:l=b("CRMMutationUtilsPagebulkCreateContactsFromCSVMutation.graphql"),G=m!==void 0?m:m=b("CRMMutationUtilsPageContactDeleteMutation.graphql"),H=n!==void 0?n:n=b("CRMMutationUtilsBanUserMutation.graphql"),I=o!==void 0?o:o=b("CRMMutationUtilsPageContactUpdateMutation.graphql"),J=p!==void 0?p:p=b("CRMMutationUtilsPageContactCreateMutation.graphql"),K=q!==void 0?q:q=b("CRMMutationUtilsUpdateLegalNoticeShouldShowMutation.graphql"),L=r!==void 0?r:r=b("CRMMutationUtilsBackfillPageCRMMutation.graphql"),M=s!==void 0?s:s=b("CRMMutationUtilsMergePageContactMutation.graphql"),N=t!==void 0?t:t=b("CRMMutationUtilsExportContactsListMutation.graphql"),O=u!==void 0?u:u=b("CRMMutationUtilsSaveFilterMutation.graphql"),P=v!==void 0?v:v=b("CRMMutationUtilsEditContactsFieldMutation.graphql"),Q=w!==void 0?w:w=b("CRMMutationUtilsCreateNewLabelMutation.graphql"),R=x!==void 0?x:x=b("CRMMutationUtilsApplyAddedLabelMutation.graphql");a={consentToCrmLegal:function(a,c){z(b("RelayFBEnvironment"),{mutation:A,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},deleteUploadedFile:function(a,c){z(b("RelayFBEnvironment"),{mutation:B,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},createCustomField:function(a,c){z(b("RelayFBEnvironment"),{mutation:C,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},deleteCustomField:function(a,c){var d=function(b,c){if(a.fieldID==null||a.contactID==null)return;c=b.get(a.contactID);if(c==null)return;b=c.getLinkedRecords("additional_custom_fields");if(b!=null){b=b.filter(function(b){b=b&&b.getLinkedRecord("custom_field");b=b&&b.getValue("id");return b!==a.fieldID});c.setLinkedRecords(b,"additional_custom_fields")}};return z(b("RelayFBEnvironment"),{mutation:D,updater:d,variables:{input:{actor_id:b("RelayAPIConfig").actorID,field_id:a.fieldID}},onCompleted:c&&c.onSuccess,onError:c&&c.onFailure})},editCustomField:function(a,c){var d=function(b,c){var d=b.get(a.contactID);if(d==null)return;c=c?(c=c.edit_contact_custom_field)==null?void 0:c.additional_custom_fields:a.fields;c=c.map(function(a){var c,d=y(),e=b.create(d,"CRMCustomField");e.setValue((c=a.custom_field)==null?void 0:c.id,"id");e.setValue((c=a.custom_field)==null?void 0:c.display_name,"display_name");c=b.create("edge:"+d,"ContactCustomFields");c.setValue(a.value,"value");c.setLinkedRecord(e,"custom_field");return c});d.setLinkedRecords(c,"additional_custom_fields")};return z(b("RelayFBEnvironment"),{mutation:E,optimisticUpdater:d,updater:d,variables:{input:{actor_id:b("RelayAPIConfig").actorID,page_id:a.pageID,additional_custom_fields:a.fields,contact_id:a.contactID}},onCompleted:c&&c.onSuccess,onError:c&&c.onFailure})},createCsvContacts:function(a,c){z(b("RelayFBEnvironment"),{mutation:F,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},deleteContact:function(a,c){a={actor_id:b("RelayAPIConfig").actorID,page_contact_ids:[a]};z(b("RelayFBEnvironment"),{mutation:G,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},banContact:function(a,c){a={actor_id:b("RelayAPIConfig").actorID,user_ids:a};z(b("RelayFBEnvironment"),{mutation:H,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},updateContact:function(a,c){z(b("RelayFBEnvironment"),{mutation:I,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},createContact:function(a,c){z(b("RelayFBEnvironment"),{mutation:J,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},updateLegalNoticeShouldShow:function(a,c){z(b("RelayFBEnvironment"),{mutation:K,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},runBackfillPageForCRM:function(a,c){z(b("RelayFBEnvironment"),{mutation:L,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},mergeContact:function(a,c){z(b("RelayFBEnvironment"),{mutation:M,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},exportContactsList:function(a,c){z(b("RelayFBEnvironment"),{mutation:N,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},saveFilter:function(a,c){z(b("RelayFBEnvironment"),{mutation:O,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},editContactsField:function(a,c){z(b("RelayFBEnvironment"),{mutation:P,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},createNewLabel:function(a,c){z(b("RelayFBEnvironment"),{mutation:Q,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})},applyAddedLabel:function(a,c){z(b("RelayFBEnvironment"),{mutation:R,variables:{input:a},onCompleted:function(a,b){c&&c(a,b)},onError:function(a){c&&c({},[a])}})}};e.exports=a}),null);
__d("CRMEditAdditionalFieldsDialog.react",["cx","fbt","CRMAddAdditionalFieldDialog.react","CRMEditAdditionalFieldsBody.react","CRMMutationUtils","FDSButton.react","FDSLink.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSText.react","React","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=600,k=560;function l(a){var c=a.isLoadingDelete?h._("Deleting Contact Field..."):h._("Delete Contact Field");return i.jsx(b("FDSModal.react"),{footer:i.jsx(b("FDSModalFooter.react"),{primaryButton:i.jsx(b("FDSButton.react"),{isDisabled:a.isLoadingDelete,label:c,margin:"_3-9a",onClick:a.onConfirmDeleteField,use:"primary"}),secondaryButton:i.jsx(b("FDSButton.react"),{isDisabled:a.isLoadingDelete,label:h._("Cancel"),onClick:a.onCancelDeleteField})}),header:i.jsx(b("FDSModalHeader.react"),{title:h._("Delete contact field?")}),isShown:a.fieldCurrentlyDeleting!=null,onHide:a.onCancelDeleteField,width:k,children:i.jsx(b("FDSSection.react"),{children:i.jsx(b("FDSText.react"),{children:h._("Deleting this contact field will permanently remove all associated information from all of your contacts. Do you want to delete this contact field?")})})})}function m(a){var c=a.additionalFieldList.map(function(c,d){var e;e=(e=c.custom_field)==null?void 0:e.display_name;c=c.value;return e!=null&&c!=null?i.jsx(b("CRMEditAdditionalFieldsBody.react"),{index:d,name:e,onChangeValue:a.onChangeValue,onDeleteField:a.onDeleteField,value:c},d):null});return i.jsxs("div",{className:"_7r2k",children:[c,c.length<20?i.jsx("div",{className:"_7q3f",children:i.jsx(b("FDSLink.react"),{onClick:a.onAddCustomField,children:h._("+ Add contact field")})}):null]})}function n(a){return i.jsx(b("FDSModal.react"),{footer:i.jsx(b("FDSModalFooter.react"),{primaryButton:i.jsx(b("FDSButton.react"),{label:h._("Confirm"),margin:"_3-9a",onClick:a.onConfirm,use:"primary"}),secondaryButton:i.jsx(b("FDSButton.react"),{label:h._("Go Back"),onClick:a.onCancel})}),header:i.jsx(b("FDSModalHeader.react"),{title:h._("Continue without saving?")}),isShown:a.showDialog,onHide:a.onCancel,width:k,children:i.jsx(b("FDSSection.react"),{children:i.jsx(b("FDSText.react"),{children:h._("If you cancel now, your new contact field won't be saved. Do you want to continue without saving?")})})})}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={additionalFieldList:d.props.additionalFieldList,fieldCurrentlyDeletingIndex:null,isLoadingDelete:!1,showCreateCustomFieldDialog:!1,showConfirmationDialog:!1,hasAddedCustomField:!1,haveFieldsBeenModified:!1},d.$1=function(){d.props.onSave(d.state.additionalFieldList)},d.$2=function(a,b){d.setState(function(c){c=c.additionalFieldList.slice();c[b].value=a;return{additionalFieldList:c,haveFieldsBeenModified:!0}})},d.$3=function(a){d.setState(function(b){return{fieldCurrentlyDeletingIndex:a}})},d.$4=function(){d.state.isLoadingDelete||d.setState({fieldCurrentlyDeletingIndex:null})},d.$5=function(){var a=d.state.fieldCurrentlyDeletingIndex;if(a==null)return;a=d.state.additionalFieldList[a];a=a==null?void 0:(a=a.custom_field)==null?void 0:a.id;if(a==null||a===""){d.setState(function(a){var b=a.additionalFieldList.slice();a.fieldCurrentlyDeletingIndex!=null&&b.splice(a.fieldCurrentlyDeletingIndex,1);return{fieldCurrentlyDeletingIndex:null,additionalFieldList:b}});return}d.setState({isLoadingDelete:!0});b("CRMMutationUtils").deleteCustomField({fieldID:a,contactID:d.props.pageContactID},{onSuccess:function(){d.setState(function(a){var b=a.additionalFieldList.slice();a.fieldCurrentlyDeletingIndex!=null&&b.splice(a.fieldCurrentlyDeletingIndex,1);return{fieldCurrentlyDeletingIndex:null,additionalFieldList:b,isLoadingDelete:!1}})},onFailure:function(){d.setState({fieldCurrentlyDeletingIndex:null,isLoadingDelete:!1})}})},d.$6=function(){d.setState({showCreateCustomFieldDialog:!0})},d.$7=function(){d.setState({showCreateCustomFieldDialog:!1})},d.$8=function(a){d.setState(function(b){b=b.additionalFieldList.slice();b.push({custom_field:{id:null,display_name:a},value:""});return{showCreateCustomFieldDialog:!1,additionalFieldList:b,hasAddedCustomField:!0,haveFieldsBeenModified:!0}})},d.$9=function(){if(d.state.hasAddedCustomField){d.setState({showConfirmationDialog:!0});return}d.props.onHide()},d.$10=function(){d.setState({showConfirmationDialog:!1}),d.props.onHide()},d.$11=function(){d.setState({showConfirmationDialog:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.state.fieldCurrentlyDeletingIndex!=null?this.state.additionalFieldList[this.state.fieldCurrentlyDeletingIndex]:null;return i.jsxs(i.Fragment,{children:[i.jsx(b("FDSModal.react"),{footer:i.jsx(b("FDSModalFooter.react"),{primaryButton:i.jsx(b("FDSButton.react"),{isDisabled:!this.state.haveFieldsBeenModified,label:h._("Save"),margin:"_3-9a",onClick:this.$1,use:"primary"}),secondaryButton:i.jsx(b("FDSButton.react"),{label:h._("Cancel"),onClick:this.$9})}),header:i.jsx(b("FDSModalHeader.react"),{title:h._("Additional information")}),isShown:!0,onHide:this.$9,width:j,children:i.jsx(b("FDSSection.react"),{children:i.jsx(m,{additionalFieldList:this.state.additionalFieldList,onAddCustomField:this.$6,onChangeValue:this.$2,onDeleteField:this.$3})})}),i.jsx(l,{fieldCurrentlyDeleting:a,isLoadingDelete:this.state.isLoadingDelete,onCancelDeleteField:this.$4,onConfirmDeleteField:this.$5}),this.state.showCreateCustomFieldDialog?i.jsx(b("CRMAddAdditionalFieldDialog.react"),{onCancel:this.$7,onConfirm:this.$8}):null,i.jsx(n,{onCancel:this.$11,onConfirm:this.$10,showDialog:this.state.showConfirmationDialog})]})};return c}(i.PureComponent);e.exports=a}),null);
__d("CRMClientDetailsAdditionalFields.react",["cx","fbt","BusinessCRMConfigStore","CRMAdditionalFieldsList.react","CRMEditAdditionalFieldsDialog.react","CRMMutationUtils","FDSCard.react","FDSLink.react","FDSSection.react","FDSText.react","React","RelayModern","CRMClientDetailsAdditionalFields_contact.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i;a=b("BusinessCRMConfigStore").withStore;var j=b("React");c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;d=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showAllFields:!1,showEditDialog:!1},d.$1=function(){d.setState({showEditDialog:!0})},d.$2=function(){d.setState({showAllFields:!0})},d.$4=function(a){var c;c=(c=d.props.contact)==null?void 0:c.id;c!=null&&b("CRMMutationUtils").editCustomField({pageID:d.props.pageID,fields:a,contactID:c});d.setState({showEditDialog:!1})},d.$5=function(){d.setState({showEditDialog:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$3=function(a){a=a.additional_custom_fields.filter(function(a){return a!=null});return a.map(function(a){var b;return{custom_field:{id:(b=a.custom_field)==null?void 0:b.id,display_name:(b=a.custom_field)==null?void 0:b.display_name},value:a.value}})};d.render=function(){var a;if(!((a=this.props.store.get("config"))==null?void 0:a.shouldShowImportContacts))return j.jsx("div",{});a=this.$3(this.props.contact);return j.jsxs(j.Fragment,{children:[j.jsx(b("FDSCard.react"),{margin:this.props.margin,children:j.jsxs(b("FDSSection.react"),{children:[j.jsxs("div",{className:"_7q3c",children:[j.jsx(b("FDSText.react"),{size:"header2",children:h._("Additional information")}),j.jsx("div",{className:"_7q3d",children:j.jsx(b("FDSLink.react"),{onClick:this.$1,showUnderline:"never",children:h._("Edit")})})]}),j.jsx(b("CRMAdditionalFieldsList.react"),{additionalFieldList:a,onClickSeeMore:this.$2,showAll:this.state.showAllFields})]})}),this.state.showEditDialog?j.jsx(b("CRMEditAdditionalFieldsDialog.react"),{additionalFieldList:a,onHide:this.$5,onSave:this.$4,pageContactID:(a=this.props.contact)==null?void 0:a.id}):null]})};return c}(j.PureComponent);e.exports=a(c(d,{contact:i!==void 0?i:i=b("CRMClientDetailsAdditionalFields_contact.graphql")}))}),null);
__d("CRMBlockIGUserConfirmationDialog.react",["fbt","FDSButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("FDSModal.react"),{footer:h.jsx(b("FDSModalFooter.react"),{primaryButton:h.jsx(b("FDSButton.react"),{label:g._("Block"),onClick:this.props.onConfirm,use:"primary"}),secondaryButton:h.jsx(b("FDSButton.react"),{label:g._("Cancel"),onClick:this.props.onCancel})}),header:h.jsx(b("FDSModalHeader.react"),{title:g._("Block {username}?",[g._param("username",this.props.username)])}),isShown:this.props.shown,label:"Block Modal",onHide:this.props.onCancel,children:h.jsxs(b("FDSSection.react"),{children:[g._("They won't be able to find your profile, posts or story, or send you messages on Instagram, and your conversation history will be removed. They won't be notified that you've blocked them."),h.jsx("br",{})," ",h.jsx("br",{}),this.props.isInbox?g._("If you unblock them in the Instagram app, your conversation will return to the Inbox."):null]})})};return c}(h.PureComponent);e.exports=a}),null);
__d("CRMClientProfilePhoto.react",["React","RelayModern","ServicesUINoProfileImage.react","ServicesUIProfileImage.react","CRMClientProfilePhoto_profilePhoto.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=this.props.size;a=(a=this.props.profilePhoto)==null?void 0:(a=a.profilePhotoURIs)==null?void 0:(a=a[0])==null?void 0:a.uri;if(a==null){var d;d=((d=this)!=null?(d=d.props)!=null?(d=d.profilePhoto)!=null?d.firstName:d:d:d)||"-";return h.jsx(b("ServicesUINoProfileImage.react"),{letter:d[0],size:c})}return h.jsx(b("ServicesUIProfileImage.react"),{size:c,src:a})};return c}(h.PureComponent);e.exports=a(c,{profilePhoto:g!==void 0?g:g=b("CRMClientProfilePhoto_profilePhoto.graphql")})}),null);
__d("IGMessageMarkThreadMutation",["RelayFBEnvironment","RelayModern","IGMessageMarkThreadMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("IGMessageMarkThreadMutation.graphql");function a(a,c,d,e,f,g,j){return h(b("RelayFBEnvironment"),{mutation:i,variables:{input:{actor_id:a,thread_id:c,source:"web",folder:d,mark_as_follow_up:e,mark_as_read:f}},onCompleted:g,onError:j})}e.exports={commit:a}}),null);
__d("IGMessageThreadAdminAssignmentMutation",["RelayFBEnvironment","RelayModern","IGMessageThreadAdminAssignmentMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("IGMessageThreadAdminAssignmentMutation.graphql");function a(a,c,d,e,f){return h(b("RelayFBEnvironment"),{mutation:i,variables:{input:{actor_id:a,thread_id:c,source:"web",admin_id:d}},onCompleted:e,onError:f})}e.exports={commit:a}}),null);
__d("PagesManagerAction",["PagesManagerActionType","PagesManagerDispatcher"],(function(a,b,c,d,e,f){"use strict";a={viewListItem:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.VIEW,listItem:a})},clearViewListItem:function(){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.VIEW,listItem:null})},setInitialViewItem:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.INITIAL_VIEW,item:a})},clearInitialViewItem:function(){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.CLEAR_INITIAL_VIEW})},setLayoutHeight:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LAYOUT.HEIGHT_CHANGE,layoutHeight:a})},setListNavigationHeight:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LAYOUT.LIST_HEIGHT_CHANGE,height:a})},setFooterHeight:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LAYOUT.FOOTER_HEIGHT_CHANGE,height:a})},setHeaderHeight:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LAYOUT.HEADER_HEIGHT_CHANGE,height:a})},setListHeaderHeight:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LAYOUT.LIST_HEADER_HEIGHT_CHANGE,height:a})},handleSelectionChange:function(a,c,d){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.SELECT,rowsAdded:a,rowsRemoved:c,selectedRows:d})},handleSelectionMapChange:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.SELECT,selectedRowsMap:a})},deselectAll:function(){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.DESELECT_ALL})},toggleBulkSelectionMode:function(){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.BULK_SELECTION_TOGGLE})},setThreadLabels:function(a,c){b("PagesManagerDispatcher").dispatch({selectedThreadLabels:a,currentThreadID:c,type:b("PagesManagerActionType").LIST.SET_THREAD_LABELS})},handleThreadSelectionChange:function(a,c){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.SELECT_THREAD,threadID:a,toggle:c})},clearBulkSelection:function(){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.CLEAR_BULK_SELECTION})},setBulkActionResult:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.BULK_ACTION_RESULT,result:a})},removeLastBulkActionResult:function(){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.REMOVE_BULK_ACTION_RESULT})}};e.exports=a}),null);
__d("PagesManagerLogger",["FBLogger","PagesAdminToolUIActionType","PagesEventObserver","immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Map;var g=a(b("PagesAdminToolUIActionType")).toArray();c=function(){function a(){}var c=a.prototype;c.$1=function(a){if(g.indexOf(a)<0){b("FBLogger")("pages").mustfix("Invalid PagesAdminToolUIActionType: %s",a);return!1}return!0};c.$2=function(a,c,d,e){if(!this.$1(c))return;e=e||{};e.action_type=c;b("PagesEventObserver").notify(a,d,e)};c.logContextCardUIAction=function(a,b,c){this.$2("pages_admin_tool_context_card_ui_action",a,b,c)};c.logManageTagUIAction=function(a,b,c){this.$2("pages_admin_tool_manage_tag_ui_action",a,b,c)};c.logMessageInboxUIAction=function(a,b,c){this.$2("pages_admin_tool_message_inbox_ui_action",a,b,c)};c.logHovercardUIAction=function(a,b,c){this.$2("pages_admin_tool_hovercard_ui_action",a,b,c)};return a}();e.exports=new c()}),null);
__d("CRMClientDetailsHeader.react",["ix","cx","fbt","BUIProgressBar.react","CRMBlockIGUserConfirmationDialog.react","CRMClientListActions","CRMClientListStore","CRMClientProfilePhoto.react","CRMEventsLogger","CRMMutationUtils","FBConfirmDialog.react","FBModal.react","FDSButton.react","FDSDropdownMenu.react","FDSLink.react","FluxContainer","IGMessageConnectionStatusStore","IGMessageDataDispatcher","IGMessageInboxStore","IGMessageServerActions","Image.react","Layout.react","LineClamp.react","PagesPlatformBookingMessageViewer","React","RelayModern","ServicesAppointmentDialogRoot.react","ServicesAppointmentManagementDialogEnum","ServicesMessengerSidebarActions","XUIGrayText.react","asset","cxMargin","nullthrows","CRMClientDetailsHeader_contact.graphql","CRMClientDetailsHeaderRefetchQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=b("React");a=b("RelayModern").createRefetchContainer;b("RelayModern").graphql;var m=b("Layout.react").Column,n=b("Layout.react").FillColumn,o=300,p="customer_details_view";c=function(a){babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return{deletingOrBanning:a?a.deletingOrBanning:!1,forceRefetch:c.forceRefetch,showBookNowDialog:a?a.showBookNowDialog:!1,showDeleteOrBanConfirmDialog:a?a.showDeleteOrBanConfirmDialog:!1,showBlockIGUserDialog:a?a.showBlockIGUserDialog:!1}};function c(c){var d;d=a.call(this,c)||this;d.showDeleteOrBanConfirmDialog=function(){var a;if(d.state.showDeleteOrBanConfirmDialog)return;b("CRMEventsLogger").log(d.props.pageID,"click_delete_customer","delete_customer_button",p,(a=d.props.contact)==null?void 0:a.id);d.setState({showDeleteOrBanConfirmDialog:!0})};d.onDeleteOrBanConfirmDialogCancel=function(){var a;b("CRMEventsLogger").log(d.props.pageID,"click_delete_customer_cancel_button","delete_customer_button_cancel_button",p,(a=d.props.contact)==null?void 0:a.id);d.setState({showDeleteOrBanConfirmDialog:!1})};d.deleteContact=function(){var a;if(d.state.deletingOrBanning)return;d.setState({deletingOrBanning:!0,showDeleteOrBanConfirmDialog:!1});b("CRMEventsLogger").log(d.props.pageID,"click_delete_customer_confirm_button","delete_customer_button_confirm_button",p,(a=d.props.contact)==null?void 0:a.id);b("CRMMutationUtils").deleteContact(d.props.contact.id,function(a,b){d.props.onDelete()})};d.banContact=function(){var a;if(d.state.deletingOrBanning)return;d.setState({deletingOrBanning:!0,showDeleteOrBanConfirmDialog:!1});b("CRMEventsLogger").log(d.props.pageID,"click_block_customer_confirm_button","ban_customer_button",p,d.props.contact.id);a=(a=babelHelpers.assertThisInitialized(d))!=null?(a=a.props)!=null?(a=a.contact)!=null?(a=a.user)!=null?a.id:a:a:a:a;a!==null&&a!==void 0&&b("CRMMutationUtils").banContact([a],function(a,c){d.props.onDelete(),b("CRMClientListActions").forceRefetch()})};d.toggleBookNowDialog=function(a){if(a&&!d.state.showBookNowDialog){var c;b("CRMEventsLogger").log(d.props.pageID,"click_book_now","book_now_button_details_header",p,(c=d.props.contact)==null?void 0:c.id)}d.setState({showBookNowDialog:a})};d.onBookNowDialogCompleted=function(a){a&&(b("CRMClientListActions").forceRefetch(),b("CRMClientListActions").forceActivityRefetch(),d.openMessenger())};d.onCancelBlockIGUser=function(){var a;d.setState({showBlockIGUserDialog:!1});b("CRMEventsLogger").log(d.props.pageID,"click_block_ig_customer_cancel_button","block_customer_cancel_button",p,(a=d.props.contact)==null?void 0:a.id)};d.onConfirmBlockIGUser=function(){var a,c;d.setState({showBlockIGUserDialog:!1});var e=b("IGMessageServerActions").getForFBID(d.props.pageID);c=(c=babelHelpers.assertThisInitialized(d))!=null?(c=c.props)!=null?(c=c.contact)!=null?c.igUserId:c:c:c;a=(a=babelHelpers.assertThisInitialized(d))!=null?(a=a.props)!=null?(a=a.contact)!=null?a.igThreadId:a:a:a;c!=null&&a!=null&&(e.blockUser(a,c),d.props.onDelete());b("CRMEventsLogger").log(d.props.pageID,"click_block_ig_customer_confirm_button","block_customer_confirm_button",p,(e=d.props.contact)==null?void 0:e.id)};d.$3=function(){var a;if(d.state.showBlockIGUserDialog)return;b("CRMEventsLogger").log(d.props.pageID,"click_block_ig_customer_button","block_customer_button",p,(a=d.props.contact)==null?void 0:a.id);d.setState({showBlockIGUserDialog:!0})};d.$4=function(){var a;window.open("https://help.instagram.com/568100683269916/?ref=reportincrm","_blank");b("CRMEventsLogger").log(d.props.pageID,"click_report_ig_customer_button","report_customer_button",p,(a=d.props.contact)==null?void 0:a.id)};d.openMessenger=function(){var a;a=(a=babelHelpers.assertThisInitialized(d))!=null?(a=a.props)!=null?(a=a.contact)!=null?(a=a.user)!=null?a.id:a:a:a:a;if(a!=null){var c;b("CRMEventsLogger").log(d.props.pageID,"click_open_messages","messages_icon",p,(c=d.props.contact)==null?void 0:c.id);b("ServicesMessengerSidebarActions").openSidebar(a)}};d.openIGDirectSidebar=function(){var a;a=(a=babelHelpers.assertThisInitialized(d))!=null?(a=a.props)!=null?(a=a.contact)!=null?a.igThreadId:a:a:a;a!=null&&b("ServicesMessengerSidebarActions").openSidebar(null,a,"INSTAGRAM_DIRECT");b("CRMEventsLogger").log(d.props.pageID,"click_open_ig_direct","ig_direct_icon",p,(a=d.props.contact)==null?void 0:a.id)};d.onClickIGProfileButton=function(){var a;b("CRMEventsLogger").log(d.props.pageID,"click_go_to_ig_profile","ig_profile_icon",p,(a=d.props.contact)==null?void 0:a.id)};b("IGMessageDataDispatcher").explicitlyRegisterStores([b("IGMessageInboxStore"),b("IGMessageConnectionStatusStore")]);return d}var d=c.prototype;d.componentDidUpdate=function(a,b){!b.forceRefetch&&this.state.forceRefetch&&this.refetch()};d.refetch=function(){this.props.relay.refetch({page_contact_id:this.props.contact.id,page_id:this.props.pageID},null,function(){b("CRMClientListActions").unsetForceFetch()},{force:!0})};d.getDescription=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.description:a:a:a;return l.jsx(b("XUIGrayText.react"),{display:"block",size:"header4",children:l.jsx(b("LineClamp.react"),{lines:1,children:a})})};d.getClientName=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.name:a:a:a;return l.jsx(b("XUIGrayText.react"),{className:"_6t2t",display:"block",shade:"medium",size:"header4",weight:"bold",children:l.jsx(b("LineClamp.react"),{lines:1,children:a})})};d.getBookNowButton=function(){var a=this;return l.jsx(b("FDSButton.react"),{icon:l.jsx(b("Image.react"),{src:g("482554")}),label:i._("Book now"),onClick:function(){a.toggleBookNowDialog(!0)},use:"primary"})};d.getCTAButton=function(){if(this.props.isServiceBusiness)return this.getBookNowButton();if(this.isFBUser())return l.jsx(b("FDSButton.react"),{icon:l.jsx(b("Image.react"),{src:g("1183236")}),label:i._("Send Message"),onClick:this.openMessenger,use:"primary"});else if(this.isIGUser())return l.jsx(b("FDSButton.react"),{icon:l.jsx(b("Image.react"),{src:g("1183231")}),label:i._("Send message"),onClick:this.openIGDirectSidebar,use:"primary"});else return null};d.getBookNowDialog=function(){var a=this,c;return!this.props.isServiceBusiness||!this.state.showBookNowDialog?null:l.jsx(b("ServicesAppointmentDialogRoot.react"),{causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").MANUAL_CREATE,onToggle:this.toggleBookNowDialog,onUpdateCompleted:this.onBookNowDialogCompleted,pageContactID:((c=this.props.contact)==null?void 0:c.id)||void 0,pageID:this.props.pageID,referrerData:{referrerUIComponent:"crm_client_detail_view_cta",referrerUISurface:"crm"},shown:this.state.showBookNowDialog,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};d.getDeleteOrBanConfirmationDialog=function(){if(!this.state.showDeleteOrBanConfirmDialog)return null;if(this.isFBUser()){var a;a=((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.name:a:a:a)||"";var c=this.props.contact.is_banned_by_page,d=i._("Ban {name}?",[i._param("name",a)]),e=i._("Are you sure that you want to ban {name} from this Page? People who are banned can't post, comment or take other actions on your Page. They won't be notified.",[i._param("name",a)]),f=i._("Ban from Page");c===!0&&(d=i._("Remove ban from Page?"),e=i._("Are you sure that you want to remove {name}'s ban from this Page? They will be able to post, comment and take other actions on your Page.",[i._param("name",a)]),f=i._("Remove Ban from Page"));return l.jsx(b("FBConfirmDialog.react"),{cancelButtonText:i._("Cancel"),confirmButtonText:f,content:e,onCancel:this.onDeleteOrBanConfirmDialogCancel,onConfirm:this.banContact,onToggle:this.onDeleteOrBanConfirmDialogCancel,shown:!0,title:d})}return l.jsx(b("FBConfirmDialog.react"),{content:i._("Are you sure that you want to delete this contact? Deleting this contact will also delete all of their appointments."),onCancel:this.onDeleteOrBanConfirmDialogCancel,onConfirm:this.deleteContact,onToggle:this.onDeleteOrBanConfirmDialogCancel,shown:!0,title:i._("Delete contact")})};d.getBlockIGUserConfirmationDialog=function(){var a;if(!this.state.showBlockIGUserDialog)return null;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?(a=a.igProfileInfo)!=null?a.username:a:a:a:a;return l.jsx(b("CRMBlockIGUserConfirmationDialog.react"),{isInbox:!1,onCancel:this.onCancelBlockIGUser,onConfirm:this.onConfirmBlockIGUser,shown:this.state.showBlockIGUserDialog,username:b("nullthrows")(a)})};d.$1=function(){var a=i._("Block"),b=i._("Report"),c=this.props.contact.is_banned_by_page===!0?i._("Remove ban"):i._("Ban"),d=i._("Delete");this.isIGUser()?a=[this.$2(a,this.$3),this.$2(b,this.$4)]:this.isFBUser()?a=[this.$2(c,this.showDeleteOrBanConfirmDialog)]:a=[this.$2(d,this.showDeleteOrBanConfirmDialog)];return a};d.$2=function(a,b){return{type:"item",label:a,onClick:b}};d.getMessengerButton=function(){return!this.props.isServiceBusiness||!this.hasButtonType("MESSAGE")||!this.isFBUser()?null:l.jsx(m,{className:"_3-9a _6t1z _6t1-",children:l.jsx(b("FDSButton.react"),{icon:l.jsx(b("Image.react"),{src:g("501143")}),label:i._("Open Messages"),labelIsHidden:!0,onClick:this.openMessenger})})};d.getFBProfileButton=function(){var a=this,c;c=(c=this)!=null?(c=c.props)!=null?(c=c.contact)!=null?(c=c.user)!=null?c.url:c:c:c:c;return this.props.shouldSuppressProfileLinks||c==null?null:l.jsx(m,{className:"_3-9a _6t1z _6t1-",children:l.jsx(b("FDSLink.react"),{href:c,onClick:function(){var c;b("CRMEventsLogger").log(a.props.pageID,"click_go_to_fb_profile","fb_profile_icon",p,(c=a.props.contact)==null?void 0:c.id)},target:"_blank",children:l.jsx(b("FDSButton.react"),{icon:l.jsx(b("Image.react"),{src:g("490808")}),label:i._("Facebook Profile"),labelIsHidden:!0})})})};d.getIGDirectButton=function(){return!this.props.isServiceBusiness||!this.hasButtonType("MESSAGE_IG_DIRECT")?null:l.jsx(m,{className:"_3-9a _6t1z _6t1-",children:l.jsx(b("FDSButton.react"),{icon:l.jsx(b("Image.react"),{src:g("898436")}),label:i._("Instagram Direct message"),labelIsHidden:!0,onClick:this.openIGDirectSidebar})})};d.hasIGDirectButton=function(){var a;a=((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.contactCTAs:a:a:a)||[];a=a.find(function(a){return a.ctaType==="MESSAGE_IG_DIRECT"});return a!=null};d.getIGProfileButton=function(){var a;if(this.props.shouldSuppressProfileLinks)return null;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.profile_uris:a:a:a;a=a&&a.find(function(a){return a.platform==="INSTAGRAM"});a=a&&a.uri;return a==null?null:l.jsx(m,{className:"_3-9a _6t1z _6t1-",children:l.jsx(b("FDSLink.react"),{href:a,onClick:this.onClickIGProfileButton,target:"_blank",children:l.jsx(b("FDSButton.react"),{icon:l.jsx(b("Image.react"),{src:g("692652")}),label:i._("Instagram Profile"),labelIsHidden:!0})})})};d.isFBUser=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?(a=a.user)!=null?a.id:a:a:a:a;return a!=null};d.isIGUser=function(){var a;return((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.igUserId:a:a:a)!=null&&((a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.igThreadId:a:a:a)!=null};d.hasButtonType=function(a){var b;b=((b=this)!=null?(b=b.props)!=null?(b=b.contact)!=null?b.contactCTAs:b:b:b)||[];b=b.find(function(b){return b.ctaType===a});if(b==null){var c;c=((c=this)!=null?(c=c.props)!=null?(c=c.contact)!=null?c.moreActions:c:c:c)||[];b=c.find(function(b){return b.ctaType===a})}return b!=null};d.getMoreActionsMenu=function(){return l.jsx(b("FDSDropdownMenu.react"),{items:this.$1(),label:"More Items",useEllipsisIcon:!0})};d.getDeletingOrBanningOverlay=function(){if(this.state.deletingOrBanning){if(this.isFBUser()){var a=this.props.contact.is_banned_by_page===!0?i._("Removing ban..."):i._("Banning contact...");return l.jsx(b("FBModal.react"),{shown:!0,children:l.jsx(b("BUIProgressBar.react"),{className:"_6t2u",isBuffering:!0,message:a,padding:!1,width:o})})}return l.jsx(b("FBModal.react"),{shown:!0,children:l.jsx(b("BUIProgressBar.react"),{className:"_6t2u",isBuffering:!0,message:i._("Deleting contact..."),padding:!1,width:o})})}return null};d.render=function(){return l.jsxs("div",{children:[this.getDeletingOrBanningOverlay(),this.getDeleteOrBanConfirmationDialog(),this.getBlockIGUserConfirmationDialog(),l.jsxs(b("Layout.react"),{className:"_6t2v",children:[l.jsx(m,{className:"_3-9a",children:l.jsx(b("CRMClientProfilePhoto.react"),{profilePhoto:this.props.contact,size:"large"})}),l.jsxs(n,{className:"_3-9c _6t1z",children:[this.getClientName(),this.getDescription()]}),l.jsxs(m,{className:"_3-9a _6t1z _6t1-",children:[this.getBookNowDialog(),this.getCTAButton()]}),this.getMessengerButton(),this.getFBProfileButton(),this.getIGDirectButton(),this.getIGProfileButton(),l.jsx(m,{className:"_3-9a _6t1z",children:l.jsx("div",{className:"_6t1- _3-91",children:this.getMoreActionsMenu()})})]})]})};return c}(l.PureComponent);d=b("FluxContainer").create(c);f=a(d,{contact:j!==void 0?j:j=b("CRMClientDetailsHeader_contact.graphql")},k!==void 0?k:k=b("CRMClientDetailsHeaderRefetchQuery.graphql"));e.exports=f}),null);
__d("CRMClientDetailsDeleteLabelMutation",["RelayAPIConfig","RelayFBEnvironment","RelayModern","RelayRuntime","CRMClientDetailsDeleteLabelMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayRuntime").ConnectionHandler,i=b("RelayModern").commitMutation;b("RelayModern").graphql;var j=g!==void 0?g:g=b("CRMClientDetailsDeleteLabelMutation.graphql");function a(a,c){var d=function(b){if(a.pageID==null||a.connectionName==null)return;var c=a.connectionName;b=b.get(a.pageID);if(!b)return;b=h.getConnection(b,c);b&&h.deleteNode(b,a.id)};return i(b("RelayFBEnvironment"),{mutation:j,updater:d,optimisticUpdater:d,variables:{input:{actor_id:b("RelayAPIConfig").actorID,business_presence_custom_label_id:a.id}},onCompleted:c&&c.onSuccess,onError:c&&c.onFailure})}e.exports={commit:a}}),null);
__d("CRMClientDetailsUnsetLabelMutation",["RelayAPIConfig","RelayFBEnvironment","RelayModern","RelayRuntime","CRMClientDetailsUnsetLabelMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayRuntime").ConnectionHandler,i=b("RelayModern").commitMutation;b("RelayModern").graphql;var j=g!==void 0?g:g=b("CRMClientDetailsUnsetLabelMutation.graphql");function a(a,c){var d=function(b,c){var d=a.connectionName;if(d==null)return;c=a.pageContactID!==null?a.pageContactID:c.page_contact_unset_label.page_contact.id;if(c==null)return;b=b.get(c);if(!b)return;c=h.getConnection(b,d);c&&h.deleteNode(c,a.id)};return i(b("RelayFBEnvironment"),{mutation:j,optimisticUpdater:d,updater:d,variables:{input:{actor_id:b("RelayAPIConfig").actorID,page_contact_id:a.pageContactID,label_name:a.labelName}},onCompleted:c&&c.onSuccess,onError:c&&c.onFailure})}e.exports={commit:a}}),null);
__d("CRMClientDetailsUpdateLabelColorMutation",["RelayAPIConfig","RelayFBEnvironment","RelayModern","nullthrows","CRMClientDetailsUpdateLabelColorMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("CRMClientDetailsUpdateLabelColorMutation.graphql");function a(a,c){return h(b("RelayFBEnvironment"),{mutation:i,variables:{input:{actor_id:b("RelayAPIConfig").actorID,business_presence_custom_label_id:a.id,color:a.color}},onCompleted:function(a){if(c){var d;d={color:b("nullthrows")((d=a.update_color_business_presence_custom_label)==null?void 0:(d=d.business_presence_custom_label)==null?void 0:d.label_color),id:b("nullthrows")((d=a.update_color_business_presence_custom_label)==null?void 0:(d=d.business_presence_custom_label)==null?void 0:d.id),name:b("nullthrows")((d=a.update_color_business_presence_custom_label)==null?void 0:(a=d.business_presence_custom_label)==null?void 0:a.name)};c.onSuccess(d)}},onError:c&&c.onFailure})}e.exports={commit:a}}),null);
__d("CustomLabelUtils",["CRMClientDetailsCreateLabelMutation","CRMClientDetailsDeleteLabelMutation","CRMClientDetailsSetLabelMutation","CRMClientDetailsUnsetLabelMutation","CRMClientDetailsUpdateLabelColorMutation","RelayRuntime"],(function(a,b,c,d,e,f){"use strict";var g=b("RelayRuntime").ConnectionHandler;d=25;f=200;function a(a,b){return b.length===0?a:a.filter(function(a){return!b.some(function(b){return b?a.name===b.name:!0})})}var h=function(a,c,d,e,f){a={name:a,pageID:d,color:c,connectionName:e};b("CRMClientDetailsCreateLabelMutation").commit(a,f)},i=function(a,c,d,e){a={id:a,pageID:c,connectionName:d};b("CRMClientDetailsDeleteLabelMutation").commit(a,e)},j=function(a,c,d){a={id:a,color:c};b("CRMClientDetailsUpdateLabelColorMutation").commit(a,d)},k=function(a,c,d,e,f,g,h,i){a={id:a,labelName:c,pageContactID:d,pageID:e,contactLabelsConnection:f,pageLabelsConnection:g,color:h};b("CRMClientDetailsSetLabelMutation").commit(a,i)},l=function(a,c,d,e,f){a={id:a,labelName:c,pageContactID:d,connectionName:e};b("CRMClientDetailsUnsetLabelMutation").commit(a,f)},m=function(a,b,c,d){if(d==null||b==null)return;b=a.get(b);if(!b)return;b=g.getConnection(b,d);if(!b)return;d=g.createEdge(a,b,c,"CustomLabelsEdge");b&&d&&g.insertEdgeBefore(b,d)};function c(a,b){var c={},d=[];for(var e=0;e<a.length;e++){var f;f=(f=a[e].node)==null?void 0:f.name;f!=null&&c[f]!==!0&&(c[f]=!0,d[d.length]=a[e])}for(var f=0;f<b.length;f++){e=(a=b[f].node)==null?void 0:a.name;e!=null&&c[e]!==!0&&(c[e]=!0,d[d.length]=b[f])}return d}e.exports={TAG_LIMIT:f,MAX_LABEL_NAME_LENGTH:d,getTypeaheadLabels:a,onAddLabel:k,onRemoveLabel:l,onCreateLabel:h,onDeleteLabel:i,onUpdateLabel:j,createLabelUpdater:m,mergeContactAndCustomerLabels:c}}),null);
__d("CRMClientDetailsCreateLabelMutation",["ClientIDs","CustomLabelUtils","RelayAPIConfig","RelayFBEnvironment","RelayModern","nullthrows","CRMClientDetailsCreateLabelMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ClientIDs").getNewClientID,i=b("CustomLabelUtils").createLabelUpdater,j=b("RelayModern").commitMutation;b("RelayModern").graphql;var k=g!==void 0?g:g=b("CRMClientDetailsCreateLabelMutation.graphql");function a(a,c){var d=function(b){if(!a.pageID)return;var c=h(),d=b.create(c,"BusinessPresenceCustomLabel");d.setValue(c,"id");d.setValue(a.name,"name");d.setValue(a.color,"label_color");i(b,a.pageID,d,a.connectionName)},e=function(b,c){if(!a.pageID)return;c=c==null?void 0:(c=c.create_business_presence_custom_label)==null?void 0:c.id;if(c==null)return;c=b.get(c);if(!c)return;c&&i(b,a.pageID,c,a.connectionName)};return j(b("RelayFBEnvironment"),{mutation:k,optimisticUpdater:d,updater:e,variables:{input:{actor_id:b("RelayAPIConfig").actorID,page_id:a.pageID,name:a.name,color:a.color,is_hidden:a.is_hidden,platform:a.platform}},onCompleted:function(a){if(c){var d;a={color:b("nullthrows")((d=a.create_business_presence_custom_label)==null?void 0:d.label_color),id:b("nullthrows")((d=a.create_business_presence_custom_label)==null?void 0:d.id),name:b("nullthrows")((d=a.create_business_presence_custom_label)==null?void 0:d.name)};c.onSuccess(a)}},onError:c&&c.onFailure})}e.exports={commit:a}}),null);
__d("CRMClientDetailsSetLabelMutation",["CustomLabelUtils","RelayAPIConfig","RelayFBEnvironment","RelayModern","RelayRuntime","nullthrows","CRMClientDetailsSetLabelMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("CustomLabelUtils").createLabelUpdater,i=b("RelayRuntime").ConnectionHandler,j=b("RelayModern").commitMutation;b("RelayModern").graphql;var k=g!==void 0?g:g=b("CRMClientDetailsSetLabelMutation.graphql");function a(a,c){var d=function(b,c){if(a.pageContactID==null)return;var d=b.get(a.pageContactID);if(!d)return;d=i.getConnection(d,a.contactLabelsConnection);c=a.id!==null?a.id:c==null?void 0:(c=c.page_contact_set_label)==null?void 0:(c=c.label)==null?void 0:c.id;if(!d||c==null)return;c=b.get(c);if(!c)return;var e=i.createEdge(b,d,c,"PageContactLabelsEdge");d&&e&&i.insertEdgeAfter(d,e);h(b,a.pageID,c,a.pageLabelsConnection)};return j(b("RelayFBEnvironment"),{mutation:k,optimisticUpdater:d,updater:d,variables:{input:{actor_id:b("RelayAPIConfig").actorID,label_name:a.labelName,page_contact_id:a.pageContactID,label_color:a.color}},onCompleted:function(a){if(c){var d;d={color:b("nullthrows")((d=a.page_contact_set_label)==null?void 0:(d=d.label)==null?void 0:d.label_color),id:b("nullthrows")((d=a.page_contact_set_label)==null?void 0:(d=d.label)==null?void 0:d.id),name:b("nullthrows")((d=a.page_contact_set_label)==null?void 0:(a=d.label)==null?void 0:a.name)};c.onSuccess(d)}},onError:c&&c.onFailure})}e.exports={commit:a}}),null);
__d("PagesManagerCustomLabelsActions",["PagesManagerDispatcher","immutable","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({CLEAR_DATA:null,SET_LABEL:null,INIT_STORE:null,DELETE_LABEL:null});a={clearData:function(){b("PagesManagerDispatcher").dispatch({type:g.CLEAR_DATA})},initStore:function(a){b("PagesManagerDispatcher").dispatch({type:g.INIT_STORE,labels:a})},setLabel:function(a){b("PagesManagerDispatcher").dispatch({type:g.SET_LABEL,label:a})},deleteLabel:function(a){b("PagesManagerDispatcher").dispatch({type:g.DELETE_LABEL,name:a})}};e.exports={PagesManagerCustomLabelsActions:a,ActionTypes:g}}),null);
__d("PagesApplySavedResponseMutation",["RelayFBEnvironment","RelayModern","PagesApplySavedResponseMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("PagesApplySavedResponseMutation.graphql");function a(a){return h(b("RelayFBEnvironment"),{mutation:i,variables:{input:{saved_response_id:a}}})}e.exports={commit:a}}),null);
__d("SavedResponsesConstants",[],(function(a,b,c,d,e,f){"use strict";a={editPanelViewMode:{LIST:"LIST",CREATE:"CREATE",EDIT:"EDIT",PERSONALIZE:"PERSONALIZE"},sortingKey:{LAST_USED:"LAST_USED",MOST_USED:"MOST_USED"},automatedSequenceDialogWidth:480,dialogMaxScrollableHeight:500,browsePanelAttachModeWidth:300,editPanelDialogWidth:600,flyoutDialogWidth:405,listItemImageHeight:60,listItemImageWidth:60,managementDialogWidth:600,automatedSequenceDialogRef:"automatedSequenceDialog",automatedSequenceItemRef:"automatedSequenceItem",flyoutDialogRef:"flyoutDialog",managementDialogRef:"managementDialog",replyItemRef:"replyItem",privacyPolicyURL:"https://www.pagename.com/privacy-policy"};e.exports=a}),null);
__d("SavedResponsesUtils",["invariant","PageAutomationTrigger","PagesApplySavedResponseMutation","PagesManagerInboxAction","PagesMarketingAutomationActions","RelayFBEnvironment","RelayModern","SavedResponsesConstants","promiseDone","SavedResponsesUtilsTokenQuery.graphql","SavedResponsesUtilsSavedResponseQuery.graphql","SavedResponsesUtilsAutomatedCheckoutQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=b("RelayModern").fetchQuery;b("RelayModern").graphql;a={generateImageMetadata:function(a){return{id:a,filename:"Photo.jpg",image_id:a,filetype:"image/jpeg"}},fetchSavedResponseTokens:function(a,c,d,e,f){b("promiseDone")(k(b("RelayFBEnvironment"),h!==void 0?h:h=b("SavedResponsesUtilsTokenQuery.graphql"),{pageID:a,userID:c,threadID:d,platform:e}),function(a){a=((a=a)!=null?(a=a.page)!=null?(a=a.admin_info)!=null?(a=a.saved_response_macros)!=null?a.edges:a:a:a:a)||[];a=a.reduce(function(a,b){b=b.node;a[b.title]={description:b.description,example:b.example,key:b.key,instagramDescription:b.instagram_description,name:b.title,value:b.value};return a},{});f(a)})},fetchSavedResponse:function(a,c,d){var e=this;d===void 0&&(d=null);b("promiseDone")(k((d=d)!=null?d:b("RelayFBEnvironment"),i!==void 0?i:i=b("SavedResponsesUtilsSavedResponseQuery.graphql"),{pageID:a}),function(a){a=((a=a)!=null?(a=a.page)!=null?(a=a.admin_info)!=null?(a=a.saved_responses)!=null?a.edges:a:a:a:a)||[];a=a.map(function(a){a=a.node;var b=null;if(a.response_image){var c=a.response_image.filename.slice(6);b={id:c,filename:"",image_id:c,filetype:a.response_image.image.mime_type,url:a.response_image.url}}return{id:a.id,title:a.response_title,message:a.response_message,image:b,usageCount:a.usage_count,lastTimeUsed:a.last_time_used}});a=e.sortSavedResponses(a,b("SavedResponsesConstants").sortingKey.MOST_USED);c(a)})},fetchCheckoutForSavedResponse:function(a,c){b("promiseDone")(k(b("RelayFBEnvironment"),j!==void 0?j:j=b("SavedResponsesUtilsAutomatedCheckoutQuery.graphql"),{pageID:a}),function(a){a=(a=a)!=null?(a=a.page)!=null?(a=a.automated_responses_settings)!=null?a.eligible_automations:a:a:a;if(!a||a.length===0)return;a.forEach(function(a){var d=b("PageAutomationTrigger")[a.trigger];!!d&&(d==="automated_checkout"||d==="buyer_information_form")&&c(a.id,d)})})},sortSavedResponses:function(a,c){switch(c){case b("SavedResponsesConstants").sortingKey.LAST_USED:return a.slice().sort(function(a,b){return b.lastTimeUsed-a.lastTimeUsed});case b("SavedResponsesConstants").sortingKey.MOST_USED:return a.slice().sort(function(a,b){return b.usageCount-a.usageCount});default:g(0,5738)}},notifySavedResponseApplied:function(a){b("PagesApplySavedResponseMutation").commit(a.id)},extraMacrosFromSavedResponse:function(a){var b=/\{{(.*?)\}}/g;b=(a=a.match(b))!=null?a:[];return b.map(function(a){return a.substr(2,a.length-4)})},isValidShortcut:function(a){return a.trim().length>=3},checkHasMatchingShortcut:function(a,b){var c=a.toLowerCase();return b&&b.some(function(a){return((a=a.title)!=null?a:"").toLowerCase().indexOf(c)===0})},editAutomatedCheckout:function(){b("PagesMarketingAutomationActions").setIsContentViewInEditMode(!0),b("PagesMarketingAutomationActions").updateAutomationType("automated_checkout"),b("PagesManagerInboxAction").setNavMode("automated_responses")}};e.exports=a}),null);
__d("CRMClientDetailsLabelsSection.react",["cx","fbt","BusinessCRMConfigStore","CustomLabelUtils","FDSCard.react","FDSLink.react","FDSSection.react","FDSText.react","PagesManagerCustomLabelsActions","PagesManagerInboxContextCardLabelsTypeahead.react","PagesManagerInboxLabel.react","PagesManagerInboxLabelsDialog.react","QE2Logger","React","RelayModern","cxMargin","emptyFunction","immutable","CRMClientDetailsLabelsSection_page.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i;a=b("BusinessCRMConfigStore").withStore;var j=(c=b("CustomLabelUtils")).MAX_LABEL_NAME_LENGTH,k=c.onAddLabel,l=c.onCreateLabel,m=c.onDeleteLabel,n=c.onRemoveLabel,o=c.onUpdateLabel,p=b("PagesManagerCustomLabelsActions").PagesManagerCustomLabelsActions,q=b("React");d=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var r="CRMClientDetailsLabelsSection_contactLabels",s="CRMClientDetailsLabelsSection_page_labels";f=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={shouldShowManageLabelsDialog:!1},d.onRemoveLabel=function(a){var b=d.getContactLabels().map(function(a){return a&&a.id});if(b.indexOf(a.id)===-1)return;n(a.id,a.name,(b=d.props.page)==null?void 0:(a=b.contact)==null?void 0:a.id,r)},d.onAddLabel=function(a){k(a.id,a.name,(a=d.props.page)==null?void 0:(a=a.contact)==null?void 0:a.id,d.props.pageID,r,s)},d.onCreateAndAddLabel=function(a){k(null,a,(a=d.props.page)==null?void 0:(a=a.contact)==null?void 0:a.id,d.props.pageID,r,s,null,{onSuccess:function(a){p.setLabel(a)},onFailure:b("emptyFunction")})},d.$1=function(a,c){m(a,d.props.pageID,s,{onSuccess:function(){p.deleteLabel(c)},onFailure:b("emptyFunction")})},d.$2=function(a,c){l(a,c,d.props.pageID,s,{onSuccess:function(a){p.setLabel(a)},onFailure:b("emptyFunction")})},d.onLabelsDialogToggle=function(a){return d.setState({shouldShowManageLabelsDialog:a})},d.onShowManageLabelsClick=function(){return d.setState({shouldShowManageLabelsDialog:!0})},d.getLabel=function(a){return a==null||a.id==null||a.name==null||a.label_color==null?null:q.jsx("div",{className:"_653d",children:q.jsx(b("PagesManagerInboxLabel.react"),{color:a.label_color,id:a.id,name:a.name,onRemove:d.onRemoveLabel,pageID:d.props.pageID,searchOnClick:!1})},a.id)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$3=function(a){o(a.id,a.color,{onSuccess:function(a){p.setLabel(a)},onFailure:b("emptyFunction")})};d.getContactLabels=function(){var a;a=((a=this.props.page)==null?void 0:(a=a.contact)==null?void 0:(a=a.contactLabels)==null?void 0:a.edges)||[];return!a||a.length===0?[]:a.map(function(a){return a&&a.node||null}).filter(function(a){return a!=null})};d.getLabels=function(){var a=this.getContactLabels();return!a||a.length===0?q.jsx("div",{className:"_3-8y",children:q.jsx("span",{className:"_kd_",children:h._("Labels help you describe and organise your contacts. Only people who manage your Page can see labels.")})}):q.jsx("div",{className:"_3-8y",children:a.map(this.getLabel)})};d.showManageLabelsDialog=function(){return!this.state.shouldShowManageLabelsDialog?null:q.jsx(b("PagesManagerInboxLabelsDialog.react"),{labels:this.formatLabelData(),labelsConnectionName:"CRMClientDetailsLabelsSection_page_labels",maxLength:j,onCreateLabel:this.$2,onDeleteLabel:this.$1,onRemoveLabelFromThread:this.onRemoveLabel,onToggle:this.onLabelsDialogToggle,onUpdateLabel:this.$3,pageID:this.props.pageID,shouldShowAutoLabel:!1,shown:this.state.shouldShowManageLabelsDialog})};d.formatLabelData=function(){var a;a=((a=this.props.page)==null?void 0:(a=a.labels)==null?void 0:a.edges)||[];return this.convertLabelDataToMap(a)};d.convertLabelDataToMap=function(a){a=a.map(function(a){return[a.node.name,{id:a.node.id,color:a.node.label_color,name:a.node.name}]});return b("immutable").Map(a||[])};d.getTypeaheadLabels=function(){var a=this.formatLabelData().toArray(),b=this.getContactLabels();return b.length===0?a:a.filter(function(a){return!b.some(function(b){return b?a.id===b.id:!0})})};d.getLabelsTypeahead=function(){return q.jsx(b("PagesManagerInboxContextCardLabelsTypeahead.react"),{labels:this.getTypeaheadLabels(),maxLength:j,onAddLabel:this.onAddLabel,onCreateLabel:this.onCreateAndAddLabel,pageLabelNum:this.formatLabelData().toArray().length})};d.render=function(){var a;if(((a=this.props.page)==null?void 0:(a=a.contact)==null?void 0:a.user)==null){b("QE2Logger").logExposureForPage("crm_labels",this.props.pageID);if(!((a=this.props.store.get("config"))==null?void 0:a.shouldShowLabelsForOfflineContacts))return null}return q.jsx(b("FDSCard.react"),{margin:this.props.margin,children:q.jsxs(b("FDSSection.react"),{children:[q.jsxs("div",{className:"_6vs9",children:[q.jsx(b("FDSText.react"),{size:"header2",children:h._("Labels")}),q.jsx("div",{className:"_6vsa",children:q.jsx(b("FDSLink.react"),{onClick:this.onShowManageLabelsClick,showUnderline:"never",children:h._("Manage labels")})})]}),this.getLabels(),this.getLabelsTypeahead(),this.showManageLabelsDialog()]})})};return c}(q.PureComponent);g=d(f,{page:i!==void 0?i:i=b("CRMClientDetailsLabelsSection_page.graphql")});e.exports=a(g)}),null);
__d("CRMClientDetailsNote.react",["cx","fbt","ActionList.react","CRMEventsLogger","ExpandableText.react","FBConfirmDialog.react","FDSButton.react","FDSText.react","Link.react","React","RelayModern","SUIBusinessTheme","SUITextArea.react","Timestamp.react","cxMargin","formatDate","nullthrows","CRMClientDetailsNote_note.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React");a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var k="customer_details_view";c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isDeleted:!1,isEditing:!1,noteText:"",showDeleteConfirmation:!1},d.onCancelClick=function(){d.setState({isEditing:!1})},d.updateNote=function(a){d.setState({noteText:a})},d.onSaveNoteClick=function(){var a;if(d.state.noteText===((a=d.props.note.body)==null?void 0:a.text)||d.props.note.id==null||d.state.noteText==null)return;d.props.onEdit(d.props.note.id,d.state.noteText);d.setState({isEditing:!1})},d.onDeleteClick=function(){if(d.state.showDeleteConfirmation)return;b("CRMEventsLogger").log(d.props.pageID,"click_delete_note","delete_note_button",k);d.setState({showDeleteConfirmation:!0})},d.onEditing=function(a){if(d.state.isEditing)return;d.setState({isEditing:!0,noteText:(a=d.props.note.body)==null?void 0:a.text},function(){d.$1&&d.$1.focusInput()})},d.onDeleteCancel=function(){d.setState({showDeleteConfirmation:!1})},d.onDeleteConfirm=function(){d.setState({isDeleted:!0,showDeleteConfirmation:!1}),d.props.onDelete(b("nullthrows")(d.props.note.id))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getNoteItem=function(){var a;return!this.state.isEditing?null:j.jsxs("div",{className:"_3-8y",children:[j.jsx(b("SUITextArea.react"),{maxLength:1e3,onChange:this.updateNote,shouldAutoGrow:!0,theme:b("SUIBusinessTheme"),value:this.state.noteText}),j.jsxs("div",{className:"_6xpo",children:[j.jsx(b("FDSButton.react"),{label:h._("Cancel"),margin:"_3-8_",onClick:this.onCancelClick,size:"large",width:64}),j.jsx(b("FDSButton.react"),{label:h._("Delete"),margin:"_3-8_",onClick:this.onDeleteClick,size:"large",width:64}),j.jsx(b("FDSButton.react"),{isDisabled:this.state.noteText===((a=this.props.note.body)==null?void 0:a.text),label:h._("Save"),onClick:this.onSaveNoteClick,size:"large",use:"primary",width:64})]})]})};d.getNoteActionlist=function(){if(this.state.isEditing)return null;var a=this.props.note;return j.jsxs(b("ActionList.react"),{className:"_6xq7",children:[j.jsx(b("Timestamp.react"),{text:b("formatDate")(a.timestamp,"D M j, Y g:ia"),time:a.timestamp}),j.jsx(b("Link.react"),{onClick:this.onEditing,children:h._("Edit")}),j.jsx(b("Link.react"),{onClick:this.onDeleteClick,children:h._("Delete")})]})};d.getNoteText=function(){var a;if(this.state.isEditing)return null;a=(a=this.props.note.body)==null?void 0:a.text;return j.jsx(b("ExpandableText.react"),{TextRenderer:this.getNoteTextRenderer,cutoff:100,noMargin:!0,text:a!==null&&a!==void 0&&a!==""?a:""})};d.getDeleteConfirmation=function(){return!this.state.showDeleteConfirmation?null:j.jsx(b("FBConfirmDialog.react"),{cancelButtonText:h._("Cancel"),confirmButtonText:h._("Delete"),content:h._("This note will be permanently deleted."),onCancel:this.onDeleteCancel,onConfirm:this.onDeleteConfirm,onToggle:this.onDeleteCancel,shown:!0,title:h._("Delete note?")})};d.getNoteTextRenderer=function(a){return j.jsx(b("FDSText.react"),{overflowWrap:"break-word",size:"body1",children:a.children})};d.render=function(){return this.state.isDeleted?null:j.jsxs("div",{className:"_6xq6",children:[this.getNoteActionlist(),this.getNoteText(),this.getDeleteConfirmation(),this.getNoteItem()]})};return c}(j.PureComponent);d=a(c,{note:i!==void 0?i:i=b("CRMClientDetailsNote_note.graphql")});e.exports=d}),null);
__d("CRMClientDetailsAddNoteMutation",["ClientIDs","RelayAPIConfig","RelayFBEnvironment","RelayModern","RelayRuntime","CRMClientDetailsAddNoteMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ClientIDs").getNewClientID,i=b("RelayRuntime").ConnectionHandler,j=b("RelayModern").commitMutation;b("RelayModern").graphql;var k=g!==void 0?g:g=b("CRMClientDetailsAddNoteMutation.graphql");function l(a,b,c){b=a.get(b);if(!b)return;b=i.getConnection(b,"CRMClientDetailsNotesSection_contact_notes");if(!b)return;a=i.createEdge(a,b,c,"PageContactNotesEdge");b&&a&&i.insertEdgeBefore(b,a)}function a(a,c){var d=function(b){if(!a.pageContactID)return;var c=h();c=b.create(c,"TextWithEntities");c.setValue(a.body,"text");var d=h(),e=b.create(d,"PageAdminNote");e.setValue(d,"id");e.setLinkedRecord(c,"body");e.setValue(Date.now()/1e3,"timestamp");l(b,a.pageContactID,e)},e=function(b){if(!a.pageContactID)return;var c=b.getRootField("page_admin_note_create");if(!c)return;c=c.getLinkedRecord("note");c&&l(b,a.pageContactID,c)};return j(b("RelayFBEnvironment"),{mutation:k,optimisticUpdater:d,updater:e,variables:{input:{actor_id:b("RelayAPIConfig").actorID,body:{text:a.body},page_contact_id:a.pageContactID}},onCompleted:c&&c.onSuccess,onError:c&&c.onFailure})}e.exports={commit:a}}),null);
__d("CRMClientDetailsUpdateNoteMutation",["RelayAPIConfig","RelayFBEnvironment","RelayModern","CRMClientDetailsUpdateNoteMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("CRMClientDetailsUpdateNoteMutation.graphql");function a(a,c){return h(b("RelayFBEnvironment"),{mutation:i,variables:{input:{actor_id:b("RelayAPIConfig").actorID,note_id:a.noteId,body:{text:a.body}}},onCompleted:c&&c.onSuccess,onError:c&&c.onFailure})}e.exports={commit:a}}),null);
__d("CRMClientDetailsNotesSection.react",["ix","cx","fbt","CRMClientDetailsAddNoteMutation","CRMClientDetailsNote.react","CRMClientDetailsUpdateNoteMutation","CRMEventsLogger","FDSButton.react","FDSCard.react","FDSLink.react","FDSSection.react","FDSText.react","Image.react","PagesManagerInboxDeleteNoteMutation","React","RelayModern","SUIBusinessTheme","SUITextArea.react","XUISpinner.react","asset","cxMargin","emptyFunction","nullthrows","CRMClientDetailsNotesSection_contact.graphql","CRMClientDetailsNotesSectionContactQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=b("React");a=b("RelayModern").createPaginationContainer;b("RelayModern").graphql;var m="customer_details_view";c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLoading:!1,newNoteText:"",showNewNoteForm:!1},d.onDeleteNote=function(a){var c;c=(c=d.props.contact)==null?void 0:(c=c.notes)==null?void 0:c.edges;var e=c?c.length:1;b("PagesManagerInboxDeleteNoteMutation").commit({noteID:a},{onSuccess:function(){d.props.relay.refetchConnection(e>1?e-1:e,b("emptyFunction"))},onFailure:b("emptyFunction")})},d.onEditNote=function(a,c){var e;e=(e=d.props.contact)==null?void 0:(e=e.notes)==null?void 0:e.edges;var f=e?e.length:1;e=b("nullthrows")((e=d.props.contact)==null?void 0:e.id);if(e===null)return;b("CRMClientDetailsUpdateNoteMutation").commit({body:c,noteId:a},{onSuccess:function(){d.props.relay.refetchConnection(f-1,b("emptyFunction"))},onFailure:b("emptyFunction")})},d.onSaveNoteClick=function(){var a;b("CRMEventsLogger").log(d.props.pageID,"click_save_note","save_note_button",m);if(d.state.newNoteText==null)return;b("CRMClientDetailsAddNoteMutation").commit({body:d.state.newNoteText,pageContactID:b("nullthrows")((a=d.props.contact)==null?void 0:a.id)});d.clearNote()},d.onAddNoteButtonClick=function(){if(d.state.showNewNoteForm)return;b("CRMEventsLogger").log(d.props.pageID,"click_add_note","add_note_button",m);d.setState({showNewNoteForm:!0},function(){d.$1&&d.$1.focusInput()})},d.updateNote=function(a){d.setState({newNoteText:a})},d.clearNote=function(){d.setState({showNewNoteForm:!1,newNoteText:""})},d.onLoadMoreNotesClick=function(){if(!d.props.relay.hasMore()||d.props.relay.isLoading())return;d.setState({isLoading:!0});d.props.relay.loadMore(10,function(){return d.setState({isLoading:!1})})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.hasNotes=function(){var a;a=(a=(a=this.props.contact)==null?void 0:(a=a.notes)==null?void 0:a.edges)!=null?a:[];return a.length>0};d.getNewNoteForm=function(){var a=this,c;return!this.state.showNewNoteForm?null:l.jsxs("div",{className:"_3-8y"+(this.hasNotes()?" _6xpn":""),children:[l.jsx(b("SUITextArea.react"),{maxLength:1e3,onChange:this.updateNote,placeholder:i._("Write a note..."),ref:function(b){return a.$1=b},rows:2,shouldAutoGrow:!0,theme:b("SUIBusinessTheme"),value:this.state.newNoteText}),l.jsxs("div",{className:"_6xpo _3-8y",children:[l.jsx(b("FDSButton.react"),{label:i._("Cancel"),margin:"_3-8_",onClick:this.clearNote,size:"large",width:64}),l.jsx(b("FDSButton.react"),{isDisabled:((c=this.state.newNoteText)!=null?c:"").replace(/\s/g,"")==="",label:i._("Save"),onClick:this.onSaveNoteClick,size:"large",use:"primary",width:64})]})]})};d.getNotes=function(){var a=this,c;c=(c=this.props.contact)==null?void 0:(c=c.notes)==null?void 0:c.edges;if(c==null||c.length===0)return l.jsx("div",{className:"_3-8y",children:l.jsx("span",{className:"_dk_",children:i._("Notes help you remember important details about your contacts. Only people who manage your Page can see notes.")})});c=c.map(function(c){return c.node?l.jsx(b("CRMClientDetailsNote.react"),{note:c.node,onDelete:a.onDeleteNote,onEdit:a.onEditNote,pageID:a.props.pageID},c.node.id):null});return l.jsx("div",{className:"_3-8y",children:c})};d.getSeeMoreSection=function(){if(!this.props.relay.hasMore())return null;return this.state.isLoading?l.jsx("div",{className:"_6xpq",children:l.jsx(b("XUISpinner.react"),{})}):l.jsx("div",{className:"_6xpq",children:l.jsxs(b("FDSLink.react"),{onClick:this.onLoadMoreNotesClick,showUnderline:"never",children:[l.jsx(b("Image.react"),{className:"_3-8_",src:g("598189")}),i._("See more")]})})};d.render=function(){return l.jsx(b("FDSCard.react"),{margin:this.props.margin,children:l.jsxs(b("FDSSection.react"),{children:[l.jsxs("div",{className:"_6wsb",children:[l.jsx(b("FDSText.react"),{size:"header2",children:i._("Notes")}),l.jsx("div",{className:"_6xpr",children:l.jsx(b("FDSLink.react"),{onClick:this.onAddNoteButtonClick,showUnderline:"never",children:i._("Add note")})})]}),this.getNewNoteForm(),this.getNotes(),this.getSeeMoreSection()]})})};return c}(l.PureComponent);d=a(c,{contact:j!==void 0?j:j=b("CRMClientDetailsNotesSection_contact.graphql")},{direction:"forward",getConnectionFromProps:function(a){return a==null?void 0:(a=a.contact)==null?void 0:a.notes},getFragmentVariables:function(a,b){return babelHelpers["extends"]({},a,{count:b})},getVariables:function(a,b){var c=b.count;b=b.cursor;return{cursor:b,count:c,page_contact_id:a.contact.id,page_id:a.pageID}},query:k!==void 0?k:k=b("CRMClientDetailsNotesSectionContactQuery.graphql")});e.exports=d}),null);
__d("CRMClientDetailsView.react",["ix","cx","fbt","ActorURI","AsyncRequest","BusinessCRMConfigStore","CenteredContainer.react","CRMClientDetailsAboutSection.react","CRMClientDetailsActivityRoot.react","CRMClientDetailsAdditionalFields.react","CRMClientDetailsHeader.react","CRMClientDetailsLabelsSection.react","CRMClientDetailsNotesSection.react","CRMClientListActions","CRMEventsLogger","FDSText.react","Image.react","Layout.react","Link.react","QuickPerformanceLogger","React","ScrollableArea.react","ServicesMessengerSidebarActions","XCRMManualContactCreationDialogController","asset","cxMargin","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";a=b("BusinessCRMConfigStore").withStore;var j=b("React"),k=b("Layout.react").Column,l="customer_details_view";c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.editClient=function(){b("CRMEventsLogger").log(d.props.pageID,"click_edit_customer","edit_customer_button",l);var a=b("XCRMManualContactCreationDialogController").getURIBuilder().setFBID("page_id",d.props.pageID).setFBID("contact_id",d.props.contactID).getURI();a=b("ActorURI").create(a,d.props.pageID);new(b("AsyncRequest"))(a).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("QuickPerformanceLogger").markerEnd(36503556,2)};d.goBackToList=function(){b("ServicesMessengerSidebarActions").closeMessengerSidebar(),b("CRMClientListActions").backToClientList()};d.render=function(){var a,c=this.props.relayResponse.page;return c==null?null:j.jsx(b("ScrollableArea.react"),{height:this.props.height,children:j.jsx(b("CenteredContainer.react"),{children:j.jsxs("div",{className:"_3-8y",children:[j.jsxs(b("Link.react"),{className:"_6t2q",onClick:this.goBackToList,children:[j.jsx(b("Image.react"),{src:g("503177")}),j.jsx(b("FDSText.react"),{color:"secondary",size:"body3",weight:"bold",children:i._("Contacts")})]}),j.jsx(b("CRMClientDetailsHeader.react"),{contact:b("nullthrows")(c.contact),isServiceBusiness:(a=(a=this.props.store.get("config"))==null?void 0:a.isServiceBusiness)!=null?a:!1,onDelete:this.goBackToList,pageID:this.props.pageID,shouldSuppressProfileLinks:(a=(a=this.props.store.get("config"))==null?void 0:a.shouldShowMergeContact)!=null?a:!1}),j.jsxs(b("Layout.react"),{className:"_6tsw",children:[j.jsxs(k,{className:"_6tsx",children:[j.jsx(b("CRMClientDetailsAboutSection.react"),{contact:b("nullthrows")(c.contact),isPageEligibleForEmail:(a=c==null?void 0:(a=c.servicesVerticalInfo)==null?void 0:a.isPageEligibleForEmail)!=null?a:!1,onEdit:this.editClient,pageID:this.props.pageID,shouldShowMergeContact:(a=(a=this.props.store.get("config"))==null?void 0:a.shouldShowMergeContact)!=null?a:!1}),j.jsx(b("CRMClientDetailsLabelsSection.react"),{margin:"_3-8y",page:c,pageID:this.props.pageID}),j.jsx(b("CRMClientDetailsNotesSection.react"),{contact:b("nullthrows")(c.contact),margin:"_3-8o",pageID:this.props.pageID})]}),j.jsxs(k,{className:"_3-9b _6xfw",children:[j.jsx(b("CRMClientDetailsActivityRoot.react"),{bookFBAppointmentUrl:(a=c.servicesVerticalInfo)==null?void 0:a.bookFBAppointmentUrl,contact:b("nullthrows")(c.contact),pageID:this.props.pageID}),j.jsx(b("CRMClientDetailsAdditionalFields.react"),{contact:b("nullthrows")(c.contact),margin:"_3-8o",pageID:this.props.pageID})]})]})]})})})};return c}(j.PureComponent);e.exports=a(c)}),null);
__d("CRMClientDetailsRoot.react",["cx","fbt","CRMClientDetailsView.react","CRMClientListStore","FluxContainer","PagesReactDispatcher","QuickPerformanceLogger","React","RelayAPIConfig","RelayFBEnvironment","RelayModern","ServicesUISpinner.react","cxMargin","CRMClientDetailsRootQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React"),k=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var l=i!==void 0?i:i=b("CRMClientDetailsRootQuery.graphql");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.renderQueryResponse=function(a){var c=a.error;a=a.props;if(c)return d.getError();else if(a)return j.jsx(b("CRMClientDetailsView.react"),{contactID:d.state.contactID,height:d.props.height,pageID:d.props.pageID,relayResponse:a});return d.getLoading()},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){a=b("CRMClientListStore").getState();return{contactID:a.contactID}};var d=c.prototype;d.componentDidMount=function(){b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores()),b("RelayAPIConfig").DO_NOT_USE_setActorID(this.props.pageID),b("QuickPerformanceLogger").markerStart(36503556)};d.getError=function(){return j.jsx("div",{className:"_6sk4",children:h._("Something went wrong. Please try again later.")})};d.getLoading=function(){return j.jsx("div",{className:"_3-8y",children:j.jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"})})};d.render=function(){return!this.state.contactID?null:j.jsx(k,{cacheConfig:{force:!0},environment:b("RelayFBEnvironment"),query:l,render:this.renderQueryResponse,variables:{page_contact_id:this.state.contactID,page_id:this.props.pageID}})};return c}(j.PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("CRMClientListItemActionsEnum",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({BOOK_APPOINTMENT:null,DELETE:null,VIEW_PROFILE:null,BLOCK:null});e.exports=a}),null);
__d("CRMClientRow.react",["ix","cx","fbt","invariant","BusinessCRMConfigStore","CRMClientListActions","CRMClientListItemActionsEnum","CRMClientListStore","CRMClientProfilePhoto.react","CRMEventsLogger","FDSButton.react","FDSCheckboxInput.react","FluxContainer","Image.react","Layout.react","LineClamp.react","Link.react","PagesReactDispatcher","React","RelayModern","ServicesMessengerSidebarActions","XUIGrayText.react","asset","cxMargin","nullthrows","CRMClientRow_contact.graphql"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k;a=b("BusinessCRMConfigStore").withStore;var l=b("React");c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var m=b("Layout.react").Column,n=b("Layout.react").FillColumn,o=2;function p(a){return l.jsx(b("XUIGrayText.react"),{className:"_6rbu",display:"block",size:"header4",children:l.jsx(b("LineClamp.react"),{lines:1,children:a.title})})}function q(a){return a.value===null?l.jsx(b("XUIGrayText.react"),{className:"_6rbu",display:"block",shade:"medium",size:"header4",weight:"bold",children:l.jsx(b("LineClamp.react"),{lines:1,children:"-"})}):a.value}d=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.openIGDirectSidebar=function(){var a=d.props.contact.igThreadId;a!=null&&b("ServicesMessengerSidebarActions").openSidebar(null,a,"INSTAGRAM_DIRECT")},d.openMessengerSidebar=function(){var a;a=(a=d.props.contact.user)==null?void 0:a.id;a!=null&&b("ServicesMessengerSidebarActions").openSidebar(a)},d.goToClientDetails=function(){var a,c=d.props.contact;c=b("nullthrows")(c.id);(a=b("CRMClientListActions")).showClientDetails(c);a.clearBulkEditClient();a.clearUnselectedBulkEditClient();a.selectAllBulkEditClient(!1)},d.onCheckBoxChange=function(){var a;a={contactID:b("nullthrows")(d.props.contact.id),fbUserID:(a=d.props.contact.user)==null?void 0:a.id,igUserID:(a=d.props.contact.igUserID)==null?void 0:a.id,pageCustomerID:(a=d.props.contact.pageCustomerId)==null?void 0:a.id};d.state.contactsToBulkEdit.has(b("nullthrows")(d.props.contact.id))?(b("CRMClientListActions").removeBulkEditClient(b("nullthrows")(d.props.contact.id)),b("CRMClientListActions").addUnselectedBulkEditClient(a),b("CRMEventsLogger").log(d.props.pageID,"uncheck_contact_list_row","contact_list_row_checkbox","contact_list")):((d.state.mergeContactError||d.state.mergedContactID!==null)&&b("CRMClientListActions").dismissMergeToast(),b("CRMClientListActions").addBulkEditClient(a),b("CRMClientListActions").removeUnselectedBulkEditClient(b("nullthrows")(d.props.contact.id)))},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){a=b("CRMClientListStore").getState();return{contactsToBulkEdit:a.contactsToBulkEdit,unSelectedContactsToBulkEdit:a.unSelectedContactsToBulkEdit,isAllSelected:a.isAllSelected,mergedContactID:a.mergedContactID,mergeContactError:a.mergeContactError}};var d=c.prototype;d.componentDidMount=function(){b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores())};d.getDescription=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.description:a:a:a;return l.jsx(b("XUIGrayText.react"),{className:"_6rdm",display:"block",size:"header4",children:l.jsx(b("LineClamp.react"),{lines:1,children:a})})};d.getClientName=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.name:a:a:a;return l.jsx(b("XUIGrayText.react"),{className:"_6rbu",display:"block",shade:"medium",size:"header4",weight:"bold",children:l.jsx(b("LineClamp.react"),{lines:1,children:a})})};d.getColumnValue=function(a){return l.jsx(b("XUIGrayText.react"),{className:"_6rbu",display:"block",shade:"medium",size:"header4",weight:"bold",children:l.jsx(b("LineClamp.react"),{lines:1,children:a})})};d.getBirthdayValue=function(){var a;a=(a=this)!=null?(a=a.props)!=null?(a=a.contact)!=null?a.birthday:a:a:a;return a!=null?this.getColumnValue(a):null};d.getContactValue=function(){var a;a=((a=this.props.contact)==null?void 0:a.phoneNumber)===null?this.props.contact.fallback_phone_number:(a=this.props.contact)==null?void 0:(a=a.phoneNumber)==null?void 0:a.displayNumber;return a!=null?this.getColumnValue(a):null};d.getPlatformsValue=function(){var a,c;a=((a=this.props.contact)==null?void 0:a.user)!=null;c=((c=this.props.contact)==null?void 0:(c=c.igProfileInfo)==null?void 0:c.username)!=null;return!c&&!a?null:l.jsxs("div",{children:[a?l.jsx(b("Image.react"),{className:"_7ynr",src:"/images/pages/crm/indicator-fb-2x.png"}):null,c?l.jsx(b("Image.react"),{className:"_7ynr",src:"/images/pages/crm/indicator-ig-2x.png"}):null]})};d.getNotes=function(){var a;a=((a=this.props.contact)==null?void 0:(a=a.notes)==null?void 0:a.edges)||[];a=a.length>0?(a=a[0].node)==null?void 0:(a=a.body)==null?void 0:a.text:null;return a!=null?this.getColumnValue(a):null};d.onActionButtonChange=function(a){this.props.handleClickActionButton&&this.props.handleClickActionButton(a,this.props.contact)};d.getButton=function(){var a=this,c,d=this.props.store;d=d.get("config");if(d==null)return l.jsx("div",{style:{minHeight:"1px",minWidth:"150px"}});d=d.isServiceBusiness;if(d)return l.jsx(b("FDSButton.react"),{icon:l.jsx(b("Image.react"),{src:g("482554")}),label:i._("Book Now"),onClick:function(){a.onActionButtonChange(b("CRMClientListItemActionsEnum").BOOK_APPOINTMENT)},use:"primary",width:150});d=((d=this.props.contact)==null?void 0:d.user)!=null;c=((c=this.props.contact)==null?void 0:(c=c.igProfileInfo)==null?void 0:c.username)!=null;if(!c&&!d)return l.jsx("div",{style:{minHeight:"1px",minWidth:"150px"}});else if(c)return l.jsx(b("FDSButton.react"),{icon:l.jsx(b("Image.react"),{src:g("1183231")}),label:i._("Send Message"),onClick:this.openIGDirectSidebar,use:"primary",width:150});return l.jsx(b("FDSButton.react"),{icon:l.jsx(b("Image.react"),{src:g("1183236")}),label:i._("Send Message"),onClick:this.openMessengerSidebar,use:"primary",width:150})};d.getLink=function(){var a;return l.jsx(b("Link.react"),{className:((a=this.props.store.get("config"))==null?void 0:a.shouldShowMergeContact)?"_82u3":"_6sig",label:"contact details link",onClick:this.goToClientDetails})};d.getLabels=function(){var a;a=((a=this.props.contact)==null?void 0:(a=a.labels)==null?void 0:a.edges)||[];if(!a||a.length===0)return null;a=a.map(function(a){return a&&a.node||null}).filter(function(a){return a!=null});var b=null,c=a.slice();if(a.length>o){a=a.length-o;b=l.jsx("div",{className:"_6six",children:i._("+{x_more_labels_count} more",[i._param("x_more_labels_count",a)])});c.splice(o)}return l.jsxs("div",{className:"_6siv _3-8y",children:[c.map(function(a){if(a==null||a.id==null||a.name==null||a.label_color==null)return null;var b=null;a.label_color!=null&&(b="#"+a.label_color.substring(2));b!==null||j(0,6368);return l.jsxs("div",{className:"_6six",children:[l.jsx("div",{className:"_6si-",style:{backgroundColor:b}}),l.jsx("span",{className:"_6si_",children:a.name})]},a.id)}),b]})};d.render=function(){if(!this.state.contactsToBulkEdit.has(b("nullthrows")(this.props.contact.id))&&this.state.isAllSelected&&!this.state.unSelectedContactsToBulkEdit.has(b("nullthrows")(this.props.contact.id))){var a;a={contactID:b("nullthrows")(this.props.contact.id),fbUserID:(a=this.props.contact.user)==null?void 0:a.id,igUserID:(a=this.props.contact.igUserID)==null?void 0:a.id,pageCustomerID:(a=this.props.contact.pageCustomerId)==null?void 0:a.id};b("CRMClientListActions").addBulkEditClient(a);b("CRMEventsLogger").log(this.props.pageID,"check_contact_list_row","contact_list_row_checkbox","contact_list")}a=this.state.contactsToBulkEdit.has(b("nullthrows")(this.props.contact.id));var c=a?"_6rbx _888r":"_6rbx";return l.jsxs(b("Layout.react"),{className:c,children:[l.jsx(m,{className:"_3-9a",children:((c=this.props.store.get("config"))==null?void 0:c.shouldShowMergeContact)&&l.jsx("div",{className:"_82ds",children:l.jsx(b("FDSCheckboxInput.react"),{label:"",onChange:this.onCheckBoxChange,value:a})})}),l.jsx(m,{className:"_3-9a",children:l.jsx(b("CRMClientProfilePhoto.react"),{profilePhoto:this.props.contact})}),l.jsxs(n,{className:"_3-9c _6rby",children:[this.getClientName(),this.getDescription(),this.getLabels(),this.getLink()]}),((c=this.props.store.get("config"))==null?void 0:c.shouldShowPlatformIconsInList)?l.jsxs(m,{className:"_3-9a _6rby _6-3j",children:[l.jsx(p,{title:i._("Platforms")}),l.jsx(q,{value:this.getPlatformsValue()})]}):null,l.jsxs(m,{className:"_3-9a _6rby _6-3j",children:[l.jsx(p,{title:i._("Contact")}),l.jsx(q,{value:this.getContactValue()})]}),l.jsxs(m,{className:"_3-9a _6rby _6rbz",children:[l.jsx(p,{title:i._("Date of birth")}),l.jsx(q,{value:this.getBirthdayValue()})]}),l.jsxs(m,{className:"_3-9a _6rby _6rb-",children:[l.jsx(p,{title:i._("Notes")}),l.jsx(q,{value:this.getNotes()})]}),l.jsx(m,{className:"_3-8s _6-3k _6rby",children:this.getButton()})]})};return c}(l.PureComponent);f=c(b("FluxContainer").create(d),{contact:k!==void 0?k:k=b("CRMClientRow_contact.graphql")});e.exports=a(f)}),null);
__d("CRMClientList.react",["cx","CRMClientListActions","CRMClientListItemActionsEnum","CRMClientListStore","CRMClientRow.react","CRMEventsLogger","FBMorePager.react","FluxContainer","PagesPlatformBookingMessageViewer","PagesReactDispatcher","QuickPerformanceLogger","React","RelayModern","ServicesAppointmentDialogRoot.react","ServicesAppointmentManagementDialogEnum","XUISpinner.react","nullthrows","CRMClientList_clientList.graphql","CRMClientListPaginationQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("React");a=b("RelayModern").createPaginationContainer;b("RelayModern").graphql;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.loadMoreContacts=function(){var a=b("nullthrows")(d.props.relay);if(!a.hasMore()||a.isLoading())return;a.loadMore(d.props.pageSize,function(){})},d.handleClickActionButton=function(a,c){switch(a){case b("CRMClientListItemActionsEnum").BOOK_APPOINTMENT:b("CRMEventsLogger").log(d.props.pageID,"click_book_now","book_now_button_contact_list_item","customer_list_view");d.toggleBookNowDialog(!0,c);break}},d.toggleBookNowDialog=function(a,b){d.setState({showBookNowDialog:a,selectedContact:b})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return{forceRefetch:c.forceRefetch,selectedContact:a?a.selectedContact:null,showBookNowDialog:a?a.showBookNowDialog:!1}};var d=c.prototype;d.componentDidMount=function(){b("QuickPerformanceLogger").markerEnd(36503555,2),b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores()),this.setTotalContactCount()};d.componentDidUpdate=function(a){(a==null?void 0:(a=a.clientList)==null?void 0:a.contactCount)!==((a=this.props)==null?void 0:(a=a.clientList)==null?void 0:a.contactCount)&&this.setTotalContactCount()};d.UNSAFE_componentWillUpdate=function(a,b){(this.props.searchTerm!==a.searchTerm||!this.state.forceRefetch&&b.forceRefetch)&&this.refetch()};d.setTotalContactCount=function(){var a;a=this==null?void 0:(a=this.props)==null?void 0:(a=a.clientList)==null?void 0:a.contactCount;b("CRMClientListActions").setTotalContactCount((a=a)!=null?a:0)};d.getBookNowDialog=function(){var a=this,c;return!this.state.showBookNowDialog?null:j.jsx(b("ServicesAppointmentDialogRoot.react"),{causalElementRef:function(){return a},dialogType:b("ServicesAppointmentManagementDialogEnum").MANUAL_CREATE,onToggle:this.toggleBookNowDialog,onUpdateCompleted:b("CRMClientListActions").forceRefetch,pageContactID:((c=this.state.selectedContact)==null?void 0:c.id)||void 0,pageID:this.props.pageID,referrerData:{referrerUIComponent:"crm_client_list_view_cta",referrerUISurface:"crm"},shown:this.state.showBookNowDialog,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};d.getContacts=function(){var a;a=((a=this)!=null?(a=a.props)!=null?(a=a.clientList)!=null?(a=a.contacts)!=null?a.edges:a:a:a:a)||[];var b=[];a.forEach(function(a){a.node&&b.push(a.node)});return b};d.getPager=function(){var a=b("nullthrows")(this.props.relay);return!a.hasMore()?null:j.jsx(b("FBMorePager.react"),{onMore:this.loadMoreContacts,children:j.jsx("div",{className:"_6s19 _2pi4",children:j.jsx(b("XUISpinner.react"),{size:"large"})})})};d.refetch=function(){var a,c=b("nullthrows")(this.props.relay);a=((a=this)!=null?(a=a.props)!=null?(a=a.clientList)!=null?(a=a.contacts)!=null?a.edges:a:a:a:a)||[];c.refetchConnection(a.length+1,function(){b("CRMClientListActions").unsetForceFetch()},{seatchTerm:this.props.searchTerm})};d.render=function(){var a=this,c=this.getContacts();return!c||c.length===0?null:j.jsxs("div",{children:[c.map(function(c){return j.jsx(b("CRMClientRow.react"),{contact:c,handleClickActionButton:a.handleClickActionButton,pageID:a.props.pageID},c.id)}),this.getBookNowDialog(),this.getPager()]})};return c}(j.PureComponent);d=b("FluxContainer").create(c);f=a(d,{clientList:h!==void 0?h:h=b("CRMClientList_clientList.graphql")},{direction:"forward",getConnectionFromProps:function(a){return(a=a)!=null?(a=a.clientList)!=null?a.contacts:a:a},getFragmentVariables:function(a,b){return babelHelpers["extends"]({},a,{first:b})},getVariables:function(a,b){var c=b.count;b=b.cursor;return{count:c,cursor:b,search_term:a.searchTerm,creation_time_range:a.creationTimeRange,platforms:a.platforms,activities:a.activities,phone_status:a.phoneStatus,email_status:a.emailStatus,with_address:a.withAddress,with_birthday:a.withBirthday,label_filter_ids:a.labelFilterIDs,page_id:a.pageID}},query:i!==void 0?i:i=b("CRMClientListPaginationQuery.graphql")});e.exports=f}),null);
__d("CRMClientListAlertDialog.react",["fbt","FDSButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){return h.jsx(b("FDSModal.react"),{footer:h.jsx(b("FDSModalFooter.react"),{primaryButton:h.jsx(b("FDSButton.react"),{label:g._("OK"),onClick:a.onHide,use:"primary"})}),header:h.jsx(b("FDSModalHeader.react"),{title:a.title}),isShown:a.shown,onHide:a.onHide,children:h.jsx(b("FDSSection.react"),{children:a.alertText})})}e.exports=a}),null);
__d("CRMClientListBulkAction.react",["ix","cx","fbt","CRMClientListActions","CRMClientListAlertDialog.react","CRMClientListStore","CRMEventsLogger","FDSButton.react","FDSCheckboxInput.react","FDSText.react","FluxContainer","Image.react","JSResource","React","ServicesUISpinner.react","Tooltip.react","lazyLoadComponent","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=(a=b("lazyLoadComponent"))((c=b("JSResource"))("CRMExportContactsDialog.react").__setRef("CRMClientListBulkAction.react")),l=a(c("CRMAddLabelDialogRoot.react").__setRef("CRMClientListBulkAction.react")),m=a(c("CRMMergeContactConflictDialogRoot.react").__setRef("CRMClientListBulkAction.react")),n=a(c("CRMEditContactsDialogRoot.react").__setRef("CRMClientListBulkAction.react"));d=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("CRMClientListActions").selectAllBulkEditClient(!1),b("CRMClientListActions").clearBulkEditClient(),b("CRMClientListActions").clearUnselectedBulkEditClient(),b("CRMEventsLogger").log(d.props.pageID,"clear_contact_list_selection","contact_list_row_checkbox","contact_list")},d.$3=function(){d.$2(!1)},d.$8=function(a){a===void 0&&(a=!1),d.$4(!1),a&&b("CRMClientListActions").clearListSelection()},d.$9=function(){d.$5(!1),b("CRMClientListActions").clearListSelection()},d.$10=function(){d.$6(!1),b("CRMClientListActions").clearListSelection()},d.$11=function(){d.$7(!1),b("CRMClientListActions").clearListSelection()},d.$13=function(){d.$12(!1)},d.$15=function(){b("CRMEventsLogger").log(d.props.pageID,"click","merge_contact_button","contact_list");if(d.state.isMergingContact){d.$12(!0);return}var a=d.$14();if(a.hasSamePlatformUsers){d.$2(!0);return}d.$4(!0,a.uniqueFBuserID,a.uniqueInstagramUserID,a.pageCustomerID)},d.$16=function(){b("CRMEventsLogger").log(d.props.pageID,"click","export_contact_button","contact_list"),d.$5(!0)},d.$17=function(){b("CRMEventsLogger").log(d.props.pageID,"click","edit_fields_contact_button","contact_list"),d.$6(!0)},d.$18=function(){b("CRMEventsLogger").log(d.props.pageID,"click","add_label_contact_button","contact_list"),d.$7(!0)},d.$19=function(){b("CRMEventsLogger").log(d.props.pageID,"select_all_contact_list","contact_list_select_all_checkbox","contact_list"),b("CRMClientListActions").clearBulkEditClient(),b("CRMClientListActions").clearUnselectedBulkEditClient(),b("CRMClientListActions").selectAllBulkEditClient(!0)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return{showUnableToMergeAlert:a?a.showUnableToMergeAlert:!1,showMergeConflictDialog:a?a.showMergeConflictDialog:!1,showMergeInProgressAlert:a?a.showMergeInProgressAlert:!1,uniqueFBuserID:a?a.uniqueFBuserID:null,uniqueInstagramUserID:a?a.uniqueInstagramUserID:null,pageCustomerID:a?a.pageCustomerID:null,showExportContactsDialog:a?a.showExportContactsDialog:!1,showEditContactsDialog:a?a.showEditContactsDialog:!1,showAddLabelDialog:a?a.showAddLabelDialog:!1,isMergingContact:c.isMergingContact,isDoingBulkAction:c.isDoingBulkAction,inputData:c.inputData,searchTerm:c.searchTerm}};var d=c.prototype;d.$2=function(a){this.setState({showUnableToMergeAlert:a})};d.$4=function(a,b,c,d){this.setState({showMergeConflictDialog:a,uniqueInstagramUserID:c,uniqueFBuserID:b,pageCustomerID:d})};d.$5=function(a){this.setState({showExportContactsDialog:a})};d.$6=function(a){this.setState({showEditContactsDialog:a})};d.$7=function(a){this.setState({showAddLabelDialog:a})};d.$12=function(a){this.setState({showMergeInProgressAlert:a})};d.$14=function(){var a=null,b=null,c=null,d=null,e=!1;for(var f=this.props.contactsToBulkEdit.values(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i.fbUserID,k=i.igUserID;i=i.pageCustomerID;if(a!=null&&j!=null&&a!==j){e=!0;break}else j!=null&&(a=j,c=i);if(b!=null&&k!=null&&b!==k){e=!0;break}else k!=null&&(b=k,d=i)}return{uniqueFBuserID:a,uniqueInstagramUserID:b,hasSamePlatformUsers:e,pageCustomerID:(j=c)!=null?j:d}};d.render=function(){var a=[];this.props.contactsToBulkEdit.forEach(function(b,c){c=b.contactID;c!=null&&a.push(c)});var c=Array.from(this.props.unSelectedContactsToBulkEdit.keys()).filter(function(a){return a!=null}),d=this.props.contactsToBulkEdit.size>0,e=this.props.isAllSelected?this.props.totalContactCount-this.props.unSelectedContactsToBulkEdit.size:this.props.contactsToBulkEdit.size,f=this.state.isMergingContact||this.state.isDoingBulkAction,h=this.props.contactsToBulkEdit.size<2||this.props.contactsToBulkEdit.size>5||f;return j.jsxs("div",{className:"_82q0",children:[d?j.jsxs("div",{className:"_869a",children:[j.jsx("div",{className:"_82nj",children:j.jsx(b("Tooltip.react"),{tooltip:i._("Select or deselect all contacts"),children:j.jsx(b("FDSCheckboxInput.react"),{label:"select or deselect",labelIsHidden:!0,onChange:this.$1,value:"indeterminate"})})}),j.jsx("div",{className:"_2pij",children:j.jsx(b("FDSButton.react"),{icon:j.jsx(b("Image.react"),{src:g("503645")}),isDisabled:f,label:"Add Label",onClick:this.$18})}),j.jsx("div",{className:"_2pij",children:j.jsx(b("FDSButton.react"),{icon:j.jsx(b("Image.react"),{src:g("1003828")}),isDisabled:f,label:i._("Download Contacts"),onClick:this.$16})}),j.jsx("div",{className:"_2pij",children:j.jsx(b("FDSButton.react"),{icon:j.jsx(b("Image.react"),{src:h?g("875946"):g("831479")}),isDisabled:h,label:i._("Merge Contacts"),onClick:this.$15,tooltip:i._("You can merge up to 5 contacts, including 1 each from Facebook and Instragam.")})}),j.jsx("div",{className:"_2pij",children:j.jsx(b("FDSButton.react"),{icon:j.jsx(b("Image.react"),{src:g("492955")}),isDisabled:f,label:i._("Edit"),onClick:this.$17})}),j.jsx("div",{className:"_4m37 _2pic",children:j.jsx(b("FDSText.react"),{color:"secondary",children:i._({"*":"{number} contacts selected"},[i._param("number",e,[0,e])])})})]}):j.jsxs("div",{className:"_869a",children:[j.jsx("div",{className:"_82nj",children:j.jsx(b("Tooltip.react"),{tooltip:i._("Select or deselect all contacts"),children:j.jsx(b("FDSCheckboxInput.react"),{label:"select or deselect",labelIsHidden:!0,onChange:this.$19,value:!1})})}),j.jsx("div",{className:"_4m37 _2pic",children:j.jsx(b("FDSText.react"),{color:"secondary",children:i._({"*":"Contacts ({number})"},[i._param("number",this.props.totalContactCount,[0,this.props.totalContactCount])])})})]}),this.state.showUnableToMergeAlert&&j.jsx(b("CRMClientListAlertDialog.react"),{alertText:i._("You can't merge two or more contacts from Facebook or Instagram into a single contact. Please select only one contact from each source and try again."),onHide:this.$3,shown:this.state.showUnableToMergeAlert,title:i._("These Contacts Can't Be Merged")}),this.state.showMergeInProgressAlert&&j.jsx(b("CRMClientListAlertDialog.react"),{alertText:i._("You can't merge additional contacts until the merge in progress is complete. Please wait for the previous merge to complete and try again."),onHide:this.$13,shown:this.state.showMergeInProgressAlert,title:i._("Contacts Not Merged")}),this.state.showMergeConflictDialog&&j.jsx(j.Suspense,{fallback:j.jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"}),children:j.jsx(m,{onHide:this.$8,pageCustomerID:this.state.pageCustomerID,pageID:this.props.pageID,selectedContactIDs:a,shown:this.state.showMergeConflictDialog,uniqueFBUserID:this.state.uniqueFBuserID,uniqueInstagramUserID:this.state.uniqueInstagramUserID})}),this.state.showExportContactsDialog&&j.jsx(j.Suspense,{fallback:j.jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"}),children:j.jsx(k,{inputData:this.state.inputData,isAllSelected:this.props.isAllSelected,onHide:this.$9,pageID:this.props.pageID,searchTerm:this.state.searchTerm,selectedContactIDs:a,shown:this.state.showExportContactsDialog,unSelectedContactIDs:c})}),this.state.showEditContactsDialog&&j.jsx(j.Suspense,{fallback:j.jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"}),children:j.jsx(n,{inputData:this.state.inputData,isAllSelected:this.props.isAllSelected,onHide:this.$10,pageID:this.props.pageID,searchTerm:this.state.searchTerm,selectedContactIDs:a,shown:this.state.showEditContactsDialog,unSelectedContactIDs:c})}),this.state.showAddLabelDialog&&j.jsx(j.Suspense,{fallback:j.jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"}),children:j.jsx(l,{inputData:this.state.inputData,isAllSelected:this.props.isAllSelected,onHide:this.$11,pageID:this.props.pageID,searchTerm:this.state.searchTerm,selectedContactIDs:a,shown:this.state.showAddLabelDialog,unSelectedContactIDs:c})})]})};return c}(j.PureComponent);e.exports=b("FluxContainer").create(d)}),null);
__d("CRMClientListRoot.react",["cx","fbt","CRMClientList.react","CRMClientListActions","CRMClientListStore","FluxContainer","PagesReactDispatcher","QuickPerformanceLogger","React","RelayAPIConfig","RelayFBEnvironment","RelayModern","ScrollableArea.react","ServicesMessengerSidebarActions","ServicesUISpinner.react","Timezone","CRMPageContactsFilterOptionTypes","CRMClientListRootClientListQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React"),k=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var l=10,m=b("Timezone").getEnvironmentTimezoneID()||b("Timezone").PST8PDT,n=b("CRMPageContactsFilterOptionTypes").ACTIVITY,o=b("CRMPageContactsFilterOptionTypes").ADDRESS,p=b("CRMPageContactsFilterOptionTypes").BIRTHDAY,q=b("CRMPageContactsFilterOptionTypes").WITH_ADDRESS,r=b("CRMPageContactsFilterOptionTypes").WITH_BIRTHDAY,s=b("CRMPageContactsFilterOptionTypes").PHONE,t=b("CRMPageContactsFilterOptionTypes").EMAIL,u=i!==void 0?i:i=b("CRMClientListRootClientListQuery.graphql");a=function(a){babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){a=b("CRMClientListStore").getState();return{searchTerm:a.searchTerm,labelFilterIDs:a.labelFilterIDs,selectedDateRange:a.selectedDateRange,selectedPlatforms:a.selectedPlatforms,selectedOtherFilters:a.selectedOtherFilters,showSearchResults:a.showSearchResults,forceRefetch:a.forceRefetch}};function c(c){var d;d=a.call(this,c)||this;d.renderQueryResponse=function(a){var c=a.error;a=a.props;if(c)return d.getError();else if(a){b("CRMClientListActions").updateIsLoading(!1);return d.getClientList(a)}b("CRMClientListActions").updateIsLoading(!0);return d.getLoading()};b("RelayAPIConfig").DO_NOT_USE_setActorID(d.props.pageID);return d}var d=c.prototype;d.componentDidMount=function(){b("QuickPerformanceLogger").markerStart(36503555),b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores()),b("ServicesMessengerSidebarActions").closeMessengerSidebar()};d.getError=function(){return j.jsx("div",{className:"_6rdl",children:h._("Something went wrong. Please try again later.")})};d.getLoading=function(){return j.jsx("div",{className:"_8d52",children:j.jsx(b("ServicesUISpinner.react"),{centered:!1,size:"large"})})};d.getPhoneSelectedValue=function(){var a;a=(a=this.state.selectedOtherFilters.get(s))!=null?a:[];var b=null;a.length>0&&(b=a[0]);return b};d.getEmailSelectedValue=function(){var a;a=(a=this.state.selectedOtherFilters.get(t))!=null?a:[];var b=null;a.length>0&&(b=a[0]);return b};d.getAddressSelectedValue=function(){var a;a=(a=this.state.selectedOtherFilters.get(o))!=null?a:[];var b=null;a.length>0&&(b=a[0]);a=null;b!=null&&(a=b===q);return a};d.getBirthdaySelectedValue=function(){var a;a=(a=this.state.selectedOtherFilters.get(p))!=null?a:[];var b=null;a.length>0&&(b=a[0]);a=null;b!=null&&(a=b===r);return a};d.getInputData=function(){var a,c=[this.state.selectedDateRange.start.toInstant(m),this.state.selectedDateRange.end.toInstant(m)];a=(a=this.state.selectedOtherFilters.get(n))!=null?a:[];var d=this.state.labelFilterIDs.map(function(a){return a.id});c={creationTimeRange:c,platforms:this.state.selectedPlatforms,activities:a,phoneStatus:this.getPhoneSelectedValue(),emailStatus:this.getEmailSelectedValue(),withAddress:this.getAddressSelectedValue(),withBirthday:this.getBirthdaySelectedValue(),labelFilterIDs:d};b("CRMClientListActions").updateInputData(c);return c};d.getClientList=function(a){var c=this.getInputData();return j.jsx("div",{className:"_6rdl",children:j.jsx(b("CRMClientList.react"),{activities:c.activities,clientList:a.page,creationTimeRange:c.creationTimeRange,labelFilterIDs:c.labelFilterIDs,emailStatus:c.emailStatus,forceRefetch:this.state.forceRefetch,pageID:this.props.pageID,pageSize:l,phoneStatus:c.phoneStatus,platforms:c.platforms,searchTerm:this.state.showSearchResults?this.state.searchTerm:null,withAddress:c.withAddress,withBirthday:c.withBirthday})})};d.render=function(){var a=this.getInputData();return j.jsx(b("ScrollableArea.react"),{height:this.props.height,children:j.jsx(k,{cacheConfig:{force:!0},environment:b("RelayFBEnvironment"),query:u,render:this.renderQueryResponse,variables:{count:l,search_term:this.state.showSearchResults?this.state.searchTerm:null,page_id:this.props.pageID,creation_time_range:a.creationTimeRange,platforms:a.platforms,activities:a.activities,phone_status:a.phoneStatus,email_status:a.emailStatus,with_address:a.withAddress,with_birthday:a.withBirthday,label_filter_ids:a.labelFilterIDs}})})};return c}(j.PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("CRMClientContactsRelaySearchSource.react",["AbstractRelaySearchSource","CRMClientContactsSearchableEntry","CRMClientListActions","RelayFBEnvironment","RelayModern","nullthrows","CRMClientContactsRelaySearchSourceQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("RelayModern").graphql;function h(a,c,d){var e=g!==void 0?g:g=b("CRMClientContactsRelaySearchSourceQuery.graphql");return{query:e,variables:{search_term:c,count:d,pageID:a,cursor:null}}}function i(a){a=(a=a)!=null?(a=a.page)!=null?(a=a.page_contacts)!=null?a.edges:a:a:a;if(!a)return[];b("CRMClientListActions").setContactSearchLoaded();return a.map(function(a){var c,d,e;a=b("nullthrows")(a.node);var f=b("nullthrows")(a.id);e=(e=(e=a)!=null?e.name:e)!=null?e:"";d=(d=(d=a)!=null?(d=d.ig_profile_info)!=null?d.username:d:d)!=null?d:"";c=(c=a)!=null?(c=c.profile_photo_uris)!=null?(c=c[0])!=null?c.uri:c:c:c;var g="FACEBOOK";a.ig_profile_info!==null&&(g="INSTAGRAM");return new(b("CRMClientContactsSearchableEntry"))({title:e,subtitle:d,uniqueID:f,uri:c,platform:g})}).filter(function(a){return a!==null})}function j(a,b){return b(a)}a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){return a.call(this,b("RelayFBEnvironment"),{bootstrapRequests:[],queryRequests:[{gen:function(a){return h(c,a,d)}}],packageFn:i,getAllForEmptyQuery:!0},j)||this}return c}(b("AbstractRelaySearchSource"));e.exports=a}),null);
__d("CRMClientTypeaheadSearchResultsRenderer.react",["ix","cx","fbt","CRMClientContactSearchViewItem.react","CRMClientContactsSearchableEntry","CRMClientListStore","FDSSpinner.react","FDSText.react","Image.react","Link.react","PageCustomLabelsTypeaheadViewItem.react","PagesManagerInboxCustomLabelSearchableEntry","PagesManagerStore","React","ScrollableArea.react","SearchableEntry","TextSearchUtil","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var c=a;d.props.queryString&&(c=b("TextSearchUtil").getTokens(a.toString(),d.props.queryString.toString()).map(function(a,b){return a.isHighlighted?j.jsx("span",{className:"_8i3e",children:a.text},b):a.text}));return j.jsx("span",{children:c})},d.$2=function(a){d.props.onSelect(new(b("SearchableEntry"))({uniqueID:"0",title:"See all Results"}),a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this,c=[],d=[];this.props.entries.map(function(e){e instanceof b("PagesManagerInboxCustomLabelSearchableEntry")?c.push(j.jsx(b("PageCustomLabelsTypeaheadViewItem.react"),{entry:e,onSelect:a.props.onSelect,renderHighlight:a.$1},e.getUniqueID())):e instanceof b("CRMClientContactsSearchableEntry")&&d.push(j.jsx(b("CRMClientContactSearchViewItem.react"),{entry:e,onSelect:a.props.onSelect,renderHighlight:a.$1},e.getUniqueID()))});var e=d.length===0&&b("CRMClientListStore").getState().isLoadingContactSearch,f=c.length>0?j.jsx("div",{className:"_8i3f","data-testid":"labelsSection_header",children:i._("LABELS")}):null;e=e||d.length>0?j.jsxs("div",{children:[j.jsx("div",{className:"_8i3f","data-testid":"contactsSection_header",children:i._("CONTACTS")}),e&&j.jsx("div",{className:"_3-9b _3-96",children:j.jsx(b("FDSSpinner.react"),{})})]}):null;var h=b("PagesManagerStore").getLayoutHeight()-b("PagesManagerStore").getListNavigationHeight();return j.jsx(b("ScrollableArea.react"),{maxHeight:h,children:j.jsxs("div",{className:"_8i3d",children:[j.jsxs(b("Link.react"),{className:"_8jun",onClick:this.$2,children:[j.jsx("div",{className:"_8jx3",children:j.jsx(b("Image.react"),{src:g("483480")})}),j.jsx(b("FDSText.react"),{color:"blueLink",weight:"bold",children:i._("See all results for {queryString}",[i._param("queryString",this.props.queryString.length>5?this.props.queryString.substr(0,3)+"...":this.props.queryString)])})]}),j.jsx("span",{className:"_8i3g"}),e,d,j.jsx("span",{className:"_7zla"}),f,c]})})};return c}(j.PureComponent);e.exports=a}),null);
__d("CRMClientTypeahead.react",["ix","cx","fbt","CompositeSearchSource","CRMClientContactsRelaySearchSource.react","CRMClientContactsSearchableEntry","CRMClientListActions","CRMClientListStore","CRMClientTypeaheadSearchResultsRenderer.react","FluxContainer","Image.react","Link.react","PageManagerInboxCustomLabelSearchSource","PagesManagerInboxCustomLabelSearchableEntry","PagesManagerInboxSearchTokenRenderer.react","PagesReactDispatcher","React","XUITokenizer.react","asset","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){a=b("CRMClientListStore").getState();var c=a.labelFilterIDs.map(function(a){return new(b("PagesManagerInboxCustomLabelSearchableEntry"))(a)});return{searchTerm:a.searchTerm,isTypeAheadActive:a.isTypeAheadActive,showSearchResults:a.showSearchResults,activeSearchLabels:c}};var d=c.prototype;d.componentDidMount=function(){b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores())};d.$2=function(a){b("CRMClientListActions").updateSearchTerm(a.target.value)};d.$3=function(a){if(a instanceof b("PagesManagerInboxCustomLabelSearchableEntry"))b("CRMClientListActions").addCustomLabel(a.getData());else if(a instanceof b("CRMClientContactsSearchableEntry")){var c,d=b("nullthrows")(a.getUniqueID());(c=b("CRMClientListActions")).showClientDetails(d);c.clearBulkEditClient();c.clearUnselectedBulkEditClient();c.clearTypeaheadSearch();c.selectAllBulkEditClient(!1)}else a.getUniqueID()==="0"&&b("CRMClientListActions").showSearchResults(!0)};d.$4=function(a){a instanceof b("PagesManagerInboxCustomLabelSearchableEntry")&&b("CRMClientListActions").removeCustomLabel(a.getData())};d.$5=function(){b("CRMClientListActions").clearTypeaheadSearch()};d.render=function(){var a=this,c=new(b("CompositeSearchSource"))([b("PageManagerInboxCustomLabelSearchSource").getInstance(this.props.labels),new(b("CRMClientContactsRelaySearchSource.react"))(this.props.pageID,5)]),d=b("CRMClientTypeaheadSearchResultsRenderer.react");d={useLayer:!0,ViewRenderer:d,TokenRenderer:b("PagesManagerInboxSearchTokenRenderer.react"),maxEntries:200};return j.jsxs("div",{children:[j.jsxs("div",{className:"_8j3u",children:[this.state.isTypeAheadActive?j.jsx(b("Link.react"),{className:"_8j3v",onClick:this.$5,children:j.jsx(b("Image.react"),{src:g("499680")})}):j.jsx("div",{className:"_8j3v",children:j.jsx(b("Image.react"),{src:g("492644")})}),this.state.showSearchResults?j.jsx("div",{className:"_3-99",children:this.state.searchTerm}):j.jsx(b("XUITokenizer.react"),{className:"_8f-a",context:this.$1,entries:this.state.activeSearchLabels,focusedOnInit:!0,hideViewWithEntries:!1,onAddEntryAttempt:this.$3,onChange:this.$2,onEnterWithoutSelection:this.$2,onQueryStringChange:this.$2,onRemoveEntryAttempt:this.$4,placeholder:i._("Search people and labels"),presenter:d,searchSource:c,showEntriesOnFocus:!0,tokenClassName:"_8f-b"})]}),j.jsx("div",{ref:function(b){return a.$1=b}})]})};return c}(j.PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesManagerCustomLabelsStore",["FluxReduceStore","PagesManagerCustomLabelsActions","PagesManagerDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("PagesManagerCustomLabelsActions").ActionTypes,h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({labels:b("immutable").Map([]),isInitialized:!1}));a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getInitialState=function(){return new h()};c.reduce=function(a,b){var c;switch(b.type){case g.CLEAR_DATA:return this.getInitialState();case g.INIT_STORE:return this.getInitialState().set("labels",b.labels).set("isInitialized",!0);case g.SET_LABEL:c=this.getState().labels.set(b.label.name,b.label);return a.set("labels",c);case g.DELETE_LABEL:c=this.getState().labels["delete"](b.name);return a.set("labels",c);default:return a}};c.getLabels=function(){return this.getState().labels};c.isInitialized=function(){return this.getState().isInitialized};return b}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("PagesManagerDispatcher"))}),null);
__d("CRMClientTypeaheadRoot.react",["CRMClientTypeahead.react","FluxContainer","PagesManagerCustomLabelsStore","PagesReactDispatcher","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesManagerCustomLabelsStore")]};c.calculateState=function(a){a=b("PagesManagerCustomLabelsStore").getLabels().toArray();return{labels:a}};var d=c.prototype;d.componentDidMount=function(){b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores())};d.render=function(){return g.jsx(b("CRMClientTypeahead.react"),{labels:this.state.labels,pageID:this.props.pageID})};return c}(g.PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("CRMPageContactsDateRangeFilter.react",["fbt","BUIDateRangePicker.react","BUIDateRangePresets","CRMClientListActions","CRMEventsLogger","LocalDate","LocalDateInterval","React","Timezone","cxMargin"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=b("Timezone").getEnvironmentTimezoneID()||b("Timezone").PST8PDT;var i=b("LocalDate").today(a).addDays(1),j=b("LocalDate").fromInstant(123084e4,a),k=g._("Date added");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){if(a.interval){a=new(b("LocalDateInterval"))(a.interval.start,a.interval.end);b("CRMClientListActions").clearListSelection();b("CRMClientListActions").updateSelectedDateRange(a);var c=new Map();c.set("platformsSelected",a.toString());b("CRMEventsLogger").log(d.props.pageID,"click","creation_time_option","creation_time_filter_dropdown",null,c)}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return h.jsx("span",{className:"_3-9a",children:h.jsx(b("BUIDateRangePicker.react"),{datePresetsLabel:k,dateRestraints:[function(a){return a.isAfterOrEqual(j)&&a.isBeforeOrEqual(i)}],defaultIncludeToday:!0,height:this.props.useLargeButton?"tall":"short",hideIcon:!1,limitPagerToRestraints:!0,onChange:this.$1,options:l(),timezoneID:b("Timezone").getEnvironmentTimezoneID(),value:{interval:this.props.selectedDateRange},verbose:"custom"})})};return c}(h.PureComponent);function l(){var a;return[{calculateInterval:function(){return new(b("LocalDateInterval"))(j,i)},text:g._("Lifetime"),value:"Lifetime",disableComparison:!0},(a=b("BUIDateRangePresets")).TODAY,a.YESTERDAY,a.LAST_7D,a.LAST_14D,a.THIS_MONTH,{calculateInterval:function(){return new(b("LocalDateInterval"))(i.subtractMonths(3),i)},text:g._("Last 3 months"),value:"last_3_months"},{calculateInterval:function(){return new(b("LocalDateInterval"))(i.subtractMonths(6),i)},text:g._("Last 6 months"),value:"last_6_months"}]}e.exports=c}),null);
__d("CRMPageContactsFilterMappingFunction",["CRMPageContactsFilterOptionTypes"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("CRMPageContactsFilterOptionTypes")).ACTIVITY,h=a.ADDRESS,i=a.BIRTHDAY,j=a.CONFIRMED_SMS,k=a.CONFIRMED_SUBSCRIBED,l=a.CONFIRMED_UNKNOWN,m=a.CONFIRMED_UNSUBSCRIBED,n=a.EMAIL,o=a.LIKES_PAGE,p=a.PHONE,q=a.PREVIOUS_APPOINTMENTS,r=a.SAVED_FILTER,s=a.UNCONFIRMED_PREFERENCE,t=a.UNCONFIRMED_SMS,u=a.UPCOMING_APPOINTMENTS,v=a.WITH_ADDRESS,w=a.WITH_BIRTHDAY,x=a.WITH_EMAIL,y=a.WITH_PHONE,z=a.WITHOUT_ADDRESS,A=a.WITHOUT_BIRTHDAY,B=a.WITHOUT_EMAIL,C=a.WITHOUT_PHONE;e.exports={getOptionType:function(a){switch(a){case q:case u:case o:return g;case y:case C:case j:case t:return p;case x:case B:case s:case k:case m:case l:return n;case v:case z:return h;case w:case A:return i;default:return r}}}}),null);
__d("CRMPageContactsOtherFilterFbt",["fbt","CRMPageContactsFilterOptionTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=(a=b("CRMPageContactsFilterOptionTypes")).ACTIVITY,i=a.ADDRESS,j=a.BIRTHDAY,k=a.CONFIRMED_SMS,l=a.CONFIRMED_SUBSCRIBED,m=a.CONFIRMED_UNKNOWN,n=a.CONFIRMED_UNSUBSCRIBED,o=a.EMAIL,p=a.LIKES_PAGE,q=a.PHONE,r=a.PREVIOUS_APPOINTMENTS,s=a.SAVED_FILTER,t=a.UNCONFIRMED_PREFERENCE,u=a.UNCONFIRMED_SMS,v=a.UPCOMING_APPOINTMENTS,w=a.WITH_ADDRESS,x=a.WITH_BIRTHDAY,y=a.WITH_EMAIL,z=a.WITH_PHONE,A=a.WITHOUT_ADDRESS,B=a.WITHOUT_BIRTHDAY,C=a.WITHOUT_EMAIL,D=a.WITHOUT_PHONE;e.exports={getFbt:function(a){switch(a){case h:return g._("Activity");case r:return g._("Appointment completed");case v:return g._("Appointment scheduled");case p:return g._("LIKES_PAGE");case q:return g._("Phone number");case k:return g._("Text message (SMS) confirmed");case u:return g._("Text message (SMS) not confirmed");case z:return g._("Known");case D:return g._("Unknown");case o:return g._("Email address");case t:return g._("Preference not confirmed");case l:return g._("Subscribed");case n:return g._("Unsubscribed");case m:return g._("Preference unknown");case y:return g._("Known");case C:return g._("Unknown");case i:return g._("Street address");case w:return g._("Known");case A:return g._("Unknown");case j:return g._("Date of birth");case x:return g._("Known");case B:return g._("Unknown");case s:return g._("Saved filters");default:return""}}}}),null);
__d("CRMPageContactsFilterTokenizer.react",["cx","fbt","CRMClientListActions","CRMEventsLogger","CRMMutationUtils","CRMPageContactsOtherFilterFbt","FDSButton.react","JSResource","React","ServicesUISpinner.react","XUICloseButton.react","lazyLoadComponent","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("CRMPageContactsOtherFilterFbt").getFbt,j=b("React"),k=b("lazyLoadComponent")(b("JSResource")("CRMSaveFilterSetDialog.react").__setRef("CRMPageContactsFilterTokenizer.react")),l=b("lazyLoadComponent")(b("JSResource")("CRMSaveFilterFailDialog.react").__setRef("CRMPageContactsFilterTokenizer.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showSaveFilterSetDialog:!1,showSaveFilterFailedDialog:!1},d.$5=function(){d.setState({showSaveFilterSetDialog:!0})},d.$6=function(){d.setState({showSaveFilterSetDialog:!1})},d.$7=function(){d.setState({showSaveFilterSetDialog:!0})},d.$8=function(){d.setState({showSaveFilterFailedDialog:!1})},d.$9=function(a){b("CRMClientListActions").updateSavedFilters(d.props.filters,a);var c=[];for(var e=d.props.filters.values(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;c.push.apply(c,h)}h={actor_id:d.props.pageID,saved_filter:{saved_filter:c,customized_name:a}};b("CRMEventsLogger").log(d.props.pageID,"click","saved_customized_filter_button","customized_tokenizer_bar");b("CRMMutationUtils").saveFilter(h,function(a,b){b&&d.setState({showSaveFilterFailedDialog:!0})})},d.$11=function(){b("CRMEventsLogger").log(d.props.pageID,"click","clear_tokenizers_button","customized_tokenizer_bar"),b("CRMClientListActions").clearSelectedOtherFilters()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(){return j.jsx("span",{className:"_8bv0",children:h._("Filters:")})};d.$2=function(a,c){b("CRMEventsLogger").log(this.props.pageID,"click","remove_filter_from_tokenizer_button","customized_tokenizer_bar"),b("CRMClientListActions").updateSelectedOtherFilters(a,c),b("CRMClientListActions").clearListSelection()};d.$3=function(a,c){var d=this,e=i(a),f=i(c);e=h._("{Filter Type}: {Filter Option}",[h._param("Filter Type",e),h._param("Filter Option",f)]);return j.jsxs("span",{className:"_8bv1",style:{backgroundColor:"#c4d2e7"},children:[j.jsx("span",{className:"_8bv2 _2pi8",children:e}),j.jsx("span",{className:"_3-8r",children:j.jsx(b("XUICloseButton.react"),{onClick:function(){return d.$2(a,c)}})})]},e)};d.$4=function(){var a=this,b=[];this.props.filters.forEach(function(c,d){c.map(function(c){b.push(a.$3(d,c))})});return b};d.$10=function(){return j.jsx("div",{className:"_8bv3",children:j.jsx(b("FDSButton.react"),{label:h._("Save Filter"),onClick:this.$5})})};d.$12=function(){return j.jsx("div",{className:"_8bv3",children:j.jsx(b("FDSButton.react"),{label:h._("Clear"),onClick:this.$11})})};d.render=function(){return j.jsxs("div",{className:"_8buh",children:[this.$1(),this.$4(),j.jsxs("div",{className:"_8bui _2pic",children:[this.$10(),this.$12()]}),this.state.showSaveFilterSetDialog&&j.jsx(j.Suspense,{fallback:j.jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"}),children:j.jsx(k,{onHide:this.$6,onSave:this.$9,shown:this.state.showSaveFilterSetDialog})}),this.state.showSaveFilterFailedDialog&&j.jsx(j.Suspense,{fallback:j.jsx(b("ServicesUISpinner.react"),{centered:!0,size:"large"}),children:j.jsx(l,{onClick:this.$7,onHide:this.$8,shown:this.state.showSaveFilterFailedDialog})})]})};return c}(j.PureComponent);e.exports=a}),null);
__d("CRMPageContactsOtherFilter.react",["ix","fbt","CRMClientListActions","CRMEventsLogger","CRMPageContactsFilterMappingFunction","CRMPageContactsFilterOptionTypes","CRMPageContactsOtherFilterFbt","FDSDropdownMultiSelector.react","FDSDropdownSelectorOption.react","FDSDropdownSelectorOptionGroup.react","FDSDropdownSelectorSeparator.react","FlexLayout.react","Image.react","React","asset","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("CRMPageContactsFilterMappingFunction").getOptionType,j=(a=b("CRMPageContactsFilterOptionTypes")).ACTIVITY,k=a.ADDRESS,l=a.BIRTHDAY,m=a.CONFIRMED_SMS,n=a.CONFIRMED_SUBSCRIBED,o=a.CONFIRMED_UNKNOWN,p=a.CONFIRMED_UNSUBSCRIBED,q=a.EMAIL,r=a.LIKES_PAGE,s=a.PHONE,t=a.PREVIOUS_APPOINTMENTS,u=a.SAVED_FILTER,v=a.UNCONFIRMED_PREFERENCE,w=a.UNCONFIRMED_SMS,x=a.UPCOMING_APPOINTMENTS,y=a.WITH_ADDRESS,z=a.WITH_BIRTHDAY,A=a.WITH_EMAIL,B=a.WITH_PHONE,C=a.WITHOUT_ADDRESS,D=a.WITHOUT_BIRTHDAY,E=a.WITHOUT_EMAIL,F=a.WITHOUT_PHONE,G=b("CRMPageContactsOtherFilterFbt").getFbt,H=b("React");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var c=d.props.appliedFilters,e;a.length===c.length+1?e=a.filter(function(a){return!c.includes(a)})[0]:e=c.filter(function(b){return!a.includes(b)})[0];var f=i(e);if(f!==u){b("CRMClientListActions").updateSelectedOtherFilters(f,e);f=new Map();f.set("otherFiltersSelected",a.join(", "));b("CRMEventsLogger").log(d.props.pageID,"click","other_filter_option","other_filter_dropdown",null,f)}else{b("CRMEventsLogger").log(d.props.pageID,"click","aved_customized_filter","other_filter_dropdown");b("CRMClientListActions").updateSelectedSavedFilter((f=d.props.savedFilters.get(e))!=null?f:new Map())}b("CRMClientListActions").clearListSelection()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=Array.from(this.props.savedFilters.keys());a=a.map(function(a){return H.jsx(b("FDSDropdownSelectorOption.react"),{value:a,children:a},a)});var c=this.props.shouldShowEmailSubscription?[H.jsx(b("FDSDropdownSelectorOption.react"),{value:v,children:G(v)},v),H.jsx(b("FDSDropdownSelectorOption.react"),{value:n,children:G(n)},n),H.jsx(b("FDSDropdownSelectorOption.react"),{value:p,children:G(p)},p),H.jsx(b("FDSDropdownSelectorOption.react"),{value:o,children:G(o)},o)]:[],d=this.props.shouldShowLikesPageFilter?H.jsx(b("FDSDropdownSelectorOption.react"),{value:r,children:G(r)}):[],e=this.props.isServiceBusiness?[H.jsx(b("FDSDropdownSelectorOption.react"),{value:m,children:G(m)},m),H.jsx(b("FDSDropdownSelectorOption.react"),{value:w,children:G(w)},w)]:[];d=this.props.isServiceBusiness?[H.jsxs(b("FDSDropdownSelectorOptionGroup.react"),{isExpandedInitially:!0,label:G(j),children:[H.jsx(b("FDSDropdownSelectorOption.react"),{value:t,children:G(t)}),H.jsx(b("FDSDropdownSelectorOption.react"),{value:x,children:G(x)}),d]},j),H.jsx(b("FDSDropdownSelectorSeparator.react"),{},"appointments_separator")]:[];return H.jsx("span",{className:"_3-9a",children:H.jsx(b("FlexLayout.react"),{justify:"all",children:H.jsxs(b("FDSDropdownMultiSelector.react"),{buttonIcon:H.jsx(b("Image.react"),{src:g("537875")}),buttonSize:this.props.useLargeButton?"large":"medium",dropdownWidth:270,label:h._("Filter"),maxHeight:500,onChange:this.$1,placeholder:"Label",value:this.props.appliedFilters,children:[d,H.jsxs(b("FDSDropdownSelectorOptionGroup.react"),{isExpandedInitially:!0,label:G(s),children:[e,H.jsx(b("FDSDropdownSelectorOption.react"),{value:B,children:G(B)}),H.jsx(b("FDSDropdownSelectorOption.react"),{value:F,children:G(F)})]}),H.jsxs(b("FDSDropdownSelectorOptionGroup.react"),{isExpandedInitially:!0,label:G(q),children:[c,H.jsx(b("FDSDropdownSelectorOption.react"),{value:A,children:G(A)}),H.jsx(b("FDSDropdownSelectorOption.react"),{value:E,children:G(E)})]}),H.jsxs(b("FDSDropdownSelectorOptionGroup.react"),{isExpandedInitially:!0,label:G(k),children:[H.jsx(b("FDSDropdownSelectorOption.react"),{value:y,children:G(y)}),H.jsx(b("FDSDropdownSelectorOption.react"),{value:C,children:G(C)})]}),H.jsxs(b("FDSDropdownSelectorOptionGroup.react"),{isExpandedInitially:!0,label:G(l),children:[H.jsx(b("FDSDropdownSelectorOption.react"),{value:z,children:G(z)}),H.jsx(b("FDSDropdownSelectorOption.react"),{value:D,children:G(D)})]}),a.length>0?H.jsx(b("FDSDropdownSelectorOptionGroup.react"),{isExpandedInitially:!0,label:G(u),children:a}):[]]})})})};return c}(H.PureComponent);e.exports=c}),null);
__d("CRMPageContactsPlatformFilter.react",["ix","fbt","CRMClientListActions","CRMEventsLogger","CRMPageContactsFilterOptionTypes","FDSDropdownMultiSelector.react","FDSDropdownSelectorOption.react","FDSDropdownSelectorSeparator.react","FlexLayout.react","Image.react","React","asset","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";var i=(a=b("CRMPageContactsFilterOptionTypes")).ALL,j=a.FACEBOOK,k=a.INSTAGRAM,l=a.OFFLINE,m=b("React"),n=h._("Source"),o=h._("All"),p=h._("Facebook"),q=h._("Instagram"),r=h._("Added");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var c=[],e=!0;a.length!==0?d.props.selectedPlatforms.includes(i)&&a.length>1?c=a.filter(function(a){return a!==i}):!d.props.selectedPlatforms.includes(i)&&a.includes(i)?c.push(i):c=[].concat(a):!d.props.selectedPlatforms.includes(i)?c.push(i):e=!1;if(e){b("CRMClientListActions").clearListSelection();b("CRMClientListActions").updateSelectedPlatforms(c);a=new Map();a.set("platformsSelected",c.join(", "));b("CRMEventsLogger").log(d.props.pageID,"click","platform_option","platform_filter_dropdown",null,a)}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a="";this.props.selectedPlatforms.includes(i)||this.props.selectedPlatforms.includes(j)&&this.props.selectedPlatforms.includes(k)&&this.props.selectedPlatforms.includes(l)?a=h._("{Source}: {All}",[h._param("Source",n),h._param("All",o)]):this.props.selectedPlatforms.includes(j)&&this.props.selectedPlatforms.includes(k)?a=h._("{Facebook}, {Instagram}",[h._param("Facebook",p),h._param("Instagram",q)]):this.props.selectedPlatforms.includes(k)&&this.props.selectedPlatforms.includes(l)?a=h._("{Instagram}, {Added}",[h._param("Instagram",q),h._param("Added",r)]):this.props.selectedPlatforms.includes(j)&&this.props.selectedPlatforms.includes(l)?a=h._("{Facebook}, {Added}",[h._param("Facebook",p),h._param("Added",r)]):this.props.selectedPlatforms.includes(j)?a=p:this.props.selectedPlatforms.includes(k)?a=q:a=r;return m.jsx("span",{className:"_3-9a",children:m.jsx(b("FlexLayout.react"),{justify:"all",children:m.jsxs(b("FDSDropdownMultiSelector.react"),{buttonIcon:m.jsx(b("Image.react"),{src:g("566622")}),buttonSize:this.props.useLargeButton?"large":"medium",buttonUse:"default",label:a,onChange:this.$1,placeholder:n,value:this.props.selectedPlatforms,children:[m.jsx(b("FDSDropdownSelectorOption.react"),{value:i,children:o}),m.jsx(b("FDSDropdownSelectorSeparator.react"),{}),m.jsx(b("FDSDropdownSelectorOption.react"),{value:j,children:p}),m.jsx(b("FDSDropdownSelectorOption.react"),{value:k,children:q}),m.jsx(b("FDSDropdownSelectorOption.react"),{value:l,children:r})]})})})};return c}(m.PureComponent);e.exports=c}),null);
__d("CRMClientsViewHeader.react",["ix","cx","fbt","regeneratorRuntime","ActorURI","AsyncRequest","BasicFBNux","BusinessCRMConfigStore","CRMClientListActions","CRMClientListBulkAction.react","CRMClientListStore","CRMClientTypeaheadRoot.react","CRMEventsLogger","CRMPageContactsDateRangeFilter.react","CRMPageContactsFilterMappingFunction","CRMPageContactsFilterTokenizer.react","CRMPageContactsOtherFilter.react","CRMPageContactsPlatformFilter.react","FDSButton.react","FDSText.react","FluxContainer","Image.react","PagesReactDispatcher","React","RelayFBEnvironment","RelayModern","SUIBusinessTheme","SUISearchInput.react","XCRMManualContactCreationDialogController","XUIAmbientNUX.react","asset","cxMargin","CRMClientsViewHeaderSavedFilterQuery.graphql","CRMClientsViewHeaderEmailSubscriptionGKQuery.graphql","CRMClientsViewHeaderLikesPageFilterGKQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l;a=b("BusinessCRMConfigStore").withStore;var m=b("CRMPageContactsFilterMappingFunction").getOptionType,n=b("React"),o=b("RelayModern").fetchQuery;b("RelayModern").graphql;var p=6874,q="customer_list_view",r=j!==void 0?j:j=b("CRMClientsViewHeaderSavedFilterQuery.graphql"),s=k!==void 0?k:k=b("CRMClientsViewHeaderEmailSubscriptionGKQuery.graphql"),t=l!==void 0?l:l=b("CRMClientsViewHeaderLikesPageFilterGKQuery.graphql");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){d.$1=a},d.$3=function(){return d.$1},d.$4=function(){d.setState({hasShown:!0}),b("BasicFBNux").onDismiss(p)},d.addClient=function(){b("CRMEventsLogger").log(d.props.pageID,"click_manual_entry","manual_entry_button",q);var a=b("XCRMManualContactCreationDialogController").getURIBuilder().setFBID("page_id",d.props.pageID).getURI();a=b("ActorURI").create(a,d.props.pageID);new(b("AsyncRequest"))(a).send()},d.importContacts=function(){b("CRMEventsLogger").log(d.props.pageID,"click_import_from_csv_button","import_contact_from_csv_button",q),b("CRMClientListActions").importContacts()},d.searchFocused=function(){b("CRMEventsLogger").log(d.props.pageID,"click_search_input","seach_input",q)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return{searchTerm:c.searchTerm,hasShown:a==null?!1:a.hasShown,contactsToBulkEdit:c.contactsToBulkEdit,unSelectedContactsToBulkEdit:c.unSelectedContactsToBulkEdit,totalContactCount:c.totalContactCount,isAllSelected:c.isAllSelected,selectedDateRange:c.selectedDateRange,selectedPlatforms:c.selectedPlatforms,selectedOtherFilters:c.selectedOtherFilters,savedFilters:c.savedFilters,isLoading:c.isLoading,shouldShowEmailSubscription:a==null?!1:a.shouldShowEmailSubscription,shouldShowLikesPageFilter:a==null?!1:a.shouldShowLikesPageFilter}};var d=c.prototype;d.componentDidMount=function(){var a;b("CRMClientListActions").clearSelectedDateRange();b("CRMClientListActions").clearSelectedPlatform();b("CRMClientListActions").clearSelectedOtherFilters();b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores());this.getSavedFilters();this.canSeeEmailSubscription();this.canSeeLikesPageFilter();b("BasicFBNux").onView(p);((a=this.props.store.get("config"))==null?void 0:a.shouldShowImportContactNux)&&this.state.hasShown===!1&&b("CRMEventsLogger").log(this.props.pageID,"csv_import_nux_impression","import_contact_from_csv_button",q)};d.getAddNewClientButton=function(){var a;return n.jsx(b("FDSButton.react"),{icon:n.jsx(b("Image.react"),{src:g("482650")}),label:i._("Add New Contact"),onClick:this.addClient,size:((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)?"large":"medium",use:"primary"})};d.getImportContactButton=function(){var a;return((a=this.props.store.get("config"))==null?void 0:a.shouldShowImportContacts)?n.jsxs(n.Fragment,{children:[n.jsx(b("FDSButton.react"),{icon:n.jsx(b("Image.react"),{src:g("514769")}),label:i._("Upload Contacts"),margin:"_3-9a",onClick:this.importContacts,ref:this.$2,size:((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)?"large":"medium",use:"default"}),((a=this.props.store.get("config"))==null?void 0:a.shouldShowImportContactNux)?n.jsx(b("XUIAmbientNUX.react"),{contextRef:this.$3,onCloseButtonClick:this.$4,position:"below",shown:!this.state.hasShown,width:"auto",children:i._("Now you can upload your list of contacts from a spreadsheet.")},"csvImportNux"):null," "]}):null};d.searchChanged=function(a){b("CRMClientListActions").clearListSelection(),b("CRMClientListActions").updateSearchTerm(a),b("CRMClientListActions").showSearchResults(!0)};d.getSearchInput=function(){var a;return n.jsx(b("SUISearchInput.react"),{hasTooltip:!1,margin:"_3-9a",onChange:this.searchChanged,onFocus:this.searchFocused,placeholder:i._("Search for contact"),theme:b("SUIBusinessTheme"),value:(a=this.state.searchTerm)!=null?a:"",width:"20%"})};d.getAppliedFilters=function(){var a=[];for(var b=this.state.selectedOtherFilters.values(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a.push.apply(a,e)}return a};d.$5=function(a){var b=new Map();a.forEach(function(a){var c,d=m(a);c=(c=b.get(d))!=null?c:[];c.push(a);b.set(d,c)});return b};d.getSavedFilters=function(){var a=this,c,d,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(o(b("RelayFBEnvironment"),r,{actor_id:this.props.pageID}));case 2:c=g.sent,d=[],e=[],c.saved_filter_query.map(function(a){d.push(a.saved_filter),e.push(a.customized_name)}),f=[],d.forEach(function(b){f.push(a.$5(b))}),e.reverse(),f.reverse(),e.forEach(function(a,c){b("CRMClientListActions").updateSavedFilters(f[c],a)});case 11:case"end":return g.stop()}},null,this)};d.canSeeEmailSubscription=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(o(b("RelayFBEnvironment"),s,{page_id:this.props.pageID}));case 2:a=c.sent,this.setState({shouldShowEmailSubscription:a.page.gk_check.passes_gk});case 4:case"end":return c.stop()}},null,this)};d.canSeeLikesPageFilter=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(o(b("RelayFBEnvironment"),t,{page_id:this.props.pageID}));case 2:a=c.sent,this.setState({shouldShowLikesPageFilter:a.page.gk_check.passes_gk});case 4:case"end":return c.stop()}},null,this)};d.render=function(){var a,c=this.getAppliedFilters();return n.jsxs("div",{children:[n.jsxs("div",{className:"_6p26",children:[((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)?n.jsx(b("CRMClientTypeaheadRoot.react"),{pageID:this.props.pageID}):this.getSearchInput(),((a=this.props.store.get("config"))==null?void 0:a.shouldShowFilters)?[n.jsx(b("CRMPageContactsPlatformFilter.react"),{pageID:this.props.pageID,selectedPlatforms:this.state.selectedPlatforms,useLargeButton:!!((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)},"platFormFilter"),n.jsx(b("CRMPageContactsDateRangeFilter.react"),{pageID:this.props.pageID,selectedDateRange:this.state.selectedDateRange,useLargeButton:!!((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)},"dateRangeFilter"),n.jsx(b("CRMPageContactsOtherFilter.react"),{appliedFilters:c,isServiceBusiness:!!((a=this.props.store.get("config"))==null?void 0:a.isServiceBusiness),pageID:this.props.pageID,savedFilters:this.state.savedFilters,shouldShowEmailSubscription:this.state.shouldShowEmailSubscription,shouldShowLikesPageFilter:this.state.shouldShowLikesPageFilter,useLargeButton:!!((a=this.props.store.get("config"))==null?void 0:a.shouldShowTypeahead)},"otherFilter")]:null,n.jsxs("div",{className:"_8ba4",children:[this.getImportContactButton(),this.getAddNewClientButton()]})]}),c.length>0?n.jsx("div",{children:n.jsx(b("CRMPageContactsFilterTokenizer.react"),{filters:this.state.selectedOtherFilters,pageID:this.props.pageID})}):null,((a=this.props.store.get("config"))==null?void 0:a.shouldShowMergeContact)&&!this.state.isLoading?this.state.totalContactCount!==0?n.jsx(b("CRMClientListBulkAction.react"),{contactsToBulkEdit:this.state.contactsToBulkEdit,isAllSelected:this.state.isAllSelected,pageID:this.props.pageID,totalContactCount:this.state.totalContactCount,unSelectedContactsToBulkEdit:this.state.unSelectedContactsToBulkEdit}):n.jsxs("div",{className:"_8end",children:[n.jsx("div",{className:"_8ene",children:n.jsx("div",{className:"_8enf",children:n.jsx(b("Image.react"),{src:g("1089017")})})}),n.jsx("div",{children:n.jsx(b("FDSText.react"),{size:"header4",weight:"bold",children:"No Results Found"})}),n.jsx("div",{children:n.jsx(b("FDSText.react"),{color:"secondary",size:"body3",children:"There are no contacts matching your search criteria."})})]}):null]})};return c}(n.PureComponent);e.exports=a(b("FluxContainer").create(c))}),null);
__d("CRMCreateNewFieldDialog.react",["ix","cx","fbt","CRMEventsLogger","CRMMutationUtils","FDSButton.react","FDSCancelButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSText.react","FDSTextInput.react","FDSTooltip.react","Image","React","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k="create_custom_field_dialog";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={displayName:""},d.$1=function(){b("CRMEventsLogger").log(d.props.pageID,"click_create_custom_field_button","create_custom_field_button",k);var a={actor_id:d.props.pageID,custom_field:{display_name:d.state.displayName,page_id:d.props.pageID}};b("CRMMutationUtils").createCustomField(a,function(a,b){d.props.onHide();d.setState({displayName:""});a=a==null?void 0:(b=a.crm_custom_field_create)==null?void 0:b.custom_field;b=d.props.selectedFields;var c=d.props.customFields;c.set(a==null?void 0:a.id,a==null?void 0:a.display_name);var e=d.props.selectedFieldsForUnmatchedTable,f=d.props.selectedFieldsForMatchedTable;d.props.isMatchedTable?f.set(d.props.rowIndex,a==null?void 0:a.id):e.set(d.props.rowIndex,a==null?void 0:a.id);d.props.onAddCustomField(b,c,f,e);b.add(a==null?void 0:a.id)});d.$2()},d.$2=function(){d.setState({displayName:""})},d.$3=function(a){d.setState({displayName:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$4=function(){var a=new RegExp("^[a-zA-Z0-9 ]*$");if(this.props.existingCustomFields.has(this.state.displayName))return i._("The field name {field_name} already exists.",[i._param("field_name",this.state.displayName)]);return!a.test(this.state.displayName)?i._("Field names may only contain letters and digits. Please enter a different name and try again."):null};d.render=function(){var a=this.$4();return j.jsx(b("FDSModal.react"),{footer:j.jsx(b("FDSModalFooter.react"),{primaryButton:j.jsx(b("FDSButton.react"),{isDisabled:this.state.displayName.trim()===""||a!==null,label:i._("Save"),onClick:this.$1,use:"primary"}),secondaryButton:j.jsx(b("FDSCancelButton.react"),{onClick:this.$2})}),header:j.jsx(b("FDSModalHeader.react"),{title:i._("Create custom field")}),isShown:this.props.isShown,label:"Create Custom Field",onHide:this.props.onHide,children:j.jsx(b("FDSSection.react"),{children:j.jsxs("div",{className:"_7of9",children:[j.jsxs("div",{className:"_7qlw",children:[j.jsx(b("FDSText.react"),{color:"secondary",size:"header3",weight:"bold",width:96,children:i._("Field name")}),j.jsx(b("FDSTooltip.react"),{display:"inline",tooltip:i._("Custom fields can be found in your contact's details."),children:j.jsx(b("Image"),{className:"_7ofp",source:g("479798")})})]}),j.jsx("div",{className:"_7qlo",children:j.jsx(b("FDSTextInput.react"),{errorMessage:a,label:"Field Name",labelIsHidden:!0,onChange:this.$3,value:this.state.displayName})})]})})})};return c}(j.PureComponent);e.exports=a}),null);
__d("CRMUnmatchedFieldConfirmImportDialog.react",["fbt","FDSButton.react","FDSCancelButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSText.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("FDSModal.react"),{footer:h.jsx(b("FDSModalFooter.react"),{primaryButton:h.jsx(b("FDSButton.react"),{label:g._("Continue"),onClick:this.props.onConfirmImport,use:"primary"}),secondaryButton:h.jsx(b("FDSCancelButton.react"),{})}),header:h.jsx(b("FDSModalHeader.react"),{title:g._("Unmatched fields")}),isShown:this.props.isShown,label:"Modal Title",onHide:this.props.onHide,children:h.jsx(b("FDSSection.react"),{children:h.jsx(b("FDSText.react"),{color:"secondary",size:"body1",children:g._("You have {num_of_unmatched_fields} unmatched fields. Do you want to continue importing without matching these fields? Unmatched fields will not be uploaded.",[g._param("num_of_unmatched_fields",this.props.numOfUnmatchedFields)])})})})};return c}(h.PureComponent);e.exports=a}),null);
__d("CRMContactImportColumnMatchRoot.react",["ix","cx","fbt","CRMCancelImportDialog.react","CRMClientListActions","CRMCreateNewFieldDialog.react","CRMCSVImportColumnMatchTable.react","CRMEventsLogger","CRMMutationUtils","CRMUnmatchedFieldConfirmImportDialog.react","FDSButton.react","FDSDropdownSelectorOption.react","FDSGuidanceCard.react","FDSGuidanceCardContent.react","FDSGuidanceCardContentText.react","FDSGuidanceCardHeader.react","FDSText.react","FlexLayout.react","Image.react","React","asset","cxMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k="csv_import_custom_field_matching_screen",l="create_new_field",m={labels:[{label:i._("Column Label")},{label:i._("Contact Field")},{label:i._("Preview")}]};a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d,e;e=a.call(this,c)||this;e.goBackToList=function(){b("CRMEventsLogger").log(e.props.pageID,"click_go_back","back_button",k),b("CRMClientListActions").backToClientList(),e.removeMatchedData()};e.$1=function(a){var c=new Map();c.set("selected_fields",a);b("CRMEventsLogger").log(e.props.pageID,"select_field_for_matched_fields","custom_field_dropdown_list",k,null,c);e.setState(function(b){if(a===l)return{showCreateNewFieldDialog:a===l};var c=b.selectedFields.add(a),d=b.selectedFieldsForMatchedTable.get(b.currentRowForMatchedTable);d!=null&&c.has(d)&&c["delete"](d);return{showCreateNewFieldDialog:a===l,selectedFields:c,showNameGuidanceCard:!c.has("first_name")&&!c.has("full_name"),selectedFieldsForMatchedTable:b.selectedFieldsForMatchedTable.set(b.currentRowForMatchedTable,a)}})};e.$2=function(a){var c=new Map();c.set("selected_fields",a);b("CRMEventsLogger").log(e.props.pageID,"select_field_for_unmatched_fields","custom_field_dropdown_list",k,null,c);e.setState(function(b){if(a===l)return{showCreateNewFieldDialog:a===l};var c=b.selectedFields.add(a),d=b.selectedFieldsForUnmatchedTable.get(b.currentRowForUnmatchedTable);d!=null&&c.has(d)&&c["delete"](d);return{showCreateNewFieldDialog:a===l,selectedFields:c,showNameGuidanceCard:!c.has("first_name")&&!c.has("full_name"),selectedFieldsForUnmatchedTable:b.selectedFieldsForUnmatchedTable.set(b.currentRowForUnmatchedTable,a)}})};e.$3=function(a){e.setState({currentRowForMatchedTable:a,isMatchedTable:!0})};e.$4=function(a){e.setState({currentRowForUnmatchedTable:a,isMatchedTable:!1})};e.$5=function(){e.setState({showCreateNewFieldDialog:!1,showConfirmCancelDialog:!1,showConfirmationDialog:!1})};e.$7=function(){b("CRMEventsLogger").log(e.props.pageID,"click_cancel_import","cancel_import_button",k),e.setState({showConfirmCancelDialog:!0})};e.$8=function(){if(e.$6()!==0&&!e.state.showConfirmationDialog)e.setState({showConfirmationDialog:!0});else{var a;b("CRMEventsLogger").log(e.props.pageID,"click_confirm_import","confirm_import_button",k);var c=Array.from(e.state.selectedFieldsForMatchedTable.entries()).map(function(a){return{key:a[0],value:a[1]}}),d=Array.from(e.state.selectedFieldsForUnmatchedTable.entries()).map(function(a){return{key:a[0],value:a[1]}});a={actor_id:e.props.pageID,csv_input:{page_id:e.props.pageID,file_id:(a=e.props.sampleData)==null?void 0:a.uploaded_file_id,fields_from_matched_table:c,fields_from_unmatched_table:d,consent_legal:e.props.consentLegal}};b("CRMMutationUtils").createCsvContacts(a,function(a,c){b("CRMClientListActions").completeContactsCreation()});b("CRMClientListActions").createContactsFromCSV((c=e.props.sampleData)==null?void 0:c.file);e.removeMatchedData()}};e.$11=function(a,b,c,d){e.setState({selectedFields:a,customFields:b,selectedFieldsForMatchedTable:c,selectedFieldsForUnmatchedTable:d})};var f=0,g=new Map(),h=new Set();d=(d=c.sampleData)==null?void 0:d.matched_data;d&&Object.entries(d).map(function(a){var b;a=(b=c.sampleData)!=null?(b=b.matched_fields)!=null?b[a[0]]:b:b;a!==null&&a!==void 0&&(h.add(a),g.set(f++,a))});d=!h.has("first_name")&&!h.has("full_name");e.state={customFields:new Map(),isMatchedTable:!0,currentRowForMatchedTable:-1,currentRowForUnmatchedTable:-1,showCreateNewFieldDialog:!1,showConfirmationDialog:!1,showConfirmCancelDialog:!1,selectedFields:h,selectedFieldsForMatchedTable:g,selectedFieldsForUnmatchedTable:new Map(),showNameGuidanceCard:d};return e}var d=c.prototype;d.removeMatchedData=function(){var a=this,b,c=0,d=new Map(),e=new Set();b=(b=this.props.sampleData)==null?void 0:b.matched_data;b&&Object.entries(b).map(function(b){var f;b=(f=a.props.sampleData)!=null?(f=f.matched_fields)!=null?f[b[0]]:f:f;b!==null&&b!==void 0&&(e.add(b),d.set(c++,b))});this.setState({selectedFieldsForMatchedTable:d,selectedFieldsForUnmatchedTable:new Map()})};d.goBackToFileUpload=function(){b("CRMClientListActions").backToFileUpload()};d.$6=function(){var a,b;a=(a=this.props.sampleData)==null?void 0:a.matched_data;a=a?Object.entries(a).length:0;b=(b=this.props.sampleData)==null?void 0:b.unmatched_data;b=b?Object.entries(b).length:0;return Math.abs(this.state.selectedFieldsForUnmatchedTable.size+this.state.selectedFieldsForMatchedTable.size-a-b)};d.$9=function(){var a,c=this.state.selectedFields,d=[];d.push(j.jsx(a=b("FDSDropdownSelectorOption.react"),{icon:j.jsx(b("Image.react"),{src:g("504539")}),value:l,children:i._("Create custom field")},l));d.push(j.jsx(a,{icon:j.jsx(b("Image.react"),{src:g("478236")}),value:"ignore",children:i._("Don't upload this field")},"ignore"));d.push([j.jsx(a,{isDisabled:c.has("first_name"),value:"first_name",children:i._("First name")},"first_name"),j.jsx(a,{isDisabled:c.has("last_name"),value:"last_name",children:i._("Surname")},"last_name"),j.jsx(a,{isDisabled:c.has("full_name"),value:"full_name",children:i._("Full name")},"full_name"),j.jsx(a,{isDisabled:c.has("phone_number"),value:"phone_number",children:i._("Phone number")},"phone_number"),j.jsx(a,{isDisabled:c.has("email"),value:"email",children:i._("Email address")},"email"),j.jsx(a,{isDisabled:c.has("birthday"),value:"birthday",children:i._("Date of birth")},"birthday"),j.jsx(a,{isDisabled:c.has("address"),value:"address",children:i._("Address")},"address"),j.jsx(a,{isDisabled:c.has("city_name"),value:"city_name",children:i._("Town\/city")},"city_name"),j.jsx(a,{isDisabled:c.has("state"),value:"state",children:i._("County\/Region")},"state"),j.jsx(a,{isDisabled:c.has("zip_code"),value:"zip_code",children:i._("ZIP\/Postal code")},"zip_code"),j.jsx(a,{isDisabled:c.has("note"),value:"note",children:i._("Note")},"note")]);d.push(this.$10());return d};d.$10=function(){var a=new Set(Array.from(this.state.selectedFields.values())),c=[];this.props.existingCustomFields.forEach(function(d,e){c.push(j.jsx(b("FDSDropdownSelectorOption.react"),{isDisabled:a.has(e),value:e,children:d},e))});this.state.customFields.forEach(function(d,e){c.push(j.jsx(b("FDSDropdownSelectorOption.react"),{isDisabled:a.has(e),value:e,children:d},e))});return c};d.render=function(){return j.jsxs("div",{className:"_7ndn",style:{overflowY:"auto"},children:[j.jsx("div",{className:"_7inb",children:j.jsx(b("FlexLayout.react"),{align:"center",justify:"center",children:j.jsx(b("FDSText.react"),{color:"primary",size:"header1",children:i._("Match contact fields")})})}),j.jsx("div",{className:"_7o4h",children:j.jsx(b("FDSText.react"),{color:"primary",size:"body1",children:i._("We've matched your contact fields based on the column labels in your spreadsheet. Scroll to review and change these suggested matches and use the drop-down menu to assign or customise unmatched fields. Unmatched fields won't be uploaded.")})}),this.state.showNameGuidanceCard?j.jsx(n,{}):null,j.jsxs("div",{className:"_7kq_",children:[j.jsx(b("CRMCSVImportColumnMatchTable.react"),{csvImportData:this.props.sampleData,fieldSelectorOptions:this.$9(),headerItems:m,onChangeFieldForMatchedTable:this.$1,onChangeFieldForUnmatchedTable:this.$2,onRowClickForMatchedTable:this.$3,onRowClickForUnmatchedTable:this.$4,selectedFieldsForMatchedTable:this.state.selectedFieldsForMatchedTable,selectedFieldsForUnmatchedTable:this.state.selectedFieldsForUnmatchedTable}),j.jsx(b("CRMCreateNewFieldDialog.react"),{customFields:this.state.customFields,existingCustomFields:new Set(Array.from(this.props.existingCustomFields.values()).concat(Array.from(this.state.customFields.values()))),isMatchedTable:this.state.isMatchedTable,isShown:this.state.showCreateNewFieldDialog,onAddCustomField:this.$11,onHide:this.$5,pageID:this.props.pageID,rowIndex:this.state.isMatchedTable?this.state.currentRowForMatchedTable:this.state.currentRowForUnmatchedTable,selectedFields:this.state.selectedFields,selectedFieldsForMatchedTable:this.state.selectedFieldsForMatchedTable,selectedFieldsForUnmatchedTable:this.state.selectedFieldsForUnmatchedTable})]}),j.jsx("div",{className:"_7ins",children:j.jsxs(b("FlexLayout.react"),{align:"center",justify:"all",children:[j.jsxs("div",{children:[j.jsx(b("FDSButton.react"),{icon:j.jsx(b("Image.react"),{src:g("503177"),style:{marginLeft:-8,marginRight:4}}),label:i._("Back"),margin:"_3-8x _3-95 _3-9b",onClick:this.goBackToFileUpload,size:"large",use:"default"}),j.jsx(b("FDSButton.react"),{label:i._("Cancel"),margin:"_3-8x _3-95 _3-9b",onClick:this.$7,size:"large",use:"default"})]}),j.jsx(b("FDSButton.react"),{isDisabled:this.state.showNameGuidanceCard,label:i._("Import"),margin:"_3-8x _3-95 _3-91",onClick:this.$8,size:"large",use:"primary"}),j.jsx(b("CRMUnmatchedFieldConfirmImportDialog.react"),{isShown:this.state.showConfirmationDialog,numOfUnmatchedFields:this.$6(),onConfirmImport:this.$8,onHide:this.$5,pageID:this.props.pageID}),j.jsx(b("CRMCancelImportDialog.react"),{isShown:this.state.showConfirmCancelDialog,onConfirmCancel:this.goBackToList,onHide:this.$5})]})})]})};return c}(j.Component);var n=function(){return j.jsx("div",{className:"_7kq_",children:j.jsxs(b("FDSGuidanceCard.react"),{category:"error",children:[j.jsx(b("FDSGuidanceCardHeader.react"),{children:i._("Required contact field missing")}),j.jsx(b("FDSGuidanceCardContent.react"),{children:j.jsx(b("FDSGuidanceCardContentText.react"),{children:i._("Name is a required contact field. Please match a column to the name contact field to continue.")})})]})})};e.exports=a}),null);
__d("CRMContactsCSVFileInput.react",["fbt","CRMClientListActions","CRMCSVFileInput.react","CRMEventsLogger","CRMMutationUtils","FileInputUploader","React","XCRMContactImportCsvUploadController","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=1*1024*1024,j="csv_import_file_upload_screen";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={fileError:null,fileName:null,fileSize:null,fileID:null,uploading:!1},d.$2=null,d.onClose=function(){d.setState({fileName:null,fileSize:null,uploading:!1,fileError:null});if(d.state.fileID==null)return;var a={actor_id:d.props.pageID,file_id:d.state.fileID};b("CRMMutationUtils").deleteUploadedFile(a,b("emptyFunction"));b("CRMClientListActions").addOrRemoveFile()},d.$3=b("XCRMContactImportCsvUploadController").getURIBuilder().setFBID("page_id",d.props.pageID).getURI().toString(),d.$4=function(a,c){if(!a||!a[0]||d.$2)return;b("CRMEventsLogger").log(d.props.pageID,"upload_csv_file","csv_file_upload_area",j);d.$1=a[0];if(((a=d.$1)==null?void 0:a.size)===0){b("CRMEventsLogger").log(d.props.pageID,"upload_wrong_file","csv_file_upload_area",j,null,new Map().set("error","file_empty"));d.setState({fileName:(a=d.$1)==null?void 0:a.name,uploading:!1,fileError:g._("The file you've selected doesn't contain any information. Please choose another file and try again.")});return}if(((a=d.$1)==null?void 0:a.size)>i){b("CRMEventsLogger").log(d.props.pageID,"upload_wrong_file","csv_file_upload_area",j,null,new Map().set("error","file_too_large"));d.setState({fileName:(a=d.$1)==null?void 0:a.name,uploading:!1,fileError:g._("The file that you've selected is too large. Please choose a file smaller than 1 MB.")});return}var e=new(b("FileInputUploader"))(c).setURI(d.$3).setFiles({file:d.$1});d.$2=e;d.setState({fileName:(a=d.$1)==null?void 0:a.name,fileSize:(c=d.$1)==null?void 0:c.size,uploading:!0,fileError:null},function(){e.subscribe("success",d.$5),e.subscribe("failure",d.$6),e.send()})},d.$6=function(a,c){d.$2=null;a=c.response.payload.file_validation_error;a!==null&&a!==void 0&&b("CRMEventsLogger").log(d.props.pageID,"upload_wrong_file","csv_file_upload_area",j,null,new Map().set("error",a));d.setState({fileName:null,uploading:!1,fileError:a})},d.$5=function(a,c){var e;d.$2=null;a=c.response.payload.file_validation_error;a!==null&&a!==void 0?b("CRMEventsLogger").log(d.props.pageID,"upload_wrong_file","csv_file_upload_area",j,null,new Map().set("error",a)):b("CRMEventsLogger").log(d.props.pageID,"upload_file","csv_file_upload_area",j);d.setState({uploading:!1,fileID:(e=c)!=null?(e=e.response)!=null?(e=e.payload)!=null?e.uploaded_file_id:e:e:e,fileError:a});b("CRMClientListActions").addOrRemoveFile((e=c)!=null?(e=e.response)!=null?e.payload:e:e)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return h.jsx(b("CRMCSVFileInput.react"),{fileError:this.state.fileError,fileName:this.state.fileName,fileSize:this.state.fileSize,isUploading:this.state.uploading,onClose:this.onClose,onUpload:this.$4})};return c}(h.PureComponent);e.exports=a}),null);
__d("CRMConsentToTOSDialogBody.react",["cx","LeadAdsCMSBlock.react","React","ScrollableArea.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){return h.jsx(b("ScrollableArea.react"),{height:600,onEndReached:a.onEndReached,children:h.jsx("div",{className:"_81t1",children:h.jsx("div",{className:"_7r68",children:h.jsx(b("LeadAdsCMSBlock.react"),{id:"491619365082334"})})})})}e.exports=a}),null);
__d("CRMConsentToTOSDialog.react",["fbt","CRMConsentToTOSDialogBody.react","FDSButton.react","FDSCancelButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={reachBodyBottom:!1},c.$1=function(){c.setState({reachBodyBottom:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return h.jsx(b("FDSModal.react"),{footer:h.jsx(b("FDSModalFooter.react"),{primaryButton:h.jsx(b("FDSButton.react"),{isDisabled:!this.state.reachBodyBottom,label:g._("Confirm"),onClick:this.props.onConfirm,use:"primary"}),secondaryButton:h.jsx(b("FDSCancelButton.react"),{})}),header:h.jsx(b("FDSModalHeader.react"),{title:g._("Review Terms of Service")}),isShown:this.props.isShown,label:"Modal Title",onHide:this.props.onHide,width:560,children:h.jsx(b("FDSSection.react"),{children:h.jsx(b("CRMConsentToTOSDialogBody.react"),{onEndReached:this.$1})})})};return c}(h.PureComponent);e.exports=a}),null);
__d("EmailTOSDialog.react",["ix","cx","fbt","CRMConsentToTOSDialog.react","FDSButton.react","FDSCancelButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSText.react","Image.react","Link.react","React","asset","cxMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={showFullTOS:!1},c.$1=function(){c.setState({showFullTOS:!0})},c.$2=function(){c.setState({showFullTOS:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a;return j.jsxs("span",{children:[j.jsx(b("FDSModal.react"),{footer:j.jsx(b("FDSModalFooter.react"),{primaryButton:j.jsx(b("FDSButton.react"),{label:i._("Confirm"),onClick:this.props.onConfirm,use:"primary"}),secondaryButton:j.jsx(b("FDSCancelButton.react"),{})}),header:j.jsx(b("FDSModalHeader.react"),{title:i._("Page Contact Terms of Service")}),isShown:this.props.isShown,label:"Modal Title",onHide:this.props.onHide,width:560,children:j.jsx(b("FDSSection.react"),{children:j.jsxs("div",{className:"_81t1",children:[j.jsx("div",{className:"_7r67",children:j.jsx(b("Image.react"),{src:g("700836")})}),j.jsxs("div",{className:"_7r68",children:[j.jsx(a=b("FDSText.react"),{margin:"_3-8y _20nr",size:"header2",textAlign:"center",children:i._("Protecting Contact Information")}),j.jsx("div",{children:j.jsx(a,{color:"secondary",children:i._("Your contacts trust you to act responsibly with their information. By clicking Confirm, you agree to the following:")})}),j.jsx("div",{className:"_7tku",children:j.jsx(a,{color:"secondary",size:"body2",children:i._("You have permission to store and use their information to send transactional and promotional messages")})}),j.jsx("div",{className:"_7tku",children:j.jsx(a,{color:"secondary",size:"body2",children:i._("Your contacts haven't opted out of sharing with you any of this information")})}),j.jsx("div",{className:"_7tku",children:j.jsx(a,{color:"secondary",size:"body2",children:i._("If a contact opts out of sharing their information at any point, you'll remove that information immediately")})}),j.jsx(b("Link.react"),{onClick:this.$1,children:j.jsx(a,{size:"body2",children:i._("Review Page Contact Terms of Service")})})]})]})})}),j.jsx(b("CRMConsentToTOSDialog.react"),{isShown:this.state.showFullTOS,onConfirm:this.$2,onHide:this.$2})]})};return c}(j.PureComponent);e.exports=a}),null);
__d("CRMContactImportRoot.react",["ix","cx","fbt","BusinessCRMConfigStore","CRMClientListActions","CRMClientListStore","CRMContactImportColumnMatchRoot.react","CRMContactsCSVFileInput.react","CRMEventsLogger","CRMMutationUtils","EmailTOSDialog.react","FDSButton.react","FDSCheckboxInput.react","FDSText.react","FlexLayout.react","FluxContainer","Image.react","Link.react","PagesReactDispatcher","React","RelayFBEnvironment","RelayModern","asset","cxMargin","emptyFunction","CRMContactImportRootQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j;a=b("BusinessCRMConfigStore").withStore;var k=b("React"),l=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var m="csv_import_file_upload_screen",n=j!==void 0?j:j=b("CRMContactImportRootQuery.graphql");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isUploaded:!1,isChecked:!1,sampleData:null,showMatchColumns:!1,showTOSDialog:!1},d.goBackToList=function(){var a;b("CRMEventsLogger").log(d.props.pageID,"click_go_back","back_button",m);a=(a=d.state.sampleData)==null?void 0:a.uploaded_file_id;if(a!==null&&a!==void 0){a={client_mutation_id:"0",actor_id:d.props.pageID,file_id:a};b("CRMMutationUtils").deleteUploadedFile(a,b("emptyFunction"))}b("CRMClientListActions").backToClientList()},d.goMatchColumn=function(){b("CRMEventsLogger").log(d.props.pageID,"click_continue_to_match_fields","continue_match_fields_button",m),b("CRMClientListActions").goMatchColumn()},d.$1=function(){b("CRMEventsLogger").log(d.props.pageID,"crm_tos_impression","crm_tos_dialog",m),d.setState({showTOSDialog:!0})},d.$2=function(){b("CRMEventsLogger").log(d.props.pageID,"click_cancel_tos","crm_tos_dialog",m),d.setState({showTOSDialog:!1})},d.$3=function(){b("CRMEventsLogger").log(d.props.pageID,"click_accept_tos","crm_tos_dialog",m);var a={actor_id:d.props.pageID};b("CRMMutationUtils").consentToCrmLegal(a,b("emptyFunction"));b("CRMClientListActions").goMatchColumn();d.setState({showTOSDialog:!1})},d.$4=function(a){var c=a.error;a=a.props;if(c)return k.jsx("div",{});else if(a){var e=new Map();a.node.page_custom_fields.map(function(a){e.set(a.id,a.display_name)});return k.jsx(b("CRMContactImportColumnMatchRoot.react"),{consentLegal:d.state.isChecked,existingCustomFields:e,pageID:d.props.pageID,sampleData:d.state.sampleData})}return k.jsx("div",{})},d.$5=function(){var a=d.state.isChecked;b("CRMEventsLogger").log(d.props.pageID,a?"uncheck_sms_agreement":"check_sms_agreement","sms_agreement",m);d.setState({isChecked:!a})},d.$6=function(){b("CRMEventsLogger").log(d.props.pageID,"click_download_template","download_csv_template_link",m)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a){var c=b("CRMClientListStore").getState();return{isUploaded:c.isUploaded,isChecked:a==null?!1:a.isChecked,sampleData:c.sampleData,showMatchColumns:c.showMatchColumns,showTOSDialog:a==null?!1:a.showTOSDialog}};var d=c.prototype;d.componentDidMount=function(){b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores())};d.render=function(){var a;return this.state.showMatchColumns&&!this.state.showTOSDialog?k.jsx(l,{cacheConfig:{force:!0},environment:b("RelayFBEnvironment"),query:n,render:this.$4,variables:{page_id:this.props.pageID}}):k.jsxs("div",{className:"_7ndn",style:{height:this.props.height!==null&&this.props.height!==void 0?this.props.height+"px":void 0,overflowY:"scroll"},children:[k.jsxs("div",{className:"_7t17",children:[k.jsxs("div",{className:"_7t18",children:[k.jsxs("div",{className:"_7ndc",children:[k.jsx("div",{className:"_7inb",children:k.jsx(b("FDSText.react"),{color:"primary",size:"header3",weight:"bold",children:i._("Upload contacts")})}),k.jsx("div",{className:"_7inr",children:k.jsx(b("FDSText.react"),{color:"secondary",size:"body3",children:i._("You can choose to upload your contacts and information about them from a spreadsheet. You'll have an opportunity to review all of the details before uploading to make sure that everything is correct. Facebook won't share the information that you upload with anyone, but we will store it on your behalf so that you can manage your contacts in one place.")})}),k.jsx(b("CRMContactsCSVFileInput.react"),{pageID:this.props.pageID}),this.props.isEligibleForSMS&&this.state.isUploaded&&((a=this.state)==null?void 0:(a=a.sampleData)==null?void 0:a.file_validation_error)==null?k.jsxs("div",{className:"_7r2x",children:[k.jsx(b("FDSCheckboxInput.react"),{label:"",onChange:this.$5,value:this.state.isChecked})," ",k.jsx(b("FDSText.react"),{color:"primary",size:"body2",children:i._("You confirm that you have permission to communicate with these contacts via text message (SMS) on behalf of {page_name}. Messages may include appointment confirmations, reminders and more.",[i._param("page_name",this.props.pageName)])})]}):null]}),k.jsx("div",{className:"_7t19",children:k.jsxs(b("FlexLayout.react"),{align:"center",justify:"all",children:[k.jsx(b("FDSButton.react"),{label:i._("Cancel"),margin:"_3-8x _3-95 _3-9b",onClick:this.goBackToList,size:"large",use:"default"}),k.jsx(b("FDSButton.react"),{isDisabled:!this.state.isUploaded||((a=this.state)==null?void 0:(a=a.sampleData)==null?void 0:a.file_validation_error)!=null,label:i._("Continue"),margin:"_3-8x _3-95 _3-91",onClick:this.props.hasConsent?this.goMatchColumn:this.$1,size:"large",use:"primary"})]})})]}),k.jsxs("div",{className:"_7t1a",children:[k.jsxs("div",{className:"_7t1b",children:[k.jsx(b("FDSText.react"),{color:"primary",margin:"_3-8z _3-9c",size:"header3",weight:"bold",children:i._("Spreadsheet formatting tips:")}),k.jsx(b("FDSText.react"),{color:"secondary",margin:"_3-8z _3-95 _3-9c",size:"body2",children:i._("Here are some formatting tips to bear in mind before you begin:")}),k.jsxs(b("FDSText.react"),{color:"secondary",margin:"_3-9c _3-8w",size:"body2",children:[k.jsx(b("Image.react"),{src:g("505499")}),i._("The first row should be column labels")]}),k.jsxs(b("FDSText.react"),{color:"secondary",margin:"_3-9c _3-8w",size:"body2",children:[k.jsx(b("Image.react"),{src:g("505499")}),i._("Each column that you're uploading must have a label")]}),k.jsxs(b("FDSText.react"),{color:"secondary",margin:"_3-9c _3-8w",size:"body2",children:[k.jsx(b("Image.react"),{src:g("505499")}),i._("Name is the only required column label")]}),k.jsxs(b("FDSText.react"),{color:"secondary",margin:"_3-9c _3-8w _3-97",size:"body2",children:[k.jsx(b("Image.react"),{src:g("505499")}),i._("Any contact without a name won't be uploaded")]})]}),k.jsx(o,{onClickDownload:this.$6,uri:(a=this.props.store.get("config"))==null?void 0:a.templateURI})]})]}),k.jsx(b("EmailTOSDialog.react"),{isShown:this.state.showTOSDialog,onConfirm:this.$3,onHide:this.$2})]})};return c}(k.PureComponent);function o(a){var c=a.uri;a=a.onClickDownload;return k.jsxs("div",{className:"_7j7y",children:[k.jsx(b("FDSText.react"),{color:"primary",margin:"_3-9c _3-97",size:"header3",weight:"bold",children:i._("Contact list template")}),k.jsx(b("FDSText.react"),{color:"secondary",margin:"_3-9c",size:"body2",children:i._("Save time by organising your list of contacts in the suggested format before uploading.")}),k.jsxs(b("Link.react"),{className:"_8p_2 _3-9c _3-8z",href:c,onClick:a,children:[k.jsx(b("Image.react"),{className:"_3-90",src:g("406900")}),k.jsx(b("FDSText.react"),{color:"blueLink",size:"body2",children:i._("Download Template")})]})]})}e.exports=a(b("FluxContainer").create(c))}),null);
__d("CRMPageContactsBulkActionType",[],(function(a,b,c,d,e,f){"use strict";e.exports=Object.freeze({EXPORT:"export",EDIT:"edit",ADD_LABEL:"addLabel"})}),null);
__d("CRMClientsMainView.react",["cx","fbt","CRMClientDetailsRoot.react","CRMClientListActions","CRMClientListRoot.react","CRMClientListStore","CRMClientsViewHeader.react","CRMContactImportRoot.react","CRMEventsLogger","CRMPageContactsBulkActionType","FDSGuidanceToast.react","FDSGuidanceToastButton.react","FDSGuidanceToastCloseButton.react","FDSGuidanceToastProgressBar.react","FluxContainer","PagesReactDispatcher","React","RelayFBEnvironment","RelayModern","ResponsiveBlock.react","goURI","nullthrows","CRMClientsMainViewQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React"),k=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var l=1e3,m=3,n=i!==void 0?i:i=b("CRMClientsMainViewQuery.graphql");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(){var a=d.state.progress+m;a<=95&&b("CRMClientListActions").updateProgress(m)},d.$3=function(){window.clearInterval(d.$1),b("CRMClientListActions").dismissToast()},d.$5=function(){window.clearInterval(d.$1),d.$1=void 0,b("CRMClientListActions").dismissBulkActionToast()},d.$6=function(){b("CRMEventsLogger").log(d.props.pageID,"click","merge_contact_success_toast_view_button","contact_list"),b("CRMClientListActions").showClientDetails(b("nullthrows")(d.state.mergedContactID)),b("CRMClientListActions").dismissMergeToast()},d.$7=function(a,b){d.setState({headerHeight:b})},d.$8=function(a){var c=a.error;a=a.props;if(c)return j.jsx("div",{});else if(a){c=a.node.has_consent_to_crm_tos;return j.jsx(b("CRMContactImportRoot.react"),{hasConsent:c,height:d.props.height,isEligibleForSMS:((c=(c=a.node.services_vertical_info)==null?void 0:c.is_eligible_for_appointment_calendar)!=null?c:!1)&&((c=(c=a.node.services_vertical_info)==null?void 0:c.is_page_eligible_for_sms)!=null?c:!1),pageID:d.props.pageID,pageName:a.node.display_name})}return j.jsx("div",{})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("CRMClientListStore")]};c.calculateState=function(a,c){c=b("CRMClientListStore").getState();return{isCreatingContactsFromCSV:c.isCreatingContactsFromCSV,isContactCreationComplete:c.isContactCreationComplete,uploadedFileName:c.uploadedFileName,progress:c.progress,headerHeight:a?a.headerHeight:0,showDetailsView:b("CRMClientListStore").getShowDetailsView(),showContactImportView:b("CRMClientListStore").getShowContactImportView(),isMergingContact:c.isMergingContact,mergedContactID:c.mergedContactID,mergeContactError:c.mergeContactError,isDoingBulkAction:c.isDoingBulkAction,isBulkActionComplete:c.isBulkActionComplete,exportContactsUrl:c.exportContactsUrl,bulkActionType:c.bulkActionType}};var d=c.prototype;d.componentDidMount=function(){b("CRMClientListActions").backToClientList(),b("PagesReactDispatcher").explicitlyRegisterStores(this.constructor.getStores()),this.props.contactID!=null&&b("CRMClientListActions").showClientDetails(this.props.contactID)};d.componentDidUpdate=function(){(this.state.isCreatingContactsFromCSV||this.state.isDoingBulkAction)&&this.$1==null&&(this.$1=window.setInterval(this.$2,l))};d.$4=function(){b("CRMClientListActions").dismissMergeToast()};d.render=function(){return this.state.showContactImportView?j.jsx("div",{className:"_6o-e",children:j.jsx(k,{cacheConfig:{force:!0},environment:b("RelayFBEnvironment"),query:n,render:this.$8,variables:{page_id:this.props.pageID}})}):j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"_6o-e",children:this.state.showDetailsView?j.jsx(b("CRMClientDetailsRoot.react"),{height:this.props.height,pageID:this.props.pageID}):j.jsxs(j.Fragment,{children:[j.jsx(b("ResponsiveBlock.react"),{onResize:this.$7,children:j.jsx(b("CRMClientsViewHeader.react"),{pageID:this.props.pageID})}),j.jsx(b("CRMClientListRoot.react"),{height:this.props.height!=null?this.props.height-this.state.headerHeight:null,pageID:this.props.pageID})]})}),j.jsxs("div",{className:"_7o8_",children:[this.state.isCreatingContactsFromCSV||this.state.isContactCreationComplete?j.jsx(o,{fileName:this.state.uploadedFileName,isComplete:this.state.isContactCreationComplete,onClose:this.$3,progress:this.state.progress}):null,this.state.isMergingContact||this.state.mergedContactID!=null||this.state.mergeContactError?j.jsx(p,{hasError:this.state.mergeContactError,isComplete:this.state.mergedContactID!=null,onClose:this.$4,onView:this.$6}):null,this.state.isDoingBulkAction||this.state.isBulkActionComplete?j.jsx(q,{actionType:this.state.bulkActionType,isComplete:this.state.isBulkActionComplete,onClose:this.$5,pageID:this.props.pageID,progress:this.state.progress,url:this.state.exportContactsUrl}):null]})]})};return c}(j.PureComponent);function o(a){var c=a.progress,d=a.isComplete,e=a.fileName;a=a.onClose;return j.jsx("div",{className:"_7o90",children:j.jsx(b("FDSGuidanceToast.react"),{closeButton:j.jsx(b("FDSGuidanceToastCloseButton.react"),{onClick:a}),content:d?h._("Your contacts will finish uploading within the next few minutes. Please refresh the Page to see uploaded contacts."):h._("Uploading {file_name}",[h._param("file_name",e)]),progressBar:j.jsx(b("FDSGuidanceToastProgressBar.react"),{progress:d?100:c}),type:d?"success":"progress"})})}function p(a){var c=a.isComplete,d=a.hasError,e=a.onClose;a=a.onView;if(d){b("CRMEventsLogger").log(this.props.pageID,"merge_page_contact_error","merge_contact_error_toast","contact_list");return j.jsx("div",{className:"_7o90",children:j.jsx(b("FDSGuidanceToast.react"),{callToActionButton:j.jsx(b("FDSGuidanceToastButton.react"),{label:h._("OK"),onClick:e}),closeButton:j.jsx(b("FDSGuidanceToastCloseButton.react"),{onClick:e}),content:h._("There was an issue merging these contacts. Please refresh the page and try again."),type:"error"})})}return j.jsx("div",{className:"_7o90",children:j.jsx(b("FDSGuidanceToast.react"),{callToActionButton:c?j.jsx(b("FDSGuidanceToastButton.react"),{label:h._("View"),onClick:a}):void 0,closeButton:j.jsx(b("FDSGuidanceToastCloseButton.react"),{onClick:e}),content:c?h._("Your contacts have been merged. Select \"view\" to see your merged contact."):h._("'Merging contacts'"),progressBar:j.jsx(b("FDSGuidanceToastProgressBar.react"),{}),type:c?"success":"buffering"})})}function q(a){var c=a.progress,d=a.isComplete,e=a.url,f=a.actionType,g=a.onClose,i=a.pageID;a="";var k="",l="",m=function(){return void 0},n=function(){return void 0};switch(f){case b("CRMPageContactsBulkActionType").EXPORT:a=h._("Download");k=h._("Your file is ready. Please select \"Download\" to continue.");l=h._("We're preparing your file. We'll notify you when it's ready to be downloaded.");m=function(){b("CRMEventsLogger").log(i,"click","export_contact_toast_download_button","contact_list"),b("goURI")(e)};n=function(){b("CRMEventsLogger").log(i,"click","export_contact_toast_dismiss_button","contact_list"),g()};break;case b("CRMPageContactsBulkActionType").EDIT:a=h._("View");k=h._("Your contacts have been updated. Select \"View\" to refresh this list.");l=h._("Saving changes to selected contacts");m=function(){b("CRMEventsLogger").log(i,"click","edit_fields_contact_toast_view_button","contact_list"),b("CRMClientListActions").forceRefetch(),g()};n=function(){b("CRMEventsLogger").log(i,"click","edit_fields_contact_toast_dismiss_button","contact_list"),g()};break;case b("CRMPageContactsBulkActionType").ADD_LABEL:a="View";k='Your contacts have been updated. Select "View" to see updated information.';l="Updating contacts";m=function(){b("CRMEventsLogger").log(i,"click","add_label_contact_toast_view_button","contact_list"),b("CRMClientListActions").forceRefetch(),g()};n=function(){b("CRMEventsLogger").log(i,"click","add_label_contact_toast_dismiss_button","contact_list"),g()};break;default:break}return j.jsx("div",{className:"_7o90",children:j.jsx(b("FDSGuidanceToast.react"),{callToActionButton:d?j.jsx(b("FDSGuidanceToastButton.react"),{label:a,onClick:m}):void 0,closeButton:j.jsx(b("FDSGuidanceToastCloseButton.react"),{onClick:n}),content:d?k:l,progressBar:j.jsx(b("FDSGuidanceToastProgressBar.react"),{progress:d?100:c}),type:d?"success":"progress"})})}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("CRMBanReportUserDialog.react",["fbt","FDSButton.react","FDSCancelButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSText.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=g._("Ban {name}?",[g._param("name",a.userName)]),d=g._("Are you sure that you want to ban {name} from this Page? People who are banned can't post, comment, send messages or take other actions on your Page. They won't be notified.",[g._param("name",a.userName)]);a.isBanned&&(c=g._("Remove ban from Page?"),d=g._("Removing {name}'s ban will allow them to post, comment, send messages and take other actions on your Page.",[g._param("name",a.userName)]));return h.jsx(b("FDSModal.react"),{footer:h.jsx(b("FDSModalFooter.react"),{primaryButton:h.jsx(b("FDSButton.react"),{label:a.isBanned?g._("Remove Ban"):g._("Ban"),onClick:a.onConfirm,use:"primary"}),secondaryButton:h.jsx(b("FDSCancelButton.react"),{})}),header:h.jsx(b("FDSModalHeader.react"),{title:c}),isShown:a.shown,label:"Create New Group",onHide:a.onHide,children:h.jsx(b("FDSSection.react"),{children:h.jsx(b("FDSText.react"),{children:d})})})}e.exports=a}),null);
__d("PagesCreateSavedResponseMutation",["RelayFBEnvironment","RelayModern","PagesCreateSavedResponseMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("PagesCreateSavedResponseMutation.graphql");function a(a,c,d,e,f,g,j,k){k===void 0&&(k=null);return h((k=k)!=null?k:b("RelayFBEnvironment"),{mutation:i,variables:{input:{page_id:a,title:c,message:d,image_id:e,corresponding_question:f}},onCompleted:g,onError:j})}e.exports={commit:a}}),null);
__d("PagesDeleteSavedResponseMutation",["RelayFBEnvironment","RelayModern","PagesDeleteSavedResponseMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("PagesDeleteSavedResponseMutation.graphql");function a(a,c,d){return h(b("RelayFBEnvironment"),{mutation:i,variables:{input:{saved_response_id:a}},onCompleted:c,onError:d})}e.exports={commit:a}}),null);
__d("PagesEditSavedResponseMutation",["RelayFBEnvironment","RelayModern","PagesEditSavedResponseMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("PagesEditSavedResponseMutation.graphql");function a(a,c,d,e,f,g,j){j===void 0&&(j=null);return h((j=j)!=null?j:b("RelayFBEnvironment"),{mutation:i,variables:{input:{saved_response_id:a,title:c,message:d,new_image_id:e}},onCompleted:f,onError:g})}e.exports={commit:a}}),null);
__d("SavedResponsesAllPersonalizationView.react",["cx","fbt","FDSRadioList.react","FDSRadioListItem.react","FDSText.react","React","ScrollableArea.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a){return a.shouldShowSavedReplyInIG&&a.macro.instagramDescription!==null&&a.selectedMacroKey===a.macro.name?i.jsx("div",{className:"_8vni",children:i.jsx(b("FDSText.react"),{color:"secondary",size:"body1",children:a.macro.instagramDescription})}):i.jsx("div",{})}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a=this;return i.jsx("div",{className:"_7t8c",children:i.jsx(b("FDSRadioList.react"),{onChange:this.props.onMacroSelected,value:this.props.selectedMacroKey,children:Object.keys(this.props.macros).map(function(c){var d=a.props.macros[c],e=i.jsx(b("FDSText.react"),{size:"body1",children:d.key});return i.jsxs("div",{className:"_7t8f",children:[i.jsx("div",{className:"_8jl-",children:i.jsx(b("FDSRadioListItem.react"),{label:e,value:c},c)}),i.jsx(j,{macro:d,selectedMacroKey:a.props.selectedMacroKey,shouldShowSavedReplyInIG:a.props.shouldShowSavedReplyInIG})]},c)})})})};d.render=function(){return i.jsx("div",{className:this.props.className,children:i.jsxs("div",{className:"_84mv",children:[i.jsx("div",{className:"_7t7g",children:h._("Personalise your saved reply each time with information about your Page or the person you're talking to.")}),i.jsx(b("ScrollableArea.react"),{fade:!0,maxHeight:265,shadow:!0,children:i.jsx("div",{className:"_7t8c",children:this.$1()})})]})})};return c}(i.PureComponent);e.exports=a}),null);
__d("SavedResponsesActionButton.react",["cx","Image.react","React","ShimButton.react","XUIGrayText.react","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("_uvx",this.props.className);return h.jsxs(b("ShimButton.react"),{className:a,onClick:this.props.onClick,children:[h.jsx(b("Image.react"),{src:this.props.image,className:"_uvy"}),h.jsx(b("XUIGrayText.react"),{shade:"medium",className:"_uvz",children:this.props.label})]})};return c}(h.Component);a.propTypes={image:b("prop-types").object.isRequired,label:b("prop-types").string.isRequired,onClick:b("prop-types").func.isRequired};e.exports=a}),null);
__d("SavedResponsesImage.react",["cx","ActorURI","AsyncRequest","Image.react","LoadingIndicator.react","React","XPagesSavedResponseImagePreviewController","XUICloseButton.react","isEmpty","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b.state={imageUrl:null,isFetchingThumbnail:!1};b.$1=null;return b}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.imageID!==this.props.imageID&&this.$2(a.imageID)};d.componentDidMount=function(){this.props.imageID&&this.$2(this.props.imageID)};d.componentWillUnmount=function(){this.$1&&this.$1.abort&&(this.$1.abort(),this.$1=null)};d.render=function(){if(!this.$3()&&!this.state.imageUrl)return null;var a="_3mgf";this.$3()?a=b("joinClasses")(a,this.props.loadingClassName):a=b("joinClasses")(a,this.props.displayClassName);return i.jsx("div",{className:this.props.className,children:i.jsx("div",{className:a,children:this.$4()})})};d.$2=function(a){var c=this;if((h||(h=b("isEmpty")))(a)){this.setState({imageUrl:null});return}this.setState({isFetchingThumbnail:!0});var d=b("XPagesSavedResponseImagePreviewController").getURIBuilder().getURI();d=b("ActorURI").create(d,this.props.pageID);this.$1=new(b("AsyncRequest"))();this.$1.setURI(d).setHandler(function(a){return c.$5(a)}).setMethod("POST").setData({image_id:a,target_width:this.props.width,target_height:this.props.height}).send()};d.$3=function(){return this.state.isFetchingThumbnail||!!this.props.isUploading};d.$4=function(){if(this.props.isUploading||this.state.isFetchingThumbnail)return i.jsx(b("LoadingIndicator.react"),{className:"_3mgg",color:"white",size:"medium"});else if(this.state.imageUrl)return i.jsxs("div",{children:[i.jsx(b("XUICloseButton.react"),{className:"_3mgn"+(this.props.shouldShowCloseButton?"":" hidden_elem"),onClick:this.props.onClose,size:"medium"}),i.jsx(b("Image.react"),{src:this.state.imageUrl})]});else return null};d.$5=function(a){this.setState({imageUrl:a.payload.url,isFetchingThumbnail:!1})};return c}(i.PureComponent);a.propTypes={displayClassName:(c=b("prop-types")).string.isRequired,height:c.number.isRequired,imageID:c.string,isUploading:c.bool,loadingClassName:c.string.isRequired,onClose:c.func,pageID:c.string.isRequired,shouldShowCloseButton:c.bool.isRequired,width:c.number.isRequired};e.exports=a}),null);
__d("SavedResponsesImageUploader.react",["cx","ChatFileUploaderMixin","Image.react","MercuryConfig","MercuryFileUploader","React","ReactDOM","SavedResponsesUtils","URI","XUIGrayText.react","createReactClass_DEPRECATED","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React");c=b("createReactClass_DEPRECATED")({displayName:"SavedResponsesImageUploader",mixins:[b("ChatFileUploaderMixin")],propTypes:{image:(a=b("prop-types")).object.isRequired,label:a.string.isRequired,pageID:a.string,imagesOnly:a.bool},componentDidMount:function(){this._fileUploader=new(b("MercuryFileUploader"))(this.props.attachmentsShelf,b("ReactDOM").findDOMNode(this.refs.form),b("ReactDOM").findDOMNode(this.refs.input),b("ReactDOM").findDOMNode(this.refs.attachID)),this.props.imageID&&this._fileUploader.addCachedAttachments([b("SavedResponsesUtils").generateImageMetadata(this.props.imageID)]),this.setUpSubscriptionsHandler(this._fileUploader)},getActionURI:function(){return this.props.pageID?new(h||(h=b("URI")))(b("MercuryConfig").upload_url).addQueryData("request_user_id",this.props.pageID).toString():b("MercuryConfig").upload_url},getDefaultProps:function(){return{pageID:null}},componentDidUpdate:function(a,c){this.props.imageID&&(this._fileUploader.removeAttachments(),this._fileUploader.addCachedAttachments([b("SavedResponsesUtils").generateImageMetadata(this.props.imageID)]))},render:function(){var a=b("joinClasses")("_uvx",this.props.className);return i.jsxs("form",{action:this.getActionURI(),className:a,method:"post",ref:"form",children:[i.jsx("input",{name:"attach_id",ref:"attachID",type:"hidden"}),i.jsxs("div",{className:"_4q60",children:[i.jsxs("div",{className:"_4q61 _2d_p",children:[i.jsx(b("Image.react"),{className:"_uvy",src:this.props.image}),i.jsx(b("XUIGrayText.react"),{className:"_uvz",shade:"medium",children:this.props.label})]}),i.jsx("input",{accept:this.props.imagesOnly?"image/jpg, image/png":"*",className:"_2d_q",name:"attachment[]",ref:"input",type:"file"})]})]})}});e.exports=c}),null);
__d("SavedResponsesEditResponseContentView.react",["ix","cx","fbt","AbstractTextArea.react","FDSText.react","MacroInput.react","React","SavedResponsesActionButton.react","SavedResponsesImage.react","SavedResponsesImageUploader.react","ScrollableArea.react","asset","cxMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=320,l=170;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.uploadHandler.onUploadStarted()},c.$2=function(){c.props.uploadHandler.onUploadFinished()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.$3=function(){var a=this,c=this.props.responseImageID!==""?i._("Change Photo"):i._("Add Photo"),d=this.props.editorState.getCurrentContent().getPlainText().length;return j.jsxs("div",{className:"_57ho",children:[j.jsxs("div",{children:[j.jsx("span",{className:"_7t8g",children:j.jsx(b("SavedResponsesImageUploader.react"),{className:"_3-8v",image:g("583685"),imagesOnly:!0,label:c,onFileUploaderMounted:function(b){return a.props.uploadHandler.onUploaderMounted(b)},onSubmit:this.$1,onUploadFinished:this.$2,pageID:this.props.pageID})}),j.jsx("span",{className:"_7t8g",children:j.jsx(b("SavedResponsesActionButton.react"),{className:"_3-8v",image:g("541612"),label:i._("Add Personalisation"),onClick:this.props.onPersonalize})})]}),j.jsxs("span",{className:"_8e33"+(d>1e3?" _8e34":""),children:[d," / ",this.props.characterLimit]})]})};d.render=function(){var a=this,c="macroInput",d=this.props.isSavedReplyNewUI?i._("Shortcut (required)"):i._("Enter reply title"),e=i._("Write a message...");return j.jsxs("div",{className:this.props.className,children:[j.jsx("div",{className:"_1vw8",children:j.jsx(b("ScrollableArea.react"),{maxHeight:25,children:j.jsx(b("AbstractTextArea.react"),{className:"_4451",onChange:function(b){return a.props.onTitleChange(b.target.value)},placeholder:d,value:this.props.responseTitle})})}),this.props.isSavedReplyNewUI?j.jsx("div",{className:"_1vw8",children:j.jsx(b("FDSText.react"),{color:"secondary",size:"body3",children:i._("Use a shortcut to find this saved reply later and easily insert it into a conversation. Shortcuts must be at least three characters long.")})}):null,j.jsx("div",{children:j.jsxs(b("ScrollableArea.react"),{fade:!0,maxHeight:this.props.isSavedReplyNewUI?l:k,children:[j.jsx(b("MacroInput.react"),{className:"_3jv6",editorState:this.props.editorState,onChange:this.props.onContentChange,placeholder:e,readOnly:!1,ref:c}),j.jsx(b("SavedResponsesImage.react"),{className:"_57hh",displayClassName:"_57hn",height:250,imageID:this.props.responseImageID,isUploading:this.props.isUploadingImage,loadingClassName:"_57hi",onClose:this.props.onDeleteImage,pageID:this.props.pageID,shouldShowCloseButton:!0,width:250})]})}),this.$3()]})};return c}(j.PureComponent);e.exports=a}),null);
__d("SavedResponsesFooterButton.react",["cx","Image.react","React","XUIButton.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("XUIButton.react"),babelHelpers["extends"]({},this.props,{className:"_3-8i"+(this.props.isHidden?" hidden_elem":""),size:"large",label:this.props.label,onClick:this.props.onClick,use:this.props.use,image:this.props.image?h.jsx(b("Image.react"),{src:this.props.image}):null}))};return c}(h.Component);a.propTypes={image:(c=b("prop-types")).object,isHidden:c.bool,label:c.string.isRequired,onClick:c.func.isRequired,use:c.oneOf(["default","special","confirm"])};a.defaultProps={use:"default",isHidden:!1};e.exports=a}),null);
__d("SavedResponsesImageUploadHelper",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.onUploaderMounted=function(a){this.$3=a};b.onUploadFinished=function(){if(!this.$3)return;var a=this.$3.getImageFiles();a=a.pop().toString();this.$2(a)};b.onUploadStarted=function(){this.$1()};return a}();e.exports=a}),null);
__d("SavedResponsesMacroDetailView.react",["cx","fbt","React","ScrollableArea.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.macro;return!a?null:i.jsx(b("ScrollableArea.react"),{fade:!0,shadow:!0,children:i.jsxs("div",{children:[i.jsx("div",{className:"_tpd",children:a.key}),i.jsx("div",{className:"_tpe",children:a.description}),i.jsx("div",{className:"_tpf",children:h._("Example")}),i.jsx("div",{className:"_tpg",children:a.example})]})})};return c}(i.Component);a.propTypes={macro:(c=b("prop-types")).shape({description:c.string.isRequired,example:c.string.isRequired,key:c.string.isRequired,name:c.string.isRequired,value:c.string.isRequired})};e.exports=a}),null);
__d("SavedResponsesMacroListItem.react",["cx","ix","Image.react","React","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b.state={isHover:!1};return b}var d=c.prototype;d.render=function(){var a=this;return i.jsxs("div",{className:"_5y_z","data-id":this.props.macro.key,onClick:function(){return a.$1()},onMouseOut:function(){return a.$2()},onMouseOver:function(){return a.$3()},role:"presentation",children:[i.jsx("div",{className:"_5y__",children:this.props.macro.key}),i.jsx("div",{className:"_5z00"+(this.state.isHover?"":" hidden_elem"),children:i.jsx(b("Image.react"),{src:h("94789")})})]})};d.$3=function(){this.props.onHover(this.props.macro),this.setState({isHover:!0})};d.$2=function(){this.setState({isHover:!1})};d.$1=function(){this.props.onSelect(this.props.macro)};return c}(i.Component);a.propTypes={macro:(c=b("prop-types")).shape({key:c.string.isRequired,value:c.string.isRequired}).isRequired,onHover:c.func.isRequired,onSelect:c.func.isRequired};e.exports=a}),null);
__d("SavedResponsesMacroListView.react",["React","SavedResponsesMacroListItem.react","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return g.jsx("ul",{children:this.$1()})};d.$1=function(){var a=[];for(var c in this.props.macros){var d=this.props.macros[c];a.push(g.jsx(b("SavedResponsesMacroListItem.react"),{macro:d,onHover:this.props.onMacroHover,onSelect:this.props.onMacroSelected},c))}return a};return c}(g.Component);a.propTypes={macros:b("prop-types").object.isRequired,onMacroHover:b("prop-types").func.isRequired,onMacroSelected:b("prop-types").func.isRequired};e.exports=a}),null);
__d("SavedResponsesMacroBrowseView.react",["cx","fbt","Grid.react","React","prop-types","SavedResponsesFooterButton.react","SavedResponsesMacroDetailView.react","SavedResponsesMacroListView.react","ScrollableArea.react","joinClasses"],(function(a,b,c,d,e,f,g,h){var i=b("Grid.react").GridItem,j=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b.state={activeMacro:null};return b}var d=c.prototype;d.render=function(){return j.jsxs("div",{children:[this.renderBodyPart(),j.jsx("div",{className:"_3ohz",children:this.renderFooterPart()})]})};d.renderBodyPart=function(){var a=this,c=b("joinClasses")("_552a",this.props.className);return j.jsx("div",{className:c,children:j.jsxs(b("Grid.react"),{cols:2,spacing:"none",className:"_552b",children:[j.jsxs(i,{className:"_552c",children:[j.jsx("div",{className:"_552d"}),j.jsx(b("ScrollableArea.react"),{fade:!0,shadow:!0,children:j.jsx("div",{className:"_2t-k",children:j.jsx(b("SavedResponsesMacroListView.react"),{macros:this.props.macros,onMacroSelected:this.props.onMacroSelected,onMacroHover:function(b){return a.$1(b)}})})})]}),j.jsx(i,{className:"_552e",children:j.jsx(b("SavedResponsesMacroDetailView.react"),{macro:this.state.activeMacro})})]})})};d.renderFooterPart=function(){var a=h._("Cancel");return j.jsx("div",{children:j.jsx("div",{className:"_552g",children:j.jsx(b("SavedResponsesFooterButton.react"),{label:a,onClick:this.props.onCancel})})})};d.$1=function(a){this.setState({activeMacro:a})};return c}(j.Component);a.propTypes={macros:b("prop-types").object.isRequired,onCancel:b("prop-types").func.isRequired,onMacroSelected:b("prop-types").func.isRequired};e.exports=a}),null);
__d("SavedResponsesPanel.react",["cx","fbt","ix","Image.react","React","ShimButton.react","XUICloseButton.react","XUIDialogBody.react","XUIDialogTitle.react","XUIGrayText.react","asset","emptyFunction","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a=h._("Close");return j.jsx(b("XUICloseButton.react"),{className:"_2rpe",label:a,onClick:this.props.onClose,shade:"dark",size:"medium",title:a,type:"button"})};d.render=function(){return j.jsxs("div",{className:this.props.className,children:[j.jsxs(b("XUIDialogTitle.react"),{className:"_3alh"+(this.props.isSavedReplyNewUI?" _7r7a":""),showCloseButton:!1,children:[j.jsxs("div",{className:"_2rp7",children:[j.jsx(b("ShimButton.react"),{className:"_2rp8"+(this.props.shouldShowBackButton?"":" hidden_elem"),onClick:this.props.onBackButtonClicked,children:this.props.isSavedReplyNewUI?j.jsx(b("Image.react"),{className:"_81wx",src:i("952225")}):j.jsxs("div",{children:[j.jsx(b("Image.react"),{className:"_2rp9",src:i("76048")}),j.jsx(b("XUIGrayText.react"),{className:"_2rpa",shade:"light",children:this.props.backButtonLabel}),j.jsx("div",{className:"_2rpb"})]})}),j.jsx("span",{className:"_5hp9",children:this.props.title})]}),this.props.isSavedReplyNewUI?null:this.$1()]}),j.jsx(b("XUIDialogBody.react"),{className:"_2rpc",children:this.props.children})]})};return c}(j.Component);a.propTypes={backButtonLabel:(c=b("prop-types")).string,onBackButtonClicked:c.func,onClose:c.func.isRequired,shouldShowBackButton:c.bool,title:c.string.isRequired};a.defaultProps={backButtonLabel:null,onBackButtonClicked:b("emptyFunction"),shouldShowBackButton:!1};e.exports=a}),null);
__d("MacroSpan.react",["cx","React","XUICloseButton.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isMouseOver:!1},c.$2=function(){c.setState({isMouseOver:!0})},c.$3=function(){c.setState({isMouseOver:!1})},c.$5=function(){c.props.onRemoveToken(c.props.offsetKey)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.$1();return a===null?null:h.jsx("span",{className:"_vxd",onMouseEnter:this.$2,onMouseLeave:this.$3,children:h.jsxs("span",{className:"_vxe",contentEditable:!1,"data-offset-key":this.props.offsetKey,spellCheck:!1,children:[this.$4(a),h.jsx(b("XUICloseButton.react"),{className:"_vxf",onClick:this.$5,size:"small"})]})})};d.$4=function(a){a=a.data.key;a=a in this.props.tokens?this.props.tokens[a].key:a;return a};d.$1=function(){return this.props.entityKey==null?null:this.props.contentState.getEntity(this.props.entityKey)};return c}(h.Component);a.propTypes={contentState:(c=b("prop-types")).object.isRequired,entityKey:c.string,offsetKey:c.string.isRequired,onRemoveToken:c.func.isRequired,tokens:c.object.isRequired};e.exports=a}),null);
__d("getMacrosInputDecorator",["CompositeDraftDecorator","MacroSpan.react","getEntityMatcher"],(function(a,b,c,d,e,f){function a(a,c){return new(b("CompositeDraftDecorator"))([{strategy:b("getEntityMatcher")(function(a){return a.getType()==="TOKEN"}),component:b("MacroSpan.react"),props:{onRemoveToken:c,tokens:a}}])}e.exports=a}),null);
__d("SavedResponsesTokensUtils",["createEditorStateWithRanges","getMacrosInputDecorator"],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("{{(.*?)}}","ig"),h={_parseTemplateFieldTokens:function(a){a=a;var b=[],c;while(c=g.exec(a)){var d={text:c[0],offset:c.index,length:c[0].length,entity:{token:c[0],key:c[1]}};b.push(d);a=a.replace(c[0],d.text);g.lastIndex=d.offset+d.length}if(b.length>0){b[0].offset===0&&(a=" "+a,b.forEach(function(a){a.offset++}));c=b[b.length-1];c.length+c.offset===a.length&&(a+=" ")}return{ranges:b,text:a}},createTemplateFieldsEditorStateWithText:function(a,c,d){a=h._parseTemplateFieldTokens(a);var e=a.ranges;a=a.text;return b("createEditorStateWithRanges")({text:a,ranges:e,decorator:b("getMacrosInputDecorator")(d,c),addEntityToContentStateFn:function(a,b){a=a.entity;return b.createEntity("TOKEN","IMMUTABLE",a)}})},prepareforSend:function(a,b){var c=a.match(/\{{(.*?)\}}/g);c&&c.forEach(function(c){var d=c.replace("{{","").replace("}}","");d=d in b?b[d].value:d;a=a.replace(c,d)});return a}};e.exports=h}),null);
__d("SavedResponsesEditResponseView.react",["cx","fbt","invariant","DraftModifier","DraftOffsetKey","EditorState","PagesCreateSavedResponseMutation","PagesDeleteSavedResponseMutation","PagesEditSavedResponseMutation","PagesEventObserver","PagesMessagingInboxActionLogger","React","RelayModern","SavedResponsesAllPersonalizationView.react","SavedResponsesEditResponseContentView.react","SavedResponsesFooterButton.react","SavedResponsesImageUploadHelper","SavedResponsesMacroBrowseView.react","SavedResponsesPanel.react","SavedResponsesTokensUtils","SavedResponsesUtils","SelectionState","XUISpinner.react","curry","getMacrosInputDecorator"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=b("RelayModern").createEnvironment,l=1e3;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this,c,d)||this;e.$7=function(a){e.setState({selectedMacroKey:a})};e.$14=function(){var a=e.props.supportedMacros[e.state.selectedMacroKey];e.$10(a);e.setState({selectedMacroKey:""})};e.$12=function(){e.setState({imageID:""})};e.$33=function(){e.state.isPersonalizing?e.setState({isPersonalizing:!1}):e.state.isModified?e.setState({shouldShowDiscardWarning:!0}):e.props.onEditDone(!1)};e.$9=function(){e.setState({isPersonalizing:!1})};e.$13=function(){e.setState({isPersonalizing:!0}),e.props.onEnterPersonalizeView()};e.$25=function(){e.setState({shouldShowDeleteWarning:!0})};e.$26=function(){e.setState({isProcessing:!0}),e.state.isEditing?e.$30():e.$31()};e.$23=function(){e.setState({shouldShowDeleteWarning:!1})};e.$22=function(){var a;b("PagesEventObserver").logData_DEPRECATED({event_name:"saved_replies_delete_reply",page_id:e.props.pageID},null);e.setState({shouldShowDeleteWarning:!1,isProcessing:!0});var c=e.props.initialResponse;!c&&i(0,6166);b("PagesDeleteSavedResponseMutation").commit(c.id,function(){return e.props.onEditDone(!0)},function(){});b("PagesMessagingInboxActionLogger").logUpdateSavedReply(c.message,null,(a=c.title)!=null?a:"",null,(a=c)!=null?(a=a.image)!=null?a.id:a:a,null,null)};e.$19=function(){e.props.onEditDone(!1)};e.$20=function(){e.setState({shouldShowDiscardWarning:!1})};c=!!e.props.initialResponse||!1;d=!!e.props.initialResponse&&!!e.props.initialResponse.image?e.props.initialResponse.image.id:"";var f=e.$1(c);e.state={anyContent:f.getCurrentContent().hasText(),editorState:f,imageID:d,isEditing:c,isModified:!1,isPersonalizing:!1,isProcessing:!1,isUploadingImage:!1,selectedMacroKey:"",shouldShowDeleteWarning:!1,shouldShowDiscardWarning:!1,title:e.props.initialResponse?(f=e.props.initialResponse.title)!=null?f:"":"",uploadHandler:new(b("SavedResponsesImageUploadHelper"))(function(){return e.$2()},function(a){return e.$3(a)})};!!e.props.upsellSpecificData&&!!e.props.upsellSpecificData.icebreaker_message&&(e.state.title=h._("FAQ"));return e}var d=c.prototype;d.$4=function(){return h._("Cancel")};d.$5=function(){return h._("Delete")};d.$6=function(){return h._("Save")};d.$8=function(){var a=this;if(this.state.isPersonalizing)return this.props.isSavedReplyNewUI?j.jsx(b("SavedResponsesAllPersonalizationView.react"),{className:"_1wxh",macros:this.props.supportedMacros,onCancel:this.$9,onMacroSelected:this.$7,selectedMacroKey:this.state.selectedMacroKey,shouldShowSavedReplyInIG:this.props.shouldShowSavedReplyInIG}):j.jsx(b("SavedResponsesMacroBrowseView.react"),{className:"_1wxh",macros:this.props.supportedMacros,onCancel:this.$9,onMacroSelected:function(b){return a.$10(b)}});else return j.jsx(b("SavedResponsesEditResponseContentView.react"),{characterLimit:l,className:"_1wxh",editorState:this.state.editorState,isSavedReplyNewUI:this.props.isSavedReplyNewUI,isUploadingImage:this.state.isUploadingImage,onContentChange:function(b){return a.$11(b)},onDeleteImage:this.$12,onPersonalize:this.$13,onTitleChange:function(b){a.setState({title:b,isModified:!0})},pageID:this.props.pageID,responseImageID:this.state.imageID,responseTitle:this.state.title,uploadHandler:this.state.uploadHandler})};d.$15=function(){var a=h._("Cancel"),c=h._("Add");return j.jsxs("div",{className:"_4pnp",children:[j.jsx(b("SavedResponsesFooterButton.react"),{label:a,onClick:this.$9}),j.jsx(b("SavedResponsesFooterButton.react"),{disabled:this.state.selectedMacroKey==="",label:c,onClick:this.$14,use:"confirm"})]})};d.$16=function(){if(this.state.isPersonalizing)return this.props.isSavedReplyNewUI?this.$15():j.jsx(b("SavedResponsesFooterButton.react"),{label:this.$4(),onClick:this.$9});else return this.$17()};d.$18=function(){var a=h._("Continue Editing"),c=this.props.isSavedReplyNewUI?h._("Don't Save"):h._("Discard");return j.jsxs("div",{children:[j.jsx("div",{className:"_2ln1",children:this.props.isSavedReplyNewUI?h._("Do you want to save your changes?"):h._("Are you sure you want to discard your edit?")}),j.jsxs("div",{className:"_4pnp",children:[j.jsx(b("SavedResponsesFooterButton.react"),{label:c,onClick:this.$19}),j.jsx(b("SavedResponsesFooterButton.react"),{label:a,onClick:this.$20,use:"confirm"})]})]})};d.$21=function(){return j.jsxs("div",{children:[j.jsx("div",{className:"_2ln1",children:h._("Are you sure you want to delete this saved reply?")}),j.jsxs("div",{className:"_4pnp",children:[j.jsx(b("SavedResponsesFooterButton.react"),{label:this.$5(),onClick:this.$22}),j.jsx(b("SavedResponsesFooterButton.react"),{label:this.$4(),onClick:this.$23,use:"confirm"})]})]})};d.$24=function(){var a=this.state.editorState.getCurrentContent().getPlainText().length>=l,c=a?j.jsx("div",{className:"_2ln1",children:h._("Your saved reply must be {character limit} characters or fewer.",[h._param("character limit",l)])}):null;return j.jsxs("div",{children:[this.props.isSavedReplyNewUI?null:j.jsx(b("SavedResponsesFooterButton.react"),{isHidden:!this.state.isEditing,label:this.$5(),onClick:this.$25}),c,j.jsxs("div",{className:"_4pnp",children:[j.jsx(b("SavedResponsesFooterButton.react"),{label:this.$4(),onClick:b("curry")(this.props.onEditDone,!1)}),j.jsx(b("SavedResponsesFooterButton.react"),{disabled:!this.state.anyContent&&!this.state.imageID||a||this.props.isSavedReplyNewUI&&!b("SavedResponsesUtils").isValidShortcut(this.state.title),label:this.$6(),onClick:this.$26,use:"confirm"}),j.jsx(b("XUISpinner.react"),{className:(this.state.isProcessing?"":"hidden_elem")+" _3-91 _3-99",size:"small"})]})]})};d.$17=function(){if(this.state.shouldShowDeleteWarning)return this.$21();else if(this.state.shouldShowDiscardWarning)return this.$18();else return this.$24()};d.$27=function(){if(!this.state.isPersonalizing)return h._("List");else return h._("Edit")};d.$28=function(){if(this.state.isPersonalizing)return h._("Add personalisation");else if(this.state.isEditing)return h._("Edit reply");else return h._("Create saved reply")};d.$29=function(a){a={text:"{{"+a.name+"}}",key:a.name};var c=this.state.editorState,d=c.getSelection(),e=c.getCurrentContent(),f=d.getStartKey(),g=d.getStartOffset();f=e.getBlockForKey(f);if(f.getText().substr(g-1,1).trim().length>0){f=b("DraftModifier").replaceText(e,d," ");d=f.getSelectionAfter();g=b("DraftModifier").insertText(f,d,a.text,c.getCurrentInlineStyle(),e.createEntity("TOKEN","IMMUTABLE",a).getLastCreatedEntityKey())}else g=b("DraftModifier").replaceText(e,d,a.text,c.getCurrentInlineStyle(),e.createEntity("TOKEN","IMMUTABLE",a).getLastCreatedEntityKey());g=b("DraftModifier").insertText(g,g.getSelectionAfter()," ");c=b("EditorState").push(c,g,"insert-fragment");c=b("EditorState").forceSelection(c,c.getSelection());this.$11(c)};d.$30=function(){var a=this,c,d=this.state.editorState.getCurrentContent().getPlainText();b("PagesEventObserver").logData_DEPRECATED({event_name:"saved_replies_edit_reply",page_id:this.props.pageID,response_content:d},null);var e=this.props.initialResponse;!e&&i(0,6165);var f=this.state.imageID?this.state.imageID.toString():null;c=(c=e)!=null?(c=c.image)!=null?c.id:c:c;b("PagesEditSavedResponseMutation").commit(e.id,this.state.title.trim(),d,f,function(){return a.props.onEditDone(!0)},function(){},this.props.shouldOverrideRelayEnvironment?k({actorID:String(this.props.overrideRelayEnvironmentWithID)}):null);b("PagesMessagingInboxActionLogger").logUpdateSavedReply(e.message,d,e.title,this.state.title,c,f,null)};d.$31=function(){var a=this,c,d=this.state.editorState.getCurrentContent().getPlainText();b("PagesEventObserver").logData_DEPRECATED({event_name:"saved_replies_create_reply",page_id:this.props.pageID,response_content:d},null);var e=null;!!this.props.upsellSpecificData&&!!this.props.upsellSpecificData.icebreaker_message&&(e=this.props.upsellSpecificData.icebreaker_message);var f=this.state.imageID?this.state.imageID.toString():null;b("PagesCreateSavedResponseMutation").commit(this.props.pageID,(c=this.state.title.trim())!=null?c:"",d,f,e,function(){return a.props.onEditDone(!0)},function(){},this.props.shouldOverrideRelayEnvironment?k({actorID:String(this.props.overrideRelayEnvironmentWithID)}):null);b("PagesMessagingInboxActionLogger").logUpdateSavedReply(null,d,null,this.state.title,null,f,e)};d.$1=function(a){var c=this;if(a&&this.props.initialResponse||!!this.props.upsellSpecificData){var d="";if(a&&this.props.initialResponse){d=(a=this.props.initialResponse.message)!=null?a:""}else if(this.props.upsellSpecificData){d=(a=this.props.upsellSpecificData.page_reply)!=null?a:""}return b("SavedResponsesTokensUtils").createTemplateFieldsEditorStateWithText(d,function(a){return c.$32(a)},this.props.supportedMacros)}else return b("EditorState").createEmpty(b("getMacrosInputDecorator")(this.props.supportedMacros||{},function(a){return c.$32(a)}))};d.$10=function(a){b("PagesEventObserver").logData_DEPRECATED({event_name:"saved_replies_personalize",page_id:this.props.pageID},null),this.setState({isPersonalizing:!1}),this.$29(a)};d.$11=function(a){this.setState({anyContent:a.getCurrentContent().hasText(),editorState:a,isModified:!0})};d.$2=function(){b("PagesEventObserver").logData_DEPRECATED({event_name:"saved_replies_add_image",page_id:this.props.pageID},null),this.setState({imageID:"",isUploadingImage:!0})};d.$3=function(a){this.setState({imageID:a,isUploadingImage:!1})};d.$32=function(a){var c=this.state.editorState;a=b("DraftOffsetKey").decode(a);var d=a.blockKey;a=a.decoratorKey;a=c.getBlockTree(d).getIn([a]);d=new(b("SelectionState"))({anchorKey:d,anchorOffset:a.get("start"),focusKey:d,focusOffset:a.get("end"),isBackward:!1,hasFocus:!0});a=b("DraftModifier").removeRange(c.getCurrentContent(),d,"forward");d=b("EditorState").push(c,a,"remove-range");this.$11(d)};d.render=function(){return j.jsxs(b("SavedResponsesPanel.react"),{backButtonLabel:this.$27(),className:"_15ht"+(this.props.isSavedReplyNewUI?" _7r87":""),isSavedReplyNewUI:this.props.isSavedReplyNewUI,onBackButtonClicked:this.$33,onClose:this.props.onClose,shouldShowBackButton:!0,title:this.$28(),children:[this.$8(),j.jsx("div",{className:"_3ohz",children:this.$16()})]})};return c}(j.PureComponent);e.exports=a}),null);
__d("SavedResponsesListItem.react",["cx","fbt","ClientIDs","Link.react","React","ReactDOM","SavedResponsesConstants","SavedResponsesImage.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={shouldShowSeeMoreLink:!1,shouldLimitHeight:!0},d.$4=function(a){var c=0,e=0,f=/\{{(.*?)\}}/g,g=f.exec(a),h=[];while(g!=null){e=g.index;h.push(i.jsx("span",{children:a.substring(c,e)},b("ClientIDs").getNewClientID()));c=e+g[0].length;var j=g[1]in d.props.tokens?d.props.tokens[g[1]].value:g[1];h.push(i.jsx("span",{className:"_-8",children:j},b("ClientIDs").getNewClientID()));g=f.exec(a)}h.push(i.jsx("span",{children:a.substring(c,a.length)},b("ClientIDs").getNewClientID()));return h},d.$2=function(){d.props.onResponseSelected(d.props.response,d.props.tokens)},d.$3=function(){d.props.onResponseHover&&d.props.onResponseHover(d.props.response,d.props.tokens)},d.$5=function(a){d.setState({shouldShowSeeMoreLink:!1,shouldLimitHeight:!1}),a.stopPropagation()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.componentDidUpdate=function(){this.$1()};d.render=function(){var a=this.props.response.image&&!0;return i.jsxs("div",{className:"_33w3"+(a?" _33w4":""),"data-id":this.props.response.id,onClick:this.$2,onMouseEnter:this.$3,onMouseLeave:this.props.onResponseUnhover,role:"presentation",children:[i.jsx("div",{className:"_33w5"+(a?" _33w6":"")+" fwb",children:this.props.response.title}),i.jsxs("div",{className:"_33w7"+(this.state.shouldLimitHeight?" _4en5":"")+(!this.props.response.title&&this.props.response.image?" _2pid":""),ref:"message",children:[this.props.response.image?i.jsx(b("SavedResponsesImage.react"),{className:"_33w8",displayClassName:"_33w9",height:b("SavedResponsesConstants").listItemImageHeight,imageID:this.props.response.image.id,loadingClassName:"_33w9",pageID:this.props.pageID,shouldShowCloseButton:!1,width:b("SavedResponsesConstants").listItemImageWidth}):null,this.$4(this.props.response.message)]}),i.jsx(b("Link.react"),{className:"_4en6"+(this.state.shouldShowSeeMoreLink?"":" hidden_elem"),onClick:this.$5,children:h._("See more")})]})};d.$1=function(){if(this.state.shouldLimitHeight===!1||this.state.shouldShowSeeMoreLink)return;var a=b("ReactDOM").findDOMNode(this.refs.message);a.scrollHeight>a.clientHeight&&this.setState({shouldShowSeeMoreLink:!0})};return c}(i.Component);a.propTypes={onResponseHover:(c=b("prop-types")).func,onResponseSelected:c.func.isRequired,onResponseUnhover:c.func,pageID:c.string.isRequired,response:c.shape({id:c.string.isRequired,title:c.string,message:c.string.isRequired,image:c.object}),tokens:c.object.isRequired};e.exports=a}),null);
__d("SavedResponsesListView.react",["cx","React","SavedResponsesListItem.react","SavedResponsesUtils","XUISpinner.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this;if(this.props.isLoadingResponses)return h.jsx("div",{className:"_e19",children:h.jsx(b("XUISpinner.react"),{size:"large"})});var c=this.props.searchQuery.trim().toLowerCase(),d=function(a){return a.message.toLowerCase().indexOf(c)!==-1||(a.title||"").toLowerCase().indexOf(c)!==-1},e=b("SavedResponsesUtils").sortSavedResponses(this.props.responses,this.props.sortingKey);return h.jsx("ul",{className:this.props.shouldAdjustRightMargin?"_e1a":"",children:e.filter(d).map(function(c){return h.jsx(b("SavedResponsesListItem.react"),{onResponseHover:a.props.onResponseHover,onResponseSelected:a.props.onResponseSelected,onResponseUnhover:a.props.onResponseUnhover,pageID:a.props.pageID,response:c,tokens:a.props.supportedMacros},c.id)})})};return c}(h.Component);a.propTypes={isLoadingResponses:(c=b("prop-types")).bool.isRequired,onResponseHover:c.func,onResponseSelected:c.func.isRequired,onResponseUnhover:c.func,pageID:c.string.isRequired,responses:c.array.isRequired,searchQuery:c.string.isRequired,shouldAdjustRightMargin:c.bool};e.exports=a}),null);
__d("SavedResponsesOrderingMenu.react",["cx","fbt","ContextualDialogArrow","PopoverMenu.react","React","ReactXUIMenu","SavedResponsesConstants","XUIPopoverButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("ReactXUIMenu").Item;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;var d=[{key:b("SavedResponsesConstants").sortingKey.MOST_USED,title:h._("Frequently used")},{key:b("SavedResponsesConstants").sortingKey.LAST_USED,title:h._("Recently used")}];c.$1=d;return c}var d=c.prototype;d.$2=function(){var a=this,b;return(b=this.$1.find(function(b){return b.key===a.props.activeSortingOptionKey}))!=null?b:this.$1[0]};d.$3=function(a){var b=this;return i.jsx(j,{onclick:function(){return b.props.onSortingKeyChanged(a.key)},children:a.title},a.key)};d.render=function(){var a=this,c=i.jsx(b("ReactXUIMenu"),{children:this.$1.map(function(b){return a.$3(b)})});return i.jsxs("div",{className:this.props.className,children:[i.jsx("span",{className:"_4mjo",children:h._("Sort by")}),i.jsx(b("PopoverMenu.react"),{alignv:"baseline",layerBehaviors:[b("ContextualDialogArrow")],menu:c,children:i.jsx(b("XUIPopoverButton.react"),{label:this.$2().title})})]})};return c}(i.PureComponent);e.exports=a}),null);
__d("SavedResponsesListViewContainer.react",["cx","fbt","Layout.react","LeftFillRightFitLayout.react","React","SavedResponsesOrderingMenu.react","XUICloseButton.react","XUITextInput.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("Layout.react").Column,j=b("Layout.react").FillColumn,k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a="inputField";return k.jsxs(b("Layout.react"),{className:"_4b4n",children:[k.jsx(i,{children:k.jsx("div",{className:"_1x3i"})}),k.jsx(j,{children:k.jsx(b("XUITextInput.react"),{onChange:this.props.onSearchQueryChanged,placeholder:h._("Search replies"),ref:a,value:this.props.searchQuery})}),k.jsx(i,{children:k.jsx(b("XUICloseButton.react"),{className:this.props.searchQuery.length===0?"hidden_elem":"",onClick:this.props.onSearchQueryCleared,size:"small"})})]})};d.render=function(){var a=b("joinClasses")("_3ohy",this.props.className);return k.jsxs("div",{className:a,children:[k.jsxs(b("LeftFillRightFitLayout.react"),{className:"_1x3h",children:[this.$1(),this.props.isSavedReplyNewUI?null:k.jsx(b("SavedResponsesOrderingMenu.react"),{activeSortingOptionKey:this.props.activeSortingOptionKey,className:"_4b4m",onSortingKeyChanged:this.props.onSortingKeyChanged})]}),this.props.children,this.props.isSavedReplyNewUI?null:k.jsx("div",{className:"_3ohz",children:this.props.footerPart})]})};return c}(k.Component);e.exports=a}),null);
__d("SavedResponsesManageListView.react",["cx","fbt","ix","PagesMessagingInboxActionLogger","React","SavedResponsesConstants","SavedResponsesFooterButton.react","SavedResponsesListView.react","SavedResponsesListViewContainer.react","SavedResponsesPanel.react","ScrollableArea.react","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this,c,d)||this;e.$1=function(a){e.setState({activeSortingOptionKey:a}),b("PagesMessagingInboxActionLogger").logSavedReplySortClicked(a)};e.state={searchQuery:"",activeSortingOptionKey:b("SavedResponsesConstants").sortingKey.LAST_USED};return e}var d=c.prototype;d.render=function(){var a=this;return j.jsx(b("SavedResponsesPanel.react"),{className:"_15ht",shouldShowBackButton:!1,onClose:this.props.onClose,title:h._("Saved Replies"),children:j.jsx(b("SavedResponsesListViewContainer.react"),{footerPart:this.$2(),onSearchQueryChanged:function(b){return a.$3(b)},onSearchQueryCleared:function(){return a.$4()},searchQuery:this.state.searchQuery,activeSortingOptionKey:this.state.activeSortingOptionKey,onSortingKeyChanged:this.$1,children:this.$5()})})};d.$5=function(){return j.jsx("div",{className:"_4pno",children:j.jsxs(b("ScrollableArea.react"),{fade:!0,shadow:!0,children:[j.jsx(b("SavedResponsesListView.react"),{isLoadingResponses:!1,onResponseSelected:this.props.onResponseSelected,pageID:this.props.pageID,responses:this.props.responses,searchQuery:this.state.searchQuery,supportedMacros:this.props.supportedMacros,sortingKey:this.state.activeSortingOptionKey}),this.$6()]})})};d.$2=function(){var a=h._("Create Reply"),c=h._("Done");return j.jsxs("div",{className:"_4pnp",children:[j.jsx(b("SavedResponsesFooterButton.react"),{image:i("88945"),label:a,onClick:this.props.onCreateNewReplyClicked}),j.jsx(b("SavedResponsesFooterButton.react"),{label:c,onClick:this.props.onDoneClicked})]})};d.$6=function(){return j.jsx("div",{className:"_4pnq",children:j.jsx("div",{className:"_50f8 _4pnr",children:h._("End of saved replies")})})};d.$3=function(a){this.setState({searchQuery:a.target.value})};d.$4=function(){this.setState({searchQuery:""})};return c}(j.Component);a.propTypes={onClose:(c=b("prop-types")).func.isRequired,onCreateNewReplyClicked:c.func.isRequired,onDoneClicked:c.func.isRequired,onResponseSelected:c.func.isRequired,otherUserID:c.string.isRequired,pageID:c.string.isRequired,responses:c.array.isRequired,supportedMacros:c.object.isRequired};e.exports=a}),null);
__d("SavedResponsesManagePanel.react",["cx","React","RelayModern","SavedResponsesConstants","SavedResponsesEditResponseView.react","SavedResponsesManageListView.react","SavedResponsesUtils","XUISpinner.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("RelayModern").createEnvironment;a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b.state={isLoadingResponses:!0,isLoadingTokens:!0,responseToEdit:null,responses:[],supportedMacros:null,viewType:b.props.initialViewType};return b}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1()};d.render=function(){var a=this;if(this.state.isLoadingResponses||this.state.isLoadingTokens)return h.jsx("div",{className:"_15ht",children:h.jsx("div",{className:"_15hu",children:h.jsx(b("XUISpinner.react"),{size:"large"})})});switch(this.state.viewType){case b("SavedResponsesConstants").editPanelViewMode.LIST:return h.jsx(b("SavedResponsesManageListView.react"),{onClose:this.props.onClose,onCreateNewReplyClicked:function(){return a.$2()},onDoneClicked:function(){return a.$3()},onResponseSelected:function(b,c){return a.$4(b,c)},otherUserID:this.props.otherUserID,overrideRelayEnvironmentWithID:this.props.overrideRelayEnvironmentWithID,pageID:this.props.pageID,responses:this.state.responses,shouldOverrideRelayEnvironment:this.props.shouldOverrideRelayEnvironment,supportedMacros:this.state.supportedMacros});case b("SavedResponsesConstants").editPanelViewMode.EDIT:case b("SavedResponsesConstants").editPanelViewMode.CREATE:case b("SavedResponsesConstants").editPanelViewMode.PERSONALIZE:return h.jsx(b("SavedResponsesEditResponseView.react"),{initialResponse:this.state.responseToEdit,isSavedReplyNewUI:!1,onClose:this.props.onClose,onEditDone:function(b){return a.$5(b)},onEnterPersonalizeView:function(){return a.$6()},overrideRelayEnvironmentWithID:this.props.overrideRelayEnvironmentWithID,pageID:this.props.pageID,shouldOverrideRelayEnvironment:this.props.shouldOverrideRelayEnvironment,shouldShowSavedReplyInIG:!1,supportedMacros:this.state.supportedMacros,upsellSpecificData:null})}};d.$1=function(){var a=this;this.setState({isLoadingResponses:!0,isLoadingTokens:!0});b("SavedResponsesUtils").fetchSavedResponse(this.props.pageID,function(b){return a.setState({responses:b,isLoadingResponses:!1})},this.props.shouldOverrideRelayEnvironment?i({actorID:String(this.props.overrideRelayEnvironmentWithID)}):null);b("SavedResponsesUtils").fetchSavedResponseTokens(this.props.pageID,this.props.otherUserID,null,"MESSENGER",function(b){return a.setState({supportedMacros:b,isLoadingTokens:!1})})};d.$5=function(a){if(this.props.initialViewType===b("SavedResponsesConstants").editPanelViewMode.CREATE){this.props.onClose();return}a&&this.$1();this.setState({responseToEdit:null,viewType:b("SavedResponsesConstants").editPanelViewMode.LIST})};d.$2=function(){this.setState({responseToEdit:null,viewType:b("SavedResponsesConstants").editPanelViewMode.CREATE})};d.$3=function(){this.props.onClose()};d.$6=function(){this.setState({viewType:b("SavedResponsesConstants").editPanelViewMode.PERSONALIZE})};d.$4=function(a){this.setState({responseToEdit:a,viewType:b("SavedResponsesConstants").editPanelViewMode.EDIT})};return c}(h.Component);a.propTypes={initialViewType:(c=b("prop-types")).string,onClose:c.func.isRequired,otherUserID:c.string.isRequired,pageID:c.string.isRequired};a.defaultProps={initialViewType:b("SavedResponsesConstants").editPanelViewMode.LIST};e.exports=a}),null);
__d("PagesContentEditorMessageComposer.react",["cx","fbt","AdsCMFormHorizontalLine.react","FDSText.react","FileInputUploader","PagesContentEditorAttachment.react","PagesContentEditorConstants","PagesContentEditorCTASection.react","PagesReplyComposerEditorContainer.react","PagesReplyComposerToolbarContainer.react","React","ServicesDurationUnit","ServicesTimeDurationSelector.react","SUIBusinessTheme","SUIErrorComponentUtil","SUISimplePopover.react","SUITextArea.react","SUITextInput.react","URI","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("PagesContentEditorConstants").PagesContentEditorMessageComposerSpecialTypes,k=b("React"),l="/ajax/mercury/upload.php",m=500,n=25,o=[b("ServicesDurationUnit").MINUTES,b("ServicesDurationUnit").HOURS];a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLoading:!1,hasSizeError:!1},d.$3=function(a){d.setState({hasSizeError:!1,isLoading:!1}),d.props.onSelectAttachmentType(a)},d.$4=function(a){d.$2(a);var c=d.props.pageID?new(i||(i=b("URI")))(l).addQueryData({request_user_id:d.props.pageID}).toString():new(i||(i=b("URI")))(l).toString(),e=a.target;d.$1=new(b("FileInputUploader"))(e).setURI(c);d.$1.subscribe("success",d.$5);d.$1.subscribe("failure",d.$6);d.$1.send();d.props.onImageSelect&&d.props.onImageSelect(a)},d.$5=function(a,b){d.setState({isLoading:!1}),d.props.onUploadImageSuccess(b)},d.$6=function(){d.setState({isLoading:!1}),d.props.onUploadImageFailure&&d.props.onUploadImageFailure()},d.$7=function(a){d.$2(a);var c=d.props.pageID?new(i||(i=b("URI")))(l).addQueryData({request_user_id:d.props.pageID}).toString():new(i||(i=b("URI")))(l).toString(),e=a.target;d.$1=new(b("FileInputUploader"))(e).setURI(c);d.$1.subscribe("success",d.$8);d.$1.subscribe("failure",d.$9);d.$1.send();d.props.onVideoSelect&&d.props.onVideoSelect(a)},d.$8=function(a,b){d.setState({isLoading:!1}),d.props.onUploadVideoSuccess(b)},d.$9=function(){d.setState({isLoading:!1}),d.props.onUploadVideoFailure&&d.props.onUploadVideoFailure()},d.$10=function(){d.props.onCloseAttachment(),d.setState({hasSizeError:!1,isLoading:!1})},d.$3=function(a){d.props.onSelectAttachmentType(a),d.$1&&d.$1.abort(),d.setState({hasSizeError:!1,isLoading:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(a){a=a.currentTarget.files;a=a&&a[0];a=a.size/1024/1024;a>n?this.setState({hasSizeError:!0}):this.setState({hasSizeError:!1,isLoading:!0})};d.$11=function(){if(!Boolean(this.props.isInboxCombinedCustomQuestionTest)||this.props.questionText===void 0)return k.jsx("span",{});var a=h._("Question {question_index_number}",[h._param("question_index_number",this.props.index+1)]);return k.jsxs("span",{children:[k.jsx("div",{className:"_8hrv",children:k.jsx(b("FDSText.react"),{size:"body2",weight:"bold",children:a})}),k.jsx("div",{className:"_8hrn",children:k.jsx(b("SUITextInput.react"),{onChange:this.props.onQuestionTextChange,theme:b("SUIBusinessTheme"),value:this.props.questionText})})]})};d.$12=function(){var a,c=null;switch(this.props.specialType){case j.QUESTIONNAIRE_WELCOME_MESSAGE:c=this.props.errors&&this.props.errors.questionnaireWelcomeTextError;break;case j.QUESTIONNAIRE_THANK_YOU_MESSAGE:c=this.props.errors&&this.props.errors.questionnaireThanksTextError;break;case j.QUESTIONNAIRE_REMINDER_MESSAGE:c=this.props.errors&&this.props.errors.questionnaireReminderError;break;case j.QUESTIONNAIRE_STOP_QUESTIONS_MESSAGE:c=this.props.errors&&this.props.errors.questionnaireStopQuestionsError;break;default:c=this.props.errors&&this.props.errors.welcomeTextError;break}a={composerKey:"welcomeMessage"+((a=this.props.index)!=null?a:"")+":"+((a=this.props.numIcebreakers)!=null?a:"0"),initialDisabled:this.props.disabled===!0,initialReply:this.props.text,isAdsInterfaceSource:!1,isInboxCombinedCustomQuestionTest:this.props.isInboxCombinedCustomQuestionTest,maxCharacterLength:(a=this.props.textLimit)!=null?a:m,automationID:(a=this.props.automationID)!=null?a:null,pageID:this.props.pageID,placeholderText:(a=this.props.placeholderText)!=null?a:null,automationType:(a=this.props.automationType)!=null?a:null};return this.props.showPersonalization?k.jsx(p,{config:a,errorMessage:c,errorTooltipPosition:"above",messageLabel:this.props.messageLabel,onMessageChange:this.props.onMessageChange,text:this.props.text}):k.jsxs("span",{children:[k.jsxs("div",{className:"_6-b0",children:[k.jsx(b("FDSText.react"),{size:"body2",weight:"bold",children:this.props.messageLabel||h._("Text")}),k.jsx(b("FDSText.react"),{color:"secondary",size:"meta1",children:a.maxCharacterLength-this.props.text.length})]}),k.jsx("div",{className:"_6-b1",children:k.jsx(b("SUITextArea.react"),{disabled:this.props.disabled,errorMessage:c,maxLength:a.maxCharacterLength,onChange:this.props.onMessageChange,placeholder:this.props.placeholderText,shouldAutoGrow:!0,theme:b("SUIBusinessTheme"),value:this.props.text})})]})};d.$13=function(){var a;return this.props.hideAttachmentSection?null:[this.props.isInboxCombinedCustomQuestionTest?null:k.jsxs("div",{className:"_3-8z _3-95",children:[k.jsx(b("FDSText.react"),{size:"body2",weight:"bold",children:h._("Attachment (optional)")}),k.jsx(b("SUISimplePopover.react"),{content:this.props.videoDisabled?h._("Add an image to your message."):h._("Add an image or video to your message."),theme:b("SUIBusinessTheme")})]},"AttachmentTitle"),k.jsx("div",{className:this.props.isInboxCombinedCustomQuestionTest?"_8hrw":"",children:k.jsx(b("PagesContentEditorAttachment.react"),{attachmentType:this.props.attachmentType,disabled:this.props.disabled,errors:this.props.errors,hasSizeError:this.state.hasSizeError,isInboxCombinedCustomQuestionTest:this.props.isInboxCombinedCustomQuestionTest,isLoading:this.state.isLoading,media:this.props.media,onAddAttachmentLinkPressed:this.props.onAddAttachmentLinkPressed,onClosePressed:this.$10,onImageSubtitleChange:this.props.onImageSubtitleChange,onImageTitleChange:this.props.onImageTitleChange,onImageUpload:this.$4,onSelectAttachmentType:this.$3,onVideoUpload:this.$7,videoDisabled:(a=this.props.videoDisabled)!=null?a:!1},"attachment")},"AttachmentBody")]};d.$14=function(){return this.props.hideCTASection?null:[this.props.isInboxCombinedCustomQuestionTest?null:k.jsxs("div",{className:"_3-8z _3-95",children:[k.jsx(b("FDSText.react"),{size:"body2",weight:"bold",children:h._("Button (optional)")}),k.jsx(b("SUISimplePopover.react"),{content:h._("Add a button to send people to your website."),theme:b("SUIBusinessTheme")})]},"ctaTitle"),k.jsx(b("PagesContentEditorCTASection.react"),{ctas:this.props.ctas,disabled:this.props.disabled,errors:this.props.errors,isInboxCombinedCustomQuestionTest:this.props.isInboxCombinedCustomQuestionTest,onAddCTA:this.props.onAddCTA,onCTATitleChange:this.props.onCTATitleChange,onCTATypeChange:this.props.onCTATypeChange,onCTAURLChange:this.props.onCTAURLChange,onRemoveCTA:this.props.onRemoveCTA,showCTATypes:this.props.showCTATypes},"ctas")]};d.$15=function(){var a;return!Boolean(this.props.showTimeSection)?null:[k.jsx(b("AdsCMFormHorizontalLine.react"),{},"horizLine"),k.jsx("div",{className:"_3-8z _3-94",children:k.jsx(b("FDSText.react"),{size:"body2",weight:"bold",children:h._("Send after")})},"timeTitle"),k.jsx("div",{className:"_6-b0 _3-95",children:k.jsx(b("FDSText.react"),{color:"secondary",size:"body3",children:h._("How long after users drop off do you want to remind them to finish?")})},"timeSubtitle"),k.jsx(b("ServicesTimeDurationSelector.react"),{durationUnits:(a=this.props.timeDurationUnits)!=null?a:o,errorMsg:(a=this.props.errors)==null?void 0:a.timeInputError,onChange:(a=this.props.onTimeChange)!=null?a:b("emptyFunction"),value:this.props.time},"timeSelector")]};d.render=function(){return k.jsxs("div",{className:(!this.props.isInboxCombinedCustomQuestionTest&&!this.props.inDialog?"_6_oc":"")+(this.props.isInboxCombinedCustomQuestionTest?"":" _3-8-"),children:[this.$11(),this.$12(),this.$13(),this.$14(),this.$15()]})};return c}(k.PureComponent);function p(a){var c=b("SUIErrorComponentUtil").getErrorIcon(a,b("SUIBusinessTheme")),d=b("SUIErrorComponentUtil").getErrorBorderColor(a,b("SUIBusinessTheme")),e=h._("Automated response (optional)");return a.config.isInboxCombinedCustomQuestionTest===!0?k.jsxs("span",{children:[k.jsx("div",{className:"_8hrv",children:k.jsx(b("FDSText.react"),{size:"body2",weight:"bold",children:e})}),k.jsxs("div",{className:"_8hrx",style:{borderColor:d},children:[c?k.cloneElement(c,babelHelpers["extends"]({},b("SUIErrorComponentUtil").getErrorTooltipProps(a),{className:"_73ta"})):null,k.jsx(b("PagesReplyComposerEditorContainer.react"),{className:"_8hry",config:a.config,isInboxCombinedCustomQuestionTest:!0,onReplyChange:a.onMessageChange,welcomeString:a.text},a.config.composerKey),k.jsx(b("PagesReplyComposerToolbarContainer.react"),{className:"_3w-l",config:a.config})]})]}):k.jsxs("span",{children:[k.jsxs("div",{className:"_6-b0",children:[k.jsx(b("FDSText.react"),{size:"body2",weight:"bold",children:(e=a.messageLabel)!=null?e:h._("Text")}),k.jsx(b("FDSText.react"),{color:"secondary",size:"meta1",children:((e=a.config.maxCharacterLength)!=null?e:m)-a.text.length})]}),k.jsxs("div",{className:"_73t9",style:{borderColor:d},children:[c?k.cloneElement(c,babelHelpers["extends"]({},b("SUIErrorComponentUtil").getErrorTooltipProps(a),{className:"_73ta"})):null,k.jsx(b("PagesReplyComposerEditorContainer.react"),{className:"_3w-k",config:a.config,onReplyChange:a.onMessageChange,welcomeString:a.text},a.config.composerKey),k.jsx(b("PagesReplyComposerToolbarContainer.react"),{className:"_3w-l",config:a.config})]})]})}e.exports=a}),null);
__d("PagesManagerInboxAccordion.react",["cx","Link.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isExpanded:c.props.initialExpanded},c.$1=function(){(c.props.disableCollapse!==!0||!c.state.isExpanded)&&c.setState(function(a,b){return{isExpanded:!a.isExpanded}}),c.props.onClick&&c.props.onClick()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidUpdate=function(a){a.forceOpen!==this.props.forceOpen&&this.props.forceOpen===!0&&this.state.isExpanded===!1&&this.setState({isExpanded:!0})};d.render=function(){var a=!this.state.isExpanded&&this.props.collapsedHeader!==void 0?this.props.collapsedHeader:this.props.header;return h.jsxs("div",{className:this.props.className,children:[h.jsx(b("Link.react"),{className:"_6q2e"+(this.props.useDefaultCursor===!0?" _6_nb":""),onClick:this.$1,children:a}),this.state.isExpanded?this.props.children:null]})};return c}(h.PureComponent);e.exports=a}),null);
__d("PagesManagerComposerSectionCard.react",["ix","cx","BUISwitch.react","FDSText.react","Image.react","PagesManagerInboxAccordion.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a){return i.jsxs("div",{className:"_6_od",children:[a.leftIcon,i.jsxs("div",{className:"_6_oe",children:[i.jsx(b("FDSText.react"),{size:"header3",weight:"bold",children:a.header}),i.jsx(b("FDSText.react"),{color:"secondary",size:"body1",children:a.subtitle})]}),a.isCollapsible?a.useCollapseToggleSwitch===!0?i.jsx(b("BUISwitch.react"),{value:!a.isCollapsed}):i.jsx(b("Image.react"),{className:"_6vpp",src:a.isCollapsed?g("504840"):g("566392")}):null,Boolean(a.isRemoveable)?i.jsx(b("Image.react"),{className:"_6vpp",onClick:a.onRemoveMessage,src:g("478237")}):null]})}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){var a;c.props.onRemoveMessage&&c.props.onRemoveMessage((a=c.props.index)!=null?a:0)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return i.jsx("div",{className:"_6arn",children:i.jsx(b("PagesManagerInboxAccordion.react"),{children:this.props.body,collapsedHeader:i.jsx(j,{header:this.props.header,isCollapsed:!0,isCollapsible:this.props.isCollapsible,isRemoveable:this.props.isRemoveable,leftIcon:this.props.leftIcon,onRemoveMessage:this.$1,subtitle:this.props.collapsedSubtitle!==void 0?this.props.collapsedSubtitle:this.props.subtitle,useCollapseToggleSwitch:this.props.useCollapseToggleSwitch}),disableCollapse:!this.props.isCollapsible,forceOpen:!!this.props.forceOpen,header:i.jsx(j,{header:this.props.header,isCollapsed:!1,isCollapsible:this.props.isCollapsible,isRemoveable:this.props.isRemoveable,leftIcon:this.props.leftIcon,onRemoveMessage:this.$1,subtitle:this.props.subtitle,useCollapseToggleSwitch:this.props.useCollapseToggleSwitch}),initialExpanded:this.props.isCollapsible?!!this.props.initialExpanded:!0,onClick:this.props.onClick,useDefaultCursor:!this.props.isCollapsible})})};return c}(i.PureComponent);e.exports=a}),null);
__d("PagesTimeRangeEditorTypes",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a=[g._("Sunday").toString(),g._("Monday").toString(),g._("Tuesday").toString(),g._("Wednesday").toString(),g._("Thursday").toString(),g._("Friday").toString(),g._("Saturday").toString()];e.exports={DAY_OF_WEEK_TO_STRING:a}}),null);
__d("PagesTimeRangeEditorUtilities",["fbt","invariant","AdsTimezone","DateTime","PagesTimeRangeEditorTypes","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("PagesTimeRangeEditorTypes").DAY_OF_WEEK_TO_STRING,j=b("immutable").List,k=b("immutable").Set,l=24,m=3600,n=l*m,o=7,p={getInvalidWeekdaySelectionMessage:function(){return g._("You must select at least one day.")},getInvalidTimezoneMessage:function(){return g._("You must provide a time zone.")},getTimezoneID:function(a){if(a===null||a===void 0||a==="")return-1;var c=b("AdsTimezone").sortedTimezones.find(function(b){return b.name===a});return c?c.id:-1},getTimezoneName:function(a){var c=b("AdsTimezone").sortedTimezones.find(function(b){return b.id===a});c||h(0,3195);return c.name},getTimeRangesFromJson:function(a){a=JSON.parse(a);return j(a.map(function(a){a.weekdays=k(a.weekdays);return a}))},getDateFromSecInDay:function(a,c){c=b("DateTime").now(c).startOfDay();return c.addSeconds(a)},getIsRequestTimeInAwayTimeRange:function(a,c){return this.isTimeInAwayTimeRange(b("DateTime").now(this.getTimezoneID(a)),a,c)},isTimeInAwayTimeRange:function(a,b,c){b=a.getDayOfWeek();b=this.getAwayTimeBracketsForWeekday(b,c);for(var c=0;c<b.size;c++){var d=b.get(c),e=a.startOfDay().addSeconds(d.from);d=a.startOfDay().addSeconds(d.to);if(a.isAfter(e)&&a.isBefore(d))return!0}return!1},getAwayTimeBracketsForWeekday:function(a,b){b=p.splitOverNightTimeRanges(b);b=b.filter(function(b){return b.weekdays.contains(a)&&b.isRecurrent}).sort(function(a,b){return a.fromSecInDay-b.fromSecInDay});var c=[];for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var g=c.length>0?c[c.length-1]:null;g&&g.to>=f.fromSecInDay?g.to=Math.max(g.to,f.toSecInDay):c.push({from:f.fromSecInDay,to:f.toSecInDay})}return j(c)},splitOverNightTimeRanges:function(a){var b=[];a.map(function(a){if(!a.isRecurrent||a.fromSecInDay<a.toSecInDay){b.push(a);return}b.push({id:a.id,isRecurrent:!0,weekdays:a.weekdays,fromSecInDay:a.fromSecInDay,toSecInDay:n,date:0});b.push({id:a.id+"_overnight",isRecurrent:!0,weekdays:k(a.weekdays.map(function(a){return(a+1)%o})),fromSecInDay:0,toSecInDay:a.toSecInDay,date:0})});return j(b)},getReversedTimeBrackets:function(a){a=a.sort(function(a,b){return a.from-b.from});var b=0,c=[];for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;b<f.from&&c.push({from:b,to:f.from});b=f.to}f=m*l;b<f&&c.push({from:b,to:f});return j(c)},getFormatedTime:function(a,b,c){var d=i[a.getDayOfWeek()],e=a.format("g:iA");if(c===!0)return e;b.getDayOfYear()===a.getDayOfYear()?d=g._("today").toString():b.getDayOfYear()+1===a.getDayOfYear()&&(d=g._("tomorrow").toString());return e+" "+d}};e.exports=p}),null);
__d("PagesTimeRangeEditorDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!0})}),null);
__d("PagesTimeRangeEditorActions",["PagesTimeRangeEditorDispatcher","keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirrorRecursive")({INITIALIZE_TIME_RANGES:null,INITIALIZE_TIMEZONE:null,TOGGLE_WEEKDAY:null,TOGGLE_RECURRENCE:null,ADD_ENTRY:null,DELETE_ENTRY:null,SET_TIME_IN_DAY:null,SET_DATE:null,SET_TIMEZONE:null}),h={ActionTypes:g,initializeTimeRanges:function(a){b("PagesTimeRangeEditorDispatcher").dispatch({actionType:g.INITIALIZE_TIME_RANGES,timeRanges:a})},initializeTimezone:function(a){b("PagesTimeRangeEditorDispatcher").dispatch({actionType:g.INITIALIZE_TIMEZONE,timezoneName:a})},toggleWeekday:function(a,c){b("PagesTimeRangeEditorDispatcher").dispatch({actionType:g.TOGGLE_WEEKDAY,id:a,weekday:c})},toggleRecurrence:function(a){b("PagesTimeRangeEditorDispatcher").dispatch({actionType:g.TOGGLE_RECURRENCE,id:a})},addTimeRange:function(){b("PagesTimeRangeEditorDispatcher").dispatch({actionType:g.ADD_ENTRY})},deleteTimeRange:function(a){b("PagesTimeRangeEditorDispatcher").dispatch({actionType:g.DELETE_ENTRY,id:a})},setStartTime:function(a,b){h._setTimeInDay(a,b,!0)},setEndTime:function(a,b){h._setTimeInDay(a,b,!1)},setDate:function(a,c){b("PagesTimeRangeEditorDispatcher").dispatch({actionType:g.SET_DATE,id:a,date:c})},setTimezone:function(a){b("PagesTimeRangeEditorDispatcher").dispatch({actionType:g.SET_TIMEZONE,timezoneName:a})},_setTimeInDay:function(a,c,d){b("PagesTimeRangeEditorDispatcher").dispatch({actionType:g.SET_TIME_IN_DAY,id:a,time:c,isStartTime:d})}};e.exports=h}),null);
__d("PagesTimeRangeEditorAddButton.react",["ix","fbt","Image.react","PagesTimeRangeEditorActions","React","XUIButton.react","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){a.stopPropagation(),b("PagesTimeRangeEditorActions").addTimeRange()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return i.jsx(b("XUIButton.react"),{className:this.props.className,onClick:this.$1,image:i.jsx(b("Image.react"),{src:g("142643")}),size:"large",label:h._("Add Time")})};return c}(i.Component);e.exports=a}),null);
__d("PagesTimeRangeEditorEmptyView.react",["cx","fbt","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return i.jsx("div",{className:b("joinClasses")(this.props.className,"_3a1t"),children:h._("Schedule times for your Page to be away each week.")})};return c}(i.Component);e.exports=a}),null);
__d("PagesTimeRangeEditorStore",["invariant","PagesTimeRangeEditorActions","PagesTimeRangeEditorDispatcher","FluxStore","immutable","PagesTimeRangeEditorUtilities","guid"],(function(a,b,c,d,e,f,g){"use strict";var h=b("PagesTimeRangeEditorActions").ActionTypes,i=b("immutable").List,j=b("immutable").Set;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("PagesTimeRangeEditorDispatcher"))||this;c.$PagesTimeRangeEditorStore1=i([]);c.$PagesTimeRangeEditorStore3=new Map();c.$PagesTimeRangeEditorStore4=new Map();c.$PagesTimeRangeEditorStore5=!1;return c}var d=c.prototype;d.getTimeRanges=function(){return this.$PagesTimeRangeEditorStore1};d.getEditingID=function(){return this.$PagesTimeRangeEditorStore2};d.getHasValidationFailure=function(){return this.$PagesTimeRangeEditorStore5};d.getTimeRangeErrorMessage=function(a,b){if(this.$PagesTimeRangeEditorStore3.has(a)){a=this.$PagesTimeRangeEditorStore3.get(a);a||g(0,4207);return a.get(b)}return null};d.getFieldErrorMessage=function(a){return this.$PagesTimeRangeEditorStore4.get(a)};d.getTimezoneName=function(){var a=this.$PagesTimeRangeEditorStore6;a||g(0,4208);return a};d.$PagesTimeRangeEditorStore7=function(){return{id:b("guid")(),isRecurrent:!0,weekdays:j([]),fromSecInDay:0,toSecInDay:86399,date:Math.floor(Date.now()/1e3)}};d.__onDispatch=function(a){var b=a.actionType,c=!0;switch(b){case h.ADD_ENTRY:this.$PagesTimeRangeEditorStore1=this.$PagesTimeRangeEditorStore1.concat(this.$PagesTimeRangeEditorStore7());this.$PagesTimeRangeEditorStore8();break;case h.INITIALIZE_TIMEZONE:this.$PagesTimeRangeEditorStore6=a.timezoneName;this.$PagesTimeRangeEditorStore8();break;case h.TOGGLE_RECURRENCE:this.$PagesTimeRangeEditorStore9(a.id);break;case h.TOGGLE_WEEKDAY:this.$PagesTimeRangeEditorStore10(a.id,a.weekday);this.$PagesTimeRangeEditorStore8();break;case h.DELETE_ENTRY:this.$PagesTimeRangeEditorStore11(a.id);this.$PagesTimeRangeEditorStore8();break;case h.SET_TIME_IN_DAY:this.$PagesTimeRangeEditorStore12(a.id,a.time,a.isStartTime);this.$PagesTimeRangeEditorStore8();break;case h.SET_DATE:this.$PagesTimeRangeEditorStore13(a.id,a.date);break;case h.INITIALIZE_TIME_RANGES:this.$PagesTimeRangeEditorStore14(a.timeRanges);this.$PagesTimeRangeEditorStore8();break;case h.SET_TIMEZONE:this.$PagesTimeRangeEditorStore6=a.timezoneName;this.$PagesTimeRangeEditorStore8();break;default:c=!1;break}c&&this.__emitChange()};d.$PagesTimeRangeEditorStore15=function(a){var b=this.$PagesTimeRangeEditorStore1.find(function(b){return b.id===a});b||g(0,4209);return b};d.$PagesTimeRangeEditorStore16=function(a){var b=Object.assign({},a);this.$PagesTimeRangeEditorStore1=this.$PagesTimeRangeEditorStore1.splice(this.$PagesTimeRangeEditorStore1.indexOf(a),1,b)};d.$PagesTimeRangeEditorStore11=function(a){this.$PagesTimeRangeEditorStore1=this.$PagesTimeRangeEditorStore1["delete"](this.$PagesTimeRangeEditorStore1.indexOf(this.$PagesTimeRangeEditorStore15(a)))};d.$PagesTimeRangeEditorStore9=function(a){a=this.$PagesTimeRangeEditorStore15(a);a.isRecurrent=!a.isRecurrent;this.$PagesTimeRangeEditorStore16(a)};d.$PagesTimeRangeEditorStore10=function(a,b){a=this.$PagesTimeRangeEditorStore15(a);var c=a.weekdays;c.has(b)?a.weekdays=c.remove(b):a.weekdays=c.add(b);this.$PagesTimeRangeEditorStore16(a)};d.$PagesTimeRangeEditorStore12=function(a,b,c){a=this.$PagesTimeRangeEditorStore15(a);c?a.fromSecInDay=b:a.toSecInDay=b;this.$PagesTimeRangeEditorStore16(a)};d.$PagesTimeRangeEditorStore13=function(a,b){a=this.$PagesTimeRangeEditorStore15(a);a.date=b.getUnixTimestampSeconds();this.$PagesTimeRangeEditorStore16(a)};d.$PagesTimeRangeEditorStore17=function(a){return i(a.map(function(a){return Object.assign({},a)}))};d.$PagesTimeRangeEditorStore14=function(a){this.$PagesTimeRangeEditorStore1=this.$PagesTimeRangeEditorStore17(a)};d.$PagesTimeRangeEditorStore18=function(){var a=this;this.$PagesTimeRangeEditorStore3.clear();this.$PagesTimeRangeEditorStore1.map(function(c){var d=new Map();a.$PagesTimeRangeEditorStore3.set(c.id,d);c.weekdays.isEmpty()&&(d.set("weekdayPicker",b("PagesTimeRangeEditorUtilities").getInvalidWeekdaySelectionMessage()),a.$PagesTimeRangeEditorStore5=!0)})};d.$PagesTimeRangeEditorStore19=function(){this.$PagesTimeRangeEditorStore4.clear(),this.$PagesTimeRangeEditorStore6||(this.$PagesTimeRangeEditorStore5=!0,this.$PagesTimeRangeEditorStore4.set("timezone",b("PagesTimeRangeEditorUtilities").getInvalidTimezoneMessage()))};d.$PagesTimeRangeEditorStore8=function(){this.$PagesTimeRangeEditorStore5=!1,this.$PagesTimeRangeEditorStore18(),this.$PagesTimeRangeEditorStore19()};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesTimeRangeEditorDeleteButton.react",["ix","Image.react","React","ShimButton.react","fbglyph"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("ShimButton.react"),{className:this.props.className,onClick:this.props.onClick,children:h.jsx(b("Image.react"),{src:g("130092")})})};return c}(h.Component);e.exports=a}),null);
__d("PagesTimeRangeEditorErrorContainer.react",["cx","FluxContainer","PagesTimeRangeEditorStore","React","XUIError.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesTimeRangeEditorStore")]};c.calculateState=function(a,c){return{errorMessage:c.timeRangeKey!==null&&c.timeRangeKey!==void 0&&c.timeRangeKey!==""?b("PagesTimeRangeEditorStore").getTimeRangeErrorMessage(c.timeRangeKey,c.validationKey):b("PagesTimeRangeEditorStore").getFieldErrorMessage(c.validationKey)}};var d=c.prototype;d.render=function(){return h.jsx(b("XUIError.react"),{xuiError:this.state.errorMessage,className:"_24mu",children:this.props.children})};return c}(h.Component);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesTimeRangeEditorTimePicker.react",["cx","fbt","ix","AbstractTimeInput.react","Image.react","React","TimeOfDay","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=3600,l=babelHelpers["extends"]({},b("AbstractTimeInput.react").defaultProps.classNames,{columnClassNames:babelHelpers["extends"]({},b("AbstractTimeInput.react").defaultProps.classNames.columnClassNames,{column:"_4nww _3zhh",columnValue:"_4nx3 _3zhi",focused:"_3zhj"}),disabled:"_4nx6 _3zhl",focused:"_3zhm",space:"_4nxh _3zhn"});a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){a=a?a.toSecondOfDay():0;c.props.onChange(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props.isOvernight?h._("This time range starts and ends on different days"):null;return j.jsx(b("AbstractTimeInput.react"),{className:b("joinClasses")(this.props.className,"_3zi2"),classNames:l,icon:this.$2(),disabled:!1,onChangeValueAttempt:this.$1,value:b("TimeOfDay").fromSecondOfDay(this.props.value),"aria-label":a,"data-hover":"tooltip","data-tooltip-content":a})};d.$2=function(){var a=null;this.props.value>=6*k&&this.props.value<18*k?a=i("95368"):a=i("94912");return j.jsx(b("Image.react"),{src:a})};return c}(j.Component);e.exports=a}),null);
__d("PagesTimeRangeWeekdayPickerView.react",["cx","fbt","MultiToggleButtonGroup.react","React","XUIError.react","immutable","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("immutable").List;a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;var c=[{label:h._("S"),value:0},{label:h._("M"),value:1},{label:h._("T"),value:2},{label:h._("W"),value:3},{label:h._("T"),value:4},{label:h._("F"),value:5},{label:h._("S"),value:6}];b.$1=j(c);return b}var d=c.prototype;d.render=function(){return i.jsx(b("XUIError.react"),{children:i.jsx(b("MultiToggleButtonGroup.react"),{className:b("joinClasses")("_3oqo",this.props.className),options:this.$1,selectedOptions:this.props.selectedDays,onOptionClicked:this.props.onOptionClicked})})};return c}(i.Component);e.exports=a}),null);
__d("PagesTimeRangeEntryEditorView.react",["cx","PagesTimeRangeEditorDeleteButton.react","PagesTimeRangeEditorErrorContainer.react","PagesTimeRangeEditorTimePicker.react","PagesTimeRangeWeekdayPickerView.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){c.props.onToggleWeekday(c.props.timeRange.id,a)},c.$2=function(){c.props.onDelete(c.props.timeRange.id)},c.$3=function(a){c.props.onSetFromTime(c.props.timeRange.id,a)},c.$4=function(a){c.props.onSetToTime(c.props.timeRange.id,a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props.timeRange.fromSecInDay>=this.props.timeRange.toSecInDay;return h.jsxs("div",{className:"_3af0",children:[h.jsx(b("PagesTimeRangeEditorErrorContainer.react"),{validationKey:"timePicker",timeRangeKey:this.props.timeRange.id,children:h.jsxs("div",{className:"_24mu _24mv",children:[h.jsx(b("PagesTimeRangeEditorTimePicker.react"),{className:"_2hy3",value:this.props.timeRange.fromSecInDay,onChange:this.$3,isOvernight:a}),h.jsx("span",{className:"_2hy4",children:"-"}),h.jsx(b("PagesTimeRangeEditorTimePicker.react"),{className:"_2hy3",value:this.props.timeRange.toSecInDay,onChange:this.$4,isOvernight:a})]})}),h.jsx(b("PagesTimeRangeEditorErrorContainer.react"),{validationKey:"weekdayPicker",timeRangeKey:this.props.timeRange.id,children:h.jsx(b("PagesTimeRangeWeekdayPickerView.react"),{className:this.props.timeRange.isRecurrent?"":"hidden_elem",selectedDays:this.props.timeRange.weekdays,onOptionClicked:this.$1})}),h.jsx("div",{className:"_2hy5",children:h.jsx(b("PagesTimeRangeEditorDeleteButton.react"),{className:"_2hy6",onClick:this.$2})})]})};return c}(h.Component);e.exports=a}),null);
__d("PagesTimeRangePreviewRow.react",["cx","Layout.react","PagesTimeRangeEditorUtilities","React","immutable","DateStrings","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("immutable").List,j=b("Layout.react").Column,k=b("Layout.react").FillColumn,l=24*3600,m=24;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=this.$1(b("PagesTimeRangeEditorUtilities").getReversedTimeBrackets(this.props.awayBrackets),!1).concat(this.$1(this.props.awayBrackets,!0)).sort(function(a,b){return a.from-b.from}),d=b("DateStrings").getWeekdayNameShort(this.props.weekday);typeof d==="string"&&(d=d.toUpperCase());return h.jsxs(b("Layout.react"),{className:"_4-gt",children:[h.jsx(j,{className:"_3np_",children:d}),h.jsxs(k,{className:b("joinClasses")(this.props.className,"_4-gv"),children:[h.jsx("div",{className:"_4-gw",children:this.$2()}),h.jsx("div",{children:c.map(function(b){return a.$3(b)})})]})]})};d.$2=function(){var a=[],b=100/m;for(var c=0;c<m;c++)a.push(h.jsx("div",{className:"_4-gx",style:{left:c*b+"%",width:b+"%"}},c));return a};d.$1=function(a,b){var c=this;return i(a.map(function(a){return c.$4(a,b)}))};d.$4=function(a,b){return{from:a.from,to:a.to,isAway:b}};d.$3=function(a){var b=(a.to-a.from)/l*100,c=a.from/l*100;return h.jsx("div",{className:"_4-gy",style:{width:b+"%",left:c+"%"},children:h.jsx("div",{className:"_4-gz"+(a.isAway?" _4-g-":"")})},a.from+"-"+a.to)};return c}(h.Component);e.exports=a}),null);
__d("PagesTimeRangePreview.react",["cx","fbt","Layout.react","PagesTimeRangeEditorUtilities","PagesTimeRangePreviewRow.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("Layout.react").Column,j=b("Layout.react").FillColumn,k=b("React"),l=[0,1,2,3,4,5,6];a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this;return k.jsxs("div",{className:b("joinClasses")(this.props.className,"_3nps"),children:[this.$1(),l.map(function(b){return a.$2(b)}),this.$3()]})};d.$1=function(){return k.jsx("div",{className:b("joinClasses")(this.props.className,"_3npt"),children:this.$4(h._("Away"))})};d.$4=function(a){return k.jsxs("div",{className:"_3npu _3npw",children:[k.jsx("div",{className:"_3npx"}),k.jsx("div",{className:"_3np-",children:a})]})};d.$3=function(){var a=["6AM","12PM","6PM","12AM"];return k.jsxs(b("Layout.react"),{className:this.props.className,children:[k.jsx(i,{className:"_3np_"}),k.jsx(j,{className:"_3nq0",children:a.map(function(a){return k.jsx("div",{className:"_3nq1",children:a},a)})})]})};d.$2=function(a){return k.jsx(b("PagesTimeRangePreviewRow.react"),{weekday:a,awayBrackets:b("PagesTimeRangeEditorUtilities").getAwayTimeBracketsForWeekday(a,this.props.awayTimeRanges)},a)};return c}(k.Component);e.exports=a}),null);
__d("PagesTimeRangeEditorListContainer.react",["FluxContainer","PagesTimeRangeEditorActions","PagesTimeRangeEditorEmptyView.react","PagesTimeRangeEditorStore","PagesTimeRangeEntryEditorView.react","PagesTimeRangePreview.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesTimeRangeEditorStore")]};c.calculateState=function(){return{timeRanges:b("PagesTimeRangeEditorStore").getTimeRanges(),editingID:b("PagesTimeRangeEditorStore").getEditingID()}};var d=c.prototype;d.UNSAFE_componentWillUpdate=function(a,b){b.timeRanges!==this.state.timeRanges&&this.props.onTimeRangesChanged(b.timeRanges)};d.render=function(){var a=this;return this.state.timeRanges.isEmpty()?g.jsx(b("PagesTimeRangeEditorEmptyView.react"),{className:this.props.className}):g.jsxs("div",{className:this.props.className,children:[g.jsx(b("PagesTimeRangePreview.react"),{awayTimeRanges:this.state.timeRanges}),this.state.timeRanges.map(function(c){var d;return g.jsx(b("PagesTimeRangeEntryEditorView.react"),{isEditing:c.id===a.state.editingID,timeRange:c,onToggleRecurrence:(d=b("PagesTimeRangeEditorActions")).toggleRecurrence,onToggleWeekday:d.toggleWeekday,onDelete:d.deleteTimeRange,onSetFromTime:d.setStartTime,onSetToTime:d.setEndTime,onSetDate:d.setDate},c.id)})]})};return c}(g.Component);e.exports=b("FluxContainer").create(a)}),null);
__d("PagesTimeRangeTimezoneEditorContainer.react",["cx","fbt","FDSSimplePopover.react","FluxContainer","PagesTimeRangeEditorActions","PagesTimeRangeEditorStore","PagesTimeRangeEditorUtilities","React","SUILiveRailThemeDEPRECATED","SUITimeZoneSelector.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){b("PagesTimeRangeEditorActions").setTimezone(b("PagesTimeRangeEditorUtilities").getTimezoneName(a.timeZoneId))},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("PagesTimeRangeEditorStore")]};c.calculateState=function(){return{timezoneName:b("PagesTimeRangeEditorStore").getTimezoneName(),errorMessage:b("PagesTimeRangeEditorStore").getFieldErrorMessage("timezone")}};var d=c.prototype;d.UNSAFE_componentWillUpdate=function(a,b){b.timezoneName!==this.state.timezoneName&&this.props.onTimezoneChanged(b.timezoneName)};d.render=function(){var a=new(b("SUITimeZoneSelector.react").VALUE)({timeZoneId:b("PagesTimeRangeEditorUtilities").getTimezoneID(this.state.timezoneName)});return i.jsxs("div",{className:this.props.className,children:[i.jsx("span",{className:"_5dza",children:h._("Time zone:")}),i.jsx(b("FDSSimplePopover.react"),{content:h._("Select the time zone that you want to schedule your away time in.")}),i.jsx(b("SUITimeZoneSelector.react"),{className:"_5dzb",onChange:this.$1,theme:b("SUILiveRailThemeDEPRECATED"),value:a,errorMessage:this.state.errorMessage})]})};return c}(i.Component);e.exports=b("FluxContainer").create(a)}),null);
__d("PagesTimeRangeEditor.react",["cx","LeftRight.react","PagesTimeRangeEditorActions","PagesTimeRangeEditorAddButton.react","PagesTimeRangeEditorDispatcher","PagesTimeRangeEditorListContainer.react","PagesTimeRangeEditorStore","PagesTimeRangeTimezoneEditorContainer.react","React","cxMargin","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillMount=function(){b("PagesTimeRangeEditorDispatcher").explicitlyRegisterStore(b("PagesTimeRangeEditorStore")),b("PagesTimeRangeEditorActions").initializeTimeRanges(this.props.initialTimeRanges),b("PagesTimeRangeEditorActions").initializeTimezone(this.props.initialTimezoneName)};d.render=function(){return h.jsxs("div",{className:b("joinClasses")(this.props.className,"_1wdg"),children:[h.jsx(b("PagesTimeRangeEditorListContainer.react"),{onTimeRangesChanged:this.props.onTimeRangesChanged}),h.jsxs(b("LeftRight.react"),{children:[h.jsx(b("PagesTimeRangeTimezoneEditorContainer.react"),{className:"_3-99",onTimezoneChanged:this.props.onTimezoneChanged}),h.jsx(b("PagesTimeRangeEditorAddButton.react"),{className:"_1u0p"})]})]})};return c}(h.Component);e.exports=a}),null);
__d("AppointmentFollowUpMessageEditor.react",["ix","cx","fbt","DateConsts","Image.react","PagesManagerComposerSectionCard.react","PagesMarketingAutomationActions","PagesMarketingAutomationMessageComposer.react","React","ServicesFollowUpMessageSettingsUtils","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=b("React");c=a.PureComponent;var k=b("ServicesFollowUpMessageSettingsUtils").FOLLOW_UP_MESSAGE_DURATION_UNITS,l=b("DateConsts").SEC_PER_YEAR,m=250;d=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a,b){d.$1({messageContent:b})},d.$3=function(a,c){d.$1({triggerTimeSecs:c}),b("PagesMarketingAutomationActions").updateIsSendDisabled(c>l)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(a){var c=a.messageContent;a=a.triggerTimeSecs;var d=this.props.followUpMessageData;if(d==null)return;b("PagesMarketingAutomationActions").setComposerHasBeenEdited();b("PagesMarketingAutomationActions").storeFollowUpMessageInfo((c=c)!=null?c:d.messageContent,(c=a)!=null?c:d.triggerTimeSecs)};d.render=function(){var a=this.props.followUpMessageData;if(a==null)return;var c=a.triggerTimeSecs,d=c>l?{mediaError:null,ctaErrors:[],welcomeTextError:null,questionnaireWelcomeTextError:null,questionnaireThanksTextError:null,questionnaireStopQuestionsError:null,questionnaireReminderError:null,questionnaireErrors:[],errorText:null,timeInputError:i._("The maximum follow-up message schedule time is 12 months.")}:null;return j.jsx(b("PagesManagerComposerSectionCard.react"),{body:j.jsx(b("PagesMarketingAutomationMessageComposer.react"),{attachmentType:null,automationID:"",ctas:null,errors:d,hideAttachmentSection:!0,hideCTASection:!0,isWelcomeTextIntialized:!0,media:null,onIndexedTimeChange:this.$3,onMessageChange:this.$2,pageID:this.props.pageID,showPersonalization:!0,showTimeSection:!0,textLimit:m,time:c,timeDurationUnits:k,welcomeText:a.messageContent}),header:i._("Message"),isCollapsible:!1,leftIcon:j.jsx("div",{className:"_6as2 _6as8",children:j.jsx(b("Image.react"),{src:g("561662")})}),subtitle:i._("Customise the message that you send.")})};return c}(c);e.exports=d}),null);
__d("PagesManagerComposerTopBar.react",["ix","cssVar","cx","fbt","ContextualLayer.react","FDSButton.react","FDSText.react","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("React");function l(a){var c=k.jsxs("div",{className:"_4zss",style:{borderLeft:"4px solid"+a.color},children:[k.jsx("div",{className:"_75o0",children:a.leftIcon}),k.jsx(b("FDSText.react"),{size:"body3",children:a.text})]});return k.jsx(b("ContextualLayer.react"),{alignment:a.alignment,contextRef:a.contextRef,offsetY:8,position:"below",shown:!0,children:c})}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(a){c.$1=a},c.$4=function(){return c.$1},c.$5=function(a){c.$2=a},c.$6=function(){return c.$2},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=null,c=null,d=null,e="#FA383E",f=k.jsx(b("Image.react"),{className:"_2pih",src:g("494559")});this.props.primaryError!==null&&this.props.primaryError!==void 0?(c=this.props.primaryError,a=this.$4,d="right"):this.props.previewError!==null&&this.props.previewError!==void 0?(c=this.props.previewError,a=this.$6,d="left"):this.props.previewSuccessText!==null&&this.props.previewSuccessText!==void 0&&(c=this.props.previewSuccessText,a=this.$6,d="left",e="#00A400",f=k.jsx(b("Image.react"),{src:g("506114")}));var h=k.jsx("span",{className:"_2phz",children:k.jsx(b("FDSButton.react"),{icon:k.jsx(b("Image.react"),{src:g("492063")}),label:this.props.previewButtonText,onClick:this.props.onPreviewClick,ref:this.$5})});return k.jsxs("div",{className:"_4qd8",children:[k.jsx("span",{className:"_4qd9",children:k.jsx(b("FDSText.react"),{size:"header3",weight:"bold",children:this.props.headerContent})}),k.jsxs("div",{className:"_4qd7",children:[k.jsxs("span",{className:"_2phz",children:[this.props.hidePreviewButton!==!0?h:null,this.props.showCancelButton===!0?k.jsx(b("FDSButton.react"),{isDisabled:this.props.cancelDisabled,label:j._("Cancel"),onClick:this.props.onCancel}):null,this.props.showDeleteButton===!0?k.jsx(b("FDSButton.react"),{icon:k.jsx(b("Image.react"),{src:g("481982")}),isDisabled:this.props.deleteButtonDisabled,label:j._("Delete"),onClick:this.props.onDeleteClick}):null]}),k.jsx("span",{className:"_2phz",children:k.jsx(b("FDSButton.react"),{isDisabled:this.props.sendDisabled,label:this.props.primaryButtonText,onClick:this.props.onPrimaryClick,ref:this.$3,use:"primary"})}),c!==null&&a&&d?k.jsx(l,{alignment:d,color:e,contextRef:a,leftIcon:f,text:c}):null]})]})};return c}(k.PureComponent);e.exports=a}),null);
__d("SavedResponsesAutomatedSequenceStep.react",["ix","cx","fbt","AdsMessengerPartialAutomatedCreationUtils","FDSSection.react","FDSText.react","Image.react","MessengerDestinationPartialAutomatedCreationLeadGenQuestionTypeIcon.react","React","asset","cxMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.question?this.props.question&&this.props.question.answerType?b("AdsMessengerPartialAutomatedCreationUtils").getAnswerTypeName(this.props.question.answerType):"":i._("Completion message"),c=this.props.question?j.jsx(b("MessengerDestinationPartialAutomatedCreationLeadGenQuestionTypeIcon.react"),{questionType:this.props.question.answerType}):j.jsx(b("Image.react"),{src:g("1122016")}),d=this.props.question?this.props.question.message:this.props.completionMessage;c=j.jsxs("span",{className:"_8xlv",children:[j.jsx("span",{className:"_8xlw",children:c}),j.jsx(b("FDSText.react"),{margin:"_3-9a",size:"body2",weight:"bold",children:a})]});return j.jsxs("div",{className:"_8xii _8xlx",children:[c,j.jsx(b("FDSSection.react"),{children:j.jsx(b("FDSText.react"),{margin:"_3-9a",size:"body1",children:d})})]})};return c}(j.PureComponent);e.exports=a}),null);
__d("SavedResponsesAutomatedSequenceStepList.react",["React","SavedResponsesAutomatedSequenceStep.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d.render=function(){var a=this;return g.jsx(g.Fragment,{children:this.props.questionMessages.map(function(c,d){return g.jsx(b("SavedResponsesAutomatedSequenceStep.react"),{pageID:a.props.pageID,question:c},d)})})};return c}(g.PureComponent);e.exports=a}),null);
__d("SavedResponsesAutomatedSequenceDialog.react",["cx","fbt","FDSButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSText.react","FluxContainer","MessengerAdsConversionFunnelTypedLogger","PagesMarketingAutomationActions","PagesMarketingAutomationMessageComposer.react","PagesMarketingAutomationStore","PagesMarketingAutomationUtils","React","SavedResponsesAutomatedSequenceStep.react","SavedResponsesAutomatedSequenceStepList.react","SavedResponsesConstants","SavedResponsesUtils","ScrollableArea.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j="start",k="dismiss";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a,c){b("PagesMarketingAutomationActions").updateAutomatedCheckoutMessages({introMessage:c,questionMessages:d.state.automatedCheckoutMessages.questionMessages,thankYouMessage:d.state.automatedCheckoutMessages.thankYouMessage})},d.$2=function(){new(b("MessengerAdsConversionFunnelTypedLogger"))().setName("buyer_information_trigger_click").setConversionType("BUYER_INFORMATION").setEventSubtype(k).setPageID(d.props.pageID).log(),d.props.onHide(),b("PagesMarketingAutomationActions").updateAutomatedSequenceDialogSeeAll(!1)},d.$4=function(){b("PagesMarketingAutomationUtils").startAutomatedSequence(d.props.pageID,d.props.recipientID),new(b("MessengerAdsConversionFunnelTypedLogger"))().setName("buyer_information_trigger_click").setConversionType("BUYER_INFORMATION").setEventSubtype(j).setPageID(d.props.pageID).log(),b("PagesMarketingAutomationActions").updateRecentAutomationThreadFBID(d.props.recipientID),b("PagesMarketingAutomationActions").updateShouldShowAutomationToast(!0),d.props.onHide(),b("PagesMarketingAutomationActions").updateAutomatedSequenceDialogSeeAll(!1)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("PagesMarketingAutomationStore")]};c.calculateState=function(){return{automatedCheckoutMessages:b("PagesMarketingAutomationStore").getAutomatedCheckoutMessages(),automationType:b("PagesMarketingAutomationStore").getAutomationType(),seeAll:b("PagesMarketingAutomationStore").getAutomatedSequenceDialogSeeAll()}};var d=c.prototype;d.$3=function(){b("PagesMarketingAutomationActions").updateAutomatedSequenceDialogSeeAll(!0)};d.render=function(){new(b("MessengerAdsConversionFunnelTypedLogger"))().setName("buyer_information_trigger_impression").setConversionType("BUYER_INFORMATION").setPageID(this.props.pageID).log();return i.jsx(b("FDSModal.react"),{footer:i.jsx(n,{automationType:this.state.automationType,onHide:this.$2,startSequence:this.$4}),header:this.state.automationType==="buyer_information_form"?i.jsx(b("FDSModalHeader.react"),{title:h._("Customer information form")}):i.jsx(b("FDSModalHeader.react"),{title:h._("Start buyer information sequence")}),isShown:!0,onHide:this.$2,width:b("SavedResponsesConstants").automatedSequenceDialogWidth,children:i.jsx(b("ScrollableArea.react"),{maxHeight:b("SavedResponsesConstants").dialogMaxScrollableHeight,children:i.jsxs("div",{className:"_8p88",children:[i.jsx(l,{automatedCheckoutID:this.props.automatedCheckoutID,automatedCheckoutMessages:this.state.automatedCheckoutMessages,onIntroMessageChange:this.$1,pageID:this.props.pageID}),i.jsx(m,{automatedCheckoutMessages:this.state.automatedCheckoutMessages,automationType:this.state.automationType,expanded:this.state.seeAll,pageID:this.props.pageID,seeAll:this.$3})]})})})};return c}(i.PureComponent);function l(a){return i.jsxs(b("FDSSection.react"),{children:[i.jsx(b("FDSText.react"),{size:"body1",weight:"bold",children:h._("Intro")}),i.jsx(b("PagesMarketingAutomationMessageComposer.react"),{attachmentType:null,automationID:a.automatedCheckoutID,ctas:null,errors:null,hideAttachmentSection:!0,hideCTASection:!0,inDialog:!0,isWelcomeTextIntialized:!0,media:null,onMessageChange:a.onIntroMessageChange,pageID:a.pageID,showPersonalization:!1,showTimeSection:!1,welcomeText:a.automatedCheckoutMessages.introMessage})]})}function m(a){return a.expanded?i.jsxs(b("FDSSection.react"),{children:[i.jsx(b("SavedResponsesAutomatedSequenceStepList.react"),{pageID:a.pageID,questionMessages:a.automatedCheckoutMessages.questionMessages}),i.jsx(b("SavedResponsesAutomatedSequenceStep.react"),{completionMessage:a.automatedCheckoutMessages.thankYouMessage,pageID:a.pageID}),i.jsx("a",{className:"_8p87",onClick:b("SavedResponsesUtils").editAutomatedCheckout,role:"presentation",children:a.automationType==="buyer_information_form"?h._("Edit Form"):h._("Edit Sequence")})]}):i.jsx(b("FDSSection.react"),{children:i.jsxs("div",{className:"_8p86",children:[i.jsx(b("FDSText.react"),{color:"disabled",size:"body1",children:h._("1 of {step count}",[h._param("step count",a.automatedCheckoutMessages.questionMessages.length+2)])}),i.jsx("a",{className:"_8p87",onClick:a.seeAll,role:"presentation",children:h._("See All")})]})})}function n(a){return i.jsx(b("FDSModalFooter.react"),{primaryButton:i.jsx(b("FDSButton.react"),{label:a.automationType==="buyer_information_form"?h._("Send Form"):h._("Start Sequence"),onClick:a.startSequence,use:"primary"}),secondaryButton:i.jsx(b("FDSButton.react"),{label:h._("Cancel"),onClick:a.onHide})})}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesManagerAdminSearchSource",["AbstractSearchSource","CurrentUser","SearchableEntry"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$PagesManagerAdminSearchSource1=[],b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.cacheData=function(a){this.$PagesManagerAdminSearchSource1=a};d.hasCachedData=function(){return this.$PagesManagerAdminSearchSource1.length>0};d.searchImpl=function(a,c,d){var e=[],f=this.$PagesManagerAdminSearchSource1;if(a){var g=a.toLowerCase();f=this.$PagesManagerAdminSearchSource1.filter(function(a){return a.name.toLowerCase().startsWith(g)})}var h;f.map(function(a){if(d&&d.placeCurrentAdminOnTop&&a.id===b("CurrentUser").getID()){var c;h=new(b("SearchableEntry"))({title:a.name,uniqueID:a.id,photo:(c=a.profile_picture)!=null?c.uri:c});return}e.push(new(b("SearchableEntry"))({title:a.name,uniqueID:a.id,photo:(c=a.profile_picture)!=null?c.uri:c}))});f=e.sort(function(a,b){return a.getTitle().localeCompare(b.getTitle())});h&&f.unshift(h);c(f,a)};return c}(b("AbstractSearchSource"));e.exports=a}),null);
__d("PagesManagerMessagesInterface",["Animation","Arbiter","AsyncRequest","CreatorStudioInboxMessengerRankedUsersAction","MercuryIDs","MercuryThreadActions","MessagingTag","PageCommItemFolder","PageCommItemStatus","PagesManagerAction","PagesManagerInboxFilterStore","PagesManagerInboxListAction","XMessagingSetPreferencesController","ge"],(function(a,b,c,d,e,f){"use strict";var g="PagesManagerMessagesInterface";a={applyIfVisibleOnPage:function(a,c){a=b("ge")(a);a&&c(a)},changeThreadSpamStatus:function(a,c,d,e){d?b("MercuryThreadActions").getForFBID(a).markSpam(c,"PagesManagerInterface"):b("MercuryThreadActions").getForFBID(a).unmarkSpam(c,"PagesManagerInterface"),b("PagesManagerInboxListAction").itemFolderChange([c],d?b("PageCommItemStatus").SPAM:e,d?e:b("PageCommItemStatus").SPAM),b("PagesManagerAction").viewListItem(null)},changeThreadArchivedStatus:function(a,c,d,e){d?b("MercuryThreadActions").getForFBID(a).archive(c,g):b("MercuryThreadActions").getForFBID(a).unarchive(c,g)},changeThreadReadStatus:function(a,c,d){d?b("MercuryThreadActions").getForFBID(a).markRead(c,g):b("MercuryThreadActions").getForFBID(a).markUnread(c,g)},markThreadAsSpam:function(a,c,d,e,f,h,i,j){if(h===b("MessagingTag").OTHER||i)return;c.forEach(function(c){b("MercuryThreadActions").getForFBID(a).markSpam(c,g)});this._updateMercuryPayload(a,c,e,f,j!==!0);j&&c.forEach(function(c){c=b("MercuryIDs").getUserIDFromThreadID(c);c&&b("CreatorStudioInboxMessengerRankedUsersAction").deleteCreatorStudioInboxMessengerRankedUser(a,c)})},unmarkThreadAsSpam:function(a,c,d,e){c.forEach(function(c){b("MercuryThreadActions").getForFBID(a).unmarkSpam(c,g)}),this._updateMercuryPayload(a,c,d,e)},markThreadAsFollowUp:function(a,c,d,e,f,h){d=e?b("PageCommItemStatus").FOLLOW_UP:b("PageCommItemStatus").TODO;var i=!0;b("PagesManagerInboxFilterStore").getActiveFolder()===b("PageCommItemFolder").TODO&&(i=!1);e?b("MercuryThreadActions").getForFBID(a).markPageFollowUp(c,g):b("MercuryThreadActions").getForFBID(a).unmarkPageFollowUp(c,g);this._updateMercuryPayload(a,[c],d,f,h?!1:i)},changeThreadFolderToInbox:function(a,c,d,e,f){switch(e.toUpperCase()){case b("PageCommItemStatus").TODO:case b("PageCommItemStatus").DONE:f?b("MercuryThreadActions").getForFBID(a).changeFolder(c,b("MessagingTag").INBOX):b("MercuryThreadActions").getForFBID(a).unarchive(c,g);this._updateMercuryPayload(a,[c],b("PageCommItemStatus").TODO,e);break;case b("PageCommItemStatus").FOLLOW_UP:this.markThreadAsFollowUp(a,c,d,!1,b("PageCommItemStatus").FOLLOW_UP);break;case b("PageCommItemStatus").SPAM:this.unmarkThreadAsSpam(a,[c],b("PageCommItemStatus").TODO,b("PageCommItemStatus").SPAM);default:return}},changeThreadFolderToDone:function(a,c,d,e){b("MercuryThreadActions").getForFBID(a).archive(c,g);this._updateMercuryPayload(a,[c],b("PageCommItemStatus").DONE,d,e!==!0);if(e){d=b("MercuryIDs").getUserIDFromThreadID(c);d&&b("CreatorStudioInboxMessengerRankedUsersAction").deleteCreatorStudioInboxMessengerRankedUser(a,d)}},changeThreadFolderToBackground:function(a,c,d){b("MercuryThreadActions").getForFBID(a).changeFolder(c,b("MessagingTag").PAGE_BACKGROUND),this._updateMercuryPayload(a,[c],b("PageCommItemStatus").DONE,d)},markThreadAsDeleted:function(a,c,d,e){d!=null&&(a=d);b("MercuryThreadActions").getForFBID(a)["delete"](c,g);d=b("MercuryIDs").getUserIDFromThreadID(c);d&&e&&b("CreatorStudioInboxMessengerRankedUsersAction").deleteCreatorStudioInboxMessengerRankedUser(a,d)},_updateMercuryPayload:function(a,c,d,e,f){f===void 0&&(f=!0),b("MercuryThreadActions").getForFBID(a).updateCommStatus(c,d),b("PagesManagerInboxListAction").itemFolderChange(c,d,e),f&&b("PagesManagerAction").viewListItem(null)},hideElement:function(a){new(b("Animation"))(a).to("opacity",0).duration(150).hide().go()},notifyUpdateCompleted:function(){b("Arbiter").inform("PagesManagerLayout/refreshSection",{section:"messages"})},updateUnreadCount:function(a){b("Arbiter").inform("pagesManagerMessaging/messageUnreadCountUpdated",{metricCount:a}),b("Arbiter").inform("PagesManagerLayout/updateCount",{count:a,section:"messages"}),b("Arbiter").inform("PagesManagerLayout/updateCount",{count:a,section:"messages",subsection:"inbox"})},updatePreferences:function(a){a=b("XMessagingSetPreferencesController").getURIBuilder().setBool("send_on_enter",a.sendOnEnter).getURI();new(b("AsyncRequest"))(a).send()}};e.exports=a}),null);
__d("PagesManagerResizeListener",["EventEmitter"],(function(a,b,c,d,e,f){e.exports=new(b("EventEmitter"))()}),null);
__d("PagesManagerContentSearchContainer.react",["cx","fbt","FluxContainer","PagesManagerAction","PagesManagerInboxFilterAction","PagesManagerMessagingMessagelistAction","PagesManagerMessagingMessagelistStore","React","XUIButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=40;function k(a){return i.jsx("div",{className:"_6o3q",children:a.totalCount===0?h._("No matched messages for \"{query_name}\"",[h._param("query_name",l(a.query,j))]):h._("{selected_index} of {total_count} matched messages for \"{query_name}\"",[h._param("selected_index",a.contentSearchSelectedIndex+1),h._param("total_count",a.totalCount),h._param("query_name",l(a.query,j))])})}function l(a,b){return a.length>b?a.slice(0,b)+"...":a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("PagesManagerMessagingMessagelistAction").contentSearchSelectedIndex(d.state.contentSearchSelectedIndex-1)},d.$2=function(){b("PagesManagerMessagingMessagelistAction").contentSearchSelectedIndex(d.state.contentSearchSelectedIndex+1)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("PagesManagerMessagingMessagelistStore")]};c.calculateState=function(a){return{contentSearchSelectedIndex:b("PagesManagerMessagingMessagelistStore").getContentSearchSelectedIndex()}};var d=c.prototype;d.$3=function(){b("PagesManagerInboxFilterAction").toggleSearch(!1),b("PagesManagerInboxFilterAction").clearSearch(),b("PagesManagerAction").clearViewListItem()};d.render=function(){var a=h._("Previous Result"),c=h._("Next Result"),d=h._("Clear Search");return i.jsxs("div",{className:"_6o3r",children:[i.jsx(b("XUIButton.react"),{"aria-label":a,className:"_6o3s",disabled:this.state.contentSearchSelectedIndex>=this.props.totalCount-1,label:"",onClick:this.$2,role:"button",tabIndex:0,title:a,type:"primary"}),i.jsx(b("XUIButton.react"),{"aria-label":c,className:"_6o3t",disabled:this.state.contentSearchSelectedIndex===0,label:"",onClick:this.$1,role:"button",tabIndex:0,title:c,type:"primary"}),this.props.query?i.jsx(k,{contentSearchSelectedIndex:this.state.contentSearchSelectedIndex,query:this.props.query,totalCount:this.props.totalCount}):null,i.jsx(b("XUIButton.react"),{"aria-label":d,className:"_6o3u",label:"",onClick:this.$3,role:"button",tabIndex:0,title:d,type:"primary"})]})};return c}(i.PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("PagesManagerInboxFacebookPostStore",["invariant","ActorURI","AsyncRequest","FluxStore","LoadObject","MediaManagerUtils","PagesManagerDispatcher","PagesManagerInboxActionType","XPagesManagerInboxFacebookPostController"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("PagesManagerDispatcher"))||this;c.$PagesManagerInboxFacebookPostStore1=new Map();return c}var d=c.prototype;d.__onDispatch=function(a){switch(a.type){case b("PagesManagerInboxActionType").FACEBOOK_POST.LOADED:this.$PagesManagerInboxFacebookPostStore1.set(a.data.itemID,b("LoadObject").withValue(a.data));this.__emitChange();break}};d.get=function(a,c,d,e){this.$PagesManagerInboxFacebookPostStore1.has(a)||(this.$PagesManagerInboxFacebookPostStore1.set(a,b("LoadObject").loading()),this.$PagesManagerInboxFacebookPostStore2(a,c,d));c=this.$PagesManagerInboxFacebookPostStore1.get(a);c||g(0,693);e&&this.$PagesManagerInboxFacebookPostStore1["delete"](a);return c};d.$PagesManagerInboxFacebookPostStore2=function(a,c,d){var e=b("XPagesManagerInboxFacebookPostController").getURIBuilder().getURI();new(b("AsyncRequest"))(e).setMethod("POST").setData((e={item_id:a,feedback_source:b("MediaManagerUtils").isMediaManagerApp()?71:63,focus_comment_id:b("MediaManagerUtils").isMediaManagerApp()?d:null},e[b("ActorURI").PARAMETER_ACTOR]=c,e)).send()};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesManagerInboxFacebookPostContainer.react",["FeedbackReactionTypeNames","FluxContainer","MediaManagerInboxFocusCommentStore","PagesManagerInboxAction","PagesManagerInboxDetailLoading.react","PagesManagerInboxDetailViewContainer.react","PagesManagerInboxFacebookPost.react","PagesManagerInboxFacebookPostComposer.react","PagesManagerInboxFacebookPostStore","PagesManagerInboxLogger","PagesMessagingPerfTypedLogger","React","RelayModern","UFIDispatcherBase","nullthrows","PagesManagerInboxFacebookPostContainer_commItem.graphql","PagesManagerInboxFacebookPostContainer_story.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h,i=b("React"),j="CENTRALUPDATES_SAVED_COMMENT",k="PageCommItemPart";a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesManagerInboxFacebookPostStore"),b("MediaManagerInboxFocusCommentStore")]};c.calculateState=function(a,c){a=c.commItem.id;var d=a?b("MediaManagerInboxFocusCommentStore").get(a):null,e=c.commItem.__typename===k||d!==null;return{post:b("PagesManagerInboxFacebookPostStore").get(b("nullthrows")(a),c.pageID,d,e)}};var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=b("UFIDispatcherBase").register(function(c){switch(c.type){case"add_comment_submit_new":c.replyCommentID||(a.$4(),b("PagesManagerInboxAction").comment());break;case j:b("PagesManagerInboxLogger").logSendComment("FACEBOOK",a.props.pageID,a.convertCommentIDtoCommentFBID(c.commentID),c.ftentidentifier);break;case"comment_change_reaction_success":b("PagesManagerInboxLogger").logCommentReaction("FACEBOOK",a.props.pageID,c.fbid,c.ftentidentifier,b("FeedbackReactionTypeNames")[c.reactionType]);break}});this.$3=!1};d.componentDidUpdate=function(a,b){a=b.post.getValue();b=a&&a.itemID;a=this.state.post.getValue();a=a&&a.itemID;if(b!==a){this.$4();return}!this.state.post.isLoadingOrEmpty()&&!this.$3&&(this.$5(),this.$3=!0)};d.componentWillUnmount=function(){this.$1&&b("UFIDispatcherBase").unregister(this.$1)};d.$5=function(){var a=this.props.loadStartTime;a=new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.props.pageID).setPerfTime(Date.now()-a);a.setEventName("page_post_render_complete_event").setPlatform("FACEBOOK").log()};d.convertCommentIDtoCommentFBID=function(a){var b=a.toString().indexOf("_")+1;return a.toString().substring(b)};d.$4=function(){var a=this.$2;a&&(a.scrollToBottom&&a.scrollToBottom())};d.$6=function(){var a=this.state.post.getValueEnforcing(),c=this.props.commItem.id;return i.jsx(b("PagesManagerInboxFacebookPost.react"),{commItemID:b("nullthrows")(c),post:a.element})};d.$7=function(){var a=this.state.post.getValue();return this.state.post.isLoading()||!a?i.jsx("div",{}):i.jsx(b("PagesManagerInboxFacebookPostComposer.react"),{composer:a.composer})};d.render=function(){var a=this,c=this.props.commItem.__typename===k;return this.state.post.isLoading()||this.state.post.isEmpty()?i.jsx(b("PagesManagerInboxDetailLoading.react"),{height:this.props.height}):i.jsx(b("PagesManagerInboxDetailViewContainer.react"),{componentRef:function(b){a.$2=b},composer:this.$7(),content:this.$6(),height:this.props.height,item:this.props.commItem,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID,shouldShowRevampCommentDesign:c})};return c}(i.PureComponent);e.exports=a(b("FluxContainer").create(c,{withProps:!0}),{commItem:g!==void 0?g:g=b("PagesManagerInboxFacebookPostContainer_commItem.graphql"),story:h!==void 0?h:h=b("PagesManagerInboxFacebookPostContainer_story.graphql")})}),null);
__d("AbstractPagesManagerListStore",["invariant","FluxStore","PagesManagerActionType","nullthrows"],(function(a,b,c,d,e,f,g){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.__hasMoreItem=new Map();b.__isLoading=!1;b.__areThreadsFetchedUpdated=!1;return b}var d=c.prototype;d.__onDispatch=function(a){switch(a.type){case b("PagesManagerActionType").LIST.FETCH:this.__handleListFetch(a);break;case b("PagesManagerActionType").LIST.FETCHED:case b("PagesManagerActionType").LIST.UPDATED:this.__areThreadsFetchedUpdated=!0;this.__emitChange();break;case b("PagesManagerActionType").LIST.LOADING:this.__isLoading=!0;this.__emitChange();break;case b("PagesManagerActionType").NAVIGATION_UNIT.CHANGE:case b("PagesManagerActionType").SEARCH.ADD_SEARCH_CUSTOM_TAG:case b("PagesManagerActionType").SEARCH.REMOVE_SEARCH_CUSTOM_TAG:this.__handleNavigationUnitChange(a);break;default:return}};d.__handleListFetch=function(a){g(0,2593)};d.__handleNavigationUnitChange=function(a){g(0,2594)};d.hasMoreItem=function(a){return this.__hasMoreItem.has(a)?b("nullthrows")(this.__hasMoreItem.get(a)):!1};d.getItemList=function(a,b){g(0,2595)};d.isLoading=function(){return this.__isLoading};d.areThreadsFetchedUpdated=function(){return this.__areThreadsFetchedUpdated};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=a}),null);
__d("PagesManagerInboxMessengerContainer.react",["cx","AsyncRequest","BootloadOnRender.react","ChatAppointmentUtil","ErrorBoundary.react","FluxContainer","ImmutableObject","Instant","JSResource","LazyComponent.react","MBNotifLoggingUtils","MercuryIDs","MercuryMessageStore","MercuryPageMessageActions","MercuryServerPayloadPreprocessor","MercuryWECMessageActions","MessengerConfig","MessengerHotLikePreviewEvents","MessengerMessageTransformer.bs","MessengerReadReceipt.bs","MessengerState.bs","PagesManagerContentSearchContainer.react","PagesManagerInboxAction","PagesManagerInboxFilterStore","PagesManagerInboxLogger","PagesManagerInboxMessengerDetailView.react","PagesManagerMessagingComposerContainer.react","PagesManagerMessagingMessageList.react","PagesManagerMessagingMessagelistAction","PagesManagerMessagingMessagelistStore","PagesManagerOmniMActions","PagesManagerOmniMStore","PagesManagerOmniMUtils","PagesMessagingPerfTypedLogger","QE2Logger","React","SubscriptionsHandler","XMessengerAdShouldShowEyebrowTextForBusinessStickerController","immutable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=5,j="services_thread_intent_improvement",k=4e3,l=0,m=0,n="inbox";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this,c)||this;e.$8=function(){e.state.isLoadingMore||e.getMessageStore().fetchMoreMessages()&&(b("PagesManagerMessagingMessagelistAction").setIsLoading(!1),b("PagesManagerMessagingMessagelistAction").setIsLoadingMore(!0))};e.$3=!1;e.$4=Date.now();e.$5=!1;b("PagesManagerOmniMActions").init(c.threadFBID,c.pageID);return e}c.getStores=function(){return[b("PagesManagerMessagingMessagelistStore"),b("PagesManagerOmniMStore")]};c.calculateState=function(a,c){a=[];var d=c.threadFBID,e=null,f=null,g=null,h=!1,i=null,j=null,k=null;d=b("MercuryIDs").getThreadIDFromUserID(d);a=b("PagesManagerMessagingMessagelistStore").getMessagelist(c.pageID,d);e=b("MessengerState.bs").getThreadMetaNow(c.pageID,d);f=b("PagesManagerOmniMStore").getQuickScheduleStartTime();g=b("PagesManagerOmniMStore").getSuggestions();k=b("PagesManagerOmniMStore").getMessageID();h=b("PagesManagerOmniMStore").getShowSuggestionBar()&&!!g&&Object.keys(g).length>0&&(!!f||Object.prototype.hasOwnProperty.call(g,"suggested_reply_location")||Object.prototype.hasOwnProperty.call(g,"suggested_reply_yes_no_short_answer_no")||Object.prototype.hasOwnProperty.call(g,"suggested_reply_yes_no_short_answer_yes")||Object.prototype.hasOwnProperty.call(g,"suggested_reply_user_faq")||Object.prototype.hasOwnProperty.call(g,"suggested_reply_user_faq_saved_reply")||Object.prototype.hasOwnProperty.call(g,"messenger_detected_conversion")||Object.prototype.hasOwnProperty.call(g,"suggested_reply_business_sticker"));i=b("PagesManagerOmniMStore").getConversionData();j=b("PagesManagerOmniMStore").getPartnerAppLogo();return{conversionData:i,isLoadingMore:b("PagesManagerMessagingMessagelistStore").isLoadingMore(),messagelist:a,scrollHeight:b("PagesManagerMessagingMessagelistStore").getScrollHeight(),showSuggestionBar:h,startTime:f,suggestions:g,thread:e,contentSearchSelectedIndex:b("PagesManagerMessagingMessagelistStore").getContentSearchSelectedIndex(),partnerAppLogo:j,messageID:k,senderID:b("PagesManagerOmniMStore").getSenderID(),shouldShowEyebrowTextForBusinessSticker:(c=b("PagesManagerOmniMStore").getShouldShowEyebrowTextForBusinessSticker())!=null?c:!1,suggestionSpacerHeight:(d=b("PagesManagerOmniMStore").getSuggestionSpacerHeight())!=null?d:0,upsellSpecificData:b("PagesManagerOmniMStore").getTriggerSavedRepliesUpsell()}};var d=c.prototype;d.componentDidMount=function(){var a=this.props.threadFBID;a&&this.$6(b("MercuryIDs").getThreadIDFromUserID(a));this.$4=Date.now();new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.props.pageID).setThreadID(a).setPlatform("MESSENGER").setEventName("messages_messagelist_load_start").setThreadOffset(0).log()};d.componentWillUnmount=function(){this.$2&&this.$2.destroy(),this.$1&&this.$1.release(),b("PagesManagerOmniMActions").dismissSuggestionBar(),this.$7("inbox")};d.UNSAFE_componentWillReceiveProps=function(a){a=a.threadFBID;var c=this.props.threadFBID;a&&a!==c&&(this.$6(b("MercuryIDs").getThreadIDFromUserID(a)),this.$7("thread"))};d.$7=function(a){if(this.$5)return;b("MBNotifLoggingUtils").logNavTargetExit(a,this.$4);this.$5=!0};d.getMessageStore=function(){return this.$2};d.$9=function(a){b("PagesManagerMessagingMessagelistAction").setScrollAreaHeight(a)};d.$10=function(a){if(this.props.activeCommPlatform!=="MESSENGER")return;var c=this.$11(a);if(!c){b("PagesManagerOmniMActions").dismissSuggestionBar();return}var d=c.conversionData,e=c.startTime,f=c.suggestions,g=c.partnerAppLogo,h=c.messageID;c=c.senderID;if(f&&Object.keys(f).length>0){if(this.$12(a)){a=b("XMessengerAdShouldShowEyebrowTextForBusinessStickerController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setHandler(function(a){b("PagesManagerOmniMActions").setShouldShowBusinessStickerEyebrowText(a.payload.shouldShowEyebrowTextForBusinessSticker)}).send()}else b("PagesManagerOmniMActions").setShouldShowBusinessStickerEyebrowText(!1);b("PagesManagerOmniMActions").setQuickScheduleStartTime(e);b("PagesManagerOmniMActions").setMessengerConversionData(d);b("PagesManagerOmniMActions").showSuggestionBar(f,g,h,c)}else b("PagesManagerOmniMActions").dismissSuggestionBar()};d.$6=function(a){var c=this;this.$2&&this.$2.destroy();this.$1&&this.$1.release();this.$2=new(b("MercuryMessageStore"))(a,b("MessengerConfig").MessageLoadCount,this.props.pageID);var d=b("PagesManagerMessagingMessagelistStore").getMessagelist(this.props.pageID,a);d.length===0&&(b("PagesManagerMessagingMessagelistAction").setIsLoadingMore(!1),b("PagesManagerMessagingMessagelistAction").setIsLoading(!0));this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(this.$2.subscribe(function(d){c.$3||(c.$3=!0,new(b("PagesMessagingPerfTypedLogger"))().setPageID(c.props.pageID).setThreadID(a).setPlatform("MESSENGER").setEventName("messages_messagelist_load_end").setPerfTime(Date.now()-c.$4).log()),b("PagesManagerMessagingMessagelistAction").setIsLoading(!1),b("PagesManagerMessagingMessagelistAction").setIsLoadingMore(!1),b("PagesManagerMessagingMessagelistAction").updateMessagelist(c.props.pageID,a,d),b("PagesManagerInboxLogger").itemRendered(c.props.threadFBID),c.$10(d)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(c,d){a===d&&b("PagesManagerMessagingMessagelistAction").setHotLikeStart(c)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,function(c){a===c&&b("PagesManagerMessagingMessagelistAction").setHotLikeEnd()}))};d.$13=function(a,c,d){d=b("MessengerReadReceipt.bs").getSeenTimestamps(d,a);var e=new Set(d.keys());return d.withMutations(function(a){b("immutable").Seq(c).reverse().forEach(function(b){if(e.size===0)return!1;if(!e.has(b.author))return!0;a.update(b.author,function(a){return!a||a.watermark<=b.timestamp?{watermark:b.timestamp,action:b.timestamp}:a});e["delete"](b.author);return!0})})};d.$12=function(a){a=a.messages;if(!a||a.length===0)return!1;a=a[a.length-1].meta_ranges;if(!a||a.length===0)return!1;a=b("ChatAppointmentUtil").parseJSON(a[0].data.m_suggestion_data);return a&&Object.prototype.hasOwnProperty.call(a,"suggested_reply_business_sticker")};d.$11=function(a){a=a.messages;if(!a||a.length===0)return null;var c=this.state.messagelist.length===0;for(var d=a.length-1;d>=0;d--){var e=a[d];if(d>=a.length-1||c&&d>=a.length-i||e.is_unread){var f=e.meta_ranges;if(!f||f.length===0)continue;f=f[0].data;var g=b("ChatAppointmentUtil").parseJSON(f.m_suggestion_data);if(!g)continue;var h=f.partner_app_logo_url;g=b("PagesManagerOmniMUtils").filterValidOmniMSuggestions(g);if(Object.keys(g).length===0)continue;var k=f.start_time;!Object.prototype.hasOwnProperty.call(g,"suggested_reply_location")&&!Object.prototype.hasOwnProperty.call(g,"suggested_reply_yes_no_short_answer_yes")&&!Object.prototype.hasOwnProperty.call(g,"suggested_reply_yes_no_short_answer_no")&&!Object.prototype.hasOwnProperty.call(g,"suggested_reply_user_faq")&&!Object.prototype.hasOwnProperty.call(g,"suggested_reply_user_faq_saved_reply")&&!Object.prototype.hasOwnProperty.call(g,"messenger_detected_conversion")&&!Object.prototype.hasOwnProperty.call(g,"suggested_reply_business_sticker")&&(!k||k<=b("Instant").now()&&!h?g=b("PagesManagerOmniMUtils").getFallbackSuggestions():(b("QE2Logger").logExposureForPage(j,this.props.pageID),g=b("PagesManagerOmniMUtils").replaceCreateAppointmentDirectText(g,k)));f=b("ChatAppointmentUtil").parseJSON(f.conversion_data);if(Object.prototype.hasOwnProperty.call(g,"messenger_detected_conversion")&&!f)continue;var l=e.message_id;e=b("MercuryIDs").getUserIDFromParticipantID(e.author);return{conversionData:f,startTime:k,suggestions:g,partnerAppLogo:h,messageID:l,senderID:e}}else break}return null};d.$14=function(){if(b("PagesManagerInboxFilterStore").getSearchType()==="CONTENT"){var a;a=b("nullthrows")((a=this.props.inThreadSearchResults)!=null?(a=a.messenger_messages_search)!=null?(a=a.results)!=null?a.edges:a:a:a).length;var c=b("PagesManagerInboxFilterStore").getSearchTerm();return h.jsx(b("PagesManagerContentSearchContainer.react"),{query:c,totalCount:a})}return null};d.render=function(){var a=this.props.threadFBID;a=a!==null?b("MercuryIDs").getThreadIDFromUserID(b("nullthrows")(a)):null;var c=this.state.thread;c=c!==void 0&&c!==null?c.unread_count===0:!1;return h.jsx(b("PagesManagerInboxMessengerDetailView.react"),{className:"_9h3",composer:this.$15(),content:this.$16(),height:this.props.height,isRead:c,mediaManagerInboxRowIndex:this.props.mediaManagerInboxRowIndex,onScrollHeightChange:this.$9,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID,searchView:this.$14(),selectedFolder:this.props.selectedFolder,threadID:b("nullthrows")(a),useCustomScrollableArea:!0})};d.$16=function(){var a=this,c=this.props.threadFBID,d=c?b("MercuryIDs").getThreadIDFromUserID(c):null,e=this.state.messagelist;if(d===null)return null;else{var f=null,g=null;if(this.state.showSuggestionBar){var i=!!this.state.suggestions&&b("PagesManagerOmniMUtils").isMessengerQuickBannerType(this.state.suggestions);if(i&&((i=this.state.conversionData)==null?void 0:i.is_eligible)!==!0)f=h.jsx("div",{});else{i=!!this.state.suggestions&&Object.prototype.hasOwnProperty.call(this.state.suggestions,"suggested_reply_business_sticker");f=h.jsx("div",{style:{marginTop:this.state.suggestionSpacerHeight+"px"},children:h.jsx("div",{className:(i&&!this.state.shouldShowEyebrowTextForBusinessSticker?"_8gxk":"")+(i&&this.state.shouldShowEyebrowTextForBusinessSticker?" _8gxm":"")+(i?"":" _1i7g")})})}g=h.jsx(b("BootloadOnRender.react"),{component:h.jsx(b("LazyComponent.react"),{conversionData:this.state.conversionData,messageID:this.state.messageID,pageID:this.props.pageID,partnerAppLogo:this.state.partnerAppLogo,recipientID:c,senderID:this.state.senderID,shouldShowEyebrowTextForBusinessSticker:this.state.shouldShowEyebrowTextForBusinessSticker,startTime:this.state.startTime,suggestions:this.state.suggestions,threadID:d}),loader:b("JSResource")("PagesManagerMessagingMSuggestionView.react").__setRef("PagesManagerInboxMessengerContainer.react"),placeholder:h.jsx("div",{})})}this.props.activeCommPlatform==="WEC"&&(e=this.state.messagelist.map(function(c){var d,e="fbid:"+a.props.pageID;if(((d=c.attachments[0])==null?void 0:(d=d.share)==null?void 0:d.style_list[0])==="wec_message"&&e!==c.author&&c.attachments!=null&&c.attachments.length>0&&c.attachments[0].share!=null&&((d=c.attachments[0])==null?void 0:d.share.target)!=null){e=c.attachments[0].share.target.sender_wec_number;d=(d=c.attachments[0])==null?void 0:(d=d.share)==null?void 0:(d=d.target)==null?void 0:d.sender_wec_number_fbid;return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{author:d!=null?d:"fbid:"+e}))}return c}));if(b("PagesManagerInboxFilterStore").getSearchType()==="CONTENT"){var j,k=this.state.contentSearchSelectedIndex;i=b("nullthrows")((i=this.props.messageContextResults)!=null?(i=i.messenger_message_context)!=null?(i=i.messages)!=null?i.nodes:i:i:i);var o=b("nullthrows")((j=this.props.inThreadSearchResults)!=null?(j=j.messenger_messages_search)!=null?(j=j.results)!=null?(j=j.edges)!=null?(j=j[k])!=null?(j=j.node)!=null?j.message_id:j:j:j:j:j:j);j=i.map(function(a){return b("nullthrows")((a=a)!=null?a.message_id:a)});var p={folder:n,other_user_fbid:c,thread_fbid:d,thread_id:d};c=i.map(function(c){return b("MessengerMessageTransformer.bs").transformMessage(d,c,p,a.props.pageID)});b("MercuryServerPayloadPreprocessor").getForFBID(this.props.pageID).handleUpdate({actions:c,payload_source:"server_search"});e=b("MessengerState.bs").getMessagesFromIDs(this.props.pageID,j.reverse()).map(function(c){if(c&&c.message_id===o){var d,e=b("nullthrows")((d=a.props.inThreadSearchResults)!=null?(d=d.messenger_messages_search)!=null?(d=d.results)!=null?(d=d.edges)!=null?(d=d[k])!=null?(d=d.content_search_result_context)!=null?d.match_ranges:d:d:d:d:d:d);if(e.length!==m){d=Object.keys(e[l]).map(function(a){return{offset:e[l].offset,length:e[l].length,entity:{url:""},className:"__in"}});return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{ranges:c.ranges?c.ranges.concat(d):d}))}}return c})}return e.length===0?null:h.jsx(b("MessengerState.bs").jsComponent,{fbid:this.props.pageID,children:function(c){return h.jsx(b("ErrorBoundary.react"),{onHandleError:b("PagesManagerInboxLogger").logErrorJS,children:h.jsx(b("PagesManagerMessagingMessageList.react"),{commPlatform:a.props.activeCommPlatform,deliveryReceipts:b("MessengerState.bs").deliveryReceipts(c),fetchEarlierMessages:a.$8,footerChildren:g,footerChildrenSpacer:f,initLoading:!1,isLoadingMore:a.state.isLoadingMore,isPreventScroll:!1,messagelist:b("immutable").List(e),pageID:a.props.pageID,readReceipts:a.$13(d,a.state.messagelist,b("MessengerState.bs").readReceiptsPerThread(c)),scrollHeight:a.state.scrollHeight,threadID:d})})}})}};d.$15=function(){var a,c=this.props.threadFBID;c=c?b("MercuryIDs").getThreadIDFromUserID(c):null;var d=this.props.config.platformConfigs[this.props.activeCommPlatform];a=(a=(a=this.props.config.platformConfigs.MESSENGER)==null?void 0:a.shouldShowNewSavedReplyInIG)!=null?a:!1;var e=null;switch(this.props.activeCommPlatform){case"WEC":e=b("MercuryWECMessageActions").getForFBID(this.props.pageID);break;default:e=b("MercuryPageMessageActions").getForFBID(this.props.pageID)}if(e!=null){var f;return h.jsx(b("PagesManagerMessagingComposerContainer.react"),{accessToken:this.props.config.pageAccessToken,canAttachFiles:d.canAttachFiles,canCreateAppointment:d.ShouldShowPMAAdminComposer,canSendAvailability:d.ShouldShowLDPPMAAdminComposer,canUseHotLike:d.canUseHotLike,canUseSavedReplies:d.canUseSavedReplies,canUseStickers:d.canUseStickers,commPlatform:this.props.activeCommPlatform,creatorInfo:this.props.config.creatorInfo,defaultCurrency:this.props.config.defaultCurrency,isEligibleForOrderDetailsInComposer:d.isEligibleForOrderDetailsInComposer,isInboxDetailView:!0,isSavedReplyNewUI:(f=d.shouldShowNewSavedReply)!=null?f:!1,maxLength:this.props.activeCommPlatform==="WEC"?k:null,mediaManagerInboxRowIndex:this.props.mediaManagerInboxRowIndex,messageActions:e,onSendMessage:b("PagesManagerInboxAction").comment,persona:this.props.activeCommPlatform==="MESSENGER"?this.props.config.messengerAdminPersona:null,recipientID:this.props.threadFBID,selectedFolder:this.props.selectedFolder,shouldShowBonusTracker:this.props.config.shouldShowBonusTracker,shouldShowCommerceInvoiceButton:d.shouldShowCommerceInvoiceButton,shouldShowCommerceInvoiceButtonPUX:d.shouldShowCommerceInvoiceButtonPUX,shouldShowCommerceInvoiceSimplifiedFlow:d.shouldShowCommerceInvoiceSimplifiedFlow,shouldShowConfirmPayment:d.shouldShowConfirmPayment,shouldShowInvoiceShippingNUX:d.shouldShowInvoiceShippingNUX,shouldShowOrderDetailsInComposer:d.shouldShowOrderDetailsInComposer,shouldShowPaymentOnboarding:d.shouldShowPaymentOnboarding,shouldShowProductPickerInComposer:!!d.shouldShowProductPickerInComposer,shouldShowRequestPayment:d.shouldShowRequestPayment,shouldShowSavedReplyInIG:a,shouldUseKbankOnboarding:d.shouldUseKbankOnboarding,shouldUseSmartComposeTextInput:!!d.shouldUseSmartComposeTextInput,thread:this.state.thread,threadElementID:c,threadID:c,upsellSpecificData:this.state.upsellSpecificData,userID:this.props.pageID})}};return c}(h.Component);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesManagerInboxMessageBasicContainer.react",["FluxContainer","JSResource","PagesManagerInboxFilterStore","PagesManagerInboxListStore","PagesManagerInboxMessengerContainer.react","PagesManagerInboxStore","React","RelayModern","lazyLoadComponent","PagesManagerInboxMessageBasicContainer_messageThread.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var i=b("lazyLoadComponent")(b("JSResource")("PageManagerInboxInThreadContentSearchRelayResults.react").__setRef("PagesManagerInboxMessageBasicContainer.react"));c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesManagerInboxStore"),b("PagesManagerInboxFilterStore"),b("PagesManagerInboxListStore")]};c.calculateState=function(){return{config:b("PagesManagerInboxStore").getConfig(),activeType:b("PagesManagerInboxFilterStore").getActiveType(),mediaManagerInboxRowIndex:b("PagesManagerInboxListStore").getMediaManagerInboxListRowIndex(),selectedFolder:b("PagesManagerInboxFilterStore").getActiveFolder()}};var d=c.prototype;d.render=function(){var a=b("PagesManagerInboxStore").getMailboxID(this.state.activeType);return b("PagesManagerInboxFilterStore").getSearchType()==="CONTENT"?h.jsx(h.Suspense,{fallback:null,children:h.jsx(i,{activeCommPlatform:this.state.activeType,commSourceID:this.props.commSourceID,config:this.state.config,height:this.props.height,paddingBottom:this.props.paddingBottom,pageID:a,searchTerm:b("PagesManagerInboxFilterStore").getSearchTerm()})}):h.jsx(b("PagesManagerInboxMessengerContainer.react"),{activeCommPlatform:this.state.activeType,config:this.state.config,height:this.props.height,mediaManagerInboxRowIndex:this.state.mediaManagerInboxRowIndex,paddingBottom:this.props.paddingBottom,pageID:a,selectedFolder:this.state.selectedFolder,threadFBID:this.props.commSourceID})};return c}(h.Component);e.exports=a(b("FluxContainer").create(c),{messageThread:g!==void 0?g:g=b("PagesManagerInboxMessageBasicContainer_messageThread.graphql")})}),null);
__d("PagesManagerInboxNewMessageBasicContainer.react",["FluxContainer","PageManagerInboxInThreadContentSearchRelayResults.react","PagesManagerInboxFilterStore","PagesManagerInboxListStore","PagesManagerInboxMessengerContainer.react","PagesManagerInboxStore","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesManagerInboxStore"),b("PagesManagerInboxFilterStore"),b("PagesManagerInboxListStore")]};c.calculateState=function(){return{config:b("PagesManagerInboxStore").getConfig(),activeType:b("PagesManagerInboxFilterStore").getActiveType(),selectedFolder:b("PagesManagerInboxFilterStore").getActiveFolder(),mediaManagerInboxRowIndex:b("PagesManagerInboxListStore").getMediaManagerInboxListRowIndex()}};var d=c.prototype;d.render=function(){return b("PagesManagerInboxFilterStore").getSearchType()==="CONTENT"?g.jsx(b("PageManagerInboxInThreadContentSearchRelayResults.react"),{activeCommPlatform:this.state.activeType,commSourceID:this.props.commSourceID,config:this.state.config,height:this.props.height,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID,searchTerm:b("PagesManagerInboxFilterStore").getSearchTerm()}):g.jsx(b("PagesManagerInboxMessengerContainer.react"),{activeCommPlatform:this.state.activeType,config:this.state.config,height:this.props.height,mediaManagerInboxRowIndex:this.state.mediaManagerInboxRowIndex,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID,selectedFolder:this.state.selectedFolder,threadFBID:this.props.commSourceID})};return c}(g.PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("PagesManagerInboxDetailContainer.react",["BusinessCRMConfigStore","BusinessInboxBizKitUtil","CreatorStudioInboxMessengerRankedUsersStore","FluxContainer","JSResource","MediaManagerFBCommsDetailViewContainer.react","MediaManagerInboxPriorityTabStore","MediaManagerUtils","PageCommItemFolder","PagesManagerInboxCommItemBasicInfoRoot.react","PagesManagerInboxDetailLoading.react","PagesManagerInboxFilterStore","PagesManagerInboxListStore","PagesManagerInboxMessengerRoot.react","PagesManagerInboxNewMessengerRoot.react","PagesManagerInboxStore","PagesManagerStore","React","ServicesClientsTabMainView.react","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";b("BusinessInboxBizKitUtil").isBizKitBeta;var g=b("BusinessInboxBizKitUtil").bizKitDetailHeight,h=b("MediaManagerUtils").isMediaManagerApp,i=b("React"),j=(a=b("lazyLoadComponent"))((c=b("JSResource"))("UnifiedInboxIGMessageDetailRootContainer.react").__setRef("PagesManagerInboxDetailContainer.react")),k=a(c("BizEmailMarketingViewContainer.react").__setRef("PagesManagerInboxDetailContainer.react")),l=a(c("PagesMarketingAutomationContentView.react").__setRef("PagesManagerInboxDetailContainer.react")),m=a(c("PagesManagerInboxLeadEmailContainer.react").__setRef("PagesManagerInboxDetailContainer.react"));d=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesManagerStore"),b("PagesManagerInboxFilterStore"),b("PagesManagerInboxListStore"),b("PagesManagerInboxStore"),b("MediaManagerInboxPriorityTabStore"),b("CreatorStudioInboxMessengerRankedUsersStore")]};c.calculateState=function(a){var c=b("PagesManagerInboxFilterStore").getActiveType(),d=b("PagesManagerStore").getLayoutHeight()-b("PagesManagerStore").getHeaderHeight(),e=!1,f=b("PagesManagerInboxStore").getBusinessInboxAppConfig();if(f!=null){e=Boolean((f=f.messengerConfig)==null?void 0:f.shouldUseMessengerStateForMessageList)}else e=b("PagesManagerInboxStore").getConfig().platformConfigs.MESSENGER.shouldUseMessengerStateForMessageList;f=b("PagesManagerInboxListStore").isLoading();a=(a==null?void 0:a.commItemFolder)===b("PageCommItemFolder").PRIORITY&&b("MediaManagerUtils").isMediaManagerApp();a&&(f=b("CreatorStudioInboxMessengerRankedUsersStore").isLoading());return{commItemFolder:b("PagesManagerInboxFilterStore").getActiveFolder(),commPlatform:c,isListLoading:f,height:d<0?0:d,viewingListItem:b("PagesManagerStore").getViewingListItem(),heightWithoutHeader:b("PagesManagerStore").getLayoutHeight(),mediaManagerInboxRowIndex:b("PagesManagerInboxListStore").getMediaManagerInboxListRowIndex(),mediaManagerInboxPriorityTabRowType:b("MediaManagerInboxPriorityTabStore").getOnViewingPriorityRowType(),navMode:b("PagesManagerInboxStore").getCurrentNavMode(),shouldUseMessengerStateForMessageList:e}};var d=c.prototype;d.render=function(){var a,c=b("PagesManagerInboxStore").getMailboxID(this.state.commPlatform);switch(this.state.navMode){case"automated_responses":return i.jsx(i.Suspense,{fallback:i.jsx(b("PagesManagerInboxDetailLoading.react"),{height:this.state.height}),children:i.jsx(l,{height:this.state.height,pageID:c,pageName:this.props.pageName!==void 0?this.props.pageName:"",pageProfileUrl:this.props.pageProfilePicURI})});case"email_campaign":return i.jsx(i.Suspense,{fallback:i.jsx(b("PagesManagerInboxDetailLoading.react"),{backgroundColor:"white",height:this.state.heightWithoutHeader}),children:i.jsx(k,{height:this.state.heightWithoutHeader,pageID:c})});case"contacts":a=(a=b("PagesManagerInboxStore").getBusinessInboxAppConfig())==null?void 0:a.crmConfig;return i.jsx(i.Suspense,{fallback:i.jsx(b("PagesManagerInboxDetailLoading.react"),{height:this.state.heightWithoutHeader}),children:i.jsx(b("BusinessCRMConfigStore").Container,{initialState:{config:a},children:i.jsx(b("ServicesClientsTabMainView.react"),{height:this.state.heightWithoutHeader,pageID:c})})});case"lead_email":return i.jsx(i.Suspense,{fallback:i.jsx(b("PagesManagerInboxDetailLoading.react"),{backgroundColor:"white",height:this.state.heightWithoutHeader}),children:i.jsx(m,{height:this.state.height,pageID:c,threadID:this.state.viewingListItem})});default:if(this.state.commPlatform==="INSTAGRAM_DIRECT")return i.jsx(i.Suspense,{fallback:i.jsx(b("PagesManagerInboxDetailLoading.react"),{height:this.state.height}),children:i.jsx(j,{height:g(this.state.height),mailboxID:c,paddingBottom:this.props.paddingBottom,viewingItemToken:this.state.viewingListItem})});else if(this.state.commPlatform==="MESSENGER"||this.state.mediaManagerInboxPriorityTabRowType==="TOP_MESSAGES")return this.state.shouldUseMessengerStateForMessageList?i.jsx(b("PagesManagerInboxNewMessengerRoot.react"),{commItemFolder:this.state.commItemFolder,height:this.state.height,isListLoading:this.state.isListLoading,listItemKey:this.state.viewingListItem,mailboxID:c,paddingBottom:this.props.paddingBottom}):i.jsx(b("PagesManagerInboxMessengerRoot.react"),{commItemFolder:this.state.commItemFolder,height:this.state.height,isListLoading:this.state.isListLoading,listItemKey:this.state.viewingListItem,mailboxID:c,paddingBottom:this.props.paddingBottom});else if((this.state.commPlatform==="MEDIA_MANAGER_FB_COMMS"||this.state.mediaManagerInboxPriorityTabRowType==="TOP_FB_COMMS")&&h())return i.jsx(i.Suspense,{fallback:i.jsx(b("PagesManagerInboxDetailLoading.react"),{height:this.state.height}),children:i.jsx(b("MediaManagerFBCommsDetailViewContainer.react"),{height:this.state.height,mediaManagerInboxRowIndex:this.state.mediaManagerInboxRowIndex,viewingItem:this.state.viewingListItem})});return i.jsx(b("PagesManagerInboxCommItemBasicInfoRoot.react"),{commItemFolder:this.state.commItemFolder,commPlatform:this.state.commPlatform,height:this.state.height,isListLoading:this.state.isListLoading,listItemKey:this.state.viewingListItem,mailboxID:c,mediaManagerInboxRowIndex:this.state.mediaManagerInboxRowIndex,paddingBottom:this.props.paddingBottom})}};return c}(i.PureComponent);e.exports=b("FluxContainer").create(d)}),null);
__d("MediaManagerInboxFBCommsHeader.react",["cx","ActionList.react","CenteredContainer.react","DateConsts","FlexLayout.react","Image.react","Layout.react","LayoutColumn.react","LayoutFillColumn.react","LineClamp.react","MercuryThreadTimestampReact.re","MercuryTimestamp","PagesManagerAction","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MercuryThreadTimestampReact.re").make,i=b("React"),j=57;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(this.props.item==null)return null;var a=this.props.item.node;b("PagesManagerAction").setHeaderHeight(j);var c=a.validationTime*b("DateConsts").MS_PER_SEC;return i.jsxs(b("Layout.react"),{className:"_iyn","data-testid":void 0,children:[i.jsx(b("LayoutColumn.react"),{children:i.jsx(b("CenteredContainer.react"),{className:"_iyp _84mg _5m0-",fullHeight:!0,horizontal:!1,vertical:!0,children:i.jsx(b("Image.react"),{src:"/images/fb_communications/glyph-app-facebook-circle-1x.png"})})}),i.jsx(b("LayoutFillColumn.react"),{children:i.jsxs(b("CenteredContainer.react"),{className:"_84mh",fullHeight:!0,horizontal:!1,vertical:!0,children:[i.jsx("div",{className:"_iyo",children:i.jsx(b("LineClamp.react"),{lines:1,children:a.title})}),i.jsx(b("FlexLayout.react"),{children:i.jsx(b("ActionList.react"),{children:i.jsx(h,{text:b("MercuryTimestamp").getRelativeTimestamp(c),time:c,title:(a=b("MercuryTimestamp").getAbsoluteTimestamp(c))!=null?a:void 0})})})]})})]})};return c}(i.PureComponent);e.exports=a}),null);
__d("MediaManagerInboxFBCommsHeaderContainer.react",["FluxContainer","MediaManagerFBCommsStore","MediaManagerInboxFBCommsHeader.react","PagesManagerInboxStore","React","immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesManagerInboxStore"),b("MediaManagerFBCommsStore")]};c.calculateState=function(){var a=b("PagesManagerInboxStore").getMailboxID("MEDIA_MANAGER_FB_COMMS");a=b("MediaManagerFBCommsStore").get(a);a=a.hasValue()?a.getValueEnforcing().messages:b("immutable").List();return{messages:a}};var d=c.prototype;d.render=function(){var a=this;if(this.state.messages==null||this.props.viewingItem==null)return null;var c=this.state.messages.find(function(b){return b.node.id===a.props.viewingItem});return g.jsx(b("MediaManagerInboxFBCommsHeader.react"),{item:c})};return c}(g.PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);