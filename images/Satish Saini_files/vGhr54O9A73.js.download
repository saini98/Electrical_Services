if (self.CavalryLogger) { CavalryLogger.start_js(["5ZTp+"]); }

__d("UFI2ToggleMarkdownComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("lazyLoadComponent")(b("JSResource")("UFI2ToggleMarkdownButton.react").__setRef("UFI2ToggleMarkdownComposerAction.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.formattingStyle,d=a.onComposerStateChange,e=a.onClick,f=h._("Format text with markdown");return i.jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(a){a=a.clicked;return{buttonClassName:"_1t9_ _1qtn",formattingStyle:c,iconActiveClassName:"_15tt",iconClassName:"_15t_",initiallyEnabled:a,label:f,onClick:e,onComposerStateChange:d}},label:f,placeholder:i.jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _1qtn",iconClassName:"_15t_",label:f}),resource:j})};return c}(i.PureComponent);e.exports=a}),null);
__d("createUFI2MarkdownComposerPlugin",["cx","Bootloader","React","UFI2NUXConfig","UFI2ToggleMarkdownComposerAction.react","XUISpinner.react","createUFI2ComposerPlugin","getPlainTextFromUFI2InputState","ifRequired","injectSubscriptionsHandler.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=!1;function a(a){return function(c){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(){var c,d;for(var f=arguments.length,g=new Array(f),j=0;j<f;j++)g[j]=arguments[j];return(c=d=e.call.apply(e,[this].concat(g))||this,d.$1=!1,d.state={NUXVisible:!1,sourceCodeToPreview:b("getPlainTextFromUFI2InputState")(d.props.inputProps.composerState.inputState),upgradedPlugin:b("ifRequired")("getUpgradedUFI2MarkdownComposerPlugin",function(b){return b(a)},function(){return null})},d.$2=function(a){i||(i=!0,d.setState({NUXVisible:!0})),d.props.inputProps.onFocus!=null&&d.props.inputProps.onFocus(a)},d.action=h.createRef(),d.$5=function(){d.setState({NUXVisible:!1})},c)||babelHelpers.assertThisInitialized(d)}var f=d.prototype;f.$3=function(){var c=this;if(this.state.upgradedPlugin||this.$1)return;this.$1=!0;this.props.subscriptionsHandler.addSubscriptions(b("Bootloader").loadModules(["getUpgradedUFI2MarkdownComposerPlugin"],function(b){c.setState({upgradedPlugin:b(a)})},"createUFI2MarkdownComposerPlugin"))};f.componentDidMount=function(){this.state.upgradedPlugin?this.state.upgradedPlugin.componentDidMount(this.props):this.$4()&&this.$3()};f.$4=function(){if(this.state.upgradedPlugin||this.$1)return!1;var a=this.props.inputProps.composerState;return a.formattingStyle==="MARKDOWN"};f.componentDidUpdate=function(a,b){this.state.upgradedPlugin?this.state.upgradedPlugin.componentDidUpdate(this.props,this.state,this.setState.bind(this)):this.$4()&&this.$3()};f.render=function(){var d=this;if(this.state.upgradedPlugin)return this.state.upgradedPlugin.render(this.props,this.state,this.setState.bind(this),a.topLevelFeedbackTargetID,c);var e=this.props.inputProps.composerState.formattingStyle,f=this.state.NUXVisible,g=h.jsx(c,babelHelpers["extends"]({},this.props,{actions:[].concat(this.props.actions,[h.jsx(b("UFI2ToggleMarkdownComposerAction.react"),{formattingStyle:e,onClick:this.$5,onComposerStateChange:this.props.inputProps.onComposerStateChange,ref:this.action},"markdownComposerAction")]),inputProps:babelHelpers["extends"]({},this.props.inputProps,{onFocus:this.$2})}));return h.jsxs("div",{className:"_21qf",children:[g,this.state.sourceCodeToPreview&&e==="MARKDOWN"?h.jsx("div",{className:"_21qj",children:h.jsx(b("XUISpinner.react"),{className:"_691k",size:"large"})}):null,f&&b("UFI2NUXConfig").UFI2MarkdownNUX?h.jsx(b("UFI2NUXConfig").UFI2MarkdownNUX,{contextRef:function(){return d.action.current},onClose:this.$5}):null]})};return d}(h.Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(d))}}e.exports=a}),null);
__d("UFI2SubmitComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("lazyLoadComponent")(b("JSResource")("UFI2SubmitButton.react").__setRef("UFI2SubmitComposerAction.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.onComposerStateChange,d=a.onClick,e=a.isActive;a=a.shortcutKeys;a=h._("Add your comment. You can also do this by pressing {keyboard keys} on your keyboard. To add an extra line to your comment, press Enter on your keyboard.",[h._param("keyboard keys",a)]);var f=e?"_79l6":"_79l7";return i.jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(a){a.clicked;return{buttonClassName:"_1t9_ _79l8",iconClassName:f,onClick:d,onComposerStateChange:c}},label:a,placeholder:i.jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _79l8",iconClassName:f,label:a}),resource:j})};return c}(i.PureComponent);e.exports=a}),null);
__d("createUFI2SubmitComposerPlugin",["cx","fbt","KeyBindingUtil","Keys","React","UFI2NUXConfig","UFI2SubmitComposerAction.react","UserAgent","createUFI2ComposerPlugin","getDefaultKeyBinding","isUFI2ComposerStateEmpty"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("Keys").RETURN,j=b("React"),k=6653,l=b("UserAgent").isPlatform("Mac OS X");function a(){return function(a){var c=function(d){babelHelpers.inheritsLoose(c,d);function c(){var a,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=c=d.call.apply(d,[this].concat(f))||this,c.$1=function(){c.props.inputProps.onCommit()},c.$2=function(a){if(c.props.inputProps.keyBindingFn){var d=c.props.inputProps.keyBindingFn(a);if(d!=null)return d}if(a.keyCode===i)if(b("KeyBindingUtil").hasCommandModifier(a))return"ufi-commit";else return b("getDefaultKeyBinding")(a);return null},c.$3=j.createRef(),a)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.render=function(){var c=this,d=!b("isUFI2ComposerStateEmpty")(this.props.inputProps.composerState),e=l?"Cmd+Enter":"Ctrl+Enter",f=j.jsx(a,babelHelpers["extends"]({},this.props,{actions:[].concat(this.props.actions,[j.jsx(b("UFI2SubmitComposerAction.react"),{isActive:d,onClick:this.$1,onComposerStateChange:this.props.inputProps.onComposerStateChange,ref:this.$3,shortcutKeys:e},"sumbitComposerAction")]),inputProps:babelHelpers["extends"]({},this.props.inputProps,{keyBindingFn:this.$2})}));return j.jsxs("div",{className:"_79l8",children:[f,d&&b("UFI2NUXConfig").UFI2SubmitNUX?j.jsxs(b("UFI2NUXConfig").UFI2SubmitNUX,{contextRef:function(){return c.$3.current},nuxID:k,shouldShow:d,children:[h._("To add your comment, you now need to click Send or press {keyboard keys} on your keyboard.",[h._param("keyboard keys",e)]),j.jsx("br",{}),h._("To add an extra line to your comment, press Enter on your keyboard.")]}):null]})};return c}(j.Component);return b("createUFI2ComposerPlugin")(c)}}e.exports=a}),null);
__d("UFI2UnifiedInputComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("lazyLoadComponent")(b("JSResource")("UFI2UnifiedInputButton.react").__setRef("UFI2UnifiedInputComposerAction.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=h._("Post stickers, emojis and GIFs");return i.jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(b){b=b.clicked;return{buttonClassName:"_1t9_ _1ta3",config:a.props.config,iconActiveClassName:"UFICommentEmojiIconActive",iconClassName:"InsertEmoji",initiallyVisible:b,label:c,onComposerStateChange:a.props.onComposerStateChange}},label:c,placeholder:i.jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _1ta3",iconClassName:"InsertEmoji",label:c}),resource:j})};return c}(i.PureComponent);e.exports=a}),null);
__d("createUFI2UnifiedInputComposerPlugin",["React","UFI2UnifiedInputComposerAction.react","createUFI2ComposerPlugin","createUFI2EmojiComposerActionComponentPlugin","createUFI2GIFComposerActionComposerPlugin","createUFI2StickersComposerActionComposerPlugin"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=function(c){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(){return e.apply(this,arguments)||this}var f=d.prototype;f.render=function(){return g.jsx(c,babelHelpers["extends"]({},this.props,{actions:[].concat(this.props.actions,[g.jsx(b("UFI2UnifiedInputComposerAction.react"),{config:a,onComposerStateChange:this.props.inputProps.onComposerStateChange},"unifiedInputComposerAction")])}))};return d}(g.Component);return b("createUFI2ComposerPlugin")(d)};return[c,b("createUFI2EmojiComposerActionComponentPlugin")({size:16}),b("createUFI2GIFComposerActionComposerPlugin")(),b("createUFI2StickersComposerActionComposerPlugin")({environment:a.environment,targetID:a.targetID})]}e.exports=a}),null);
__d("UFI2StoryUnsaveMutation",["RelayModern","UFI2StoryUnsaveMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("RelayModern").graphql;a=g!==void 0?g:g=b("UFI2StoryUnsaveMutation.graphql");e.exports={storyUnsaveMutation:a}}),null);
__d("UFI2StorySaveMutation",["invariant","FBLogger","RelayModern","UFI2StoryUnsaveMutation","UFI2StorySaveMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("RelayModern").commitMutation;b("RelayModern").graphql;var j=b("UFI2StoryUnsaveMutation").storyUnsaveMutation,k=h!==void 0?h:h=b("UFI2StorySaveMutation.graphql");e.exports={commit:function(a,c){var d=c.action,e=c.actorId,f=c.mechanism,h=c.storyId,l=c.surface;c=c.tracking;e={updater:function(a){var c=a.get(h);if(c==null){b("FBLogger")("ufi2").warn("Could not find a story to update while performing %s mutation.",d);return}c=c.getLinkedRecord("save_info");if(c!=null){var e=d==="unsave"?"story_unsave":"story_save";a=a.getRootField(e);a||g(0,12651,e);e=a.getLinkedRecord("story");e||g(0,12652);a=e.getLinkedRecord("save_info");a||g(0,12650);e=a.getValue("viewer_save_state");c.setValue(e,"viewer_save_state")}},variables:{input:{actor_id:e,mechanism:f,story_id:h,surface:l,tracking:c}}};f={story:{id:h,save_info:{viewer_save_state:d==="unsave"?"NOT_SAVED":"SAVED"}}};if(d==="unsave")return i(a,babelHelpers["extends"]({},e,{mutation:j,optimisticResponse:{story_unsave:babelHelpers["extends"]({},f)}}));else return i(a,babelHelpers["extends"]({},e,{mutation:k,optimisticResponse:{story_save:babelHelpers["extends"]({},f)}}))}}}),null);
__d("UFI2SaveActionLink.react",["cx","fbt","FBLogger","React","RelayAPIConfig","UFI2AbstractButtonWrapper.react","UFI2ActionLink.react","UFI2CometRelayCreateFragmentContainer","UFI2StorySaveMutation","collectDataAttributes","getMutationTrackingPropertyFromTrackingData","joinClasses","UFI2SaveActionLink_feedback.graphql","UFI2SaveActionLink_story.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=b("React");c=b("UFI2CometRelayCreateFragmentContainer").createFragmentContainer;b("UFI2CometRelayCreateFragmentContainer").graphql;function l(a){return function(c,d){return a?b("collectDataAttributes")(a,c,d):null}}function a(a,c){var d=a.className,e=a.feedback,f=a.environment;c=a.story;var g=a.surface,i=c.id;if(i==null){b("FBLogger")("ufi2").warn("TODO");return null}var j=((a=c.save_info)==null?void 0:a.viewer_save_state)==="SAVED";return k.jsx(b("UFI2ActionLink.react"),{children:function(a){a=a.className;return k.jsx(b("UFI2AbstractButtonWrapper.react"),{className:b("joinClasses")("_78mp"+(j?" _78mq":""),a,d),href:"#",label:j?h._("Unsave"):h._("Save"),onClick:function(a){var c;b("UFI2StorySaveMutation").commit(f,{action:j?"unsave":"save",actorId:(c=(c=e.viewer_actor)==null?void 0:c.id)!=null?c:b("RelayAPIConfig").actorID,mechanism:"saved_ufi",storyId:i,surface:g,tracking:b("getMutationTrackingPropertyFromTrackingData")(l(a.target))})},role:"button",tabIndex:0,title:h._("Add this to your saved items")})}})}a.displayName="UFI2SaveActionLink";e.exports=c(a,{feedback:i!==void 0?i:i=b("UFI2SaveActionLink_feedback.graphql"),story:j!==void 0?j:j=b("UFI2SaveActionLink_story.graphql")})}),null);